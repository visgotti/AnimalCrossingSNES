!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.World=t():e.World=t()}(window,(function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MASSIVE=0]="MASSIVE",e[e.LARGE=1]="LARGE",e[e.MEDIUM=2]="MEDIUM",e[e.SMALL=3]="SMALL"}(t.MapSizes||(t.MapSizes={})),function(e){e[e.RECT=0]="RECT",e[e.POLYGON=1]="POLYGON",e[e.POINT=2]="POINT",e[e.CIRCLE=3]="CIRCLE",e[e.LINE=4]="LINE",e[e.ELIPSE=5]="ELIPSE"}(t.RuntimeColliderShape||(t.RuntimeColliderShape={})),function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE"}(t.MapSize||(t.MapSize={}))},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0);function r(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}function a(e){return s(this,void 0,void 0,(function*(){const t=window.URL||window.webkitURL;let i,s=!0;try{i=t.createObjectURL(e)}catch(t){s=!1;const n=r(e);i="data:image/png;base64,"+n}const n=new Image;return new Promise((e,r)=>{n.src=i,n.addEventListener("load",r=>(s&&t.revokeObjectURL(i),e(new PIXI.Texture(new PIXI.BaseTexture(n)))))})}))}function o(e){let t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,r=new Uint8Array(n);for(;n--;)r[n]=s.charCodeAt(n);return new Blob([r],{type:i})}t.httpGetAsync=function(e,t=!0){return s(this,void 0,void 0,(function*(){const i=new XMLHttpRequest;return t||(i.responseType="arraybuffer"),i.open("GET",e,!0),i.send(null),new Promise((e,s)=>{i.onreadystatechange=()=>{if(4==i.readyState){if(200==i.status)return e(t?JSON.parse(i.responseText):i.response);try{return s(t?JSON.parse(i.responseText):i.response)}catch(e){return console.error("Error parsing http error response",i),s(e)}}}})}))},t.resolveMapSize=function(e,t){return e<=1028&&t<=1028?n.MapSize.SMALL:n.MapSize.LARGE},t.bufferToBase64=r,t.getTextureFromBlob=a,t.getTextureFromDataUrl=function(e){return s(this,void 0,void 0,(function*(){window.URL||window.webkitURL;const t=new Image;return new Promise((i,s)=>{t.src=e,t.addEventListener("load",e=>i(new PIXI.Texture(new PIXI.BaseTexture(t))))})}))},t.dataUrlToTexture=function(e){return s(this,void 0,void 0,(function*(){return a(o(e))}))},t.dataURLtoBlob=o,t.rotateColliders=function(e,t){},t.removeFileExtension=function(e){return e.replace(/\.[^/.]+$/,"")},t.indexedDB_enabled=function(){return!!(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)},t.resolveMaxTextureSize=function(e){if(1==e.type){const t=e.gl.MAX_TEXTURE_SIZE;let i;return i=t>=4096?t-t%4096:t>=2048?t-t%2048:t>=1024?t-t%1024:t>=512?t-t%512:256,i}return 2048},t.computedSectionLength=function(e,t,i){let s,n=1;if(e<t)s=e;else{for(n=2;e/n>t;)n*=2;s=e/n}let r=i-s%i;return{mainLength:s+r,offsetLength:Math.abs(s-r*(n-1))}},t.mergeOptions=function(e,t,i=[]){const s=t;for(let t in s)e[t]&&(s[t]=e[t]);const n=[],r=[],a=[];for(let e=0;e<i.length;e++){const t=i[e];t in s||n.push(t),null===s[t]&&a.push(t),void 0===s[t]&&r.push(t)}let o="";if(o=n.length?o.concat("Missing param found for required params:"+n.join(", ")):o,o=a.length?o.concat("null param found for required params:"+a.join(", ")):o,o=n.length?o.concat("undefined param found for required params:"+r.join(", ")):o,o)throw o;return s}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(5),r=i(6);t.Collider=class{constructor(e,t,i,a,o,h,l,d,u,c){if(this.active=!1,this.props={},this.updatePosition=()=>{throw new Error("Static collider can not set position.")},this.updateRotation=()=>{throw new Error("Static collider can not set rotation.")},this._rotation=0,this._scaleX=0,this._scaleY=0,h)this.collisionManager=h,this.tagManager=h,n.TagMixin.ApplyMixin(this),r.TransformEventMixin.ApplyMixin(this);else{if(!c)throw new Error("No parent found on collider without ref to manager.");this.parent=c}this.props=l||{},this.gameObject=d,this.shapeType=t,this.layer=e,this.shapeData=i,this.transformedShapeData=i,this.data=u,this.tags=a,this.active=!0,this.dynamic=o,t===s.RuntimeColliderShape.POLYGON?this.isPolygon=!0:t===s.RuntimeColliderShape.LINE?(this.updateAdjustedShapeData=this.updateAdjustedShapeDataLine.bind(this),this.isLine=!0):t===s.RuntimeColliderShape.CIRCLE?(this.updateAdjustedShapeData=this.updateAdjustedShapeDataCircle.bind(this),this.isCircle=!0):t===s.RuntimeColliderShape.RECT?(this.updateAdjustedShapeData=this.updateAdjustedShapeDataRect.bind(this),this.isRect=!0):t===s.RuntimeColliderShape.POINT?(this.updateAdjustedShapeData=this.updateAdjustedShapeDataPoint.bind(this),this.isPoint=!0):t===s.RuntimeColliderShape.ELIPSE&&(this.updateAdjustedShapeData=this.updateAdjustedShapeDataElipse.bind(this)),o&&(this.rebindPositionUpdate(),this.rebindRotationUpdate());const{x:p,y:g}=this.getMins();this.minX=p,this.minY=g}setDefaultPivot(){this.isRect?this.setPivot(this.shapeData.w/2,this.shapeData.h/2):this.isCircle?this.setPivot(this.shapeData.r,this.shapeData.r):this.isPoint?this.setPivot(this.shapeData[0].x-this.shapeData[1].x/2,this.shapeData[0].y-this.shapeData[1].y/2):this.shapeType===s.RuntimeColliderShape.POINT&&this.setPivot(0,0)}pivotPointInPlace(e,t,i){const s=t.x,n=t.y,r=Math.cos(e),a=Math.sin(e);t.x=r*(s-i.x)-a*(n-i.y)+i.x,t.x=a*(s-i.x)+r*(n-i.y)+i.y}doScale(e,t){}updateTransformedShapeData(){throw new Error("Unimplmented, supposed to be rebound in constructor.")}updateAdjustedShapeDataRect(){}updateAdjustedShapeDataCircle(){}updateAdjustedShapeDataElipse(){}updateAdjustedShapeDataPoint(){}updateAdjustedShapeDataLine(){}updateAdjustedShapeData(){}doRotation(e,t){this.shapeType===s.RuntimeColliderShape.RECT||(this.shapeType===s.RuntimeColliderShape.LINE?(this.pivotPointInPlace(e,this.shapeData[0],t),this.pivotPointInPlace(e,this.shapeData[1],t)):this.pivotPointInPlace(e,this.shapeData,t))}onGetPivotPoint(e){this.defaultPivotPoint=e}updateRotationWithListeners(e,t){this._rotation+=e,this.doRotation(e,t);for(let i=0;i<this.onRotationUpdates.length;i++)this.onRotationUpdates[i](e,t)}updateRotationWithOutListeners(e,t){if(!t)throw new Error("Need pivot point for rotation.");this._rotation+=e,this.doRotation(e,t)}setScale(e,t){}setTransformData(e){e.pivotX&&(this._pivotX=e.pivotX),e.pivotX&&(this._pivotY=e.pivotY),e.scaleX&&(this._scaleX=e.pivotY),e.scaleY&&(this._scaleY=e.scaleY),e.rotation&&(this._rotation=e.rotation),this.updateTransformedShapeData()}getMins(){let e,t;if(this.shapeType===s.RuntimeColliderShape.POLYGON){e=Number.MAX_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER;for(let i=0;i<this.shapeData.length;i++)e=Math.min(e,this.shapeData[i].x),t=Math.min(t,this.shapeData[i].y);return{x:e,y:t}}return this.shapeType===s.RuntimeColliderShape.LINE?{x:Math.min(this.shapeData[0].x,this.shapeData[1].x),y:Math.min(this.shapeData[0].y,this.shapeData[1].y)}:this.shapeType===s.RuntimeColliderShape.CIRCLE?{x:this.shapeData.x-this.shapeData.r,y:this.shapeData.y-this.shapeData.r}:(e=this.shapeData.x,t=this.shapeData.y,{x:e,y:t})}setPivot(e,t){this._pivotX=e,this._pivotY=t}updateShapeData(e){}updateRotationDegrees(e,t){this.updateRotation(e*Math.PI/180,t)}defaultPivotPoint(){const{x:e,y:t}=this.getMins();return{x:this.pivotX+e,y:this.pivotY+t}}rebindRotationUpdate(){this.updateRotation=this.updateRotationWithOutListeners.bind(this),this.onRotationUpdates&&(this.updateRotation=this.updateRotationWithListeners.bind(this))}rebindPositionUpdate(){this.onPositionUpdates?(this.updatePosition=this.updatePositionWithListeners.bind(this),this.shapeType!==s.RuntimeColliderShape.LINE&&this.shapeType!==s.RuntimeColliderShape.POLYGON||(this.updatePosition=this.updateArrayWithListeners.bind(this))):(this.updatePosition=this.updatePositionWithoutListeners.bind(this),this.shapeType!==s.RuntimeColliderShape.LINE&&this.shapeType!==s.RuntimeColliderShape.POLYGON||(this.updatePosition=this.updateArrayWithoutListeners.bind(this)))}get rotation(){return this._rotation}setRotation(e,t){this.updateRotation(e-this._rotation,t)}setRotationDegrees(e,t){this.updateRotation(e*Math.PI/180-this._rotation,t)}updateArrayWithoutListeners(e,t){for(let i=0;i<this.shapeData.length;i++)this.shapeData[i].x+=e,this.shapeData[i].y+=t}updateArrayWithListeners(e,t){for(let i=0;i<this.shapeData.length;i++)this.shapeData[i].x+=e,this.shapeData[i].y+=t;for(let i=0;i<this.onPositionUpdates.length;i++)this.onPositionUpdates[i](e,t)}updatePositionWithoutListeners(e,t){this.shapeData.x+=e,this.shapeData.y+=t}updatePositionWithListeners(e,t){if(this.shapeData.x+=e,this.shapeData.y+=t,this.onPositionUpdates)for(let i=0;i<this.onPositionUpdates.length;i++)this.onPositionUpdates[i](e,t)}deactivate(){delete this.data,delete this.tags,delete this.shapeData,delete this.layer,delete this.gameObject,this.active=!1,this.clearListeners(),this.rebindPositionUpdate()}onCollisionStart(e){return this.startListeners?this.startListeners.push(e):this.startListeners=[e],this.startListeners.length-1}onCollision(e){return this.onListeners?this.onListeners.push(e):this.onListeners=[e],this.onListeners.length-1}onCollisionEnd(e){return this.endListeners?this.endListeners.push(e):this.endListeners=[e],this.endListeners.length-1}offCollision(e){this.onListeners=this.removeFromListeners(e,this.onListeners),this.onListeners||delete this.onListeners}offCollisionEnd(e){this.endListeners=this.removeFromListeners(e,this.endListeners),this.endListeners||delete this.endListeners}offCollisionStart(e){this.startListeners=this.removeFromListeners(e,this.startListeners),this.startListeners||delete this.startListeners}clearListeners(){this.parent||(this.clearTagListeners(),this.clearTransformListeners()),this.onListeners&&(this.onListeners.length=0,delete this.onListeners),this.endListeners&&(this.endListeners.length=0,delete this.endListeners),this.startListeners&&(this.startListeners.length=0,delete this.startListeners)}removeFromListeners(e,t){const i=new Array(t.length-1);let s=-1;for(let n=0;n<t.length;n++){if(t[n]===e){s=n;break}i[n]=t[n]}for(let e=s+1;e<t.length;e++)i[e-1]=t[e];return i.length?i:null}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NEGATIVE_NUMBER=1073741824]="NEGATIVE_NUMBER",e[e.IMAGE_AND_STRING_SEPERATOR=1118481]="IMAGE_AND_STRING_SEPERATOR",e[e.EMPTY_SECTION_FLAG=1118482]="EMPTY_SECTION_FLAG",e[e.BLOB_SEPARATOR=1118483]="BLOB_SEPARATOR",e[e.CHUNK_SEPERATOR=1118484]="CHUNK_SEPERATOR",e[e.TILE_=1118485]="TILE_"}(t.RESERVED_FLAGS||(t.RESERVED_FLAGS={})),t.RUNTIME_TILE_LAYER_SECTION_SIZE=128,t.EDITOR_TILE_LAYER_SECTION_SIZE=256,function(e){e.RECT="rects",e.POLYGON="polygons",e.POINT="points"}(t.ColliderShape||(t.ColliderShape={}));t.ObjectType=class{}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(2),r=i(7),a=i(8),o=i(5),h=i(6);PIXI.Sprite;class l extends PIXI.Sprite{constructor(e,t,i,s){super(),this.worldX=0,this.worldY=0,this.chunkCount=0,this.pool=[],this.sortByY=!1,this.gameStage=i,this.collisionManager=t,this.pool=e,this.tagManager=s,o.TagMixin.ApplyMixin(this),h.TransformEventMixin.ApplyMixin(this)}get sprite(){return this.delegatedSprite?this.delegatedSprite:this}updatePosition(e,t){if(e||t){if(this.worldX+=e,this.worldY+=t,this.position.x=Math.round(this.worldX),this.position.y=Math.round(this.worldY),this.delegatedSprite&&(this.delegatedSprite.position.x=Math.round(this.worldX),this.delegatedSprite.position.y=Math.round(this.worldY)),this.colliders)for(let i=0;i<this.colliders.length;i++)this.colliders[i].updatePosition(e,t);if(this.onPositionUpdates)for(let i=0;i<this.onPositionUpdates.length;i++)this.onPositionUpdates[i](e,t)}}updateRotation(e){if(this.rotation+=e,this.delegatedSprite&&(this.delegatedSprite.rotation+=e),this.colliders)for(let e=0;e<this.colliders.length;e++){this.colliders[e].minX,this.x,this.pivot.x,this.colliders[e].minY,this.y,this.pivot.y;this.colliders[e].setRotation(this.rotation,this.pivot)}if(this.onRotationUpdates)for(let t=0;t<this.onRotationUpdates.length;t++)this.onRotationUpdates[t](e)}setPosition(e,t){if(e===this.worldX&&t===this.worldY)return;const i=e-this.worldX,s=t-this.worldY;if(this.worldX+=i,this.worldY+=s,this.position.x=Math.round(this.worldX),this.position.y=Math.round(this.worldY),this.delegatedSprite&&(this.delegatedSprite.position.x=this.position.x,this.delegatedSprite.position.y=this.position.y),this.colliders)for(let e=0;e<this.colliders.length;e++)this.colliders[e].updatePosition(i,s);if(this.onPositionUpdates)for(let e=0;e<this.onPositionUpdates.length;e++)this.onPositionUpdates[e](i,s)}changeLayer(e){var t;if(e!==this.layerIndex){const i=this.layerIndex;null===(t=this.layerParent)||void 0===t||t.removeMapSprite(this,!0);const s=this.gameStage.children[e];if(!s)throw new Error(`Layer index: ${e} is out of range for current map.`);if(this.layerIndex=e,this.layerParent=s,s.addMapSprite(this),this.delegatedSprite&&s.objectContainer.addChild(this.delegatedSprite),this.onLayerChangeListeners&&null!=i)for(let t=0;t<this.onLayerChangeListeners.length;t++)this.onLayerChangeListeners[t](e,i)}}addPolygonCollider(e,t,i,s,n){return e=e.map(e=>({x:e.x+this.worldX,y:e.y+this.worldY})),this._addCollider(new a.PolygonCollider(this.layerIndex,e,t,i,this.collisionManager,s,this,n))}addLineCollider(e,t,i,r,a){return e[0].x+=this.worldX,e[0].y+=this.worldY,e[1].x+=this.worldX,e[1].y+=this.worldY,this._addCollider(new n.Collider(this.layerIndex,s.RuntimeColliderShape.LINE,e,t,i,this.collisionManager,r,this,a))}addRectCollider(e,t,i,r,a,o,h,l){return e+=this.worldX,t+=this.worldY,this._addCollider(new n.Collider(this.layerIndex,s.RuntimeColliderShape.RECT,{x:e,y:t,w:i,h:r},a,o,this.collisionManager,h,this,l))}addCircleCollider(e,t,i,r,a,o,h){return e+=this.worldX,t+=this.worldY,this._addCollider(new n.Collider(this.layerIndex,s.RuntimeColliderShape.CIRCLE,{x:e,y:t,r:i},r,a,this.collisionManager,o,this,h))}addPointCollider(e,t,i,r,a,o){return e+=this.worldX,t+=this.worldY,this._addCollider(new n.Collider(this.layerIndex,s.RuntimeColliderShape.POINT,{x:e,y:t},i,r,this.collisionManager,a,this,o))}_addCollider(e){return this.colliders?this.colliders.push(e):this.colliders=[e],this.collisionManager.initCollider(e),e}removeCollider(e){for(let t=0;t<this.colliders.length;t++)if(this.colliders[t]===e){this.colliders.splice(t,1),this.collisionManager.removeCollider(e),delete e.gameObject;break}this.colliders.length||delete this.colliders}init(e,t){if(this.visible=!0,e.data&&(this.data=e.data),this.zIndex=e.zIndex,null!==this.zIndex&&void 0!==this.zIndex||(this.zIndex=-1),this.sortByY=-1===this.zIndex,this.imageData=t,this._ySortPoint=this.imageData&&"ySortPoint"in this.imageData?this.imageData.ySortPoint:e&&"ySort"in e?e.ySort:this.texture.height,e.texture?this.texture=e.texture:e.sprite&&(this.delegatedSprite=e.sprite,this.delegatedSprite.ySortPoint=this._ySortPoint,this.delegatedSprite.sortByY=this.sortByY),e.position?(this.worldX=e.position.x,this.worldY=e.position.y):(this.worldX=0,this.worldY=0),this.x=this.worldX,this.y=this.worldY,isNaN(e.layer)||this.changeLayer(e.layer),e.tags&&(this.tags=e.tags),e.colliders&&this.addColliders(e.colliders),e.flips){const{flipDiag:t,flipHor:i,flipVert:s}=e.flips,n=i?-1:1,r=s?-1:1;let a=0,o=0;if((i||s)&&(this.setScale(n,r),i&&(a=-this.sprite.width),s&&(o=-this.sprite.height)),t){const e=a;a=this.sprite.height<0?0:this.sprite.height+o,o=this.sprite.width<0?Math.abs(this.sprite.width):e,s&&!i&&(o*=-1),i&&!s&&(a*=-1),i||s||(a*=-1,o*=-1),this.setRotation(Math.PI/180*90)}this.sprite.pivot.set(),this.sprite.x=this.worldX-a,this.sprite.y=this.worldY-o}}setScale(e,t){this.scaleX=e,this.scaleY=t,console.error("setting scales",{x:e,y:t}),this.sprite.scale.set(e,t),this.colliders=[];for(let i=0;i<this.colliders.length;i++)this.colliders[i].setScale(e,t)}clearColliders(){if(this.colliders){const e=[...this.colliders];for(let t=0;t<e.length;t++)this.removeCollider(e[t])}}addCollider(e){const t="shapeType"in e?e.shapeType:r.CollisionManager.ResolveColliderType(e);t===s.RuntimeColliderShape.RECT?this.addRectCollider(e.shapeData.x,e.shapeData.y,e.shapeData.w,e.shapeData.h,e.tags,!!e.dynamic,null,e.data):t===s.RuntimeColliderShape.CIRCLE?this.addCircleCollider(e.shapeData.x,e.shapeData.y,e.shapeData.r,e.tags,!!e.dynamic,null,e.data):t===s.RuntimeColliderShape.POLYGON?this.addPolygonCollider(e.shapeData,e.tags,!!e.dynamic,null,e.data):t===s.RuntimeColliderShape.POINT?this.addPointCollider(e.shapeData.x,e.shapeData.y,e.tags,!!e.dynamic,null,e.data):t===s.RuntimeColliderShape.LINE&&this.addLineCollider(e.shapeData,e.tags,!!e.dynamic,null,e.data)}addColliders(e){for(let t=0;t<e.length;t++)this.addCollider(e[t])}onRemovedFromMap(e){this.onRemovedFromMapListeners?this.onRemovedFromMapListeners.push(e):this.onRemovedFromMapListeners=[e]}offRemovedFromMap(e){for(let t=0;t<this.onRemovedFromMapListeners.length;t++)this.onRemovedFromMapListeners[t]===e&&(this.onRemovedFromMapListeners.splice(t,1),this.onRemovedFromMapListeners.length||delete this.onRemovedFromMapListeners)}onChangedLayers(e){this.onLayerChangeListeners?this.onLayerChangeListeners.push(e):this.onLayerChangeListeners=[e]}offChangedLayers(e){for(let t=0;t<this.onLayerChangeListeners.length;t++)this.onLayerChangeListeners[t]===e&&(this.onLayerChangeListeners.splice(t,1),this.onLayerChangeListeners.length||delete this.onLayerChangeListeners)}setRotation(e){this.updateRotation(e-this.rotation)}removeFromMap(){var e,t;if(this.layerParent)return this.layerParent.removeMapSprite(this,!1);if(null===(e=this.tags)||void 0===e||e.forEach(e=>{var t;return null===(t=this.tagManager.taggedGameObjectRemovedListeners[e])||void 0===t?void 0:t.forEach(e=>e(this))}),null===(t=this.tagManager.gameObjectRemovedListeners)||void 0===t||t.forEach(e=>e(this)),this.delegatedSprite&&(delete this.delegatedSprite.ySortPoint,delete this.delegatedSprite),this.clearTagListeners(),delete this.tags,this.worldX=0,this.worldY=0,this.colliders){for(let e=0;e<this.colliders.length;e++)this.collisionManager.removeCollider(this.colliders[e]);this.colliders.length=0,delete this.colliders}if(this.clearTransformListeners(),this.clearTagListeners(),delete this.layerIndex,this.visible=!1,this.imageData=null,this.alpha=1,this.texture=null,this.rotation=0,this.scale.set(1,1),this.scaleX=1,this.scaleY=1,this.anchor.set(0,0),this.pivot.set(0,0),this.onRemovedFromMapListeners){for(let e=0;e<this.onRemovedFromMapListeners.length;e++)this.onRemovedFromMapListeners[e]();this.onRemovedFromMapListeners.length=0,delete this.onRemovedFromMapListeners}this.onLayerChangeListeners&&(this.onLayerChangeListeners.length=0,delete this.onLayerChangeListeners),delete this.data,this.pool.push(this)}get ySortPoint(){return this.y+this._ySortPoint}}t.GameObject=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{static ApplyMixin(e){e.clearTagListeners=s.prototype.clearTagListeners.bind(e),e.onTagAdded=s.prototype.onTagAdded.bind(e),e.offTagAdded=s.prototype.offTagAdded.bind(e),e.onTagRemoved=s.prototype.onTagRemoved.bind(e),e.offTagRemoved=s.prototype.offTagRemoved.bind(e),e.addTag=s.prototype.addTag.bind(e),e.removeTag=s.prototype.removeTag.bind(e)}clearTagListeners(){this.tagAddedListeners&&(Object.keys(this.tagAddedListeners).forEach(e=>{this.tagAddedListeners[e].length=0,delete this.tagAddedListeners[e]}),delete this.tagAddedListeners),this.anyTagAddedListeners&&(this.anyTagAddedListeners.length=0,delete this.anyTagAddedListeners),this.tagRemovedListeners&&(Object.keys(this.tagRemovedListeners).forEach(e=>{this.tagRemovedListeners[e].length=0,delete this.tagRemovedListeners[e]}),delete this.tagRemovedListeners),this.anyTagRemovedListeners&&(this.anyTagRemovedListeners.length=0,delete this.anyTagRemovedListeners)}onTagAdded(e,t){t?this.tagAddedListeners?this.tagAddedListeners[t]?this.tagAddedListeners[t].push(e):this.tagAddedListeners[t]=[e]:this.tagAddedListeners={[t]:[e]}:this.anyTagAddedListeners?this.anyTagAddedListeners.push(e):this.anyTagAddedListeners=[e]}offTagAdded(e,t){if(t){for(let i=0;i<this.tagAddedListeners[t].length;i++)if(this.tagAddedListeners[t][i]===e)return this.tagAddedListeners[t].splice(i,1),this.tagAddedListeners[t].length||(delete this.tagAddedListeners[t],Object.keys(this.tagAddedListeners).length||delete this.tagAddedListeners),!0;return!1}for(let t=0;t<this.anyTagAddedListeners.length;t++)if(this.anyTagAddedListeners[t]===e)return this.anyTagAddedListeners.splice(t,1),this.anyTagAddedListeners.length||delete this.anyTagAddedListeners,!0;return!1}onTagRemoved(e,t){t?this.tagRemovedListeners?this.tagRemovedListeners[t]?this.tagRemovedListeners[t].push(e):this.tagRemovedListeners[t]=[e]:this.tagRemovedListeners={[t]:[e]}:this.anyTagRemovedListeners?this.anyTagRemovedListeners.push(e):this.anyTagRemovedListeners=[e]}offTagRemoved(e,t){if(!t){for(let t=0;t<this.anyTagRemovedListeners.length;t++)if(this.anyTagRemovedListeners[t]===e)return this.anyTagRemovedListeners.splice(t,1),this.anyTagRemovedListeners.length||delete this.anyTagRemovedListeners,!0;return!1}for(let i=0;i<this.tagRemovedListeners[t].length;i++)if(this.tagRemovedListeners[t][i]===e)return this.tagRemovedListeners[t].splice(i,1),this.tagRemovedListeners[t].length||(delete this.tagRemovedListeners[t],Object.keys(this.tagRemovedListeners).length||delete this.tagRemovedListeners),!0;return!1}addTag(e,t=!0){if(t&&this.tags&&this.tags.includes(e))throw new Error(`Trying to add duplicate tag ${e} to collider.`);if(this.tags?this.tags.push(e):this.tags=[e],this.tagAddedListeners){const t=this.tagAddedListeners[e];if(t)for(let i=0;i<t.length;i++)t[i](e)}if(this.anyTagAddedListeners)for(let t=0;t<this.anyTagAddedListeners.length;t++)this.anyTagAddedListeners[t](e);this.tagManager._onAddedTag(this,e)}removeTag(e){for(let t=0;t<this.tags.length;t++)if(this.tags[t]===e){if(this.tags.splice(t,1),this.tags.length||delete this.tags,this.tagRemovedListeners){const t=this.tagRemovedListeners[e];if(t)for(let i=0;i<t.length;i++)t[i](e)}return this.tagManager._onRemovedTag(this,e),!0}if(this.anyTagRemovedListeners)for(let t=0;t<this.anyTagRemovedListeners.length;t++)this.anyTagRemovedListeners[t](e);return!1}}t.TagMixin=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{static ApplyMixin(e){e.clearTransformListeners=s.prototype.clearTransformListeners.bind(e),e.onRotationUpdate=s.prototype.onRotationUpdate.bind(e),e.onPositionUpdate=s.prototype.onPositionUpdate.bind(e),e.offPositionUpdate=s.prototype.offPositionUpdate.bind(e),e.offPositionUpdate=s.prototype.offPositionUpdate.bind(e)}clearTransformListeners(){this.onRotationUpdates&&(this.onRotationUpdates.length=0,delete this.onRotationUpdates,this.rebindPositionUpdate&&this.rebindPositionUpdate()),this.onPositionUpdates&&(this.onPositionUpdates.length=0,delete this.onPositionUpdates,this.rebindRotationUpdate&&this.rebindRotationUpdate())}onPositionUpdate(e){this.onPositionUpdates?this.onPositionUpdates.push(e):(this.onPositionUpdates=[e],this.rebindPositionUpdate&&this.rebindPositionUpdate())}offPositionUpdate(e){for(let t=0;t<this.onPositionUpdates.length;t++)if(this.onPositionUpdates[t]===e&&(this.onPositionUpdates.splice(t,1),!this.onPositionUpdates.length))return delete this.onPositionUpdates,void(this.rebindPositionUpdate&&this.rebindPositionUpdate())}onRotationUpdate(e){this.onRotationUpdates?this.onRotationUpdates.push(e):(this.onRotationUpdates=[e],this.rebindRotationUpdate&&this.rebindRotationUpdate())}offRotationUpdate(e){for(let t=0;t<this.onRotationUpdates.length;t++)if(this.onRotationUpdates[t]===e)return this.onRotationUpdates.splice(t,1),this.onRotationUpdates.length||(delete this.onRotationUpdates,this.rebindRotationUpdate&&this.rebindRotationUpdate()),!0;return!1}}t.TransformEventMixin=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(0),r=i(8);class a{constructor(e){this.plugins=[],this.lastCollisions=[],this.collisionHandlersMap={},this.endCollisionHandlersMap={},this.startCollisionHandlersMap={},this.seqToTag={},this.rectLayerLookup=[],this.polygonLayerLookup=[],this.pointLayerLookup=[],this.circleLayerLookup=[],this.lineLayerLookup=[],this.chunkColliderLookup={},this.nextTagSeq=0,this.cachedTypeExecution={},this.cacheTypeOnNextRun={},this.cacheCount=0,e&&this.setCollisionSystem(e)}getCollidersWithTags(e){if(!this.collisionSystem)throw new Error("No collision system implemented to make query.");return this.collisionSystem.getCollidersWithTags(e)}onAfterCollisions(e){this.onAfterHandlers?this.onAfterHandlers.push(e):this.onAfterHandlers=[e]}onBeforeCollisions(e){this.onBeforeHandlers?this.onBeforeHandlers.push(e):this.onBeforeHandlers=[e]}offAfterCollisions(e){let t=this.onAfterHandlers.length;for(;t--;)if(this.onAfterHandlers[t]===e)return this.onAfterHandlers.splice(t,1),this.onAfterHandlers.length||delete this.onAfterHandlers,!0;return!1}offBeforeCollisions(e){let t=this.onBeforeHandlers.length;for(;t--;)if(this.onBeforeHandlers[t]===e)return this.onBeforeHandlers.splice(t,1),this.onBeforeHandlers.length||delete this.onBeforeHandlers,!0;return!1}onAddedCollider(e,t){if(t){this.addedTagHandlers||(this.addedTagHandlers={});for(let i=0;i<t.length;i++)this.addedTagHandlers[t[i]]?this.addedTagHandlers[t[i]].push(e):this.addedTagHandlers[t[i]]=[e]}else this.addedColliderHandlers?this.addedColliderHandlers.push(e):this.addedColliderHandlers=[e]}onRemovedCollider(e,t){if(t){this.removedTagHandlers||(this.removedTagHandlers={});for(let i=0;i<t.length;i++)this.removedTagHandlers[t[i]]?this.removedTagHandlers[t[i]].push(e):this.removedTagHandlers[t[i]]=[e]}else this.removedColliderHandlers?this.removedColliderHandlers.push(e):this.removedColliderHandlers=[e]}offAddedCollider(e,t){if(t){for(let i=0;i<t.length;i++){const s=this.addedTagHandlers[t[i]];let n=s.length;for(;n--;)s[n]===e&&this.addedTagHandlers[t[i]].splice(n,1);s.length||delete this.addedTagHandlers[t[i]]}Object.keys(this.addedTagHandlers).length||delete this.addedTagHandlers}else for(let t=0;t<this.addedColliderHandlers.length;t++)if(this.addedColliderHandlers[t]===e)return this.addedColliderHandlers.splice(t,1),this.addedColliderHandlers.length||delete this.addedColliderHandlers,!0;return!1}offRemovedCollider(e,t){if(t){for(let i=0;i<t.length;i++){const s=this.removedTagHandlers[t[i]];let n=s.length;for(;n--;)s[n]===e&&s.splice(n,1);s.length||delete this.removedTagHandlers[t[i]]}return Object.keys(this.removedTagHandlers).length||delete this.removedTagHandlers,!0}for(let t=0;t<this.removedColliderHandlers.length;t++)if(this.removedColliderHandlers[t]===e)return this.removedColliderHandlers.splice(t,1),this.removedColliderHandlers.length||delete this.removedColliderHandlers,!0;return!1}_onAddedTag(e,t){this.collisionSystem.onAddedTagToCollider(e,t)}_onRemovedTag(e,t){this.collisionSystem.onRemovedTagFromCollider(e,t)}addChunkColliders(e){for(let t=0;t<e.layers.length;t++){const i=e.layers[t];if(!i||!i.colliders)continue;const s=i.colliders;s.rects&&this.addCollidersToLookup(t,this.rectLayerLookup,s.rects),s.polygons&&this.addCollidersToLookup(t,this.polygonLayerLookup,s.polygons),s.points&&this.addCollidersToLookup(t,this.pointLayerLookup,s.points),s.circles&&this.addCollidersToLookup(t,this.circleLayerLookup,s.circles),s.lines&&this.addCollidersToLookup(t,this.lineLayerLookup,s.lines)}}addCollidersToLookup(e,t,i){let a=t[e];a||(a={},t[e]=a);for(let t=0;t<i.length;t++){const o=i[t];if(a[o.id])a[o.id]++;else{a[o.id]=1;const t=o.shapeType===n.RuntimeColliderShape.POLYGON?new r.PolygonCollider(e,o.shapeData,o.tags,o.dynamic,this,o.props):new s.Collider(e,o.shapeType,o.shapeData,o.tags,o.dynamic,this,o.props);this.initCollider(t),this.chunkColliderLookup[`${o.id}_${o.shapeType}_${e}`]=t}}}initCollider(e){if(e.dynamic?this.collisionSystem.onAddedDynamicCollider(e):this.collisionSystem.onAddedStaticCollider(e),e.parent){if(e.shapeType===n.RuntimeColliderShape.POLYGON)for(let t=0;t<e.lines.length;t++)this.initCollider(e.lines[t])}else{if(e.tags){const t=[],i=[],s=[],n=[];for(let r=0;r<e.tags.length;r++){const a=e.tags[r];this.pluginInitHandlers&&this.pluginInitHandlers[a]&&this.doTagHandlers(a,e,this.pluginInitHandlers,s),this.pluginTagAInitHandlers&&this.pluginTagAInitHandlers[a]&&this.doTagHandlers(a,e,this.pluginTagAInitHandlers,i),this.pluginTagBInitHandlers&&this.pluginTagBInitHandlers[a]&&this.doTagHandlers(a,e,this.pluginTagBInitHandlers,t),this.addedTagHandlers&&this.addedTagHandlers[a]&&this.doTagHandlers(a,e,this.addedTagHandlers,n)}}if(this.addedColliderHandlers)for(let t=0;t<this.addedColliderHandlers.length;t++)this.addedColliderHandlers[t](e)}}removeCollider(e){if(e.dynamic?this.collisionSystem.onRemovedDynamicCollider(e):this.collisionSystem.onRemovedStaticCollider(e),!e.parent){if(e.tags){const t=[],i=[],s=[],n=[];for(let r=0;r<e.tags.length;r++){const a=e.tags[r];this.pluginRemoveHandlers&&this.pluginRemoveHandlers[a]&&this.doTagHandlers(a,e,this.pluginRemoveHandlers,s),this.pluginTagARemoveHandlers&&this.pluginTagARemoveHandlers[a]&&this.doTagHandlers(a,e,this.pluginTagARemoveHandlers,i),this.pluginTagBRemoveHandlers&&this.pluginTagBRemoveHandlers[a]&&this.doTagHandlers(a,e,this.pluginTagBRemoveHandlers,t),this.removedTagHandlers&&this.removedTagHandlers[a]&&this.doTagHandlers(a,e,this.removedTagHandlers,n)}}if(this.removedColliderHandlers)for(let t=0;t<this.removedColliderHandlers.length;t++)this.removedColliderHandlers[t](e)}e.clearListeners()}static ResolveColliderType(e){if(Array.isArray(e.shapeData))return 2===e.shapeData.length?n.RuntimeColliderShape.LINE:n.RuntimeColliderShape.POLYGON;if(e.shapeData.hasOwnProperty("x"))return e.shapeData.hasOwnProperty("r")?n.RuntimeColliderShape.CIRCLE:e.shapeData.hasOwnProperty("w")?n.RuntimeColliderShape.RECT:n.RuntimeColliderShape.POINT;throw new Error(`Invalid shape data found on collider ${e}`)}doTagHandlers(e,t,i,s){const n=i[e];if(n)for(let e=0;e<n.length;e++)s.includes(n[e])||(s.push(n[e]),n[e](t))}removeChunkColliders(e){for(let t=0;t<e.layers.length;t++){const i=e.layers[t];if(!i||!i.colliders)continue;const s=i.colliders;s.rects&&this.removeColliderFromLookup(t,this.rectLayerLookup[t],s.rects),s.polygons&&this.removeColliderFromLookup(t,this.polygonLayerLookup[t],s.polygons),s.points&&this.removeColliderFromLookup(t,this.pointLayerLookup[t],s.points),s.circles&&this.removeColliderFromLookup(t,this.circleLayerLookup[t],s.circles),s.lines&&this.removeColliderFromLookup(t,this.lineLayerLookup[t],s.lines)}}removeColliderFromLookup(e,t,i){for(let s=0;s<i.length;s++){const n=i[s];if(!(n.id in t))throw new Error("The shape id should be in lookup at this point.");const r=`${n.id}_${n.shapeType}_${e}`;if(!--t[n.id]){const e=this.chunkColliderLookup[r];if(!e)throw new Error("Should have found collider");!e.parent&&this.removeCollider(e),delete t[n.id],delete this.chunkColliderLookup[r]}}}reset(){const e=this.collisionSystem.getAllColliders();for(let t=0;t<e.length;t++)e[t].parent||this.removeCollider(e[t]);this.collisionSystem.onClear()}initMap(e){this.collisionSystem.onInit(e.mapW,e.mapH);const t=e.layerTileLayerOrder.length;this.rectLayerLookup.length=t,this.pointLayerLookup.length=t,this.polygonLayerLookup.length=t,this.circleLayerLookup.length=t,this.lineLayerLookup.length=t;for(let e=0;e<t;e++)delete this.rectLayerLookup[e],delete this.polygonLayerLookup[e],delete this.pointLayerLookup[e],delete this.circleLayerLookup[e],delete this.lineLayerLookup[e]}init(e){let t=0;Object.keys(e).forEach(i=>{this.seqToTag[i]=e[i],t=Math.max(parseInt(i),t)}),this.nextTagSeq=t}setCollisionSystem(e){const t=this.collisionSystem;this.collisionSystem=e,e?(this.addColliderCouple=this.collisionSystem.onAddedColliderCouple.bind(this.collisionSystem),this.removeColliderCouple=this.collisionSystem.onRemovedColliderCouple.bind(this.collisionSystem)):t&&(this.addColliderCouple=a.prototype.addColliderCouple.bind(this),this.removeColliderCouple=a.prototype.removeColliderCouple.bind(this))}update(e){const t=[...this.lastCollisions];if(this.onBeforeHandlers)for(let e=0;e<this.onBeforeHandlers.length;e++)this.onBeforeHandlers[e](t);const i=this.collisionSystem.getCollisions(e);if(this.lastCollisions.length=0,i.length)for(let e=0;e<i.length;e+=2){const s=i[e],n=i[e+1];let r=!1;for(let e=0;e<t.length;e+=2)if(t[e]===s&&t[e+1]===n||t[e]===n&&t[e+1]===s){t.splice(e,2),r=!0;break}if(this.lastCollisions.push(s,n),r){if(this.doCollisionHandlerIteration(s,n,this.collisionHandlersMap),s.onListeners)for(let e=0;e<s.onListeners.length;e++)s.onListeners[e](n);if(n.onListeners)for(let e=0;e<n.onListeners.length;e++)n.onListeners[e](s)}else{if(this.doCollisionHandlerIteration(s,n,this.startCollisionHandlersMap),s.startListeners)for(let e=0;e<s.startListeners.length;e++)s.startListeners[e](n);if(n.startListeners)for(let e=0;e<n.startListeners.length;e++)n.startListeners[e](s)}}if(t.length)for(let e=0;e<t.length;e+=2){const i=t[e],s=t[e+1];if(this.doCollisionHandlerIteration(i,s,this.endCollisionHandlersMap),i.endListeners)for(let e=0;e<i.endListeners.length;e++)i.endListeners[e](s);if(s.endListeners)for(let e=0;e<s.endListeners.length;e++)s.endListeners[e](i)}if(this.onAfterHandlers)for(let e=0;e<this.onAfterHandlers.length;e++)this.onAfterHandlers[e](this.lastCollisions)}removePlugin(e){for(let t=0;t<this.plugins.length;t++){if(this.plugins[t]===e||this.plugins[t]._f&&this.plugins[t]._f===e){const e=this.plugins[t];if(this.plugins.splice(t,1),e.onBeforeCollisions&&this.offBeforeCollisions(e.onBeforeCollisions),e.onAfterCollisions&&this.offAfterCollisions(e.onAfterCollisions),this.plugins.length){const t=(t,i)=>{if(e.tagBs&&e.tagBs.length)for(let s=0;s<e.tagAs.length;s++){const n=e.tagAs[s],r=i[n].couples;for(let i=0;i<e.tagBs.length;i++){const s=r[e.tagBs[i]];for(let e=0;e<s.length;e++)if(s[e]===t){s.splice(e,1);break}s.length||delete r[e.tagBs[i]]}0===Object.keys(r).length&&(delete i[n].couples,i[n].singles||delete i[n])}else for(let s=0;s<e.tagAs.length;s++){const n=e.tagAs[s],r=i[n].singles;for(let e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}r.length||(delete i[n].singles,i[n].couples||delete i[n])}};e.onCollisionStart&&t(e.onCollisionStart,this.startCollisionHandlersMap),e.onCollision&&t(e.onCollision,this.collisionHandlersMap),e.onCollisionEnd&&t(e.onCollisionEnd,this.endCollisionHandlersMap);const i=(e,t,i)=>{let s=!1;return e.forEach(e=>{const n=i[e];for(let e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}n.length||(s=!0,delete i[e])}),s?Object.keys(i).length:1};if(e.onAddedColliderWithTagA&&!i(e.tagAs,e.onAddedColliderWithTagA,this.pluginTagAInitHandlers)&&delete this.pluginTagAInitHandlers,e.onAddedColliderWithTagB&&!i(e.tagBs,e.onAddedColliderWithTagB,this.pluginTagBInitHandlers)&&delete this.pluginTagBInitHandlers,e.onColliderAddedTagA&&!i(e.tagAs,e.onAddedColliderWithTagA,this.pluginColliderAddedTagAHandlers)&&delete this.pluginColliderAddedTagAHandlers,e.onColliderAddedTagB&&!i(e.tagBs,e.onColliderAddedTagB,this.pluginColliderAddedTagBHandlers)&&delete this.pluginColliderAddedTagBHandlers,e.onColliderRemovedTagA&&!i(e.tagAs,e.onColliderRemovedTagA,this.pluginColliderRemovedTagAHandlers)&&delete this.pluginColliderRemovedTagAHandlers,e.onColliderRemovedTagB&&!i(e.tagBs,e.onColliderRemovedTagB,this.pluginColliderRemovedTagBHandlers)&&delete this.pluginColliderRemovedTagBHandlers,e.onAdded)if(e.tagAs&&e.tagAs.length)if(i(e.tagAs,e.onAdded,this.pluginInitHandlers)){if(e.tagBs){i(e.tagBs.filter(t=>!e.tagAs.includes(t)),e.onAdded,this.pluginInitHandlers)||delete this.pluginInitHandlers}}else delete this.pluginInitHandlers;else this.offAddedCollider(e.onAdded);if(e.onRemovedTagA&&!i(e.tagAs,e.onRemovedTagA,this.pluginTagARemoveHandlers)&&delete this.pluginTagARemoveHandlers,e.onRemovedTagB&&!i(e.tagBs,e.onRemovedTagB,this.pluginTagBRemoveHandlers)&&delete this.pluginTagBRemoveHandlers,e.onRemoved)if(e.tagAs&&e.tagAs.length)if(i(e.tagAs,e.onRemoved,this.pluginRemoveHandlers)){if(e.tagBs){i(e.tagBs.filter(t=>!e.tagAs.includes(t)),e.onRemoved,this.pluginRemoveHandlers)||delete this.pluginRemoveHandlers}}else delete this.pluginRemoveHandlers;else this.offRemovedCollider(e.onRemoved);if(e.tagAs&&e.tagBs)for(let t=0;t<e.tagAs.length;t++)for(let i=0;i<e.tagBs.length;i++)this.collisionSystem.onRemovedColliderCouple(e.tagAs[t],e.tagBs[i])}else{for(let e in this.startCollisionHandlersMap)this.startCollisionHandlersMap.hasOwnProperty(e)&&delete this.startCollisionHandlersMap[e];for(let e in this.collisionHandlersMap)this.collisionHandlersMap.hasOwnProperty(e)&&delete this.collisionHandlersMap[e];for(let e in this.endCollisionHandlersMap)this.endCollisionHandlersMap.hasOwnProperty(e)&&delete this.endCollisionHandlersMap[e]}return!0}}return this.cacheTypeOnNextRun={},this.cachedTypeExecution={},this.reapplyPlugins(),!1}addColliderCouple(e,t){throw new Error("No collision system is being used.")}removeColliderCouple(e,t){throw new Error("No collision system is being used.")}addColliderCouples(e){for(let t=0;t<e.length;t++)this.addColliderCouple(e[t][0],e[t][1])}removeColliderCouples(e){for(let t=0;t<e.length;t++)this.removeColliderCouple(e[t][0],e[t][1])}addPlugin(e,t,i){if(!this.validatePlugin(e))return;e.init&&e.init(t,i),this.plugins.push(e),e.onCollisionStart&&this.addToPluginMap(e,e.onCollisionStart,this.startCollisionHandlersMap),e.onCollision&&this.addToPluginMap(e,e.onCollision,this.collisionHandlersMap),e.onCollisionEnd&&this.addToPluginMap(e,e.onCollisionEnd,this.endCollisionHandlersMap),e.onBeforeCollisions&&this.onBeforeCollisions(e.onBeforeCollisions),e.onAfterCollisions&&this.onAfterCollisions(e.onAfterCollisions);const s=(e,t,i)=>{e.forEach(e=>{i[e]?i[e].push(t):i[e]=[t]})};if(e.onColliderAddedTagA&&(this.pluginColliderAddedTagAHandlers||(this.pluginColliderAddedTagAHandlers={}),s(e.tagAs,e.onColliderAddedTagA,this.pluginColliderAddedTagAHandlers)),e.onColliderAddedTagB&&(this.pluginColliderAddedTagBHandlers||(this.pluginColliderAddedTagBHandlers={}),s(e.tagBs,e.onColliderAddedTagB,this.pluginColliderAddedTagBHandlers)),e.onColliderRemovedTagA&&(this.pluginColliderRemovedTagAHandlers||(this.pluginColliderRemovedTagAHandlers={}),s(e.tagAs,e.onColliderAddedTagA,this.pluginColliderRemovedTagAHandlers)),e.onColliderRemovedTagB&&(this.pluginColliderRemovedTagBHandlers||(this.pluginColliderRemovedTagBHandlers={}),s(e.tagBs,e.onColliderAddedTagB,this.pluginColliderRemovedTagBHandlers)),e.onAddedColliderWithTagA&&(this.pluginTagAInitHandlers||(this.pluginTagAInitHandlers={}),s(e.tagAs,e.onAddedColliderWithTagA,this.pluginTagAInitHandlers)),e.onAddedColliderWithTagB&&(this.pluginTagBInitHandlers||(this.pluginTagBInitHandlers={}),s(e.tagBs,e.onAddedColliderWithTagB,this.pluginTagBInitHandlers)),e.onAdded)if(e.tagAs&&e.tagAs.length){this.pluginInitHandlers||(this.pluginInitHandlers={}),s(e.tagAs&&e.tagBs?[...e.tagAs,...e.tagBs].filter((e,t,i)=>i.indexOf(e)===t):e.tagAs,e.onAdded,this.pluginInitHandlers)}else this.onAddedCollider(e.onAdded);if(e.onRemovedTagA&&(this.pluginTagARemoveHandlers||(this.pluginTagARemoveHandlers={}),s(e.tagAs,e.onRemovedTagA,this.pluginTagARemoveHandlers)),e.onRemovedTagB&&(this.pluginTagBRemoveHandlers||(this.pluginTagBRemoveHandlers={}),s(e.tagBs,e.onRemovedTagB,this.pluginTagBRemoveHandlers)),e.onRemoved)if(e.tagAs&&e.tagAs.length){this.pluginRemoveHandlers||(this.pluginRemoveHandlers={}),s(e.tagAs&&e.tagBs?[...e.tagAs,...e.tagBs].filter((e,t,i)=>i.indexOf(e)===t):e.tagAs,e.onRemoved,this.pluginRemoveHandlers)}else this.onRemovedCollider(e.onRemoved);if(this.collisionSystem){if(e.tagAs&&e.tagBs)for(let t=0;t<e.tagAs.length;t++)for(let i=0;i<e.tagBs.length;i++)this.collisionSystem.onAddedColliderCouple(e.tagAs[t],e.tagBs[i]);this.reapplyPlugins()}}addToPluginMap(e,t,i){if(e.tagBs&&e.tagBs.length)for(let s=0;s<e.tagAs.length;s++){const n=e.tagAs[s];i[n]?i[n].couples||(i[n].couples={}):i[n]={couples:{}};for(let s=0;s<e.tagBs.length;s++){const r=e.tagBs[s];i[n].couples[r]?i[n].couples[r].push(t):i[n].couples[r]=[t]}}else for(let s=0;s<e.tagAs.length;s++){const n=e.tagAs[s];i[n]?i[n].singles?i[n].singles.push(t):i[n].singles=[t]:i[n]={singles:[t]}}}validatePlugin(e){if(this.plugins.includes(e))return console.error("plugin validation error, collision plugin:",e.name,"already exists."),!1;if(!(e.onCollision||e.onCollisionStart||e.onCollisionEnd||e.onAddedColliderWithTagB||e.onAddedColliderWithTagA||e.onRemovedTagA||e.onRemovedTagB||e.onRemoved||e.onAdded))return console.error("plugin validation error, collision plugin:",e.name,"does not implement any of the collision hooks: onCollision, onCollisionStart, onCollisionEnd, onAdded, onRemoved, onAddedColliderWithTagA, onAddedColliderWithTagB, onRemovedTagA, or onRemovedTabB"),!1;if(!e.tagAs||!e.tagAs.length){if(e.onAddedColliderWithTagA||e.onRemovedTagA)return console.error("plugin validation error, collision plugin:",e.name,'needs a "tagAs" property with an array of at least 1 tag since youre using onAddedColliderWithTagA/onRemovedTagA'),!1;if(e.onCollision||e.onCollisionStart||e.onCollisionEnd)return console.error("plugin validation error, collision plugin:",e.name,'needs at least "tagAs" property with an array of at least 1 tag since youre using onCollision, onCollisionStart, onCollisionEnd. The only method you can use without tags are "init", "onAdded", and "onRemoved"'),!1}if(!e.tagBs||!e.tagBs.length){if(e.onAddedColliderWithTagB)return console.error("plugin validation error, collision plugin:",e.name,'invalid onAddedColliderWithTagB handler, the plugin needs a "tagBs" property with an array of at least 1 tag'),!1;if(e.onRemovedTagB)return console.error("plugin validation error, collision plugin:",e.name,'invalid onRemovedTagB handler, the plugin needs a "tagBs" property with an array of at least 1 tag'),!1}return!0}reapplyPlugins(){this.plugins.length?this.doCollisionHandlerIteration=this.iterateCollisionTagHandlers.bind(this):this.doCollisionHandlerIteration=()=>{}}iterateCollisionTagHandlers(e,t,i){const s=performance.now(),n=e.tags,r=t.tags;let a=[],o=[],h=[];for(let s=0;s<n.length;s++){const l=n[s],d=i[l];if(d){if(d.couples)for(let i=0;i<r.length;i++)d.couples[r[i]]&&d.couples[r[i]].forEach(i=>{o.includes(i)||(i(e,t),o.push(i))});if(d.singles)for(let i=0;i<d.singles.length;i++){r.includes(l)&&a.push(l);const s=d.singles[i];h.includes(s)||(s(e,t),h.push(s))}}}h.length=0,o.length=0;for(let s=0;s<r.length;s++){const l=r[s],d=i[l];if(d){if(d.couples)for(let i=0;i<n.length;i++)n[i]!==l&&d.couples[n[i]]&&d.couples[n[i]].forEach(i=>{o.includes(i)||(i(t,e),o.push(i))});if(d.singles&&!a.includes(l))for(let i=0;i<d.singles.length;i++){const s=d.singles[i];h.includes(s)||(s(t,e),h.push(s))}}}performance.now()}}t.CollisionManager=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(2),n=i(0);class r extends s.Collider{constructor(e,t,i,r,a,o,h,l,d){super(e,n.RuntimeColliderShape.POLYGON,t,i,r,a,o,h,l),this.lines=new Array(this.shapeData.length);for(let e=0;e<this.lines.length;e++){const t=this.shapeData[e],i=e===this.shapeData.length-1?this.shapeData[0]:this.shapeData[e+1];this.lines[e]=new s.Collider(this.layer,n.RuntimeColliderShape.LINE,[t,i],this.tags,this.dynamic,null,o,h,null,this)}}doRotation(e,t){for(let i=0;i<this.shapeData.length;i++){const s=this.shapeData[i].x,n=this.shapeData[i].y,r=e,a=Math.cos(r),o=Math.sin(r),h=a*(s-t.x)-o*(n-t.y)+t.x,l=o*(s-t.x)+a*(n-t.y)+t.y;this.shapeData[i].x=h,this.shapeData[i].y=l}}onLineCollisionStart(e){if(this.lineStartListeners)this.lineStartListeners.push(e);else{this.lineStartListeners=[e];for(let e=0;e<this.lines.length;e++){if(this.lines[e].startListeners)throw new Error("You can not have listeners on polygon children colliders and use the parent onLineCollision");this.lines[e].onCollisionStart(t=>{for(let i=0;i<this.lineStartListeners.length;i++)this.lineStartListeners[i](this.lines[e],t)})}}}onLineCollision(e){if(this.lineListeners)this.lineListeners.push(e);else{this.lineListeners=[e];for(let e=0;e<this.lines.length;e++){if(this.lines[e].onListeners)throw new Error("You can not have listeners on polygon children colliders and use the parent onLineCollision");this.lines[e].onCollision(t=>{for(let i=0;i<this.lineListeners.length;i++)this.lineListeners[i](this.lines[e],t)})}}}onLineCollisionEnd(e){if(this.lineEndListeners)this.lineEndListeners.push(e);else{this.lineEndListeners=[e];for(let e=0;e<this.lines.length;e++){if(this.lines[e].endListeners)throw new Error("You can not have listeners on polygon children colliders and use the parent onLineCollision");this.lines[e].onCollisionEnd(t=>{for(let i=0;i<this.lineEndListeners.length;i++)this.lineEndListeners[i](this.lines[e],t)})}}}clearListeners(){super.clearListeners(),this.lines.forEach(e=>{e.clearListeners()})}offLineCollision(e){this.lineListeners=this.removeFromArray(e,this.lineListeners),this.lineListeners||(this.lines.forEach(e=>{e.onListeners.length=0,delete e.onListeners}),delete this.lineListeners)}offLineCollisionEnd(e){this.lineEndListeners=this.removeFromArray(e,this.lineEndListeners),this.lineEndListeners||(this.lines.forEach(e=>{e.endListeners.length=0,delete e.endListeners}),delete this.lineEndListeners)}offLineCollisionStart(e){this.lineStartListeners=this.removeFromArray(e,this.lineStartListeners),this.lineStartListeners||(this.lines.forEach(e=>{e.startListeners.length=0,delete e.startListeners}),delete this.startListeners)}setDefaultPivot(){let e,t,i,s;for(let n=0;n<this.shapeData.length;n++)e=this.shapeData[n].x<e||null==e?this.shapeData[n].x:e,t=this.shapeData[n].x>t||null==t?this.shapeData[n].x:t,i=this.shapeData[n].y<i||null==i?this.shapeData[n].y:i,s=this.shapeData[n].y>s||null==s?this.shapeData[n].y:s;this.setPivot((e+t)/2-e,(i+s)/2-i)}defaultPivotPoint(){let e,t,i,s;for(let n=0;n<this.shapeData.length;n++)e=this.shapeData[n].x<e||null==e?this.shapeData[n].x:e,t=this.shapeData[n].x>t||null==t?this.shapeData[n].x:t,i=this.shapeData[n].y<i||null==i?this.shapeData[n].y:i,s=this.shapeData[n].y>s||null==s?this.shapeData[n].y:s;return{x:(e+t)/2,y:(i+s)/2}}}t.PolygonCollider=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(20);t.AtlasFactory=(e,t)=>(e.type,new s.WebGlGameObjectAtlas(e,t))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AbstractTextureAtlas=class{constructor(e,t){this.lookup={},this.nextPositions=[],this.nextOpenRects=[],this.nextOpenPositions=[],this.nextPositionIndex=0,this.nextRectAtlasIndex=0,this.nextOpenIndex=0,this.atlasses=[],this.subChunkW=128,this.subChunkH=128,this.openRects=[],this.maxTextureSize=e>=2048?e-e%2048:e>=1024?e-e%1024:e>=512?e-e%512:256,this.renderer=t}initForMap(e,t,i){this.clear(),this.subChunkW=128|e,this.subChunkH=128|t,this.textureStartX=this.maxTextureSize-this.subChunkW,this.textureStartY=this.maxTextureSize-this.subChunkH,this.atlasses.push(PIXI.RenderTexture.create(this.maxTextureSize,this.maxTextureSize)),this.nextPositionIndex=0;for(let e=this.textureStartX;e>=0;e-=this.subChunkH)for(let t=this.textureStartX;t>=0;t-=this.subChunkW)this.nextPositions.push([t,e])}mergeAllLayerChunks(e){return new Array(e.length).fill(1).map((t,i)=>{if(e[i]&&e[i].length&&!e[i].every(e=>!e)){let t=0,s=0;const n=new PIXI.Container;e[i].forEach(e=>{e&&(t=Math.max(e.x+e.width,t),s=Math.max(e.y+e.height,s),n.addChild(e))});const r=PIXI.RenderTexture.create(t,s);return this.renderer.render(n,r),r}return null})}getMinTexturesForMap(e,t,i){const s=[];Math.ceil(e/this.maxTextureSize),Math.ceil(t/this.maxTextureSize);return i.forEach(e=>{s.push([]),e.forEach(e=>{})}),s}addOpenRect(e,t,i){}addOpenSpot(e,t,i,s,n){this.nextOpenRects.push({aIdx:e,x:t,y:i,w:s,h:n})}clear(){Object.keys(this.lookup).forEach(e=>{delete this.lookup[e]}),this.nextPositionIndex=0,this.nextOpenIndex=0,this.nextPositions.length=0,this.nextOpenPositions.length=0,this.nextOpenRects.length=0,this.atlasses.forEach(e=>{e.destroy(!0)}),this.atlasses.length=0}addParentChunkLayerGroup(e,t){}addTileToLayerGroup(e,t,i,s){}addSubChunkLayerGroup(e,t){if(e in this.lookup)return this.lookup[e].texture;const{x:i,y:s,w:n,h:r,aIdx:a}=this.getNextRect(t.width,t.height),o=new PIXI.Sprite(t);o.setTransform(i,s),this.renderer.render(o,this.atlasses[a],!1);const h=new PIXI.Texture(this.atlasses[a].baseTexture,new PIXI.Rectangle(i,s,n,r));return this.lookup[e]={texture:h,x:i,y:s,w:n,h:r,aIdx:a},h}renderSubChunkLayerGroup(e,t,i=!1){if(e in this.lookup)return this.lookup[e].texture;i&&console.error("layer width/height:",{width:t.width,height:t.height});const{x:s,y:n}=t.getLocalBounds(),{x:r,y:a,w:o,h:h,aIdx:l}=this.getNextRect(t.width,t.height);t.setTransform(r-s,a-n),this.renderer.render(t,this.atlasses[l],!1,null,!1);const d=new PIXI.Texture(this.atlasses[l].baseTexture,new PIXI.Rectangle(r,a,o,h));return this.lookup[e]={texture:d,x:r,y:a,w:o,h:h,aIdx:l},d}getNextRect(e,t){let i=this.nextOpenRects[0],s=0;for(;i&&(i.w<e||i.h<t);)i=this.nextOpenRects[++s];const n=i=>{const s=i.aIdx,n=i.w-e,r=i.h-t;n>=this.subChunkW&&this.nextOpenRects.push({aIdx:s,x:i.x+e,y:i.y,w:n,h:t}),r>=this.subChunkH&&this.nextOpenRects.push({aIdx:s,x:i.x,y:i.y+t,w:e,h:r}),n>=this.subChunkW&&r>=this.subChunkH&&this.nextOpenRects.push({aIdx:s,x:i.x+e,y:i.y+t,w:n,h:r})};if(i)return this.nextOpenRects.splice(s,1),n(i),{aIdx:i.aIdx,x:i.x,y:i.y,w:e,h:t};this.atlasses.push(PIXI.RenderTexture.create(this.maxTextureSize,this.maxTextureSize));const r=this.atlasses.length-1;return n({x:0,y:0,w:this.maxTextureSize,h:this.maxTextureSize,aIdx:r}),{aIdx:r,x:0,y:0,w:e,h:t}}getNextPosition(){let e=this.nextPositions.pop(),t=this.nextPositionIndex;if(e)return[...e,t];if(e=this.nextOpenPositions.pop(),e)return e;this.atlasses.push(PIXI.RenderTexture.create(this.maxTextureSize,this.maxTextureSize)),this.nextPositionIndex=this.atlasses.length-1;for(let e=this.textureStartX;e>=0;e-=this.subChunkH)for(let t=this.textureStartX;t>=0;t-=this.subChunkW)this.nextPositions.push([t,e]);return[...this.nextPositions.pop(),this.nextPositionIndex]}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.GET_SECTION_DATA=0]="GET_SECTION_DATA",e[e.REQUEST_AND_SAVE_MAP_CHUNKS=1]="REQUEST_AND_SAVE_MAP_CHUNKS",e[e.REQUEST_AND_SAVE_SINGLE_MAP_CHUNK=2]="REQUEST_AND_SAVE_SINGLE_MAP_CHUNK",e[e.REQUEST_AND_SAVE_ALL_MAP_CHUNKS=3]="REQUEST_AND_SAVE_ALL_MAP_CHUNKS",e[e.INIT_LOADER=4]="INIT_LOADER",e[e.INIT_MAP=5]="INIT_MAP"}(t.Messages||(t.Messages={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR"}(t.ResultCodes||(t.ResultCodes={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(13);t.default=s.default},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(14),r=i(15),a=i(17),o=i(19),h=i(1),l=i(0),d=i(24),u=i(25),c=i(34),p=i(35),g=i(11),f=i(2);t.MapCollider=f.Collider;const m=i(7),y=i(37),C=i(4);t.GameObject=C.GameObject;const x=i(39),w=i(40);let v=.025;let T,b=[],S=!1;class k{constructor(e){this.mapLoadCount=0,this.cachedMapMetaData={},this.awaitingCollisionEnd=[],this.mapsInitData=[],this.initialized=!1,this.chunkIteration=1,this.elapsed=0,this.elapsedCol=0,this.plugins=[],this.collisionPlugins=[],this.collisionHandlers=[],this.lastCollisions=[],this.seqToTag={},this.seqToProp={},this._isLoadingMap=!1,this._onMapCreatedListeners=[],this._onMapDestroyedListeners=[],this._onBeforeMapDestroyedListeners=[],this.bufferedObjects=[],this.ColliderShapes={RECT:l.RuntimeColliderShape.RECT,POLYGON:l.RuntimeColliderShape.POLYGON,POINT:l.RuntimeColliderShape.POINT,CIRCLE:l.RuntimeColliderShape.CIRCLE,LINE:l.RuntimeColliderShape.LINE,ELIPSE:l.RuntimeColliderShape.ELIPSE},this.basePath=e,this.mainStage=new PIXI.Container,this.gameStage=new PIXI.Container,this.interfaceStage=new PIXI.Container,this.mainStage.addChild(this.gameStage),this.mainStage.addChild(this.interfaceStage),this.plugins=[],this.collisionSystem=T||new y.SpatialGrid,this.collisionManager=new m.CollisionManager(this.collisionSystem),this.getCollidersWithTags=this.collisionManager.getCollidersWithTags.bind(this.collisionManager),this.updateCollisions=this.collisionManager.update.bind(this.collisionManager),this.onAddedCollider=this.collisionManager.onAddedCollider.bind(this.collisionManager),this.onRemovedCollider=this.collisionManager.onRemovedCollider.bind(this.collisionManager),this.offAddedCollider=this.collisionManager.onAddedCollider.bind(this.collisionManager),this.offRemovedCollider=this.collisionManager.onRemovedCollider.bind(this.collisionManager),this.addColliderCouple=this.collisionManager.addColliderCouple.bind(this.collisionManager),this.removeColliderCouple=this.collisionManager.removeColliderCouple.bind(this.collisionManager),this.addColliderCouples=this.collisionManager.addColliderCouples.bind(this.collisionManager),this.removeColliderCouples=this.collisionManager.removeColliderCouples.bind(this.collisionManager),this.onAfterCollisions=this.collisionManager.onAfterCollisions.bind(this.collisionManager),this.onBeforeCollisions=this.collisionManager.onBeforeCollisions.bind(this.collisionManager),this.offAfterCollisions=this.collisionManager.offAfterCollisions.bind(this.collisionManager),this.offBeforeCollisions=this.collisionManager.offBeforeCollisions.bind(this.collisionManager),this.gameObjectManager=new o.GameObjectManager(this.basePath,this.collisionManager),this.addGameObject=this.gameObjectManager.addGameObject.bind(this.gameObjectManager),this.getTexture=this.gameObjectManager.getTexture.bind(this.gameObjectManager),this.onTaggedGameObjectAdded=this.gameObjectManager.onTaggedGameObjectAdded.bind(this.gameObjectManager),this.onTaggedGameObjectRemoved=this.gameObjectManager.onTaggedGameObjectRemoved.bind(this.gameObjectManager),this.onGameObjectAdded=this.gameObjectManager.onGameObjectAdded.bind(this.gameObjectManager),this.onGameObjectRemoved=this.gameObjectManager.onGameObjectRemoved.bind(this.gameObjectManager),T=null}onMapDestroyed(e){this._onMapDestroyedListeners.push(e)}onBeforeMapDestroyed(e){this._onBeforeMapDestroyedListeners.push(e)}offBeforeMapDestroyed(e){this._onBeforeMapDestroyedListeners=this._onMapDestroyedListeners.filter(t=>t!==e)}onMapCreated(e){this._onMapCreatedListeners.push(e)}offMapCreated(e){this._onMapCreatedListeners=this._onMapCreatedListeners.filter(t=>t!==e)}offMapDestroyed(e){this._onMapDestroyedListeners=this._onMapDestroyedListeners.filter(t=>t!==e)}setCollisionSystem(e){this.collisionSystem=e}static useCollisionSystem(e){if(S)throw new Error("World was already initialized or initializing when we called use, to use a plugin with the static method, use world.setCollisionSystem if its already initialized.");T=e}static use(e,t){if(S)throw new Error("World was already initialized or initializing when we called use, to use a plugin with the static method, make sure to call World.use before you call World.init, otherwise use the returned world object's .use method and not the static one.");const i=k.ValidatePlugin(b,e);t&&(i.__opts=t),b.push(i)}use(e,t){switch(e=k.ValidatePlugin(this.plugins,e),this.plugins.push(e),e.type){case n.PluginTypes.Collision:this.collisionManager.addPlugin(e,this,t);break;case n.PluginTypes.GameObject:this.gameObjectManager.addPlugin(e,this,t);break;default:throw new Error(`Failed to install plugin: "${e.name}" All plugins need a type propety of 'collision', 'game_object', or 'map' but the type was set as: "${e.type}"`)}}static ValidatePlugin(e,t,i=!1){let s=i?1:0;const n="function"==typeof t?e.find(e=>e._f&&e._f===t):e.find(e=>e.type===t.type&&e.name===t.name);switch(n&&(s+=2),s){case 0:return"function"==typeof t?t():t;case 1:throw new Error(`Could not find plugin name ${t.name}`);case 2:throw new Error(`Already added plugin of type ${n.type} and name ${n.name}`);case 3:return n}}static addPlugin(e){k.use(e)}addPlugin(e){this.use(e)}static unusePlugin(e){if(S)throw new Error("Use the initialized World instance unusePlugin, not static methods.");{const t=b.indexOf(k.ValidatePlugin(b,e,!0));b.splice(t)}}unusePlugin(e){this.removePlugin(e)}removePlugin(e){(e=k.ValidatePlugin(this.plugins,e,!0)).type===n.PluginTypes.Collision?this.collisionManager.removePlugin(e):e.type===n.PluginTypes.GameObject&&this.gameObjectManager.removePlugin(e);const t=this.plugins.indexOf(e);if(t<0)throw new Error(`Could not find plugin ${e}`);this.plugins.splice(t,1),this.plugins.length}reapplyMapPlugins(){}static init(e,t,i){S=!0;const s={chunkVisibilityInterval:.1,camera:{},resolutionSettings:null};i=i?h.mergeOptions(i,s):s;const n=new k(e);for(let e=0;e<b.length;e++)n.use(b[e],b[e].__opts),delete b.opts;return b.length=0,"undefined"!=typeof window&&window.___plugins&&delete window.___plugins,n._init(e,t,i)}_init(e,t,i){return s(this,void 0,void 0,(function*(){if(this.collisionSystem!==this.collisionManager.collisionSystem&&this.collisionManager.setCollisionSystem(this.collisionSystem),this.renderer=t,i.chunkVisibilityInterval&&(v=i.chunkVisibilityInterval),this.flags={indexedDB:h.indexedDB_enabled(),localStorage:"undefined"!=typeof localStorage,webWorker:"undefined"!=typeof Worker,maxTextureSize:h.resolveMaxTextureSize(t),webGl:1===t.type},this.initialized)throw new Error("World already initialized.");const s=yield h.httpGetAsync(this.basePath+"/meta.json");this.worldMetaData=s;for(let e in s.propSeqToNameLookup)this.seqToProp[e]=s.propSeqToNameLookup[e];for(let e in s.colTags)this.seqToTag[s.colTags[e]]=e;if(this.collisionManager.reapplyPlugins(),this.reapplyMapPlugins(),this.collisionManager.init(this.seqToTag),this.mapsInitData=[],this.worldMetaData.maps.forEach((e,t)=>{e.forEach(e=>{this.mapsInitData.push(Object.assign(Object.assign({},e),{size:t}))})}),delete this.worldMetaData.maps,!s)throw new Error("Failed getting meta data on path"+this.basePath);if(this.flags.indexedDB&&(this.indexDbLoader=new d.Loader(`__ty__${s.world}`),yield this.indexDbLoader.initialize(),this.flags.webWorker)){if(this.chunkWorker=new p.ChunkLoaderWorker,(yield this.chunkWorker.initWorld(s.world,e+"/maps",s.tileSizeSeqLookup,this.seqToTag,this.seqToProp))!==g.ResultCodes.SUCCESS)throw new Error("didnt get success.")}return this.interfaceManager=new w.InterfaceManager(this.interfaceStage,this.renderer,this.indexDbLoader),this.addTextureToInterfaceAtlas=this.interfaceManager.addTextureToInterfaceAtlas.bind(this.interfaceManager),this.loadInterfaceTexture=this.interfaceManager.loadTexture.bind(this.interfaceManager),this.addInterfaceItem=this.interfaceManager.addInterfaceItem.bind(this.interfaceManager),this.removeInterfaceItem=this.interfaceManager.removeInterfaceItem.bind(this.interfaceManager),this.clearInterface=this.interfaceManager.clearInterface.bind(this.interfaceManager),yield this.gameObjectManager.init(this.renderer,this.gameStage,this.worldMetaData,this.flags,this.indexDbLoader),this.offTaggedGameObjectAdded=this.gameObjectManager.offTaggedGameObjectAdded.bind(this.gameObjectManager),this.offTaggedGameObjectRemoved=this.gameObjectManager.offTaggedGameObjectRemoved.bind(this.gameObjectManager),this.offGameObjectAdded=this.gameObjectManager.offGameObjectAdded.bind(this.gameObjectManager),this.offGameObjectRemoved=this.gameObjectManager.offGameObjectRemoved.bind(this.gameObjectManager),this.tileManager=new a.TileManager(this.basePath+"/tilesets",s.tilesets,s.tileSizeSeqLookup,this.flags,this.indexDbLoader),yield this.tileManager.init(),this.playerCamera=new c.PlayerCamera(i.camera,this.gameStage,this.flags,this.renderer),this.bindCameraCenter=this.playerCamera.bindCameraCenter.bind(this.playerCamera),this.screenToWorld=this.playerCamera.screenToWorld.bind(this.playerCamera),this.worldToScreen=this.playerCamera.worldToScreen.bind(this.playerCamera),this.resolutionManager=new x.ResolutionManager(this.playerCamera,i.resolutionSettings),this.chunkManager=new u.ChunkManager(this.basePath,t,s,this.mapsInitData,this.seqToTag,this.collisionManager,this.gameObjectManager,this.tileManager,this.playerCamera,this.indexDbLoader,this.chunkWorker),yield this.chunkManager.init(),this.loadedMap=new r.default(this.gameStage,t,this.flags,this.tileManager,this.chunkManager),this.render=this.renderer.render.bind(this.renderer,this.mainStage),this.initialized=!0,this}))}updateMassive(e){this.elapsed+=e,this.elapsedCol+=e,this.elapsed>v&&(this.elapsed=0,this.chunkIteration%2?(this.chunkManager.updateAlmostVisibleChunks(e),this.chunkIteration++):(this.chunkManager.updateVisibleChunks(e),this.chunkIteration=1)),this.chunkManager.nextBatch(),this.playerCamera.updateStage()}updateNoop(e){}updateMedium(e){this.playerCamera.updateStage()}updateSmall(e){this.playerCamera.updateStage()}get isLoadingMap(){return this._isLoadingMap}get isReady(){return!this._isLoadingMap&&!!this.currentMap}loadMap(e,t){var i;return s(this,void 0,void 0,(function*(){if(this._isLoadingMap)throw new Error(`Can not load new map: ${e} until current map: ${this.currentMap} is finished loading`);if(e==this.currentMap)return!0;if(this.currentMap)for(let t=0;t<this._onBeforeMapDestroyedListeners.length;t++)this._onBeforeMapDestroyedListeners[t](this.currentMap,e);if(this.gameStage.visible=!1,this.mapLoadCount++,this._isLoadingMap=!0,this.currentMap=e,this.elapsed=0,this.chunkIteration=0,!this.initialized)throw new Error("Initialize world before loading maps.");this.updateChunks=this.updateNoop.bind(this);const s=this.mapsInitData.find(t=>t.id===e);if(!s)throw new Error(`Could not find init data for map ${e}`);let n=this.chunkManager.getMapMetaData(e,s.ts);if(!n&&(this.cachedMapMetaData[e]||(this.cachedMapMetaData[e]=yield this.chunkManager.requestMapMetaData(e)),n=this.cachedMapMetaData[e],n))throw new Error(`could not find map meta data for ${e}`);const r=this.loadedMap.initialized;if(this.loadedMap.reset(),this.playerCamera.reset(),this.collisionManager.reset(),r)for(let e=0;e<this._onMapDestroyedListeners.length;e++)this._onMapDestroyedListeners[e]();this.collisionManager.initMap(n),yield this.loadedMap.initialize(n),this.resolutionManager.setMapLengths(n.mapW,n.mapH),this.playerCamera.updateMapSize(n.mapW,n.mapH),(null===(i=t)||void 0===i?void 0:i.cameraPosition)&&(this.playerCamera.boundCameraCenter&&(this.playerCamera.boundCameraCenter.x=t.cameraPosition.x,this.playerCamera.boundCameraCenter.y=t.cameraPosition.y),this.playerCamera.updateViewRect(t.cameraPosition.x,t.cameraPosition.y));const a=h.resolveMapSize(n.mapW,n.mapH);this.rebindUpdate(a),yield this.chunkManager.loadMap(s.id,n,this.mapLoadCount),this._isLoadingMap=!1;for(let e=0;e<this._onMapCreatedListeners.length;e++)this._onMapCreatedListeners[e](t);return this.gameStage.visible=!0,!0}))}update(e){this.updateChunks(e),this.updateCollisions(e),this.render()}rebindUpdate(e){switch(e){case l.MapSize.LARGE:case l.MapSize.MEDIUM:this.updateChunks=this.updateMassive.bind(this);break;case l.MapSize.SMALL:this.updateChunks=this.updateSmall.bind(this)}}_onCollision(e,t){}_onChangedMap(){}_onAddedColliders(){}_onAddedObject(){}_onRemovedColliders(){}_onRemovedObjects(){}_onShowChunk(){}_onInitializedChunk(){}_onHideChunk(){}_onDestroyChunk(){}static RadianAngleFromPositions(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static DegreeAngleFromPositions(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}}const M={RECT:l.RuntimeColliderShape.RECT,POLYGON:l.RuntimeColliderShape.POLYGON,POINT:l.RuntimeColliderShape.POINT,CIRCLE:l.RuntimeColliderShape.CIRCLE,LINE:l.RuntimeColliderShape.LINE,ELIPSE:l.RuntimeColliderShape.ELIPSE};t.ColliderShapes=M,k.ColliderShapes=M,t.default=k},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Collision="collision",e.Render="render",e.GameObject="game_object",e.Map="map"}(t.PluginTypes||(t.PluginTypes={}))},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(16);t.default=class{constructor(e,t,i,s,n){this.managedPlugins=[],this.initialized=!1,this.panRight=!0,this.layerStages=[],this.stage=e,this.tileManager=s,this.chunkManager=n,this.flags=i,this.tileManager=s,this.initSectionManagerEventHandlers()}removeImageHandlersNoPlugins(e){for(let t=0;t<e.length;t++)if(e[t])for(let i=0;i<e[t].length;i++)e[t][i]&&this.layerStages[t].removeMapSprite(e[t][i])}addImageHandlersNoPlugins(e){for(let t=0;t<e.length;t++)if(e[t])for(let i=0;i<e[t].length;i++)e[t][i]&&(e[t][i].x=e[t][i].worldX,e[t][i].y=e[t][i].worldY,this.layerStages[t].addMapSprite(e[t][i]))}initSectionManagerEventHandlers(){this.chunkManager.on("add-subchunk-layer-sprite",({layerIndex:e,sprite:t})=>{this.layerStages[e].addSubChunk(t)}),this.chunkManager.on("remove-map-chunks",e=>{for(let t=0;t<e.length;t++)for(let i=0;i<e[t].length;i++)e[t][i]&&this.layerStages[t].removeChild(e[t][i])}),this.chunkManager.on("add-map-sub-chunks",e=>{for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){const t=this.layerStages[e],s=i[e];s&&s.parent!==t&&t.addSubChunk(s)}}}),this.chunkManager.on("add-map-chunk-layers",e=>{for(let t=0;t<e.length;t++)e[t]&&this.layerStages[t].addSubChunk(e[t])}),this.chunkManager.on("add-map-chunks",e=>{for(let t=0;t<e.length;t++)this.layerStages[t].addSubChunks(e[t])})}updateStages(){for(let e=0;e<this.metaData.layerTileLayerOrder.length;e++)this.panRight?(this.layerStages[e].x-=1,this.layerStages[e].y-=1,e===this.metaData.layerTileLayerOrder.length-1&&this.layerStages[e].x<=-250&&(this.panRight=!1)):(this.layerStages[e].x+=1,this.layerStages[e].y+=1,e===this.metaData.layerTileLayerOrder.length-1&&this.layerStages[e].x>=0&&(this.panRight=!0))}initialize(e){return s(this,void 0,void 0,(function*(){if(this.initialized)throw new Error("TileMap is already initialized, call either map.reset or map.destroy before initializing a new map.");this.metaData=e;for(let t=0;t<e.layerTileLayerOrder.length;t++)this.layerStages.push(new n.LayerContainer),this.stage.addChild(this.layerStages[t]);return this.initialized=!0,!0}))}setPlayerViewRect(e,t){}setPlayer(e){}addSprite(e){}removeSprite(e){}reset(){if(this.initialized){this.managedPlugins.forEach(e=>{}),this.initialized=!1,this.chunkManager.reset();for(let e=0;e<this.metaData.layerTileLayerOrder.length;e++)this.layerStages[e]&&this.layerStages[e].destroyLayer();this.layerStages.length=0,this.initialized=!1}}sleep(e){}removeColliderType(e){}addColliderType(e){}addColliderToSprite(e,t){}addCollider(e){}onBlockerDataAdded(e){this.onBlockerDataAddedHandler=e}onBlockerDataRemoved(e){this.onBlockerDataRemovedHandler=e}_onBlockerDataAdded(e,t){this.onBlockerDataAddedHandler&&this.onBlockerDataAddedHandler(e,t)}_onBlockerDataRemoved(e,t){this.onBlockerDataRemovedHandler&&this.onBlockerDataAddedHandler(e,t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends PIXI.Container{constructor(e){super(),this.subChunks=[],e&&(this.tags=e)}destroyLayer(){if(this.objectContainer){const e=Array.from(this.objectContainer.children);for(let t=0;t<e.length;t++)delete e[t].layerIndex,delete e[t].layerParent,this.objectContainer.removeChild(e[t]);this.destroyObjectContainer()}this.children&&Array.from(this.children).forEach(e=>{e.parent.removeChild(e),e.destroy()}),this.parent&&this.parent.removeChild(this),this.destroy()}addSubChunk(e){if(this.objectContainer){if(this.children.pop()!==this.objectContainer)throw new Error("Last child should always be object container.");this.addChild(e),this.addChild(this.objectContainer)}else this.addChild(e)}addSubChunks(e){if(this.objectContainer){if(this.children.pop()!==this.objectContainer)throw new Error("Last child should always be object container.");for(let t=0;t<e.length;t++)this.addChild(e[t]);this.addChild(this.objectContainer)}else for(let t=0;t<e.length;t++)this.addChild(e[t])}destroyObjectContainer(){this.removeChild(this.objectContainer),this.objectContainer.destroy(),delete this.objectContainer}removeMapSprite(e,t=!1){const i=e.delegatedSprite||e;if(i.parent!==this.objectContainer)throw console.error(e),new Error("Error removing sprite, it wasnt a child");if(delete e.layerParent,delete e.layerIndex,!t&&e.removeFromMap(),this.objectContainer.removeChild(i),!this.objectContainer.children.length)return this.destroyObjectContainer(),!0}addMapSprite(e){const t=e.delegatedSprite||e;this.objectContainer?e.zIndex<this.objectContainer.children[this.objectContainer.children.length-1].zIndex?(this.objectContainer.addChild(t),this.objectContainer.children.sort((e,t)=>e.sortByY&&t.sortByY?e.ySortPoint-t.ySortPoint:e.sortByY&&!t.sortByY?t.zIndex===Number.MAX_SAFE_INTEGER?-1:e.ySortPoint-t.ySortPoint:!e.sortByY&&t.sortByY?e.zIndex===Number.MAX_SAFE_INTEGER?1:e.ySortPoint-t.ySortPoint:e.zIndex-t.zIndex)):this.objectContainer.addChild(t):(this.objectContainer=new PIXI.Container,this.addChild(this.objectContainer),this.objectContainer.addChild(t))}}t.LayerContainer=s},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(18);t.TileManager=class{constructor(e,t,i,s,n){this.tilesetMetaDataToLoad={},this.tilesets=[],this.spritePool=[],this.cachedTileColliders={},this.tileSizeSeqLookup=[],this.baseUrl=e,this.tileSizeSeqLookup=i,this.tilesets=new Array(i.length/2).fill(1).map(()=>[]),this.indexedDbEnabled=s.indexedDB,this.flags=s,this.loader=new PIXI.loaders.Loader,this.tilesetMetaData=t,this.indexDbLoader=n}init(){return s(this,void 0,void 0,(function*(){for(let e=0;e<this.tilesetMetaData.length;e++){const t=this.tilesetMetaData[e];yield this.loadTileset(t)}return!0}))}removeTileset(e,t){}loadTileset(e){return s(this,void 0,void 0,(function*(){try{const t=new n.Tileset(e,this.loader,this.baseUrl,this.indexDbLoader);yield t.loadResources();let i=-1;for(let e=0;e<this.tileSizeSeqLookup.length;e+=2)if(this.tileSizeSeqLookup[e]===t.tilesetData.tileWidth&&this.tileSizeSeqLookup[e+1]===t.tilesetData.tileHeight){i=e/2;break}if(i<0)throw new Error("Could not find the correct seq for tileset: "+JSON.stringify(e));return this.tilesets[i].push(t),!0}catch(e){throw console.error(e),e}}))}getTile(e,t){let i,s;for(let n=0;n<this.tilesets[e].length;n++){const{startIndex:r,endIndex:a}=this.tilesets[e][n];t>=r&&t<a&&(i=this.tilesets[e][n].getTileTexture(t),s=this.tilesets[e][n].getColliders(t))}let n=this.spritePool.pop();return n||(n=new PIXI.Sprite,n.removeFromMap=e=>{delete n.colliders,n.visible=!1,n.parent&&n.parent.removeChild(n),n.texture=null,n.rotation=0,n.scale.set(1,1),n.anchor.set(0,0),this.spritePool.push(n)}),n.colliders=s,n.texture=i,n.visible=!0,n}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1);t.Tileset=class{constructor(e,t,i,s){this.createdTexturesLookup={},this.spritePool={},this.tileColliderLookup={},this.loaded=!1,this.indexedDbLoader=s,this.baseUrl=i,this.tilesetId=e.id,this.jsonUrl=this.baseUrl+"/"+n.removeFileExtension(this.tilesetId)+".json",this.pngUrl=this.baseUrl+"/"+n.removeFileExtension(this.tilesetId)+".png",this.lastUpdateTsData=e.dataTs,this.lastUpdateTsImage=e.imageTs,this.loader=t||PIXI.loader}get tilesetTextureKey(){return`ts_${this.tilesetId}_texture`}get tilesetLastUpdateImageKey(){return`ts_${this.tilesetId}_last_update_image`}get tilesetLastUpdateDataKey(){return`ts_${this.tilesetId}_last_update_data`}destroy(){}makeTexture(e){let t=(e-=this.startIndex)%this.tilesetColumns*this.tileWidth,i=Math.floor(e/this.tilesetColumns)*this.tileHeight;return new PIXI.Texture(this.tilesetTexture.baseTexture,new PIXI.Rectangle(t,i,this.tileWidth,this.tileHeight))}loadTexture(){return s(this,void 0,void 0,(function*(){if("undefined"==typeof localStorage||!this.indexedDbLoader)return new Promise((e,t)=>{this.loader.load((t,i)=>(this.tilesetTexture=i[this.tilesetTextureKey].texture,e(!0)))});{const e=()=>s(this,void 0,void 0,(function*(){return this.loader.add(this.tilesetTextureKey,this.pngUrl),new Promise((e,t)=>{this.loader.load((t,i)=>{this.tilesetTexture||(this.tilesetTexture=i[this.tilesetTextureKey].texture),this.indexedDbLoader.saveTexture(this.pngUrl,i[this.tilesetTextureKey].texture).then(()=>(localStorage.setItem(this.tilesetLastUpdateImageKey,`${this.lastUpdateTsImage+1}`),e(!0)))})})})),t=localStorage.getItem(this.tilesetLastUpdateImageKey);if(t&&parseInt(t)>this.lastUpdateTsImage)return this.tilesetTexture=yield this.indexedDbLoader.loadTexture(this.pngUrl),this.tilesetTexture||(yield e()),!0;yield e()}}))}loadData(){return s(this,void 0,void 0,(function*(){if("undefined"!=typeof localStorage&&this.indexedDbLoader){const e=()=>s(this,void 0,void 0,(function*(){if(this.tilesetData=yield n.httpGetAsync(this.jsonUrl),!this.tilesetData)throw console.error(this),new Error("Can not load tileset data");yield this.indexedDbLoader.saveJson(this.jsonUrl,this.tilesetData),localStorage.setItem(this.tilesetLastUpdateDataKey,`${this.lastUpdateTsData+1}`)})),t=localStorage.getItem(this.tilesetLastUpdateDataKey);t&&parseInt(t)>this.lastUpdateTsData?(this.tilesetData=yield this.indexedDbLoader.loadJson(this.jsonUrl),this.tilesetData||(yield e()),this.lastCachedTs=t?parseInt(t):0):yield e()}else this.tilesetData=yield n.httpGetAsync(this.jsonUrl);return this.startIndex=this.tilesetData.startingIndex,!0}))}loadResources(){return s(this,void 0,void 0,(function*(){yield Promise.all([this.loadData(),this.loadTexture()]),this.loaded=!0,this.tileWidth=this.tilesetData.tileWidth,this.tileHeight=this.tilesetData.tileHeight,this.imageWidth=this.tilesetTexture.width,this.imageHeight=this.tilesetTexture.height,this.tilesetColumns=this.imageWidth/this.tileWidth;const e=Math.ceil(this.imageWidth/this.tileWidth)*Math.ceil(this.imageHeight/this.tileHeight);return this.endIndex=this.tilesetData.startingIndex+e,!0}))}getColliders(e){for(let t=0;t<this.tilesetData.tileData.length;t++){if(this.tilesetData.tileData[t].id==e)return this.tilesetData.tileData[t];if(this.tilesetData.tileData[t].id>e)return null}return null}getTileTexture(e){let t=this.createdTexturesLookup[e];return t||(t=this.makeTexture(e),this.createdTexturesLookup[e]=t),t}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(4),r=i(1),a=i(9),o=i(23);t.GameObjectManager=class{constructor(e,t){this.taggedGameObjectAddedListeners={},this.taggedGameObjectRemovedListeners={},this.cachedImageData={},this.pendingLoads={},this.lastTouchedTimestamps={},this.userGameObjectAtlasses=[],this.cachedImageTextures={},this.userTextures=[],this.userTextureCacheTimestampLookup={},this.textureAtlasses=[],this.gameObjPool=[],this.installedPlugins=[],this.baseUrl=e+"/images",this.loader=new PIXI.loaders.Loader,this.collisionManager=t,this.tagSeqToId=this.collisionManager.seqToTag}reinit(e){this.imageData=e,this.removeUntouched()}removePlugin(e){const t=this.installedPlugins.indexOf(e);if(t<0)throw new Error(`Trying to remove non installed plugin: ${e.name}`);if(e.onGameObjectAdded&&this.offGameObjectAdded(e.onGameObjectAdded),e.onGameObjectRemoved&&this.offGameObjectRemoved(e.onGameObjectRemoved),e.onTaggedGameObjectAdded)for(let t in e.onTaggedGameObjectAdded)this.offTaggedGameObjectAdded(t,e.onTaggedGameObjectAdded[t]);if(e.onTaggedGameObjectRemoved)for(let t in e.onTaggedGameObjectRemoved)this.offTaggedGameObjectRemoved(t,e.onTaggedGameObjectRemoved[t]);this.installedPlugins.splice(t,1)}addPlugin(e,t,i){if(this.installedPlugins.includes(e))throw new Error(`Already installed plugin: ${e.name}`);if(e.init&&e.init(t,i),e.onGameObjectAdded&&(e.onGameObjectAdded=e.onGameObjectAdded.bind(e),this.onGameObjectAdded(e.onGameObjectAdded)),e.onGameObjectRemoved&&(e.onGameObjectRemoved=e.onGameObjectRemoved.bind(e),this.onGameObjectRemoved(e.onGameObjectRemoved)),e.onTaggedGameObjectAdded)for(let t in e.onTaggedGameObjectAdded)e.onTaggedGameObjectAdded[t]=e.onTaggedGameObjectAdded[t].bind(e),this.onTaggedGameObjectAdded(t,e.onTaggedGameObjectAdded[t]);if(e.onTaggedGameObjectRemoved)for(let t in e.onTaggedGameObjectRemoved)e.onTaggedGameObjectRemoved[t]=e.onTaggedGameObjectRemoved[t].bind(e),this.onTaggedGameObjectRemoved(t,e.onTaggedGameObjectRemoved[t])}isAnimatingImage(e){return!1}addTextures(e){}getImageData(e){return s(this,void 0,void 0,(function*(){if(e in this.cachedImageData)return this.cachedImageData[e]?JSON.parse(this.cachedImageData[e]):null;const t=yield this.loadImageColliderData(e);return t?(this.cachedImageData[e]=JSON.stringify({colliders:t}),{colliders:t}):(this.cachedImageData[e]=null,null)}))}checkForImageInCache(e){const t=this.gameObjectImageAtlas.getTexture(e);return t||(this.cachedImageTextures[e]?this.cachedImageTextures[e]:null)}getMapImageTexture(e){return s(this,void 0,void 0,(function*(){const t=`${this.baseUrl}/i_${e}`,i=this.checkForImageInCache(t);if(i)return i;if(this.pendingLoads[e])return new Promise((t,i)=>{this.pendingLoads[e].push(e=>(console.error("Resolving!!!"),t(e)))});this.pendingLoads[e]=[];const s=yield this.loadImageTexture(t);if(delete this.pendingLoads[e],s){if(s.width<=this.flags.maxTextureSize&&s.height<=this.flags.maxTextureSize)return this.gameObjectImageAtlas.addTexture(t,s,null,!0);this.cachedImageTextures[t]=s}return this.cachedImageTextures[t]}))}reset(){this.gameObjPool.length>20&&(this.gameObjPool.length=20)}init(e,t,i,n,r){return s(this,void 0,void 0,(function*(){this.flags=n,this.gameStage=t,this.renderer=e,this.worldMetaData=i,this.indexedDbLoader=r,this.gameObjectImageAtlas=a.AtlasFactory(e,r),yield this.updateStorage()}))}parseColliderData(e){return Object.keys(e).forEach(t=>{e[t].forEach(e=>{e.tags&&e.tags.length&&(e.tags=e.tags.map(e=>{if(!this.tagSeqToId[e])throw new Error(`Could not find tag ${e}`);return this.tagSeqToId[e]}))})}),e}loadImagesHttp(e){return s(this,void 0,void 0,(function*(){const t=yield r.httpGetAsync(`${this.baseUrl}/atlas_data.json`),i={atlasData:t.atlasData,colliderData:t.colliderData?this.parseColliderData(t.colliderData):{},atlasImages:[]};return i.atlasImages=e?yield Promise.all(e.map(e=>s(this,void 0,void 0,(function*(){const t=yield r.httpGetAsync(`${this.baseUrl}/atlas_images/atlas_${e}.png`,!1),i=yield r.getTextureFromBlob(t);return{atlasIndex:e,texture:i}})))):yield Promise.all(i.atlasData.map(e=>s(this,void 0,void 0,(function*(){const t=yield r.httpGetAsync(`${this.baseUrl}/atlas_images/atlas_${e.aIdx}.png`,!1),i=yield r.getTextureFromBlob(t);return{atlasIndex:e.aIdx,texture:i}})))),i}))}splitAndSaveImage(e,t,i,n,r,a,o){return s(this,void 0,void 0,(function*(){const s=new PIXI.Texture(a,new PIXI.Rectangle(t,i,n,r)),h=new PIXI.Sprite(s),l=this.renderer.extract.base64(h);return o?yield this.indexedDbLoader.saveJson(`${this.baseUrl}/i_${e}.json`,o):yield this.indexedDbLoader.deleteItem(`${this.baseUrl}/i_${e}.json`),this.indexedDbLoader.saveImageData(`${this.baseUrl}/i_${e}`,l)}))}loadImageColliderData(e){return s(this,void 0,void 0,(function*(){let t=null;const i=`${this.baseUrl}/i_${e}.json`;if(this.flags.indexedDB)try{t=yield this.indexedDbLoader.loadJson(i)}catch(e){try{t=yield r.httpGetAsync(i)}catch(e){console.error(e)}}else try{t=yield r.httpGetAsync(i)}catch(e){console.error(e)}return t}))}getCachedUserTextureTimestamp(){return s(this,void 0,void 0,(function*(){const e=()=>{this.clearUserTextureCacheTimeout=setTimeout(()=>{this.clearUserTextureCacheTimeout=null,this.userTextureCacheNeedsResave&&(this.userTextureCacheNeedsResave=!1,this.indexedDbLoader.saveJson("_user_texture_cache_data",this.userTextureCacheTimestampLookup).then(()=>{delete this.userTextureCacheTimestampLookup})),delete this.userTextureCacheTimestampLookup},5e3)};return this.userTextureCacheTimestampLookup?(this.clearUserTextureCacheTimeout&&clearTimeout(this.clearUserTextureCacheTimeout),e(),this.userTextureCacheTimestampLookup):this.indexedDbLoader?(this.userTextureCacheTimestampLookup=yield this.indexedDbLoader.loadJson("_user_texture_cache_data"),this.userTextureCacheTimestampLookup||(this.userTextureCacheTimestampLookup={},yield this.indexedDbLoader.saveJson("_user_texture_cache_data",this.userTextureCacheTimestampLookup)),e(),this.userTextureCacheTimestampLookup):null}))}getTexture(e,t){return s(this,void 0,void 0,(function*(){t=t||{addToAtlas:!0};const i=this.checkForImageInCache(e);if(i)return i;if(t.cacheFor&&this.indexedDbLoader){const i=yield this.getCachedUserTextureTimestamp();if(i[e]&&i[e]<Date.now()){this.pendingLoads[e]=[];const t=yield this.loadImageTexture(e);return delete this.pendingLoads[e],t}{const i=yield r.httpGetAsync(e,!1);if(!i)throw new Error(`Could not find image texture at path: ${e}`);yield this.indexedDbLoader.saveImageData(e,i);const s=yield r.getTextureFromBlob(i);return(yield this.getCachedUserTextureTimestamp())[e]=Date.now()+t.cacheFor,this.userTextureCacheNeedsResave=!0,t.addToAtlas&&s.width<this.flags.maxTextureSize&&s.height<this.flags.maxTextureSize?this.gameObjectImageAtlas.addTexture(e,s,"runtime",!0):s}}{const i=yield r.httpGetAsync(e,!1);if(!i)throw new Error(`Could not find image texture at path: ${e}`);const s=yield r.getTextureFromBlob(i);return t.addToAtlas&&s.width<this.flags.maxTextureSize&&s.height<this.flags.maxTextureSize?this.gameObjectImageAtlas.addTexture(e,s,"runtime",!0):s}}))}loadImageTexture(e){var t;return s(this,void 0,void 0,(function*(){let i="";if(this.flags.indexedDB&&(i=yield this.indexedDbLoader.loadImageData(e)),i||(console.warn("Did not load image data ",e,"from indexddb, going to server."),i=yield r.httpGetAsync(e,!1)),!i)throw new Error(`Failed all method of getting image ${e}`);const s=yield r.getTextureFromDataUrl(i);return null===(t=this.pendingLoads[e])||void 0===t||t.forEach(e=>{e(s)}),delete this.pendingLoads[e],s}))}updateStorage(){return s(this,void 0,void 0,(function*(){const e=[],t=[];if(this.flags.localStorage&&this.flags.indexedDB){let i=localStorage.getItem(`${this.baseUrl}/update_timestamps`);const s=[];if(i){const n=JSON.parse(i);for(let i=0;i<n.length;i++){if(!this.worldMetaData.images[i]){t.push(i);continue}const n=this.worldMetaData.images[i];s.push(n),e.push(i)}const r=i.length-this.worldMetaData.images.length;if(r<0){const t=i.length+Math.abs(r);for(let n=i.length;n<t;n++)e.push(t),s.push(this.worldMetaData.images[n])}}else for(let t=0;t<this.worldMetaData.images.length;t++)s.push(this.worldMetaData.images[t]),e.push(t);if(e.length){localStorage.setItem(`${this.baseUrl}/update_timestamps`,JSON.stringify(s));const{atlasData:t,atlasImages:i,colliderData:n}=yield this.loadImagesHttp(e);yield Promise.all(i.map(({atlasIndex:e,texture:i})=>{const s=t.find(t=>t.aIdx==e);return!(!s||!s.images)&&s.images.map(({id:e,x:t,y:s,w:r,h:a})=>this.splitAndSaveImage(e,t,s,r,a,i.baseTexture,n[e]))}))}}}))}onGameObjectAdded(e){this.gameObjectAddedListeners?this.gameObjectAddedListeners.push(e):this.gameObjectAddedListeners=[e]}onGameObjectRemoved(e){this.gameObjectRemovedListeners?this.gameObjectRemovedListeners.push(e):this.gameObjectRemovedListeners=[e]}offGameObjectAdded(e){for(let t=0;t<this.gameObjectAddedListeners.length;t++)if(this.gameObjectAddedListeners[t]===e)return this.gameObjectAddedListeners.splice(t,1),this.gameObjectAddedListeners.length||delete this.gameObjectAddedListeners,!0;return!1}offGameObjectRemoved(e){for(let t=0;t<this.gameObjectRemovedListeners.length;t++)if(this.gameObjectRemovedListeners[t]===e)return this.gameObjectRemovedListeners.splice(t,1),this.gameObjectRemovedListeners.length||delete this.gameObjectRemovedListeners,!0;return!1}onTaggedGameObjectAdded(e,t){this.taggedGameObjectAddedListeners[e]?this.taggedGameObjectAddedListeners[e].push(t):this.taggedGameObjectAddedListeners[e]=[t]}offTaggedGameObjectAdded(e,t){const i=this.taggedGameObjectAddedListeners[e];if(!i)return!1;for(let s=0;s<i.length;s++)if(i[s]===t)return i.splice(s,1),i.length||delete this.taggedGameObjectAddedListeners[e],!0}onTaggedGameObjectRemoved(e,t){this.taggedGameObjectRemovedListeners[e]?this.taggedGameObjectRemovedListeners[e].push(t):this.taggedGameObjectRemovedListeners[e]=[t]}offTaggedGameObjectRemoved(e,t){const i=this.taggedGameObjectRemovedListeners[e];if(!i)return!1;for(let s=0;s<i.length;s++)if(i[s]===t)return i.splice(s,1),i.length||delete this.taggedGameObjectRemovedListeners[e],!0}addGameObject(e){var t,i,s;let r=this.gameObjPool.pop();return r||(r=new n.GameObject(this.gameObjPool,this.collisionManager,this.gameStage,this)),null===(t=this.gameObjectAddedListeners)||void 0===t||t.forEach(e=>e(r)),null===(s=null===(i=e)||void 0===i?void 0:i.tags)||void 0===s||s.forEach(e=>{var t;return null===(t=this.taggedGameObjectAddedListeners[e])||void 0===t?void 0:t.forEach(e=>e(r))}),r.init(e),r}_getMapImage(e,t,i,r,a){var h,l;return s(this,void 0,void 0,(function*(){const s=yield this.getMapImageTexture(e);let d;if(r>999999){const{id:e,flips:t}=o.decodeRotation(r);r=e,d=t}let u=yield this.getImageData(e);u?(u.layer=a,u.position={x:t,y:i},u.zIndex=r,u.flips=d):u={layer:a,position:{x:t,y:i},zIndex:r,flips:d},u.texture=s;let c=this.gameObjPool.pop();return c||(c=new n.GameObject(this.gameObjPool,this.collisionManager,this.gameStage,this)),c.init(u),null===(h=this.gameObjectAddedListeners)||void 0===h||h.forEach(e=>e(c)),null===(l=u.tags)||void 0===l||l.forEach(e=>{var t;return null===(t=this.taggedGameObjectAddedListeners[e])||void 0===t?void 0:t.forEach(e=>e(c))}),c}))}removeImage(e){}removeUntouched(e=3e4){const t=Object.keys(this.lastTouchedTimestamps),i=Date.now();for(let s=0;s<t.length;s++){i-this.lastTouchedTimestamps[t[s]]>=e&&this.removeImage(t[s])}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(21);class n extends s.BaseGameObjectAtlas{constructor(e,t){super(2048,e)}removeTextureFromAtlas(e,t,i){if(!(e in this.cachedTextures))throw new Error(`Could not find id ${e}`);this.cachedTextures[e].destroy(!1),delete this.cachedTextures[e],this.renderer.bindRenderTexture(this.atlasses[i],null);const s=this.renderer.gl;s.enable(s.SCISSOR_TEST),s.scissor(t.x,t.y,t.w,t.h),this.renderer.clear(),this.renderer.bindRenderTexture()}}t.WebGlGameObjectAtlas=n},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(22);t.BaseGameObjectAtlas=class{constructor(e,t,i){this.nextOpenPositions=[],this.atlasses=[],this.cachedTextures={},this.loader=i,this.maxTextureSize=e>=4096?e-e%4096:e>=2048?e-e%2048:e>=1024?e-e%1024:e>=512?e-e%512:256,this.renderer=t,this.packer=new n.MaxRectsPacker(this.maxTextureSize,this.maxTextureSize,0,{smart:!0,pot:!0,allowRotation:!1,tag:!0})}getTexture(e){return this.cachedTextures[e]}addTexture(e,t,i,s=!1){if(e in this.cachedTextures)throw new Error("Trying to add texture twice.");const n={id:e,width:t.width,height:t.height};i&&(n.tag=i);const r=this.packer.add(n);let a=-1;for(let t=0;t<this.packer.bins.length;t++){for(let i=0;i<this.packer.bins[t].rects.length;i++)if(this.packer.bins[t].rects[i].id===e){a=t;break}if(a>-1)break}if(a<0)throw new Error(`No atlas index found for image after adding texture ${e}`);this.atlasses[a]||this.atlasses.push(PIXI.RenderTexture.create(this.maxTextureSize,this.maxTextureSize));const o=this.atlasses[a];if(!o)throw new Error("Should have texture atlas at this point");const h=new PIXI.Sprite(t);return h.setTransform(r.x,r.y),this.renderer.render(h,o,!1),this.cachedTextures[e]=new PIXI.Texture(o.baseTexture,new PIXI.Rectangle(r.x,r.y,r.width,r.height)),s&&h.destroy({texture:!0,baseTexture:!0}),this.cachedTextures[e]}loadSheet(e){return s(this,void 0,void 0,(function*(){if(!this.loader)throw new Error("Indexeddb is not supported.");return!1}))}saveSheet(e){return s(this,void 0,void 0,(function*(){if(!this.loader)throw new Error("Indexeddb is not supported.");return!1}))}}},function(e,t,i){"use strict";i.r(t),i.d(t,"Bin",(function(){return n})),i.d(t,"MaxRectsBin",(function(){return r})),i.d(t,"MaxRectsPacker",(function(){return l})),i.d(t,"OversizedElementBin",(function(){return a})),i.d(t,"PACKING_LOGIC",(function(){return h})),i.d(t,"Rectangle",(function(){return s}));class s{constructor(e=0,t=0,i=0,s=0,n=!1,r){this.oversized=!1,this._rot=!1,this._allowRotation=void 0,this._dirty=0,this._width=e,this._height=t,this._x=i,this._y=s,this._data={},this._rot=n,this._allowRotation=r}static Collide(e,t){return e.collide(t)}static Contain(e,t){return e.contain(t)}area(){return this.width*this.height}collide(e){return e.x<this.x+this.width&&e.x+e.width>this.x&&e.y<this.y+this.height&&e.y+e.height>this.y}contain(e){return e.x>=this.x&&e.y>=this.y&&e.x+e.width<=this.x+this.width&&e.y+e.height<=this.y+this.height}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._dirty++)}get height(){return this._height}set height(e){e!==this._height&&(this._height=e,this._dirty++)}get x(){return this._x}set x(e){e!==this._x&&(this._x=e,this._dirty++)}get y(){return this._y}set y(e){e!==this._y&&(this._y=e,this._dirty++)}get rot(){return this._rot}set rot(e){if(!1!==this._allowRotation&&this._rot!==e){const t=this.width;this.width=this.height,this.height=t,this._rot=e,this._dirty++}}get allowRotation(){return this._allowRotation}set allowRotation(e){this._allowRotation!==e&&(this._allowRotation=e,this._dirty++)}get data(){return this._data}set data(e){null!==e&&e!==this._data&&(this._data=e,"object"==typeof e&&e.hasOwnProperty("allowRotation")&&(this._allowRotation=e.allowRotation),this._dirty++)}get dirty(){return this._dirty>0}setDirty(e=!0){this._dirty=e?this._dirty+1:0}}class n{constructor(){this._dirty=0}get dirty(){return this._dirty>0||this.rects.some(e=>e.dirty)}setDirty(e=!0){if(this._dirty=e?this._dirty+1:0,!e)for(let e of this.rects)e.setDirty&&e.setDirty(!1)}}class r extends n{constructor(e=o,t=o,i=0,n={smart:!0,pot:!0,square:!0,allowRotation:!1,tag:!1,border:0,logic:h.MAX_EDGE}){super(),this.maxWidth=e,this.maxHeight=t,this.padding=i,this.options=n,this.freeRects=[],this.rects=[],this.verticalExpand=!1,this.width=this.options.smart?0:e,this.height=this.options.smart?0:t,this.border=this.options.border?this.options.border:0,this.freeRects.push(new s(this.maxWidth+this.padding-2*this.border,this.maxHeight+this.padding-2*this.border,this.border,this.border)),this.stage=new s(this.width,this.height)}add(...e){let t,i;if(1===e.length){if("object"!=typeof e[0])throw new Error("MacrectsBin.add(): Wrong parameters");i=e[0];let t=i.data&&i.data.tag?i.data.tag:i.tag?i.tag:void 0;if(this.options.tag&&this.tag!==t)return}else{if(t=e.length>2?e[2]:null,this.options.tag){if(t&&this.tag!==t.tag)return;if(!t&&this.tag)return}i=new s(e[0],e[1]),i.data=t,i.setDirty(!1)}const n=this.place(i);return n&&this.rects.push(n),n}repack(){let e=[];this.reset(),this.rects.sort((e,t)=>{const i=Math.max(t.width,t.height)-Math.max(e.width,e.height);return 0===i&&e.hash&&t.hash?e.hash>t.hash?-1:1:i});for(let t of this.rects)this.place(t)||e.push(t);for(let t of e)this.rects.splice(this.rects.indexOf(t),1);return e.length>0?e:void 0}reset(e=!1,t=!1){e&&(this.data&&delete this.data,this.tag&&delete this.tag,this.rects=[],t&&(this.options={smart:!0,pot:!0,square:!0,allowRotation:!1,tag:!1,border:0})),this.width=this.options.smart?0:this.maxWidth,this.height=this.options.smart?0:this.maxHeight,this.border=this.options.border?this.options.border:0,this.freeRects=[new s(this.maxWidth+this.padding-2*this.border,this.maxHeight+this.padding-2*this.border,this.border,this.border)],this.stage=new s(this.width,this.height),this._dirty=0}place(e){let t,i,n=e.data&&e.data.tag?e.data.tag:e.tag?e.tag:void 0;if(!this.options.tag||this.tag===n){if(i=e.hasOwnProperty("_allowRotation")&&void 0!==e.allowRotation?e.allowRotation:this.options.allowRotation,t=this.findNode(e.width+this.padding,e.height+this.padding,i),t){this.updateBinSize(t);let i=this.freeRects.length,s=0;for(;s<i;)this.splitNode(this.freeRects[s],t)&&(this.freeRects.splice(s,1),i--,s--),s++;return this.pruneFreeList(),this.verticalExpand=this.width>this.height,e.x=t.x,e.y=t.y,void 0===e.rot&&(e.rot=!1),e.rot=t.rot?!e.rot:e.rot,this._dirty++,e}if(this.verticalExpand){if(this.updateBinSize(new s(e.width+this.padding,e.height+this.padding,this.border,this.height+this.padding-this.border))||this.updateBinSize(new s(e.width+this.padding,e.height+this.padding,this.width+this.padding-this.border,this.border)))return this.place(e)}else if(this.updateBinSize(new s(e.width+this.padding,e.height+this.padding,this.width+this.padding-this.border,this.border))||this.updateBinSize(new s(e.width+this.padding,e.height+this.padding,this.border,this.height+this.padding-this.border)))return this.place(e)}}findNode(e,t,i){let n,r,a,o=Number.MAX_VALUE;for(let l in this.freeRects)r=this.freeRects[l],r.width>=e&&r.height>=t&&(n=this.options.logic===h.MAX_AREA?r.width*r.height-e*t:Math.min(r.width-e,r.height-t),n<o&&(a=new s(e,t,r.x,r.y),o=n)),i&&r.width>=t&&r.height>=e&&(n=this.options.logic===h.MAX_AREA?r.width*r.height-t*e:Math.min(r.height-e,r.width-t),n<o&&(a=new s(t,e,r.x,r.y,!0),o=n));return a}splitNode(e,t){if(!e.collide(t))return!1;if(t.x<e.x+e.width&&t.x+t.width>e.x){if(t.y>e.y&&t.y<e.y+e.height){let i=new s(e.width,t.y-e.y,e.x,e.y);this.freeRects.push(i)}if(t.y+t.height<e.y+e.height){let i=new s(e.width,e.y+e.height-(t.y+t.height),e.x,t.y+t.height);this.freeRects.push(i)}}if(t.y<e.y+e.height&&t.y+t.height>e.y){if(t.x>e.x&&t.x<e.x+e.width){let i=new s(t.x-e.x,e.height,e.x,e.y);this.freeRects.push(i)}if(t.x+t.width<e.x+e.width){let i=new s(e.x+e.width-(t.x+t.width),e.height,t.x+t.width,e.y);this.freeRects.push(i)}}return!0}pruneFreeList(){let e=0,t=0,i=this.freeRects.length;for(;e<i;){t=e+1;let s=this.freeRects[e];for(;t<i;){let n=this.freeRects[t];if(n.contain(s)){this.freeRects.splice(e,1),e--,i--;break}s.contain(n)&&(this.freeRects.splice(t,1),t--,i--),t++}e++}}updateBinSize(e){if(!this.options.smart)return!1;if(this.stage.contain(e))return!1;let t=Math.max(this.width,e.x+e.width-this.padding+this.border),i=Math.max(this.height,e.y+e.height-this.padding+this.border);if(this.options.allowRotation){const s=Math.max(this.width,e.x+e.height-this.padding+this.border),n=Math.max(this.height,e.y+e.width-this.padding+this.border);s*n<t*i&&(t=s,i=n)}return this.options.pot&&(t=Math.pow(2,Math.ceil(Math.log(t)*Math.LOG2E)),i=Math.pow(2,Math.ceil(Math.log(i)*Math.LOG2E))),this.options.square&&(t=i=Math.max(t,i)),!(t>this.maxWidth+this.padding||i>this.maxHeight+this.padding)&&(this.expandFreeRects(t+this.padding,i+this.padding),this.width=this.stage.width=t,this.height=this.stage.height=i,!0)}expandFreeRects(e,t){this.freeRects.forEach((i,s)=>{i.x+i.width>=Math.min(this.width+this.padding-this.border,e)&&(i.width=e-i.x-this.border),i.y+i.height>=Math.min(this.height+this.padding-this.border,t)&&(i.height=t-i.y-this.border)},this),this.freeRects.push(new s(e-this.width-this.padding,t-2*this.border,this.width+this.padding-this.border,this.border)),this.freeRects.push(new s(e-2*this.border,t-this.height-this.padding,this.border,this.height+this.padding-this.border)),this.freeRects=this.freeRects.filter(e=>!(e.width<=0||e.height<=0||e.x<this.border||e.y<this.border)),this.pruneFreeList()}}class a extends n{constructor(...e){if(super(),this.rects=[],1===e.length){if("object"!=typeof e[0])throw new Error("OversizedElementBin: Wrong parameters");const t=e[0];this.rects=[t],this.width=t.width,this.height=t.height,this.data=t.data,t.oversized=!0}else{this.width=e[0],this.height=e[1],this.data=e.length>2?e[2]:null;const t=new s(this.width,this.height);t.oversized=!0,t.data=this.data,this.rects.push(t)}this.freeRects=[],this.maxWidth=this.width,this.maxHeight=this.height,this.options={smart:!1,pot:!1,square:!1}}add(){}reset(e=!1){}repack(){}}const o=4096;var h;!function(e){e[e.MAX_AREA=0]="MAX_AREA",e[e.MAX_EDGE=1]="MAX_EDGE"}(h||(h={}));class l{constructor(e=o,t=o,i=0,s={smart:!0,pot:!0,square:!1,allowRotation:!1,tag:!1,border:0,logic:h.MAX_EDGE}){this.width=e,this.height=t,this.padding=i,this.options=s,this._currentBinIndex=0,this.bins=[]}add(...e){if(1===e.length){if("object"!=typeof e[0])throw new Error("MacrectsPacker.add(): Wrong parameters");const t=e[0];if(t.width>this.width||t.height>this.height)this.bins.push(new a(t));else{if(!this.bins.slice(this._currentBinIndex).find(e=>void 0!==e.add(t))){let e=new r(this.width,this.height,this.padding,this.options),i=t.data&&t.data.tag?t.data.tag:t.tag?t.tag:void 0;this.options.tag&&i&&(e.tag=i),e.add(t),this.bins.push(e)}}return t}{const t=new s(e[0],e[1]);if(e.length>2&&(t.data=e[2]),t.width>this.width||t.height>this.height)this.bins.push(new a(t));else{if(!this.bins.slice(this._currentBinIndex).find(e=>void 0!==e.add(t))){let e=new r(this.width,this.height,this.padding,this.options);this.options.tag&&t.data.tag&&(e.tag=t.data.tag),e.add(t),this.bins.push(e)}}return t}}addArray(e){this.sort(e,this.options.logic).forEach(e=>this.add(e))}reset(){this.bins=[],this._currentBinIndex=0}repack(e=!0){if(e){let e=[];for(let t of this.bins)if(t.dirty){let i=t.repack();i&&e.push(...i)}return void this.addArray(e)}if(!this.dirty)return;const t=this.rects;this.reset(),this.addArray(t)}next(){return this._currentBinIndex=this.bins.length,this._currentBinIndex}load(e){e.forEach((e,t)=>{if(e.maxWidth>this.width||e.maxHeight>this.height)this.bins.push(new a(e.width,e.height,{}));else{let i=new r(this.width,this.height,this.padding,e.options);i.freeRects.splice(0),e.freeRects.forEach((e,t)=>{i.freeRects.push(new s(e.width,e.height,e.x,e.y))}),i.width=e.width,i.height=e.height,e.tag&&(i.tag=e.tag),this.bins[t]=i}},this)}save(){let e=[];return this.bins.forEach(t=>{let i={width:t.width,height:t.height,maxWidth:t.maxWidth,maxHeight:t.maxHeight,freeRects:[],rects:[],options:t.options};t.tag&&(i=Object.assign(Object.assign({},i),{tag:t.tag})),t.freeRects.forEach(e=>{i.freeRects.push({x:e.x,y:e.y,width:e.width,height:e.height})}),e.push(i)}),e}sort(e,t=h.MAX_EDGE){return e.slice().sort((e,i)=>{const s=t===h.MAX_EDGE?Math.max(i.width,i.height)-Math.max(e.width,e.height):i.width*i.height-e.width*e.height;return 0===s&&e.hash&&i.hash?e.hash>i.hash?-1:1:s})}get currentBinIndex(){return this._currentBinIndex}get dirty(){return this.bins.some(e=>e.dirty)}get rects(){let e=[];for(let t of this.bins)e.push(...t.rects);return e}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});function n(e,t){return e.map(e=>{const i={x:e.x,y:e.y},s=Math.cos(t),n=Math.sin(t),r=i.x,a=i.y;return i.x=r*s-a*n,i.y=r*n+a*s,i})}function r(e){const{minX:t,minY:i,maxX:s,maxY:n}=e;return[{x:t,y:i},{x:s,y:i},{x:s,y:n},{x:t,y:n},{x:t,y:i}]}function a(e){if(e.length<=3)throw new Error("Not enough points in polygon.");let t=e[0].x,i=e[0].y,s=e[0].x,n=e[0].y;for(let r=1;r<e.length;r++){const{x:a,y:o}=e[r];s=Math.min(a,s),n=Math.min(o,n),t=Math.max(a,t),i=Math.max(o,i)}return{minX:s,minY:n,maxX:t,maxY:i}}function o(e){const{minX:t,maxX:i,minY:s,maxY:n}=e;return{x:t,y:s,width:i-t,height:n-s}}function h(e,t,i,s){i=i||0,s=s||t.length;const n=parseInt(i+(s-i)/2,10);return t[n]===e?n:s-i<=1?t[n]>e?n-1:n:t[n]<e?h(e,t,n,s):h(e,t,i,n)}function l(e,t=0){let{minX:i,maxX:s,minY:n,maxY:r}=e;const a=Math.round(i+(s-i)/2-t/2),o=Math.round(n+(r-n)/2-t/2);return i-=t,n-=t,[{x:i,y:n},{x:s,y:n},{x:s,y:r},{x:i,y:r},{x:i,y:o},{x:s,y:o},{x:a,y:n},{x:a,y:r}]}function d(e,t,i,s,r,a,o,h=0){let l,d,u=0,c=0;if(h>0){var p=(a+o)*h;p<a?u=a-p:c=o-(p-a)}const g=null!==r?n(t,r):t;for(let t=0;t<g.length;t++){l=g[t],d=t==g.length-1?g[0]:g[t+1];const n=d.x-l.x,r=d.y-l.y,h=Math.sqrt(n*n+r*r),p={x:n/h,y:r/h};let f=0;for(e.moveTo(i+l.x+c*p.x,s+l.y+c*p.y);f<=h;)f+=c,f+=u>0?u:a,f>h?(u=f-h,f=h):u=0,e.lineTo(i+l.x+f*p.x,s+l.y+f*p.y),f+=o,f>h&&0==u?c=f-h:(c=0,e.moveTo(i+l.x+f*p.x,s+l.y+f*p.y))}}function u(e){return s(this,void 0,void 0,(function*(){const t=URL.createObjectURL(e),i=new Image;return new Promise((e,s)=>{i.src=t,i.addEventListener("load",s=>(URL.revokeObjectURL(t),e(new PIXI.Texture(new PIXI.BaseTexture(i)))))})}))}function c(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}function p(e,t=1){return s(this,void 0,void 0,(function*(){const i=URL.createObjectURL(e),s=new Image;return t=t||1,new Promise((e,n)=>{s.src=i,s.addEventListener("load",n=>{if(URL.revokeObjectURL(i),1===t)return e(new PIXI.Texture(new PIXI.BaseTexture(s)));{let i=[];for(let e=0;e<t;e++)i.push(new PIXI.Texture(new PIXI.BaseTexture(s)));return e(i)}})})}))}function g(e,t){return s(this,void 0,void 0,(function*(){return new Promise((i,s)=>{e.extract.canvas(t).toBlob(e=>i(e))})}))}function f(e,t){return s(this,void 0,void 0,(function*(){return g(e,new PIXI.Sprite(t))}))}function m(e){let t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,r=new Uint8Array(n);for(;n--;)r[n]=s.charCodeAt(n);return new Blob([r],{type:i})}function y(e){return s(this,void 0,void 0,(function*(){const t=new FileReader;return new Promise((i,s)=>{t.readAsDataURL(e),t.onload=e=>i(e.target.result)})}))}function C(e,t){var i=document.createElement("a");return document.body.append(i),i.download=t,i.href=URL.createObjectURL(e),i.click(),i.remove(),!0}t.clearRenderTextureRects=function(e,t,i){if(i instanceof PIXI.WebGLRenderer){i.bindRenderTexture(t);const s=i.gl;s.enable(s.SCISSOR_TEST);for(let t=0;t<e.length;t++){const{x:n,y:r,width:a,height:o}=e[t];s.scissor(n,r,a,o),i.clear()}i.bindRenderTexture()}else for(let i=0;i<e.length;i++){const{x:s,y:n,width:r,height:a}=e[i];t.baseTexture._canvasRenderTarget.context.clearRect(s,n,r,a)}},t.flatten=function e(t,i=[]){for(let s=0,n=t.length;s<n;s++){const n=t[s];Array.isArray(n)?e(n,i):i.push(n)}return i},t.encodeTileId=function(e,t,i,s){if(!t&&!i&&!s)return e},t.decodeTileId=function(e){let t=!!(1073741824&e),i=!!(536870912&e),s=!!(268435456&e);return{tileId:e&=-1879048193,flipDiag:s,flipVer:i,flipHor:t}},t.applyMixins=function(e,t){t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{"constructor"!==i&&(e.prototype[i]=t.prototype[i])})})},t.mergeFlips=function(e,t){const i=e.flipDiag+t.flipDiag;if(2===i)return{flipDiag:!1,flipHor:e.flipVert===t.flipVert,flipVert:e.flipHor+t.flipHor};if(1===i){const i=e.flipDiag?e.flipVert:e.flipHor,s=e.flipDiag?e.flipHor:e.flipVert,n=t.flipDiag?t.flipVert:t.flipHor;return{flipDiag:!0,flipHor:(t.flipDiag?t.flipHor:t.flipVert)!==s,flipVert:i!==n}}return 0===i?{flipDiag:!1,flipVert:e.flipVert!==t.flipVert,flipHor:e.flipHor!==t.flipHor}:void 0},t.decodeRotation=function(e){let t=!!(1073741824&e),i=!!(536870912&e),s=!!(268435456&e);return{id:e&=-1879048193,flips:{flipDiag:s,flipVert:i,flipHor:t}}},t.rotateSprite=function(e,t,i,s,n=!1){if(e.rotation=0,e.scale.set(1,1),!t&&!i&&!s)return;const r=i?-1:1,a=s?-1:1,o=t?90:0;e.scale.set(r,a),e.rotation=o*(Math.PI/180)},t.getBoundingBoxAsTexture=function(e,t,i){const{x:s,y:n,width:r,height:a}=i,o=e.localTransform.clone(),h=PIXI.RenderTexture.create(r,a);return t.render(e,h,!0,o.translate(-s,-n)),h},t.getPolygonAsTexture=function(e,t,i){},t.copyTexture=function(e,t){return s(this,void 0,void 0,(function*(){const i=new PIXI.Sprite(e);return new Promise((e,s)=>{t.extract.canvas(i).toBlob(t=>{i.destroy();const s=URL.createObjectURL(t),n=new Image;n.addEventListener("load",t=>(URL.revokeObjectURL(s),e(new PIXI.Texture(new PIXI.BaseTexture(n))))),n.src=s})})}))},t.createGrid=function(e,t,i,s,n=0,r=1,a=.5){const o=new PIXI.Graphics;o.lineStyle(r,n,a);for(let t=0;t<=i;t+=e)0!==t?(o.moveTo(t,0),o.lineTo(t,s)):(o.moveTo(1,0),o.lineTo(1,s));for(let e=0;e<=s;e+=t)o.moveTo(0,e),o.lineTo(i,e);return o},t.recurseEmit=function e(t,i,s){t.emit(i,s),t instanceof PIXI.Container&&t.children&&t.children.forEach(t=>{e(t,i,s)})},t.rotatePoints=n,t.boundingBoxToPolygon=r,t.drawDashedBoundingBox=function(e,t,i,s,n,a,o,h=0){return d(e,r(t),i,s,n,a,o,h)},t.ceilPoint=function(e){return{x:Math.ceil(e.x),y:Math.ceil(e.y)}},t.boundingBoxFromPolygon=a,t.rectFromPolygon=function(e){return o(a(e))},t.boundingFromPositions=function(e,t){return{minX:Math.min(e.x,t.x),maxX:Math.max(e.x,t.x),minY:Math.min(e.y,t.y),maxY:Math.max(e.y,t.y)}},t.removeFileExtension=function(e){return e.replace(/\.[^/.]+$/,"")},t.pointsEqual=function(e,t){return e.x===t.x&&e.y===t.y},t.adjustTileData=function(e,t,i,s){const n=t+i-1,r=t+s-1,a=s-i;if(!a)throw new Error("Tile count difference should not be 0.");const o=Math.sign(a);if(o>0)for(let t=0;t<e.length;t++){e[t]>=n&&(e[t]+=a)}else if(o<0)for(let i=0;i<e.length;i++){const s=e[i];s>=t&&s<=n&&s>r?e[i]=0:s>r&&(e[i]+=a)}},t.splitSizeKey=function(e){const[t,i]=e.split("-");if(null==t)throw new Error(`Failed to split width on key ${e}`);if(null==i)throw new Error(`Failed to split height on key ${e}`);return{width:parseInt(t),height:parseInt(i)}},t.makeSizeTileKey=function(e){return`${e.width}-${e.height}`},t.isTextureTransparent=function(e){const t=new PIXI.Sprite(e),i=(new PIXI.CanvasRenderer).extract.pixels(t);for(let e=3;e<i.length;e+=4)if(i[e])return t.destroy(!1),!1;return t.destroy(!1),!0},t.orderTileSizeContainers=function(e,t){e.children.sort((e,i)=>{try{const s=t.indexOf(e.sizeKey);if(s<0)throw new Error("Could not find index for sizeKey on a");const n=t.indexOf(i.sizeKey);if(n<0)throw new Error("Could not find index for sizeKey on b");return s-n}catch(s){throw console.error(s,"a was",e,"b was",i,"ordered keys was",t),s}})},t.rectFromBoundingBox=o,t.boundingBoxFromRect=function(e){const{x:t,y:i,width:s,height:n}=e;return{minX:t,minY:i,maxX:t+s,maxY:i+n}},t.swapElements=function(e,t,i){const s=e[t];e[t]=e[i],e[i]=s},t.insertToArray=function(e,t,i){e.splice(t,0,i)},t.moveArray=function(e,t,i){this.splice(i,0,e.splice(t,1)[0])},t.locationOf=h,t.insertSorted=function(e,t){return t.splice(h(e,t)+1,0,e),t},t.updateBoundingBox=function(e,t,i){e.minX=Math.min(t,e.minX),e.maxX=Math.min(t,e.maxX),e.minY=Math.min(i,e.minY),e.maxY=Math.min(i,e.maxY)},t.binarySearchIndex=function e(t,i,s,n){if(s>n)return-1;let r=Math.floor((s+n)/2);return t[r]===i?r:t[r]>i?e(t,i,s,r-1):e(t,i,r+1,n)},t.encodeFlipId=function(e,t){return 0==e?e:(t.flipHor&&(e+=1073741824),t.flipVert&&(e+=536870912),t.flipDiag&&(e+=268435456),e)},t.moveSmallArrayFast=function(e,t,i){let s,n;if(t!==i&&0<=t&&t<=e.length&&0<=i&&i<=e.length){if(n=e[t],t<i)for(s=t;s<i;s++)e[s]=e[s+1];else for(s=t;s>i;s--)e[s]=e[s-1];e[i]=n}},t.forEachItemAfterIndex=function(e,t,i){for(let s=e+1;s<t.length;s++)i(t[s],s)},t.getPointDeltas=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.roundPoint=function(e,t=!1){return t?(e.x=Math.round(e.x),e.y=Math.round(e.y),e):{x:Math.round(e.x),y:Math.round(e.y)}},t.floorPoint=function(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}},t.getVertexesFromBoundingBox=l,t.drawVertexes=function(e,t,i,s,r=2){const a=null!==i?n(l(t,s+r),i):l(t,s+r);e.lineStyle(r,0,1),e.beginFill(16777215,1),a.forEach(t=>{e.drawRect(t.x,t.y,s,s)}),e.endFill()},t.rectContainsPoint=function(e,t,i=0,s=0){let{x:n,y:r,width:a,height:o}=e;return n-=i/2,r-=s/2,a+=i,o+=s,n<=t.x&&t.x<=n+a&&r<=t.y&&t.y<=r+o},t.rectsCollide=function(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height||e.x+e.width<t.x||e.x>t.x+t.width)},t.drawDashedPolygon=d,t.chunkArray=function(e,t){const i=[];for(let s=0,n=e.length;s<n;s+=t)i.push(e.slice(s,s+t));return i},t.getSlope=function(e,t){return(t.y-e.y)/(t.x-e.x)},t.drawSelectionBox=function(e,t,i,s,n,r=3){e.clear(),e.moveTo(t,i);let a=t;for(let i=t;i<s;i+=r)i>=s&&e.lineTo,i%s==0&&e.lineTo(a,i)},t.getTextureFromBlob=u,t.bufferToBase64=c,t.getTextureFromBlob2=function(e){return s(this,void 0,void 0,(function*(){const t=window.URL||window.webkitURL;let i,s=!0;try{i=t.createObjectURL(e)}catch(t){s=!1;const n=c(e);i="data:image/png;base64,"+n}const n=new Image;return new Promise((e,r)=>{n.src=i,n.addEventListener("load",r=>(s&&t.revokeObjectURL(i),e(new PIXI.Texture(new PIXI.BaseTexture(n)))))})}))},t.getMultipleTexturesFromBlob=p,t.getBlobFromSprite=g,t.getBlobFromTexture=f,t.dataUrlToTexture=function(e){return s(this,void 0,void 0,(function*(){return u(m(e))}))},t.dataURLtoBlob=m,t.blobToDataURL=y,t.downloadBlobPng=C,t.downloadSpritePng=function(e,t,i){return s(this,void 0,void 0,(function*(){return t instanceof PIXI.RenderTexture||t instanceof PIXI.Sprite||(t=new PIXI.Sprite(t)),new Promise((s,n)=>{e.extract.canvas(t).toBlob(e=>s(C(e,i)),"image/png")})}))},t.asyncTimeout=function(e){return s(this,void 0,void 0,(function*(){return new Promise((t,i)=>{setTimeout(()=>t(),e)})}))},t.downloadJson=function(e,t){const i=new Blob([JSON.stringify(e)],{type:"application/json"}),s=URL.createObjectURL(i),n=document.createElement("a");document.body.append(n),n.download=`${t}.json`,n.href=s,n.click(),n.remove()},t.getMinMaxes=function(e,t){return{minX:Math.min(e.x,t.x),maxX:Math.max(e.x,t.x),minY:Math.min(e.y,t.y),maxY:Math.max(e.y,t.y)}},t.getDataURLFromTexture=function(e,t){return s(this,void 0,void 0,(function*(){return y(yield f(e,t))}))},t.getDataUrlsAndTexturesFromTextures=function(e,t){return s(this,void 0,void 0,(function*(){let i=[],s=[],n=[];if(Array.isArray(t))return i=yield Promise.all(t.map(t=>f(e,t))),s=yield Promise.all(i.map(u)),n=yield Promise.all(i.map(y)),{textures:s,dataUrls:n};{const r=Object.keys(t).map(e=>({texture:t[e],id:e}));i=yield Promise.all(r.map(t=>f(e,t.texture))),s=yield Promise.all(i.map(u)),n=yield Promise.all(i.map(y));const a={},o={};for(let e=0;e<i.length;e++)a[r[e].id]=s[e],o[r[e].id]=n[e];return console.log("returning textures",a),{textures:a,dataUrls:o}}}))},t.getTextureFromDataUrl=function(e,t=1){return s(this,void 0,void 0,(function*(){return p(m(e),t)}))};const x=(w=/^[^\\/:\*\?"<>\|]+$/,v=/^\./,T=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i,function(e){return w.test(e)&&!v.test(e)&&!T.test(e)});var w,v,T;t.validateFileName=function(e){return x(e)},t.getAverageRGB=function(e,t=1){let i=-(t-1),s=0,n=0,r=0,a=0;const o=e.data.length;for(;(i+=4*t)<o;)++s,0!==e.data[i+3]&&(n+=e.data[i],r+=e.data[i+1],a+=e.data[i+2]);return n=~~(n/s),r=~~(r/s),a=~~(a/s),(n<<16)+(r<<8)+a}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(1),r="object"==typeof window?window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB:self.indexedDB||self.webkitIndexedDb;t.Loader=class{constructor(e,t){this.db=t,this.name=e}initialize(){return s(this,void 0,void 0,(function*(){if(this.db)return!0;const e=r.open(this.name,1);return new Promise((t,i)=>{e.onerror=function(e){console.error("Error creating/accessing IndexedDB database",e)},e.onsuccess=s=>{if(this.db=e.result,this.db.onerror=function(e){return console.error("Error creating/accessing IndexedDB database",e),i("Error creating/accessing IndexedDB database")},!this.db.setVersion)return t(!0);if(1==this.db.version)return this.db.createObjectStore(this.name),t(!0);this.db.setVersion(1).onsuccess=function(){return this.db.createObjectStore(this.name),t(!0)}},e.onupgradeneeded=e=>{this.db=e.target.result,this.db.createObjectStore(this.name)}})}))}deleteItem(e){return s(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readwrite").objectStore(this.name).delete(e);return new Promise((i,s)=>{t.onsuccess=e=>i(!0),t.onerror=t=>s(`Error saving texture to indexedDB: ${e}`)})}))}saveJson(e,t){return s(this,void 0,void 0,(function*(){const i=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(JSON.stringify(t),e);return new Promise((t,s)=>{i.onsuccess=e=>t(!0),i.onerror=t=>s(`Error saving texture to indexedDB: ${e}`)})}))}loadJson(e){return s(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((i,s)=>{t.onsuccess=e=>e.target.result?i(JSON.parse(e.target.result)):i(null),t.onerror=t=>{throw new Error(`Error getting texture from indexedDB: ${e}`)}})}))}saveArrayBuffer(e,t){return s(this,void 0,void 0,(function*(){const i=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(t,e);return new Promise((t,s)=>{i.onsuccess=e=>t(!0),i.onerror=t=>s(`Error saving texture to indexedDB: ${e}`)})}))}loadArrayBuffer(e){return s(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((i,s)=>{t.onsuccess=e=>i(e.target.result),t.onerror=t=>{throw new Error(`Error getting texture from indexedDB: ${e}`)}})}))}saveTexture(e,t){return s(this,void 0,void 0,(function*(){const i=this.db.transaction([this.name],"readwrite");let s;if(t.baseTexture.source){const e=document.createElement("canvas");e.width=t.baseTexture.width,e.height=t.baseTexture.height;const i=e.getContext("2d");console.log("the base texture was",t.baseTexture),i.drawImage(t.baseTexture.source,0,0),s=e.toDataURL("image/png")}if(!s)throw new Error("did not get a datasUrl from texture.");const n=i.objectStore(this.name).put(s,e);return new Promise((t,i)=>{n.onsuccess=e=>t(!0),n.onerror=t=>i(`Error saving texture to indexedDB: ${e}`)})}))}saveImageData(e,t){return s(this,void 0,void 0,(function*(){const i=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(t,e);return new Promise((t,s)=>{i.onsuccess=e=>t(!0),i.onerror=t=>s(`Error saving texture to indexedDB: ${e}`)})}))}loadImageData(e){return s(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((i,s)=>{t.onsuccess=e=>{var t,s;const n=null===(s=null===(t=e)||void 0===t?void 0:t.target)||void 0===s?void 0:s.result;return i(n)},t.onerror=t=>s(new Error(`Error getting texture from indexedDB: ${e}`))})}))}loadTexture(e){return s(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((i,r)=>{t.onsuccess=e=>s(this,void 0,void 0,(function*(){var t,s;const a=null===(s=null===(t=e)||void 0===t?void 0:t.target)||void 0===s?void 0:s.result;if(!a)return i(null);try{const e=yield n.dataUrlToTexture(a);return i(e)}catch(e){return r(e)}})),t.onerror=t=>(console.error("Error",t),r(new Error(`Error getting texture from indexedDB: ${e}`)))})}))}}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),r=i(26),a=i(1),o=i(27),h=i(3),l=i(28),d=i(29),u=i(30),c=i(33);var p,g;!function(e){e[e.BATCH_SUB_SECTIONS_RENDER_TEXTURES=0]="BATCH_SUB_SECTIONS_RENDER_TEXTURES",e[e.BATCH_SUB_SECTIONS_CONTAINERS=1]="BATCH_SUB_SECTIONS_CONTAINERS",e[e.LAZY_INDEXED_DB_LOAD=2]="LAZY_INDEXED_DB_LOAD"}(p||(p={})),function(e){e.destroyed="destroyed",e.almost_visible="almost_visible",e.visible="visible"}(g=t.VisibilityStates||(t.VisibilityStates={}));t.ChunkManager=class extends c{constructor(e,t,i,s,n,r,a,o,l,d,u,c=!1){super(),this.curBatchIndex=0,this.curBatchChunkIndexes=[],this.almostVisibleChunkIndexes=[],this.visibleChunkIndexes=[],this.chunksInBatch={},this.initBatches={},this.initiailizedSprites=[],this.trackedChunkBatchIndexes=[],this.chunkTextureAtlasses=[],this.pendingChunkImageLoads={},this.interuptedChunkImages={},this.interuptedChunkData={},this.loadingChunkData={},this.loading={},this.loadedChunks={},this.cachedChunkTextures={},this.indexesToUpdate=[],this.cachedChunkData={},this.containerPool=[],this.showedChunkImages={},this.showedChunkColliders={},this.cachedSmallMapData={},this.addLayerSpritePayloadBatches=[],this.resetting=!1,this.tileSizeBySeqLookup=[],this.seqToTagString={},this.cachedMapChunksDatas={},this.collisionManager=r,this.chunkWidth=1024,this.chunkHeight=1024,this.halfChunkWidth=this.chunkWidth/2,this.halfChunkHeight=this.chunkHeight/2,this.subChunkW=h.RUNTIME_TILE_LAYER_SECTION_SIZE,this.subChunkH=h.RUNTIME_TILE_LAYER_SECTION_SIZE,this.imageManager=a,this.seqToTagString=n,this.worldInitData=i,this.mapsInitData=s,this.tileSizeBySeqLookup=[];for(let e=0;e<this.worldInitData.tileSizeSeqLookup.length;e+=2)this.tileSizeBySeqLookup.push({width:this.worldInitData.tileSizeSeqLookup[e],height:this.worldInitData.tileSizeSeqLookup[e+1]});this.chunkTextureAtlasFactory=t instanceof PIXI.WebGLRenderer?this.webGlAtlasFactory.bind(this,t):this.canvasAtlasFactory.bind(this,t),this.playerViewRect=l.playerViewRect,this.chunkLoaderWorker=u,this.baseUrl=e+"/maps",this.tileManager=o,this.renderer=t,this.useIndexedDbWorker=c,this.containerPool=[],this.indexedDbLoader=d}createWorldChunk(e,t=this.mapMetaData,i){return new o.WorldChunk(t,e,this.chunkTextureAtlasses,this.containerPool,this.tileManager)}_webWorkerInit(e){return s(this,void 0,void 0,(function*(){}))}_defaultInit(e){return s(this,void 0,void 0,(function*(){}))}initSmallMap(e){return s(this,void 0,void 0,(function*(){const t=new u.Decoder(this.tileSizeBySeqLookup,this.seqToTagString,this.worldInitData.propSeqToNameLookup),i=e.id,n=r.mapFileKey(this.baseUrl,i);this.getMapMetaData(i,e.ts);let o=0;{const h=yield a.httpGetAsync(n,!1),l=yield t.decodeMap(1024,1024,128,128,h);if(this.saveMapMetaData(i,l.metaData),1!==l.chunks.length)throw new Error("Small map should only have 1 chunk.");const d=this.mergeChunkLayersAsTextures(l.chunks[0],l.metaData);yield Promise.all(d.map((t,n)=>s(this,void 0,void 0,(function*(){if(!t)return;const s=r.mapFileKey(this.baseUrl,i,n);o++,localStorage.setItem(s,`${e.ts}`);const a=new PIXI.Sprite(t),h=this.renderer.extract.base64(a);yield this.indexedDbLoader.saveImageData(s,h);t.destroy(!0)})))),yield this.saveSmallMapImageAndColliderDataOnly(l.chunks[0],i)}yield this.deleteAllChunksGreaterThan(i,o-1,1)}))}saveSmallMapImageAndColliderDataOnly(e,t){return s(this,void 0,void 0,(function*(){e.layers.forEach(e=>{delete e.tileLayers}),yield this.indexedDbLoader.saveJson(`${t}_init`,e)}))}loadSmallMapImageAndColliderDataOnly(e){return s(this,void 0,void 0,(function*(){const t=this.cachedSmallMapData[e];return t?t.data:yield this.indexedDbLoader.loadJson(`${e}_init`)}))}addSmallMapDataToCache(e,t,i){this.cachedSmallMapData[i]?this.cachedSmallMapData[i].ts=Date.now():this.cachedSmallMapData[i]={textures:t,data:e,ts:Date.now()}}mergeChunkLayersAsTextures(e,t){const i=this.chunkTextureAtlasFactory(),s=this.createWorldChunk(e,t),n=s.initTileLayers(),r=i.mergeAllLayerChunks(n);return s.destroy(),r}saveMapMetaData(e,t,i){localStorage.setItem(r.mapFileKey(this.baseUrl,e),JSON.stringify({ts:i||Date.now(),data:t}))}getMapMetaData(e,t){const i=localStorage.getItem(r.mapFileKey(this.baseUrl,e));if(i){const e=JSON.parse(i);return e.ts<t?null:e.data}return null}requestMapMetaData(e){return s(this,void 0,void 0,(function*(){const t=new u.Decoder(this.tileSizeBySeqLookup,this.seqToTagString,this.worldInitData.propSeqToNameLookup),i=yield a.httpGetAsync(r.mapMetaPath(this.baseUrl,e),!1);return t.decodeMetaData(i)}))}initMassiveMap(e){return s(this,void 0,void 0,(function*(){const t=new u.Decoder(this.tileSizeBySeqLookup,this.seqToTagString,this.worldInitData.propSeqToNameLookup),i=e.id,n=r.mapFileKey(this.baseUrl,i);let o=this.getMapMetaData(i,e.ts);const h=e.chunksTs;if(this.emit("downloading-map",e),this.chunkLoaderWorker)o=yield this.chunkLoaderWorker.requestAndStoreAllMapChunks(e.id),this.saveMapMetaData(i,o,e.ts+1);else{const e=yield a.httpGetAsync(n,!1);let h=0;const{metaData:l}=yield t.decodeMap(1024,1024,128,128,e,(e,t)=>s(this,void 0,void 0,(function*(){const s=r.mapFileKey(this.baseUrl,i,t);h=t,yield this.indexedDbLoader.saveJson(s,e)})));o=l}this.saveMapMetaData(i,o,e.ts+1),h?yield this.deleteAllChunksGreaterThan(i,h.length-1,o.layerTileLayerOrder.length):console.warn("no chunk timestamps were found.. this is fine if im not getting this error probably a week after 7/14/20 cuz i changed some meta data stuffs in midst of a project... otherwise fuck.")}))}init(){return s(this,void 0,void 0,(function*(){const e=[this.initSmallMap.bind(this),this.initMassiveMap.bind(this),this.initMassiveMap.bind(this)];if(this.indexedDbLoader&&"undefined"!=typeof localStorage)for(let t=0;t<this.mapsInitData.length;t++){const i=this.mapsInitData[t];yield e[i.size](i),this.emit("finished-downloading")}}))}deleteAllChunksGreaterThan(e,t,i){return s(this,void 0,void 0,(function*(){let s=r.mapFileKey(this.baseUrl,e,++t),n=localStorage.getItem(s);const a=[];for(;null!==n;){if(localStorage.removeItem(s),a.push(this.indexedDbLoader.deleteItem(s)),i)for(let e=0;e<i;e++)a.push(this.indexedDbLoader.deleteItem(`${s}_${i[e]}`));s=r.mapFileKey(this.baseUrl,e,++t),n=localStorage.getItem(s)}return a.length&&(yield Promise.all(a)),!0}))}hideChunk(e,t){if(this.loading[e])return void(this.interuptedChunkData[e]=!0);const i=this.cachedChunkData[e];i||console.error("could not find index ",e,"in cached chunk data",this.cachedChunkData),this.loadedChunks[e].hidden?console.warn("trying to hide already hidden chunk.... need to check this out "):(this.loadedChunks[e].hide(),this.showedChunkColliders[e]&&this.collisionManager.removeChunkColliders(i),delete this.showedChunkColliders[e])}onChunkVisibilityStateChange(e,t,i){return s(this,void 0,void 0,(function*(){if(e===t)throw new Error("states shouldnt be the same");e===g.visible?t===g.almost_visible?this.hideChunk(i,this.curMapSeq):this.destroyChunk(i):e===g.almost_visible?t===g.destroyed?this.destroyChunk(i):this.showChunk(i,this.curMapSeq):e===g.destroyed&&(t===g.almost_visible?this.batchInitChunk(i,this.curMapSeq):yield this.showChunk(i,this.curMapSeq))}))}nextBatch(){if(this.curBatchChunkIndexes.length){let e=Date.now();this.initBatches[this.curBatchChunkIndexes[this.curBatchIndex]].pop()(),Date.now()-e>100&&console.error("found long batch"),++this.curBatchIndex>=this.curBatchChunkIndexes.length&&(this.curBatchIndex=0)}else if(this.addLayerSpritePayloadBatches.length){let e=this.addLayerSpritePayloadBatches.shift();e.sprite.transform?this.emit("add-subchunk-layer-sprite",e):this.nextBatch()}}batchInitChunk(e,t){return s(this,void 0,void 0,(function*(){if(this.resetting)return!1;if(this.initBatches[e])throw new Error("Already existed");const i=[];let n,r,a=!0;const o=e=>{t===this.curMapSeq&&this.addLayerSpritePayloadBatches.push(e)},h=()=>{this.resetting||t!==this.curMapSeq||(a?i.push(h):r.initBatchRender({x:this.playerViewRect.x+this.playerViewRect.width/2,y:this.playerViewRect.y+this.playerViewRect.height/2}))};const l=()=>{if(a)throw new Error("how the fuck in the fuck did this happen.");r.nextBatch()?i.push(l):(delete r.showed_images,this.removeChunkFromBatch(e))};i.push(l,()=>s(this,void 0,void 0,(function*(){t==this.curMapSeq&&(yield this.forceShowChunkImages(n,t)),t==this.curMapSeq&&this.chunksInBatch[e]&&(this.chunksInBatch[e].showed_images=!0)})),h,()=>s(this,void 0,void 0,(function*(){if(t==this.curMapSeq){if(n=yield this.loadChunkData(e,t),!n)return;this.interuptedChunkData[e]||this.initBatches[e]&&(this.resetting||t!==this.curMapSeq||(a=!1,r=this.createWorldChunk(n),r.on("add-subchunk-layer-sprite",o),this.chunksInBatch[e]=r))}}))),this.initBatches[e]=i,this.curBatchChunkIndexes.push(e)}))}destroyChunkInBatch(e){this.chunksInBatch[e]?(this.chunksInBatch[e].showed_images&&this.removeChunkImages(this.cachedChunkData[e]),this.removeChunkFromBatch(e),this.loadedChunks[e].destroy(),delete this.loadedChunks[e]):this.spliceChunkBatch(e),delete this.showedChunkImages[e]}spliceChunkBatch(e){const t=this.curBatchChunkIndexes.indexOf(e);if(t<0)throw new Error(`couldnt find in ${e}`);this.curBatchChunkIndexes.splice(t,1),delete this.initBatches[e],this.curBatchIndex=0}removeChunkFromBatch(e){if(!this.initBatches[e])throw new Error("at this point chunk index should still be in init batches");this.chunksInBatch[e].removeAllListeners("add-subchunk-layer-sprite"),this.loadedChunks[e]||(this.loadedChunks[e]=this.chunksInBatch[e],this.loadedChunks[e].hidden=!0),delete this.chunksInBatch[e],this.spliceChunkBatch(e)}getVisibleSubChunks(e){const t=[],i=Math.max(0,Math.floor(e.x/this.subChunkW)),s=Math.max(0,Math.floor(e.y/this.subChunkH)),n=Math.min(Math.ceil((e.x+e.width)/this.subChunkW),this.subChunkCols),r=Math.min(Math.ceil((e.y+e.height)/this.subChunkH),this.subChunkRows);for(let e=i;e<n;e++)for(let i=s;i<r;i++){let s=e,n=i*this.subChunkCols+s;n>-1&&n<this.maxSubChunks&&t.push(n)}return t}getVisibleChunks(e){const t=[],i=Math.max(0,Math.floor(e.x/this.chunkWidth)),s=Math.max(0,Math.floor(e.y/this.chunkHeight)),n=Math.min(Math.ceil((e.x+e.width)/this.chunkWidth),this.chunkCols),r=Math.min(Math.ceil((e.y+e.height)/this.chunkHeight),this.chunkRows);for(let e=i;e<n;e++)for(let i=s;i<r;i++){let s=e,n=i*this.chunkCols+s;n>-1&&n<this.maxChunks&&t.push(n)}return t}updateAlmostVisibleChunks(e=0,t=0){const i=[...this.almostVisibleChunkIndexes],s=this.chunkWidth+this.subChunkW,n=this.chunkWidth+this.subChunkW,r=this.playerViewRect.x-s,a=this.playerViewRect.y-n;this.mapMetaData.mapW,this.playerViewRect.width,this.mapMetaData.mapH,this.playerViewRect.height;let o={x:r,y:a,width:this.playerViewRect.width+2*s,height:this.playerViewRect.height+2*n};r<0&&(o.x=0,o.width-=2*r),a<0&&(o.y=0,o.height-=2*a),this.almostVisibleChunkIndexes=this.getVisibleChunks(o).filter(e=>!this.visibleChunkIndexes.includes(e));for(let e=0;e<this.almostVisibleChunkIndexes.length;e++){const t=this.almostVisibleChunkIndexes[e],s=i.indexOf(t);s>-1?i.splice(s,1):this.onChunkVisibilityStateChange(g.destroyed,g.almost_visible,t)}for(let e=0;e<i.length;e++)this.onChunkVisibilityStateChange(g.almost_visible,g.destroyed,i[e])}updateVisibleChunks(e=0,t=0){return s(this,void 0,void 0,(function*(){const e=[...this.visibleChunkIndexes],t=this.subChunkW,i=this.subChunkH,s=this.playerViewRect.x-t,n=this.playerViewRect.y-i;let r={x:s,y:n,width:this.playerViewRect.width+2*t,height:this.playerViewRect.height+2*i};s<0&&(r.x=0,r.width-=2*s),n<0&&(r.y=0,r.height-=2*n),this.visibleChunkIndexes=this.getVisibleChunks(r);for(let t=0;t<this.visibleChunkIndexes.length;t++){const i=this.visibleChunkIndexes[t],s=e.indexOf(i);if(s>-1){e.splice(s,1);continue}const n=this.almostVisibleChunkIndexes.indexOf(this.visibleChunkIndexes[t]);n>-1?(this.almostVisibleChunkIndexes.splice(n,1),this.onChunkVisibilityStateChange(g.almost_visible,g.visible,i)):yield this.onChunkVisibilityStateChange(g.destroyed,g.visible,i)}for(let t=0;t<e.length;t++)this.almostVisibleChunkIndexes.push(e[t]),this.onChunkVisibilityStateChange(g.visible,g.almost_visible,e[t]);const a=this.getVisibleSubChunks({x:this.playerViewRect.x-256,y:this.playerViewRect.y-256,width:this.playerViewRect.width+512,height:this.playerViewRect.height+512});for(let e=0;e<this.visibleChunkIndexes.length;e++){const t=this.loadedChunks[this.visibleChunkIndexes[e]];t&&t.updateVisibleSubChunks(a)}}))}loadLargeMap(e,t){return s(this,void 0,void 0,(function*(){this.chunkLoaderWorker&&(yield this.chunkLoaderWorker.initMap({mapId:e,data:t}));const i=this.chunkTextureAtlasses.length-t.layerTileLayerOrder.length;if(i>0){const e=this.chunkTextureAtlasses.splice(this.chunkTextureAtlasses.length-i);for(let t=0;t<i;t++)e[t].clear()}else if(i<0)for(let e=this.chunkTextureAtlasses.length;e<Math.abs(i);e++)this.chunkTextureAtlasses.push(this.chunkTextureAtlasFactory());if(this.mapMetaData.layerTileLayerOrder.length!==this.chunkTextureAtlasses.length)throw new Error("should be the same.");for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)this.chunkTextureAtlasses[e].initForMap(this.subChunkW,this.subChunkH),this.initiailizedSprites.push([]);this.visibleChunkIndexes.length=0,this.almostVisibleChunkIndexes.length=0,this.chunkCols=Math.ceil(this.mapMetaData.mapW/this.chunkWidth),this.subChunkCols=Math.ceil(this.mapMetaData.mapW/this.subChunkW),this.chunkRows=Math.ceil(this.mapMetaData.mapH/this.chunkHeight),this.subChunkRows=Math.ceil(this.mapMetaData.mapW/this.subChunkH),this.maxChunks=this.chunkCols*this.chunkRows,this.maxSubChunks=this.subChunkCols*Math.ceil(this.mapMetaData.mapH/this.subChunkH),yield this.updateVisibleChunks(0,0),this.updateAlmostVisibleChunks(0,0),this.indexesToUpdate.length&&(this.renderMode,p.LAZY_INDEXED_DB_LOAD),this.initialized=!0}))}loadSmallMapTextures(e,t,i=!1){return s(this,void 0,void 0,(function*(){return e in this.cachedSmallMapData?this.cachedSmallMapData[e].textures:Promise.all(t.map((t,n)=>s(this,void 0,void 0,(function*(){const t=r.mapFileKey(this.baseUrl,e,n);i&&console.time(`texture_${t}`),i&&console.time(`texture_${t} index db load`);const s=yield this.indexedDbLoader.loadImageData(t);i&&console.timeEnd(`texture_${t} index db load`),i&&console.time(`texture_${t} make`);const a=PIXI.Texture.from(s);return i&&console.timeEnd(`texture_${t} make`),i&&console.timeEnd(`texture_${t}`),a}))))}))}loadSmallMap(e,t){return s(this,void 0,void 0,(function*(){for(let e=0;e<t.layerTileLayerOrder.length;e++)this.initiailizedSprites.push([]);let i,s;if(e in this.cachedSmallMapData)this.cachedSmallMapData[e].ts=Date.now(),({data:s,textures:i}=this.cachedSmallMapData[e]);else if(this.indexedDbLoader)i=yield this.loadSmallMapTextures(e,t.layerTileLayerOrder),s=yield this.loadSmallMapImageAndColliderDataOnly(e),this.addSmallMapDataToCache(s,i,e);else{const t=yield a.httpGetAsync(r.mapFileKey(this.baseUrl,e),!1),n=new u.Decoder(this.tileSizeBySeqLookup,this.seqToTagString,this.worldInitData.propSeqToNameLookup),o=yield n.decodeMap(1024,1024,128,128,t);if(this.saveMapMetaData(e,o.metaData),1!==o.chunks.length)throw new Error("Small map should only have 1 chunk.");i=this.mergeChunkLayersAsTextures(o.chunks[0],o.metaData),o.chunks[0].layers.forEach(e=>{delete e.tileLayers}),s=o.chunks[0],this.addSmallMapDataToCache(o.chunks[0],i,e)}this.collisionManager.addChunkColliders(s),yield this.forceShowChunkImages(s,this.curMapSeq);const n=i.map(e=>e?new PIXI.Sprite(e):null);this.emit("add-map-chunk-layers",n)}))}loadMap(e,t,i){return s(this,void 0,void 0,(function*(){this.curMapSeq=i,this.cachedMapChunksDatas[e]&&(clearTimeout(this.cachedMapChunksDatas[e].timeout),this.cachedChunkData=this.cachedMapChunksDatas[e].chunks,delete this.cachedMapChunksDatas[e]),this.mapMetaData=t,this.mapId=e;const s=a.resolveMapSize(this.mapMetaData.mapW,this.mapMetaData.mapH);this.curMapSize=s,s===n.MapSize.SMALL?yield this.loadSmallMap(e,t):yield this.loadLargeMap(e,t)}))}reset(){this.resetting=!0;const e=this.mapId;this.curMapSize!==n.MapSize.SMALL?this.cachedMapChunksDatas[e]={timeout:setTimeout(()=>{delete this.cachedMapChunksDatas[e]}),chunks:Object.assign({},this.cachedChunkData)}:this.cachedSmallMapData[e].ts=Date.now();for(let e=0;e<this.visibleChunkIndexes.length;e++)this.destroyChunk(this.visibleChunkIndexes[e]);for(let e=0;e<this.almostVisibleChunkIndexes.length;e++)this.destroyChunk(this.almostVisibleChunkIndexes[e]);Object.keys(this.loadedChunks).length,Object.keys(this.chunksInBatch).length,Object.keys(this.loadedChunks).forEach(e=>{this.destroyChunk(parseInt(e))}),Object.keys(this.chunksInBatch).forEach(e=>{this.destroyChunk(parseInt(e))});for(let e=0;e<this.chunkTextureAtlasses.length;e++)this.chunkTextureAtlasses[e].clear();this.curBatchChunkIndexes.length=0,this.chunkTextureAtlasses.length=0,this.visibleChunkIndexes.length=0,this.almostVisibleChunkIndexes.length=0,this.initBatches={},this.chunksInBatch={},this.loadedChunks={},this.cachedChunkTextures={},this.initiailizedSprites.length=0,this.imageManager.reset(),this.resetting=!1,this.interuptedChunkImages={},this.pendingChunkImageLoads={},this.loadingChunkData={},this.interuptedChunkData={},this.showedChunkImages={},this.loading={},this.showedChunkColliders={},this.addLayerSpritePayloadBatches.length=0}get renderMode(){return this.indexedDbLoader?p.LAZY_INDEXED_DB_LOAD:p.BATCH_SUB_SECTIONS_CONTAINERS}loadChunk(e,t){return s(this,void 0,void 0,(function*(){if(!this.initialized)throw new Error("Chunk manager not initialized.");const i=yield this.loadChunkData(e,t);if(console.log(";loaded",i),!i)return null;const s=this.cachedChunkTextures[e];return this.resetting||t!==this.curMapSeq?void 0:this.createWorldChunk(i,this.mapMetaData,s)}))}forceCompleteBatches(e,t){return s(this,void 0,void 0,(function*(){const i=this.curBatchChunkIndexes.indexOf(e);if(i<0)throw new Error(`couldnt find in ${e}`);const s=this.initBatches[this.curBatchChunkIndexes[i]];for(;s.length&&t===this.curMapSeq;)yield s.pop()();if(this.curMapSeq!==t)return;if(this.curBatchChunkIndexes.indexOf(e)>-1)throw new Error("Shouldnt have found the chunk index in the batches after forcing.");let n=this.addLayerSpritePayloadBatches.length;for(let t=0;t<n;t++)this.addLayerSpritePayloadBatches[t].chunkIndex==e&&(this.emit("add-subchunk-layer-sprite",this.addLayerSpritePayloadBatches[t]),this.addLayerSpritePayloadBatches.splice(t,1),t--,n--)}))}showChunk(e,t){return s(this,void 0,void 0,(function*(){let i=[];if(this.resetting)return!1;if(this.chunksInBatch[e]){const i=this.chunksInBatch[e];if(yield this.forceCompleteBatches(e,t),t!==this.curMapSeq)return;return this.loadedChunks[e]=i,this.collisionManager.addChunkColliders(this.cachedChunkData[e]),void(this.showedChunkColliders[e]=!0)}{let s;const n=this.loadedChunks[e];if(this.loading[e])return;if(n)i=n.show();else{this.loading[e]=!0;const n=yield this.loadChunkData(e,t);if(!n)return;if(this.interuptedChunkData[e]||this.resetting)return void(this.resetting||delete this.interuptedChunkData[e]);delete this.loading[e];let r=this.cachedChunkTextures[e];if(!r&&(this.renderMode,p.LAZY_INDEXED_DB_LOAD),this.resetting||this.interuptedChunkData[e])return;s=this.createWorldChunk(n,this.mapMetaData,r),i=s.show(),yield this.forceShowChunkImages(n,t),this.loadedChunks[e]=s}this.emit("add-map-sub-chunks",i)}this.showedChunkColliders[e]=!0,this.collisionManager.addChunkColliders(this.cachedChunkData[e])}))}removeChunkImages(e){if(this.showedChunkImages[e.index])for(let t=0;t<e.layers.length;t++){const i=e.layers[t].images;if(i&&(!this.resetting||!this.interuptedChunkImages[e.index]&&!this.pendingChunkImageLoads[e.index]))for(let e in i){const s=i[e];for(let e=0;e<s.length;e+=3){const i=s[e+2];this.initiailizedSprites[t][i]?--this.initiailizedSprites[t][i].chunkCount||(this.initiailizedSprites[t][i].removeFromMap(),delete this.initiailizedSprites[t][i]):this.resetting}}}}forceShowChunkImages(e,t){return s(this,void 0,void 0,(function*(){if(this.resetting)return!1;for(let i=0;i<e.layers.length;i++){2==i&&e.index;const s=e.layers[i].images;if(s)for(let n in s){const r=s[n];for(let s=0;s<r.length;s+=3){const a=r[s+2];if(this.initiailizedSprites[i])if(this.initiailizedSprites[i][a])this.initiailizedSprites[i][a].chunkCount++;else{this.pendingChunkImageLoads[e.index]=!0;const o=yield this.imageManager._getMapImage(parseInt(n),r[s],r[s+1],a,i);if(delete this.pendingChunkImageLoads[e.index],this.curMapSeq!==t)return;if(this.resetting)return this.interuptedChunkImages[e.index]=!0,!1;if(!this.initiailizedSprites[i])return;o.chunkCount=1,this.initiailizedSprites[i][a]=o}}}}this.showedChunkImages[e.index]=!0,e.index}))}destroyInitializedChunk(e){const t=this.cachedChunkData[e];this.showedChunkColliders[e]&&this.collisionManager.removeChunkColliders(t),this.showedChunkImages[e]&&this.removeChunkImages(t),this.loadedChunks[e].destroy(),delete this.loadedChunks[e]}destroyChunk(e){this.cachedChunkData[e];if(this.loadedChunks[e])this.destroyInitializedChunk(e);else if(this.initBatches[e])this.destroyChunkInBatch(e);else if(!this.interuptedChunkData[e]&&!this.loadingChunkData[e])throw console.error(this),new Error("Trying to destroy a chunk that was neither loaded nor in the batch queue. The chunk index was "+e);delete this.showedChunkColliders[e],delete this.showedChunkImages[e],delete this.cachedChunkData[e]}bakeAndSaveNeededChunks(){return s(this,void 0,void 0,(function*(){for(let e=0;e<this.indexesToUpdate.length;e++){const t=this.indexesToUpdate[e],i=(yield this.loadChunk(t,this.curMapSeq)).bake();yield this.saveChunkTextures(t,i),i.forEach(e=>{e.destroy(!0)})}}))}loadAllChunks(){return s(this,void 0,void 0,(function*(){return!0}))}loadChunkData(e,t){return s(this,void 0,void 0,(function*(){if(this.cachedChunkData[e])return this.cachedChunkData[e];if(this.resetting)throw new Error("no loading chunk data while resetting.");const i=this.mapId;let s;if(this.loadingChunkData[e]=!0,this.chunkLoaderWorker)s=yield this.chunkLoaderWorker.getChunkData(e);else{const t=r.mapFileKey(this.baseUrl,this.mapId,e);s=this.indexedDbLoader?yield this.indexedDbLoader.loadJson(t):yield a.httpGetAsync(t,!1)}return this.curMapSeq!==t?(i in this.cachedMapChunksDatas&&(this.cachedMapChunksDatas[i].chunks[e]=s),null):(delete this.loadingChunkData[e],s.index=e,this.resetting?(this.interuptedChunkData[e]=!0,i in this.cachedMapChunksDatas&&(this.cachedMapChunksDatas[i].chunks[e]=s)):this.cachedChunkData[e]=s,s)}))}loadChunkLocalStorage(e){return JSON.parse(localStorage.getItem(`${this.localStorageDataKey}_${e}`))}loadChunkWebWorker(e){return s(this,void 0,void 0,(function*(){return null}))}makeChunkLayerKey(e,t){return`${this.mapId}_${e}_${t}`}deleteChunkTextures(){}saveChunkTextures(e,t){return s(this,void 0,void 0,(function*(){for(let i=0;i<t.length;i++)yield this.indexedDbLoader.saveTexture(this.makeChunkLayerKey(e,i),t[i])}))}loadChunkTextures(e){return s(this,void 0,void 0,(function*(){const t=[],i=this.cachedChunkData[e];if(!i)throw new Error("no chunk data found");for(let s=0;s<i.layers.length;s++)t.push(this.indexedDbLoader.loadTexture(this.makeChunkLayerKey(e,s)));return Promise.all(t)}))}isVisibleWithBuffer(e,t,i){let{x:s,y:n,width:r,height:a}=this.playerViewRect;return s-=t/2,n-=i/2,r+=t,a+=i,e.x<s+r&&e.x+e.width>s&&e.y<n+a&&e.height+e.y>n}webGlAtlasFactory(e){return new d.WebGLTextureAtlas(e)}canvasAtlasFactory(e){return new l.CanvasTextureAtlas(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapFileKey=function(e,t,i){return null!=i?`${e}/${t}/s_${i}`:`${e}/${t}/map`},t.mapMetaPath=function(e,t){return`${e}/${t}/meta`}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3);class n extends PIXI.utils.EventEmitter{constructor(e,t,i,n,r,a){super(),this.colliders=[],this.subChunkContainers=[],this.subChunkRenderedSprites=[],this.layerRenderedContainers=[],this.isBatching=!1,this.visibleChunks=[],this.spritePool=[],this.initBatches=[],this.initializedSubChunks=!1,this.usingBakedRenderTextures=!1,this.bakingOnTheGo=!1,this.hidden=!1,this.layerContainers=[],this.worldSubChunkIndexes={},this.localChunkIndexesArray=[],this.localToWorldSubChunkIndexes={},this.mapMetaData=e,this.textureAtlassesByLayerIndex=i;const o=e.subChunkW||s.RUNTIME_TILE_LAYER_SECTION_SIZE,h=e.subChunkH||s.RUNTIME_TILE_LAYER_SECTION_SIZE;this.subChunkW=o,this.subChunkH=h,this.subChunkColumns=Math.ceil(t.width/o),this.subChunkRows=Math.ceil(t.height/h),this.maxSubChunks=this.subChunkRows*this.subChunkColumns,this.chunkData=t;const l=Math.ceil(this.mapMetaData.mapW/o),d=Math.floor(this.chunkData.x/o),u=Math.floor(this.chunkData.y/h);this.parentStartingSubChunkIndex=u*l+d;for(let e=0;e<this.subChunkColumns;e++){let t=e+d;for(let i=0;i<this.subChunkRows;i++){const s=(i+u)*l+t,n=i*this.subChunkColumns+e;this.worldSubChunkIndexes[s]=n,this.localToWorldSubChunkIndexes[n]=s}}this.localChunkIndexesArray=Object.keys(this.localToWorldSubChunkIndexes).map(parseInt).sort((e,t)=>e-t),this.tileManager=r,this.containerPool=n}bake(e){const t=[],i=[];for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)i.push(new PIXI.Container);return i.forEach((i,s)=>{e.render(i,t[s])}),t}orderSubChunksByDistanceDescending(e){const t=new Array(this.maxSubChunks);for(let i=0;i<this.maxSubChunks;i++){const n=this.chunkData.x+i%this.subChunkColumns*s.RUNTIME_TILE_LAYER_SECTION_SIZE,r=this.chunkData.y+Math.floor(i/this.subChunkColumns)*s.RUNTIME_TILE_LAYER_SECTION_SIZE;t[i]={i:i,d:Math.sqrt(Math.pow(n-e.x,2)+Math.pow(r-e.y,2))}}return t.sort((e,t)=>e.d-t.d),t.map(e=>e.i)}interuptBatch(){const e=[];this.initBatches.length=0,this.isBatching=!1;for(let t=0;t<this.maxSubChunks;t++)this.subChunkRenderedSprites[t]?e[t]=this.subChunkRenderedSprites[t]:this.subChunkContainers[t]?e[t]=this.subChunkContainers[t]:(this.addTilesToSubChunkContainer(t),e[t]=this.subChunkContainers[t]);return e}initTileLayers(){for(let e=0;e<this.maxSubChunks;e++)this.addTilesToSubChunkContainer(e);const e=new Array(this.mapMetaData.layerTileLayerOrder.length);for(let t=0;t<this.mapMetaData.layerTileLayerOrder.length;t++){e[t]=new Array(this.maxSubChunks);for(let i=0;i<this.maxSubChunks;i++)this.subChunkContainers[i]&&(e[t][i]=this.subChunkContainers[i][t])}return e}initBatchRender(e){var t;const i=this.orderSubChunksByDistanceDescending(e);if(this.isBatching)throw new Error("Alreading batching...");this.isBatching=!0;for(let e=0;e<i.length;e++){const s=i[e];this.subChunkContainers[s]=new Array(this.mapMetaData.layerTileLayerOrder.length);for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)if(this.initBatches.push(this.renderSubChunkLayer.bind(this,s,e,null,null,!0)),null===(t=this.chunkData.layers[e])||void 0===t?void 0:t.tileLayers)for(let t=0;t<this.chunkData.layers[e].tileLayers.length;t++)this.chunkData.layers[e].tileLayers[t]&&this.chunkData.layers[e].tileLayers[t].subChunks[s]&&this.initBatches.push(this.addSizedTilesToSubChunkLayerContainer.bind(this,t,e,s,null,null,!0));this.initBatches.push(()=>{this.subChunkContainers[s]=new Array(this.mapMetaData.layerTileLayerOrder.length),this.subChunkRenderedSprites[s]=new Array(this.mapMetaData.layerTileLayerOrder.length);for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)this.subChunkContainers[s][e]=new PIXI.Container})}}forceBatches(){if(this.initBatches.length>0)for(let e=this.initBatches.length-1;e>=0;e--)this.initBatches[e]();this.initBatches.length=0,this.isBatching=!1}nextBatch(e=0){const t=this.initBatches.pop();if(t){const i=performance.now();return t(),!((e+=performance.now()-i)<2)||this.nextBatch(e)}return this.isBatching=!1,!1}destroy(){this.initBatches.length=0;for(let e=0;e<this.subChunkContainers.length;e++)for(let t=0;t<this.subChunkContainers[e].length;t++)if(this.subChunkRenderedSprites[e]&&this.subChunkRenderedSprites[e][t]){this.textureAtlassesByLayerIndex[t].removeChunkFromTexture(this.localToWorldSubChunkIndexes[e]);const i=this.subChunkRenderedSprites[e][t];i.parent&&i.parent.removeChild(i),i.texture.destroy(!1),i.destroy()}else this.subChunkContainers[e]&&this.subChunkContainers[e][t]&&(Array.from(this.subChunkContainers[e][t].children).forEach(e=>{e.removeFromMap()}),this.subChunkContainers[e][t].destroy());return this.subChunkContainers.length=0,this.subChunkRenderedSprites.length=0,!0}hide(){this.hidden=!0;for(let e=0;e<this.maxSubChunks;e++)for(let t=0;t<this.mapMetaData.layerTileLayerOrder.length;t++)this.subChunkContainers[e]&&this.subChunkContainers[e][t]&&(this.subChunkContainers[e][t].visible=!1),this.subChunkRenderedSprites[e]&&this.subChunkRenderedSprites[e][t]&&(this.subChunkRenderedSprites[e][t].visible=!1);return!0}show(e,t,i){if(this.hidden)for(let e=0;e<this.maxSubChunks;e++)for(let t=0;t<this.mapMetaData.layerTileLayerOrder.length;t++)this.subChunkContainers[e]&&this.subChunkContainers[e][t]&&(this.subChunkContainers[e][t].visible=!0),this.subChunkRenderedSprites[e]&&this.subChunkRenderedSprites[e][t]&&(this.subChunkRenderedSprites[e][t].visible=!0);else if(this.isBatching)this.forceBatches();else for(let e=0;e<this.maxSubChunks;e++)this.subChunkRenderedSprites[e]||this.renderSubChunk(e),this.isBatching=!1;return this.subChunkRenderedSprites}bakeSubChunk(e){return[]}updateVisibleSubChunks(e){const t={};for(let i=0;i<e.length;i++)if(e[i]in this.worldSubChunkIndexes){const s=this.worldSubChunkIndexes[e[i]];if(t[s]=!0,this.subChunkContainers[s])for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)this.subChunkContainers[s][e]&&(this.subChunkContainers[s][e].visible=!0);if(this.subChunkRenderedSprites[s])for(let e=0;e<this.mapMetaData.layerTileLayerOrder.length;e++)this.subChunkRenderedSprites[s][e]&&(this.subChunkRenderedSprites[s][e].visible=!0)}for(let e=0;e<this.localChunkIndexesArray.length;e++)if(!t[this.localChunkIndexesArray[e]]){if(this.subChunkContainers[this.localChunkIndexesArray[e]])for(let t=0;t<this.mapMetaData.layerTileLayerOrder.length;t++)this.subChunkContainers[this.localChunkIndexesArray[e]][t]&&(this.subChunkContainers[this.localChunkIndexesArray[e]][t].visible=!1);if(this.subChunkRenderedSprites[this.localChunkIndexesArray[e]])for(let t=0;t<this.mapMetaData.layerTileLayerOrder.length;t++)this.subChunkRenderedSprites[this.localChunkIndexesArray[e]][t]&&(this.subChunkRenderedSprites[this.localChunkIndexesArray[e]][t].visible=!1)}}renderSubChunkLayer(e,t,i,n,r=!1,a=!0){const o=performance.now();if(this.subChunkRenderedSprites[e][t]){const i=this.subChunkRenderedSprites[e][t];return this.emit("add-subchunk-layer-sprite",{chunkIndex:this.chunkData.index,layerIndex:t,sprite:i,subsectionIndex:e}),i}this.subChunkContainers[e][t]||this.addTilesToSubChunkLayerContainer(t,e,i,n);const h=this.subChunkContainers[e][t];if(!h||!h.children.length)return;const{x:l,y:d}=h.getLocalBounds();i=this.chunkData.x+e%this.subChunkColumns*s.RUNTIME_TILE_LAYER_SECTION_SIZE,n=this.chunkData.y+Math.floor(e/this.subChunkColumns)*s.RUNTIME_TILE_LAYER_SECTION_SIZE;const u=this.textureAtlassesByLayerIndex[t].renderSubChunkLayerGroup(this.localToWorldSubChunkIndexes[e],h),c=new PIXI.Sprite;c.texture=u,this.subChunkRenderedSprites[e][t]=c,Array.from(h.children).forEach((e,t)=>{e.removeFromMap()}),h.destroy(!1),c.x=i+l,c.y=n+d,c.visible=!1;performance.now();return this.emit("add-subchunk-layer-sprite",{chunkIndex:this.chunkData.index,layerIndex:t,sprite:c,subsectionIndex:e}),c}renderSubChunk(e,t=!0){this.forceBatches();const i=this.chunkData.x+e%this.subChunkColumns*s.RUNTIME_TILE_LAYER_SECTION_SIZE,n=this.chunkData.y+Math.floor(e/this.subChunkColumns)*s.RUNTIME_TILE_LAYER_SECTION_SIZE;if(this.subChunkRenderedSprites[e]||(this.subChunkRenderedSprites[e]=new Array(this.mapMetaData.layerTileLayerOrder.length)),this.subChunkContainers[e])for(let s=0;s<this.mapMetaData.layerTileLayerOrder.length;s++)!this.subChunkRenderedSprites[e][s]&&this.renderSubChunkLayer(e,s,i,n,t);else{this.addTilesToSubChunkContainer(e);for(let s=0;s<this.mapMetaData.layerTileLayerOrder.length;s++)this.renderSubChunkLayer(e,s,i,n,t)}return this.subChunkRenderedSprites[e]}addSizedTilesToSubChunkLayerContainer(e,t,i,n,r,a=!1){const o=this.chunkData.layers,{layerId:h,colliders:l,tileLayers:d,images:u}=o[t];if(!d[e]||!d[e].subChunks[i])return;n=i%this.subChunkColumns*s.RUNTIME_TILE_LAYER_SECTION_SIZE,Math.floor(i/this.subChunkColumns),s.RUNTIME_TILE_LAYER_SECTION_SIZE;const c=this.subChunkContainers[i][t];if(!c)throw new Error("should have container at this point");const{tileWidth:p,tileHeight:g,tileSizeSeq:f,subChunks:m,maxTileId:y,startOffsets:C}=d[e],x=m[i];let w=x[0],v=x[1];for(let e=2;e<m[i].length;e++){let t=m[i][e],r=t;if(t){let e;if(t>y){let i=!!(1073741824&t),s=!!(536870912&t),n=!!(268435456&t);r&=-1879048193,e=this.tileManager.getTile(f,r);let a=0,o=0,h=1,l=1;s&&(l=-1,a=g),i&&(h=-1,o=p),n&&(e.rotation=Math.PI/180*90,i||(o=0),a=s?0:g),e.colliders}else e=this.tileManager.getTile(f,t);e.x=w,e.y=v,c.addChild(e)}w+=p,(w>=s.RUNTIME_TILE_LAYER_SECTION_SIZE||w>=this.chunkData.x+this.chunkData.width-n)&&(w=x[0],v+=g)}}addTilesToSubChunkLayerContainer(e,t,i,s){var n;const r=this.chunkData.layers;0==e&&0==t&&this.parentStartingSubChunkIndex;if(this.subChunkContainers[t]||(this.subChunkContainers[t]=[]),!(null===(n=r[e])||void 0===n?void 0:n.tileLayers))return;const{layerId:a,colliders:o,tileLayers:h,images:l}=r[e];this.subChunkContainers[t][e]=new PIXI.Container;for(let n=0;n<h.length;n++)h[n]&&h[n].subChunks[t]&&(this.subChunkContainers[t][e].x=i,this.subChunkContainers[t][e].y=s,this.addSizedTilesToSubChunkLayerContainer(n,e,t,i,s))}addTilesToSubChunkContainer(e){if(this.subChunkContainers[e])return;const t=this.chunkData.layers,i=this.chunkData.x+e%this.subChunkColumns*s.RUNTIME_TILE_LAYER_SECTION_SIZE,n=this.chunkData.y+Math.floor(e/this.subChunkColumns)*s.RUNTIME_TILE_LAYER_SECTION_SIZE;this.subChunkContainers[e]=[];for(let s=0;s<t.length;s++)this.addTilesToSubChunkLayerContainer(s,e,i,n);this.initializedSubChunks=!0}getOffset(e,t){}getVisibleIndexes(e){const{x:t,y:i,width:s,height:n}=this.chunkData;return[]}}t.WorldChunk=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(10);class n extends s.AbstractTextureAtlas{constructor(e){super(2048,e),this.lookup={}}removeChunkFromTexture(e){if(!this.lookup[e])return;const{x:t,y:i,w:s,h:n,aIdx:r,texture:a}=this.lookup[e];delete this.lookup[e],this.addOpenSpot(r,t,i,s,n)}}t.CanvasTextureAtlas=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(10);class n extends s.AbstractTextureAtlas{constructor(e){super(e.gl.MAX_TEXTURE_SIZE,e),this.lookup={}}removeChunkFromTexture(e){if(!this.lookup[e])return;const{x:t,y:i,w:s,h:n,aIdx:r,texture:a}=this.lookup[e];this.renderer.bindRenderTexture(this.atlasses[r]);const o=this.renderer.gl;o.enable(o.SCISSOR_TEST),o.scissor(t,i,s,n),this.renderer.clear(),this.renderer.bindRenderTexture(),delete this.lookup[e],this.addOpenSpot(r,t,i,s,n)}}t.WebGLTextureAtlas=n},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(31),r=i(3),a=i(32),o=i(0);t.Decoder=class{constructor(e,t,i){this.propSeqToNameLookup={},this.tileIdToSizeLookup=[],this.tagSeqToStringLookup={},this.tileIdToSizeLookup=e,this.tagSeqToStringLookup=t,this.propSeqToNameLookup=i||{}}decodeMetaData(e){const t=e[0],i=e[1];let s=2,n=0;const a=[];let o,h=1;for(;;){if(e[s]===r.RESERVED_FLAGS.BLOB_SEPARATOR){if(h++,2===h){o=s+1;break}}else 1===h?(e[s]===r.RESERVED_FLAGS.EMPTY_SECTION_FLAG?a.push(null):a.push([e[s]]),n=a.length-1,h=0):a[n].push(e[s]);s++}return{mapW:t,mapH:i,startingChunkIndex:o,layerTileLayerOrder:a}}adjustNeg(e){return e.x>r.RESERVED_FLAGS.NEGATIVE_NUMBER&&(e.x&=~r.RESERVED_FLAGS.NEGATIVE_NUMBER,e.x*=-1),e.y>r.RESERVED_FLAGS.NEGATIVE_NUMBER&&(e.y&=~r.RESERVED_FLAGS.NEGATIVE_NUMBER,e.y*=-1),e}decodeString(e,t){let i="",s=t[e++];for(;s!=r.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR;)i+=String.fromCharCode(s),s=t[e++];return{decodedString:i,endIndex:e}}decodePropStrings(e,t){const i={};let s=null,n=t[e];for(;n!=r.RESERVED_FLAGS.BLOB_SEPARATOR;)if(n==r.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)s=null,n=t[++e];else if(null===s){if(s=this.propSeqToNameLookup[n],!s)throw new Error("Expected prop");i[s]="",n=t[++e]}else i[s]+=String.fromCharCode(n),n=t[++e];return{endIndex:e+1,props:i}}decodePropNumbers(e,t){const i={};let s=t[e];for(;s!=r.RESERVED_FLAGS.BLOB_SEPARATOR;){const n=this.propSeqToNameLookup[t[e++]];if(!n)throw new Error("Did not find seq.");let a=t[e++];a>r.RESERVED_FLAGS.NEGATIVE_NUMBER&&(a&=~r.RESERVED_FLAGS.NEGATIVE_NUMBER,a*=-1),i[n]=a,s=t[e]}return{endIndex:e+1,props:i}}decodePropBooleans(e,t){const i={};let s=t[e];for(;s!=r.RESERVED_FLAGS.BLOB_SEPARATOR;){const n=this.propSeqToNameLookup[t[e++]];if(!n)throw new Error("Did not find seq.");let r=!!t[e++];i[n]=r,s=t[e]}return{endIndex:e+1,props:i}}decodePolygon(e,t){let i=e;const s=t[i++],n=t[i++];let r=[];const a=t[i++];for(;r.length<a;)r.push(this.adjustNeg({x:t[i++],y:t[i++]}));const h={colObj:{id:s,shapeType:o.RuntimeColliderShape.POLYGON,shapeData:r},endIndex:i};return this.decodeColliderTagsAndProps(h,n,t,i),h}decodeProps(e,t){let i,s={};return t[e]===r.RESERVED_FLAGS.EMPTY_SECTION_FLAG?{endAtIndex:e+1}:(({endIndex:e,props:i}=this.decodePropBooleans(e,t)),s=Object.assign(Object.assign({},s),i),({endIndex:e,props:i}=this.decodePropNumbers(e,t)),s=Object.assign(Object.assign({},s),i),({endIndex:e,props:i}=this.decodePropStrings(e,t)),s=Object.assign(Object.assign({},s),i),{props:s,endAtIndex:e})}mapTags(e){return e.map(e=>{if(!(e in this.tagSeqToStringLookup))throw new Error(`Could not find tag seq ${e} in lookup.`);return this.tagSeqToStringLookup[e]})}decodeRect(e,t){let i=e;const s=t[i++],n=t[i++],r=this.adjustNeg({x:t[i++],y:t[i++],w:t[i++],h:t[i++]}),a={colObj:{id:s,shapeType:o.RuntimeColliderShape.RECT,shapeData:r},endIndex:i};return this.decodeColliderTagsAndProps(a,n,t,i),a}decodeColliderTagsAndProps(e,t,i,s){const{tags:n,endAtIndex:r}=this.decodeTags(t,i,s);n&&(e.colObj.tags=n),e.endIndex=r;const{endAtIndex:a,props:o}=this.decodeProps(r,i);o&&(e.colObj.props=o),e.endIndex=a}decodeTags(e,t,i){let s;if(!e)return{endAtIndex:i};for(s=[];s.length<e;)s.push(t[i++]);return{tags:this.mapTags(s),endAtIndex:i}}decodePoint(e,t){let i=e;const s=t[i++],n=t[i++],r=this.adjustNeg({x:t[i++],y:t[i++]}),a={colObj:{id:s,shapeType:o.RuntimeColliderShape.POINT,shapeData:r},endIndex:i};return this.decodeColliderTagsAndProps(a,n,t,i),a}decodeCollider(e,t,i){switch(e){case"polygons":return this.decodePolygon(t,i);case"rects":return this.decodeRect(t,i);case"points":return this.decodePoint(t,i);default:throw new Error(`Unhandled type ${e}`)}}decodeColliders(e,t,i){const s=new Array(i);let n=!1,r=0;const a=["points","rects","polygons"];let o=e;for(;r<i;){let e=0;for(;e<a.length;){let i=0,h=t[o++];for(;i<h;){n=!0,s[r]||(s[r]={}),s[r][a[e]]||(s[r][a[e]]=new Array(h));const{endIndex:l,colObj:d}=this.decodeCollider(a[e],o,t);o=l,s[r][a[e]][i]=d,i++}e++}r++}return{decoded:n?s:null,endIndex:o}}splitChunkArrayLayers(e,t){const i=new Array(t.length),s=new Array(t.length);let n=0;for(let a=0;a<t.length;a++){s[a]=[];const o=t[a];if(o&&o.length){i[a]=[],o.forEach(()=>{i[a].push([])});let t=0;for(;t<o.length;)e[n]===r.RESERVED_FLAGS.BLOB_SEPARATOR?t++:i[a][t].push(e[n]),n++}else i[a]=null}let a,o=0,h=!1,l=!0,d=0,u=!0;for(;o<t.length;){5==e[n+1]&&e[n+2];const i=e[n];if(l)a=i,a||(s[o]=null),l=!1;else if(i===r.RESERVED_FLAGS.BLOB_SEPARATOR)u=!0,o++,o<t.length&&(l=!0);else if(i===r.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)u=!0,s[o].push(i);else{h=!0,d++,d===(u?4:3)&&(d=0,u=!1),s[o].push(i)}n++}const{endIndex:c,decoded:p}=this.decodeColliders(n,e,t.length);n=c;const g={tileArrays:i};return h&&(g.images=s),p&&(g.colliders=p),g}decodeChunk(e,t,i,s,r,o,h,l,d){d=Array.isArray(d)?d:n.default.uncompress(d);const u=Math.ceil(t/s),c=e%u*s,p=Math.floor(e/u)*r,{endX:g,endY:f}=a.calculateEndOfChunk(t,i,s,r,c,p),m={index:e,x:c,y:p,width:g-c,height:f-p,layers:new Array(l.length)},y=this.splitChunkArrayLayers(d,l),C=!!y.images,x=!!y.colliders;for(let e=0;e<l.length;e++){const n=l[e];m.layers[e]={layerId:e},n&&(m.layers[e].tileLayers=n.map((n,a)=>{const{width:l,height:d}=this.tileIdToSizeLookup[n],u=y.tileArrays[e][a];return{tileSizeSeq:n,maxTileId:1e4,tileWidth:l,tileHeight:d,subChunks:u?this.unmergeSubsectionTiles(l,d,o,h,s,r,c,p,t,i,u):null}})),C&&y.images[e]&&(m.layers[e].images=this.unmergeLayerImages(y.images[e])),x&&y.colliders[e]&&(m.layers[e].colliders=y.colliders[e])}return m}getCompressedChunksFromMap(e,t,i){const s=n.default.uncompress(i),{mapW:a,mapH:o,startingChunkIndex:h,layerTileLayerOrder:l}=this.decodeMetaData(s),d=Math.ceil(a/e)*Math.ceil(o/t);let u=0;const c=new Array(d);for(let e=0;e<d;e++)c[e]=[];for(let e=h;e<s.length;e++)if(s[e]!==r.RESERVED_FLAGS.CHUNK_SEPERATOR)c[u].push(s[e]);else{if(++u,u===d){if(e!==s.length-1)throw new Error("Should be on last element by the time it gets here.");break}c[u]=[]}return{metaData:{mapW:a,mapH:o,startingChunkIndex:h,layerTileLayerOrder:l},buffers:c.map(e=>n.default.compress(e))}}decodeMap(e,t,i,a,o,h){return s(this,void 0,void 0,(function*(){const s=Array.isArray(o)?o:n.default.uncompress(o),{mapW:l,mapH:d,startingChunkIndex:u,layerTileLayerOrder:c}=this.decodeMetaData(s),p=(c.length,Math.ceil(l/e)*Math.ceil(d/t)),g=new Array(p);g[0]=[];let f=0;for(let e=u;e<s.length;e++)if(s[e]!==r.RESERVED_FLAGS.CHUNK_SEPERATOR)g[f].push(s[e]);else{if(++f,f===p){if(e!==s.length-1)throw new Error("Should be on last element by the time it gets here.");break}g[f]=[]}const m=[];if(h)for(let s=0;s<g.length;s++){const n=this.decodeChunk(s,l,d,e,t,i,a,c,g[s]);m.push(n),yield h(n,s)}else for(let s=0;s<g.length;s++)m.push(this.decodeChunk(s,l,d,e,t,i,a,c,g[s]));return{metaData:{mapW:l,mapH:d,startingChunkIndex:u,layerTileLayerOrder:c},chunks:m}}))}unmergeLayerImages(e){const t={};let i=!0,s=0,n=null;for(let a=0;a<e.length;a++)if(e[a]!==r.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)if(i)n=e[a],t[n]=[],i=!1;else{let i=e[a];s<2&&i>r.RESERVED_FLAGS.NEGATIVE_NUMBER&&(i&=~r.RESERVED_FLAGS.NEGATIVE_NUMBER,i*=-1),t[n].push(i),s++,3===s&&(s=0)}else i=!0;return t}unmergeSubsectionTiles(e,t,i,s,n,o,h,l,d,u,c,p){let g,f;p?(g=p.x,f=p.y):({endX:g,endY:f}=a.calculateEndOfChunk(d,u,n,o,h,l));const m=a.calculateSubChunks(d,u,n,o,h,l,i,s),y=new Array(m).fill(-1);let C=0,x=h,w=l,{x:v,y:T}=a.getTopLeftPadding(e,t,d,u,i,s,x,w),b=v,S=T;const k=()=>{C++,b=0,S=0,x+=i,x>=g&&(x=h,w+=s),({x:v,y:T}=a.getTopLeftPadding(e,t,d,u,i,s,x,w)),b=v,S=T};for(let n=0;n<c.length;n++)if(c[n]===r.RESERVED_FLAGS.EMPTY_SECTION_FLAG){if(-1!==y[C])throw new Error("This sub chunk should have been -1 at this time");y[C]=null,k()}else{if(-1===y[C]&&(y[C]=[v,T]),y[C].push(c[n]),b+=e,x+b>=g||b>=i){b=v,S+=t,(w+S>=f||S>=s)&&k()}}return y}}},function(e,t,i){"use strict";function s(){}function n(e){return e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5}function r(e){return e+e^e>>31}function a(e){return e>>1^-(1&e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,s.computeCompressedSizeInBytes=function(e){for(var t=e.length,i=0,s=0;s<t;s++)i+=n(e[s]);return i},s.computeCompressedSizeInBytesSigned=function(e){for(var t=e.length,i=0,s=0;s<t;s++)i+=n(r(e[s]));return i},s.compress=function(e){for(var t=e.length,i=new ArrayBuffer(s.computeCompressedSizeInBytes(e)),n=new Int8Array(i),r=0,a=0;a<t;a++){var o=e[a];o<128?n[r++]=o:o<16384?(n[r++]=127&o|128,n[r++]=o>>>7):o<1<<21?(n[r++]=127&o|128,n[r++]=o>>>7&127|128,n[r++]=o>>>14):o<1<<28?(n[r++]=127&o|128,n[r++]=o>>>7&127|128,n[r++]=o>>>14&127|128,n[r++]=o>>>21):(n[r++]=127&o|128,n[r++]=o>>>7&127|128,n[r++]=o>>>14&127|128,n[r++]=o>>>21&127|128,n[r++]=o>>>28)}return i},s.computeHowManyIntegers=function(e){for(var t=new Int8Array(e).length,i=0,s=0;s<t;s++)i+=e[s]>>>7;return t-i},s.uncompress=function(e){for(var t=[],i=new Int8Array(e),s=i.length,n=0;s>n;){var r=i[n++],a=127&r;r>=0?t.push(a):(a|=(127&(r=i[n++]))<<7,r>=0?t.push(a):(a|=(127&(r=i[n++]))<<14,r>=0?t.push(a):(a|=(127&(r=i[n++]))<<21,r>=0?t.push(a):(a|=(r=i[n++])<<28,t.push(a)))))}return t},s.compressSigned=function(e){for(var t=e.length,i=new ArrayBuffer(s.computeCompressedSizeInBytesSigned(e)),n=new Int8Array(i),a=0,o=0;o<t;o++){var h=r(e[o]);h<128?n[a++]=h:h<16384?(n[a++]=127&h|128,n[a++]=h>>>7):h<1<<21?(n[a++]=127&h|128,n[a++]=h>>>7&127|128,n[a++]=h>>>14):h<1<<28?(n[a++]=127&h|128,n[a++]=h>>>7&127|128,n[a++]=h>>>14&127|128,n[a++]=h>>>21):(n[a++]=127&h|128,n[a++]=h>>>7&127|128,n[a++]=h>>>14&127|128,n[a++]=h>>>21&127|128,n[a++]=h>>>28)}return i},s.uncompressSigned=function(e){for(var t=[],i=new Int8Array(e),s=i.length,n=0;s>n;){var r=i[n++],o=127&r;r>=0?t.push(a(o)):(o|=(127&(r=i[n++]))<<7,r>=0?t.push(a(o)):(o|=(127&(r=i[n++]))<<14,r>=0?t.push(a(o)):(o|=(127&(r=i[n++]))<<21,r>=0?t.push(a(o)):(o|=(r=i[n++])<<28,t.push(a(o))))))}return t}},function(e,t,i){"use strict";function s(e,t,i,s,n,r,a,o){const h=e-n,l=t-r,d=Math.min(Math.ceil(i/a),Math.ceil(h/a));return{rows:Math.min(Math.ceil(s/o),Math.ceil(l/o)),columns:d}}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateEndOfChunk=function(e,t,i,s,n,r){const a=e-n,o=t-r;return{endX:n+(a>=i?i:a),endY:r+(o>=s?s:o)}},t.calculateSubChunks=function(e,t,i,n,r,a,o,h){const{rows:l,columns:d}=s(e,t,i,n,r,a,o,h);return l*d},t.calculateRowsAndColumns=s,t.getTopLeftPadding=function(e,t,i,s,n,r,a,o){const h={x:0,y:0},l=Math.floor(a/n),d=Math.floor(o/r);let u=(e-n%e)*l,c=Math.floor(u/e);return h.x=u-c*e,u=(t-r%t)*d,c=Math.floor(u/t),h.y=u-c*t,h},t.calculateOffsets=function(e,t,i,s,n,r,a,o){const h=Math.ceil(i/n),l=Math.ceil(s/r),d={x:0,y:0},u=Math.floor(a/n),c=Math.floor(o/r);let p=(e-n%e)*u,g=Math.floor(p/e);d.x=p-g*e,p=(t-r%t)*c,g=Math.floor(p/t),d.y=p-g*t;const f={x:0,y:0};return u<h-1&&(p=(e-n%e)*(u+1),g=Math.floor(p/e),f.x=p-g*e),c<l-1&&(p=(t-r%t)*(c+1),g=Math.floor(p/t),f.y=p-g*t),{bottomRightOverflow:f,topLeftPadding:d}}},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,s,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,s||e,r),h=n?n+t:t;return e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],o]:e._events[h].push(o):(e._events[h]=o,e._eventsCount++),e}function h(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)s.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,r=i.length,a=new Array(r);s<r;s++)a[s]=i[s].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,s,r,a){var o=n?n+e:e;if(!this._events[o])return!1;var h,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,s),!0;case 5:return d.fn.call(d.context,t,i,s,r),!0;case 6:return d.fn.call(d.context,t,i,s,r,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];d.fn.apply(d.context,h)}else{var c,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,i);break;case 4:d[l].fn.call(d[l].context,t,i,s);break;default:if(!h)for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];d[l].fn.apply(d[l].context,h)}}return!0},l.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},l.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},l.prototype.removeListener=function(e,t,i,s){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return h(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||s&&!a.once||i&&a.context!==i||h(this,r);else{for(var o=0,l=[],d=a.length;o<d;o++)(a[o].fn!==t||s&&!a[o].once||i&&a[o].context!==i)&&l.push(a[o]);l.length?this._events[r]=1===l.length?l[0]:l:h(this,r)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&h(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1);var n;!function(e){e[e.INFINITE_SIZE=0]="INFINITE_SIZE",e[e.FIXED_VIEW=1]="FIXED_VIEW",e[e.MAX_SIZE=2]="MAX_SIZE"}(n=t.LevelCameraRenderMode||(t.LevelCameraRenderMode={}));class r{constructor(e={},t,i,r){this.focused=!1,this.viewRect={x:0,y:0,width:0,height:0},this.offsetViewRect={x:0,y:0,width:0,height:0},this.centeredScreenPosition={x:0,y:0},this.mapOffsetX=0,this.mapOffsetY=0,this.mapPaddingLeft=0,this.mapPaddingTop=0,this.resizeWithScreen=!0,this.stopCameraAtBoundaries=!0,this.isStopping=!1,this.staticSprites=[],this.dynamicSprites=[],this.playerViewRect={x:0,y:0,width:0,height:0},this.resolution=1,this.computedResolution=1,this.centeredScreenPosition={x:0,y:0},this.renderer=r,this.gameStage=t,this.flags=i,e=s.mergeOptions(e,{renderMode:n.INFINITE_SIZE,resolution:1,resizeWithScreen:!0,viewWidth:"undefined"!=typeof window?window.innerWidth:"undefined"!=typeof screen?screen.width:null,viewHeight:"undefined"!=typeof window?window.innerHeight:"undefined"!=typeof screen?screen.height:null,stopCameraAtBoundaries:!0},["resolution","viewWidth","viewHeight"]),this.resolution=e.resolution,this.renderMode=e.renderMode,this.resizeView(e.viewWidth,e.viewHeight),this.resizeWithScreen=!1!==e.resizeWithScreen,this.stopCameraAtBoundaries=e.stopCameraAtBoundaries,this.handleRemovedFocusedGameObject=this.handleRemovedFocusedGameObject.bind(this)}reset(){this.staticSprites.length=0,this.dynamicSprites.length=0,this.gameStage.x=0,this.gameStage.y=0}handleRemovedFocusedGameObject(){this.focusedGameObject.offRemovedFromMap(this.handleRemovedFocusedGameObject),this.focusedGameObject=null,this.focusOn({x:this.focusedGameObject.worldX,y:this.focusedGameObject.worldY})}focusOn(e,t=0,i=0){return this.preFocusBoundPoint=this.boundCameraCenter,this.bindCameraCenter(e)}removeSprite(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t].isStatic?this.staticSprites:this.dynamicSprites;for(let s=0;s<i.length;s++)if(e[t]===i[s]){i.splice(s,1);break}}else{const t=e.isStatic?this.staticSprites:this.dynamicSprites;for(let i=0;i<t.length;i++)if(e===t[i])return void t.splice(i,1)}}addSingleStaticSprite(e){this.staticSprites.push(e)}addStaticSprites(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.staticSprites.push(e[t]);else this.staticSprites.push(e)}addDynamicSprite(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.dynamicSprites.push(e[t]);else this.dynamicSprites.push(e)}onUpdateCamera(e){const t=r.prototype;this.updateStage=()=>{e(t.updateStage.bind(this))}}updateStage(){this.boundCameraCenter?(this.boundPositionOffsets?this.updateViewRect(Math.round(this.boundCameraCenter.x)+this.boundPositionOffsets.x,Math.round(this.boundCameraCenter.y)+this.boundPositionOffsets.y):this.updateViewRect(Math.round(this.boundCameraCenter.x),Math.round(this.boundCameraCenter.y)),this.gameStage.x=-this.playerViewRect.x,this.gameStage.y=-this.playerViewRect.y):console.error("Call world.bindCameraCenter on an object with an x and y variable.")}bindCameraCenter(e,t){this.boundPositionOffsets=t,this.boundCameraCenter=e,this.playerViewRect.x=Math.max(0,Math.min(this.playerViewRect.x,this.levelWidthInPixels-this.playerViewRect.width)),this.playerViewRect.y=Math.max(0,Math.min(this.playerViewRect.y,this.levelHeightInPixels-this.playerViewRect.height)),this.gameStage.x=-this.playerViewRect.x,this.gameStage.y=-this.playerViewRect.y,this.lastX=this.boundCameraCenter.x,this.lastY=this.boundCameraCenter.y}updateMapSize(e,t){this.mapOffsetX=0,this.mapOffsetY=0,this.levelWidthInPixels=e,this.levelHeightInPixels=t,this.levelHeightResAdjusted=t*this.resolution,this.levelWidthResAdjusted=e*this.resolution,this.viewWidth*this.resolution>this.levelWidthResAdjusted&&(this.mapOffsetX=Math.floor((this.viewWidth*this.resolution-this.levelWidthResAdjusted)/2)),this.viewHeight*this.resolution>this.levelHeightResAdjusted&&(this.mapOffsetY=Math.floor((this.viewHeight*this.resolution-this.levelHeightResAdjusted)/2))}isOutOfMap(e){}isVisibleWithBuffer(e,t,i){let{x:s,y:n,width:r,height:a}=this.playerViewRect;const o=t/2,h=i/2;return s-=o,n-=h,r+=o,a+=h,e.x<s+r&&e.x+e.width>s&&e.y<n+a&&e.height+e.y>n}isVisible(e){const{x:t,y:i,width:s,height:n}=this.playerViewRect;return e.x<t+s&&e.x+e.width>t&&e.y<i+n&&e.height+e.y>i}worldToScreen(e,t){return e-=this.playerViewRect.x,t-=this.playerViewRect.y,e/=this.ratioW,t/=this.ratioH,{x:e+this.mapPaddingLeft,y:t+this.mapPaddingTop}}screenToWorld(e,t){return{x:(e-this.mapPaddingLeft)*this.ratioW+this.playerViewRect.x,y:(t-this.mapPaddingTop)*this.ratioH+this.playerViewRect.y}}focusedCameraUpdate(){const e=this.focusedPoint.x+this.focusOffsetX,t=this.focusedPoint.y+this.focusOffsetY;this.updateViewRect(e,t)}updateViewRect(e,t){this.playerViewRect.x=e-this.halfWidth,this.playerViewRect.y=t-this.halfHeight,this.offsetViewRect.x=this.playerViewRect.x+this.mapOffsetX,this.offsetViewRect.y=this.playerViewRect.y+this.mapOffsetY,this.centeredScreenPosition.x=e+this.mapOffsetX,this.centeredScreenPosition.y=t+this.mapOffsetY;const{x:i,y:s}=this.centeredScreenPosition;if(this.stopCameraAtBoundaries){const e=Math.floor(i-this.halfWidth),t=e+this.viewWidth,n=Math.floor(s-this.halfHeight),r=n+this.viewHeight;this.isStopping=!1,e<=this.mapOffsetX?(this.playerViewRect.x=0,this.offsetViewRect.x=this.mapOffsetX,this.isStopping=!0,this.centeredScreenPosition.x=this.halfWidth+this.mapOffsetX):t>=this.levelWidthInPixels+this.mapOffsetX&&(this.playerViewRect.x=Math.max(this.levelWidthInPixels-this.viewWidth,0),this.offsetViewRect.x=this.playerViewRect.x+this.mapOffsetX,this.isStopping=!0,this.centeredScreenPosition.x=Math.floor(this.levelWidthInPixels+this.mapOffsetX-this.halfWidth)),n<=this.mapOffsetY?(this.playerViewRect.y=0,this.offsetViewRect.y=this.mapOffsetY,this.isStopping=!0,this.centeredScreenPosition.y=this.halfHeight+this.mapOffsetY):r>this.levelHeightInPixels+this.mapOffsetY&&(this.playerViewRect.y=Math.max(this.levelHeightInPixels-this.viewHeight),this.offsetViewRect.y=this.playerViewRect.y+this.mapOffsetY,this.isStopping=!0,this.centeredScreenPosition.y=Math.floor(this.levelHeightInPixels+this.mapOffsetY-this.halfHeight))}}updatePlayerSprite(e,t){this.isStopping||this.focused?(this.playerSprite.x=e-this.playerViewRect.x+this.mapOffsetX,this.playerSprite.y=t-this.playerViewRect.y+this.mapOffsetY):(this.playerSprite.x=this.centeredScreenPosition.x-this.playerViewRect.x+this.mapOffsetX,this.playerSprite.y=this.centeredScreenPosition.y-this.playerViewRect.y+this.mapOffsetY)}updateLevelSprites(e){for(let e=0;e<this.staticSprites.length;e++){const t=this.staticSprites[e];t.visible&&(t.x=t.worldX-this.playerViewRect.x+this.mapOffsetX,t.y=t.worldY-this.playerViewRect.y+this.mapOffsetY)}}focusOff(){if(!this.preFocusBoundPoint)throw new Error("No point to focus off onto.");this.bindCameraCenter(this.preFocusBoundPoint),delete this.preFocusBoundPoint}centerViewRect(e,t){this.centeredScreenPosition.x=e+this.mapOffsetX,this.centeredScreenPosition.y=t+this.mapOffsetY,this.playerViewRect.x=Math.floor(e-this.viewWidth/2),this.playerViewRect.y=Math.floor(t-this.viewHeight/2),this.offsetViewRect.x=this.playerViewRect.x+this.mapOffsetX,this.offsetViewRect.y=this.playerViewRect.y+this.mapOffsetY;for(let e=0;e<this.staticSprites.length;e++){const t=this.worldToScreen(this.staticSprites[e].worldX,this.staticSprites[e].worldY);this.staticSprites[e].x=t.x,this.staticSprites[e].y=t.y}}onResolutionUpdate(e){const{resolution:t,viewWidth:i,viewHeight:s,offsetWidth:n,offsetHeight:r,canvasWidth:a,canvasHeight:o,fixedResolution:h}=e;if(this.renderer.autoResize=!1,this.computedResolution=t,this.flags.webGl){if(t>=1){this.resolution=1,this.renderer.screen.width=i,this.renderer.screen.height=s,this.renderer.view.style.width=`${i*t}px`,this.renderer.view.style.height=`${s*t}px`;const e=this.renderer.view.parentElement.clientWidth,a=this.renderer.view.parentElement.clientHeight,o=1===t?n:(e-i*t)/2,h=1===t?r:(a-s*t)/2;this.renderer.view.style.marginLeft=`${o}px`,this.renderer.view.style.marginTop=`${h}px`,this.mapPaddingLeft=o,this.mapPaddingTop=h,this.renderer.view.width=i,this.renderer.view.height=s,this.resizeView(i,s);const l=this.renderer.rootRenderTarget;l&&l.resize(i,s)}else{this.resolution=t,this.renderer.plugins.interaction.resolution=1/t,this.renderer.screen.width=i/t,this.renderer.screen.height=s/t,this.renderer.view.style.width=`${i}px`,this.renderer.view.style.height=`${s}px`,this.renderer.view.width=Math.round(i/t),this.renderer.view.height=Math.round(s/t),this.renderer.view.style.marginLeft=`${(a-i)/2}px`,this.renderer.view.style.marginTop=`${(o-s)/2}px`,this.mapPaddingLeft=(a-i)/2,this.mapPaddingTop=(o-s)/2,this.resizeView(i,s);const e=this.renderer.rootRenderTarget;e&&e.resize(i/t,s/t)}this.renderer._activeRenderTarget&&this.renderer._activeRenderTarget===this.renderer.rootRenderTarget&&(this.renderer.rootRenderTarget.activate(),this.renderer._activeShader&&(this.renderer._activeShader.uniforms.projectionMatrix=this.renderer.rootRenderTarget.projectionMatrix.toArray(!0))),this.ratioW=this.renderer.screen.width/this.renderer.view.clientWidth,this.ratioH=this.renderer.screen.height/this.renderer.view.clientHeight,this.mapPaddingLeft*=this.ratioW,this.mapPaddingTop*=this.ratioH}}resizeView(e,t){if(!e)throw new Error("Cannot determine screen width");if(!t)throw new Error("Cannot determine screen width");this.resizeViewHeight(t),this.resizeViewWidth(e)}resizeViewWidth(e){this.viewWidth=Math.floor(e/this.resolution),this.halfWidth=Math.floor(this.viewWidth/2),this.playerViewRect.width=this.viewWidth,this.viewWidth>Math.ceil(this.levelWidthResAdjusted/this.resolution)?this.mapOffsetX=Math.floor((this.viewWidth-this.levelWidthResAdjusted)/2):this.mapOffsetX=0,this.centeredScreenPosition.x=this.viewWidth/2+this.mapOffsetX}resizeViewHeight(e){this.viewHeight=Math.floor(e/this.resolution),this.halfHeight=Math.floor(this.viewHeight/2),this.playerViewRect.height=this.viewHeight,this.viewHeight>this.levelHeightResAdjusted?this.mapOffsetY=Math.floor((this.viewHeight-this.levelHeightResAdjusted)/2):this.mapOffsetY=0,this.centeredScreenPosition.y=Math.floor(this.viewHeight/2+this.mapOffsetY)}}t.PlayerCamera=r},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(11),r=i(36);t.ChunkLoaderWorker=class{constructor(){this.nextReq=0,this.pendingRequests={},this.worker=new r,this.worker.onmessage=e=>{this.pendingRequests[e.data[1]](e.data[0])}}initWorld(e,t,i,r,a){return s(this,void 0,void 0,(function*(){if(i.length&&i.length%2)throw new Error("the tile size seq lookup should have an even amount of elements since its a width, height flat array.");return this.awaitResponse(n.Messages.INIT_LOADER,JSON.stringify([e,t,i,r,a]))}))}initMap(e){return s(this,void 0,void 0,(function*(){return this.awaitResponse(n.Messages.INIT_MAP,JSON.stringify(e))}))}getChunkData(e){return s(this,void 0,void 0,(function*(){const t=yield this.awaitResponse(n.Messages.GET_SECTION_DATA,e);return JSON.parse(t)}))}requestAndStoreAllMapChunks(e){return s(this,void 0,void 0,(function*(){const t=yield this.awaitResponse(n.Messages.REQUEST_AND_SAVE_ALL_MAP_CHUNKS,e);if(t===n.ResultCodes.ERROR)throw new Error(`Error decoding map chunk in the worker for map id ${e}`);return JSON.parse(t)}))}requestAndStoreSingleMapChunk(e,t){return s(this,void 0,void 0,(function*(){return this.awaitResponse(n.Messages.REQUEST_AND_SAVE_SINGLE_MAP_CHUNK,[e,t])}))}requestAndStoreMapChunks(e,t){return s(this,void 0,void 0,(function*(){yield this.awaitResponse(n.Messages.REQUEST_AND_SAVE_MAP_CHUNKS,[e,t])}))}awaitResponse(e,t){return s(this,void 0,void 0,(function*(){const i=++this.nextReq>65535?0:this.nextReq;return this.worker.postMessage([t,e,i]),new Promise(e=>{this.pendingRequests[i]=t=>(delete this.pendingRequests[i],e(t))})}))}}},function(e,t,i){e.exports=function(){return new Worker(i.p+"82608f8a2e4dcfc7a29b.worker.js")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(1),r=i(38),a={[s.RuntimeColliderShape.RECT]:"rects",[s.RuntimeColliderShape.POINT]:"points",[s.RuntimeColliderShape.POLYGON]:"polygons",[s.RuntimeColliderShape.CIRCLE]:"circles",[s.RuntimeColliderShape.LINE]:"lines"},o=new Array(4);o[s.RuntimeColliderShape.POINT]=(e,t)=>t,o[s.RuntimeColliderShape.RECT]=(e,t)=>({w:e.w,h:e.h,x:t.x,y:t.y}),o[s.RuntimeColliderShape.POLYGON]=(e,t)=>{const i=t.x-e[0].x,s=t.y-e[0].y;return e.map(e=>({x:e.x+=i,y:e.y+=s}))},o[s.RuntimeColliderShape.CIRCLE]=(e,t)=>({x:t.x,y:t.y,r:e.r});t.SpatialGrid=class{constructor(){this.uidIdx=1,this.dynamicColliders=[],this.staticColliders=[],this.iteration=0,this.collidersByTag={},this.colliderTags=[],this.tagCouples=[],this.staticBuckets={},this.uidCheckedCollidedMap={},this.uidArray=[],this.checkedMap={},this.curSeq=1,this.resolvePointLine=function(e,t,i,s,n,r,a=.5){const o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-s,2)),h=Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2));return o+h>=l-a&&o+h<=l+a},this.getCollidersWithTags=r.getCollidersWithTags.bind(this,this.collidersByTag),this.getBucketsLookup=new Array(5),this.getBucketsLookup[s.RuntimeColliderShape.RECT]=this.getBucketsForRect.bind(this),this.getBucketsLookup[s.RuntimeColliderShape.POLYGON]=this.getBucketsForPolygon.bind(this),this.getBucketsLookup[s.RuntimeColliderShape.POINT]=this.getBucketsForPoint.bind(this),this.getBucketsLookup[s.RuntimeColliderShape.CIRCLE]=this.getBucketsForCircle.bind(this),this.getBucketsLookup[s.RuntimeColliderShape.LINE]=this.getBucketsForLine.bind(this)}onInit(e,t){const i=n.resolveMapSize(e,t);switch(i){case s.MapSize.LARGE:this.cellSize=256;break;case s.MapSize.MEDIUM:this.cellSize=128;break;case s.MapSize.SMALL:this.cellSize=64;break;default:throw new Error(`Invalid map size. ${i}`)}this.rows=Math.ceil(t/this.cellSize),this.cols=Math.ceil(e/this.cellSize)}onClear(){this.checkedMap={},this.curSeq=1,this.uidIdx=1,this.dynamicColliders.length=0,this.staticColliders.length=0,this.staticBuckets={},this.cellSize=0}getAllColliders(){return[...this.dynamicColliders,...this.staticColliders]}onAddedTagToCollider(e,t){if(this.addColliderToType(e,[t],a[e.shapeType]),e.isPolygon){if(this.handleAddedTagToPolygon(e,t),!e.dynamic){const t=e._bcache||this.getBucketsLookup[e.shapeType](e.shapeData);t.length>8&&(e._bcache=t);for(let i=0;i<t.length;i++)this.staticBuckets[t[i]]?this.staticBuckets[t[i]].push(e):this.staticBuckets[t[i]]=[e];for(let t=0;t<e.lines.length;t++){const i=this.getBucketsForLine(e.lines[t]);for(let t=0;t<i.length;t++)this.staticBuckets[i[t]].push(e)}}}else if(this.updateCheckMapOnAdd(e._uid,e,t),!e.dynamic){const t=this.getBucketsLookup[e.shapeType](e.shapeData);for(let i=0;i<t.length;i++)this.staticBuckets[t[i]]?this.staticBuckets[t[i]].push(e):this.staticBuckets[t[i]]=[e]}}onRemovedTagFromCollider(e,t){if(e.isPolygon){if(this.removeColliderFromType(e,[t],"polygons"),this.updateCheckMapOnPolygonRemove(e._uid,e,t),!e.tags){this.removeStaticColliderFromBucket(e);for(let t=0;t<e.lines.length;t++)this.removeStaticColliderFromBucket(e.lines[t])}}else this.removeColliderFromType(e,[t],a[e.shapeType]),this.updateCheckMapOnRemove(e._uid,e,t),e.tags||this.removeStaticColliderFromBucket(e)}getTagCoupleArrayForTag(e){for(let t=0;t<this.tagCouples.length;t++)if(this.tagCouples[t][0]===e)return this.tagCouples[t];return 1}onAddedColliderCouple(e,t){let i,s;if(e===t)for(let n=0;n<this.tagCouples.length;n++){if(this.tagCouples[n][0]===e){i=this.tagCouples[n];for(let s=1;s<i.length;s++)if(i[s]===t)throw new Error(`Trying to add duplicate tag couple ${e} and ${t}`)}if(this.tagCouples[n][0]===t){s=this.tagCouples[n];for(let i=1;i<s.length;i++)if(s[i]===e)throw new Error(`Trying to add duplicate tag couple ${e} and ${t}`)}}else{let n=0;for(let r=0;r<this.tagCouples.length;r++)if(this.tagCouples[r][0]===e){n++,i=this.tagCouples[r];for(let s=1;s<i.length;s++)if(i[s]===t)throw new Error(`Trying to add duplicate tag couple ${e} and ${t}`);if(2===n)break}else if(this.tagCouples[r][0]===t){n++,s=this.tagCouples[r];for(let i=1;i<s.length;i++)if(s[i]===e)throw new Error(`Trying to add duplicate tag couple ${e} and ${t}`);if(2===n)break}}i?i.push(t):(i=[e,t],this.tagCouples.push(i)),s?s.push(e):(s=[t,e],this.tagCouples.push(s));const n=this.collidersByTag[e],r=this.collidersByTag[t];if(n&&r){if(n.rects)for(let t=0;t<n.rects.length;t++)this.updateCheckMapOnAdd(n.rects[t]._uid,n.rects[t],e,s);if(n.points)for(let t=0;t<n.points.length;t++)this.updateCheckMapOnAdd(n.points[t]._uid,n.points[t],e,s);if(n.circles)for(let t=0;t<n.circles.length;t++)this.updateCheckMapOnAdd(n.circles[t]._uid,n.circles[t],e,s);if(n.polygons)for(let t=0;t<n.polygons.length;t++){const i=n.polygons[t],r=[];if(this.updateCheckMapOnPolygonAdd(i._uid,i,e,s,r),r.length)for(let e=0;e<i.lines.length;e++){const t=i.lines[e].uid;for(let e=0;e<r.length;e++)this.checkedMap[t][r[e]]=1,this.checkedMap[r[e]][t]=1}}if(n.lines)for(let t=0;t<n.lines.length;t++)n.lines[t].parent||this.updateCheckMapOnAdd(n.circles[t]._uid,n.rects[t],e)}return!0}collidersShareInitializedCouple(e,t,i){for(let s=0;s<e.tags.length;s++){const n=e.tags[s];let r=i[n];if(r||(r=this.getTagCoupleArrayForTag(n),i[n]=r),1!==r)for(let e=1;e<r.length;e++)for(let i=0;i<t.tags.length;i++)if(r[e]===t.tags[i])return!0}for(let s=0;s<t.tags.length;s++){const n=t.tags[s];let r=i[n];if(r||(r=this.getTagCoupleArrayForTag(n),i[n]=r),1!==r)for(let t=1;t<r.length;t++)for(let i=0;i<e.tags.length;i++)if(r[t]===e.tags[i])return!0}}onRemovedColliderCouple(e,t){let i=-1,s=-1;for(let n=0;n<this.tagCouples.length;n++)if(this.tagCouples[n][0]===e){i=n;for(let e=1;e<this.tagCouples[n].length;e++)this.tagCouples[n][e]===t&&(s=e);break}i>-1&&s>-1&&(this.tagCouples[i].splice(s,1),1===this.tagCouples[i].length&&this.tagCouples.splice(i,1));let n=-1,r=-1;for(let i=0;i<this.tagCouples.length;i++)if(this.tagCouples[i][0]===t){n=i;for(let t=1;t<this.tagCouples[i].length;t++)this.tagCouples[i][t]===e&&(r=t);break}n>-1&&r>-1&&(this.tagCouples[n].splice(r,1),1===this.tagCouples[n].length&&this.tagCouples.splice(n,1));const a={};this.forEachColliderWithTag(e,e=>{this.forEachColliderWithTag(t,t=>{t!==e&&(this.collidersShareInitializedCouple(e,t,a)||(delete this.checkedMap[e._uid][t._uid],delete this.checkedMap[t._uid][e._uid]))})})}onAddedStaticCollider(e){if(e._uid=this.uidIdx++,this.staticColliders.push(e),e.tags)if(this.addColliderToType(e,e.tags,a[e.shapeType]),this._onAddedColliderWithTags(e),e.isPolygon){e.lines.forEach(e=>{this.onAddedStaticCollider(e)}),delete e._cached_uids;const t=this.getBucketsLookup[e.shapeType](e.shapeData);t.length>8&&(e._bcache=t);for(let i=0;i<t.length;i++)this.staticBuckets[t[i]]?this.staticBuckets[t[i]].push(e):this.staticBuckets[t[i]]=[e]}else{const t=this.getBucketsLookup[e.shapeType](e.shapeData);for(let i=0;i<t.length;i++)this.staticBuckets[t[i]]?this.staticBuckets[t[i]].push(e):this.staticBuckets[t[i]]=[e]}}onAddedDynamicCollider(e){e._uid=this.uidIdx++,this.dynamicColliders.push(e),e.tags&&(this.addColliderToType(e,e.tags,a[e.shapeType]),this._onAddedColliderWithTags(e)),e.shapeType===s.RuntimeColliderShape.POLYGON&&(e.lines.forEach(e=>{this.onAddedDynamicCollider(e)}),delete e._cached_uids)}_onAddedColliderWithTags(e){performance.now();const t=e._uid;if(this.checkedMap[t]={},e.parent)for(let i=0;i<e.parent._cached_uids.length;i++){const s=e.parent._cached_uids[i];this.checkedMap[t][s]=1,this.checkedMap[s][t]=1}else e.isPolygon?(e._cached_uids=[],e.tags.forEach(i=>{this.updateCheckMapOnPolygonAdd(t,e,i,e._cached_uids)})):e.tags.forEach(i=>{this.updateCheckMapOnAdd(t,e,i)})}onRemovedDynamicCollider(e){for(let t=0;t<this.dynamicColliders.length;t++)if(this.dynamicColliders[t]===e){this.dynamicColliders.splice(t,1);break}e.tags&&(this.removeColliderFromType(e,e.tags,a[e.shapeType]),e.parent||this._onRemovedColliderWithTags(e))}_onRemovedColliderWithTags(e){if(e.isPolygon){for(let t=0;t<e.lines.length;t++)delete this.checkedMap[e.lines[t]];Object.keys(this.checkedMap[e._uid]).forEach(t=>{for(let i=0;i<e.lines.length;i++)delete this.checkedMap[t][e.lines[i]._uid];delete this.checkedMap[t][e._uid]})}else Object.keys(this.checkedMap[e._uid]).forEach(t=>{delete this.checkedMap[t][e._uid]});delete this.checkedMap[e._uid]}handleAddedTagToPolygon(e,t){const i=[];if(this.updateCheckMapOnPolygonAdd(e._uid,e,t,i),this.collidersByTag[t].lines?this.collidersByTag[t].lines.push(...e.lines):this.collidersByTag[t].lines=[...e.lines],i.length)for(let t=0;t<e.lines.length;t++)for(let s=0;s<i.length;s++)this.checkedMap[e.lines[t]._uid][i[s]]=1,this.checkedMap[i[s]][e.lines[t]._uid]=1}forEachColliderWithTag(e,t){if(!this.collidersByTag[e])return;const i=this.collidersByTag[e];if(i.rects)for(let e=0;e<i.rects.length;e++)t(i.rects[e]);if(i.polygons)for(let e=0;e<i.polygons.length;e++)t(i.polygons[e]);if(i.lines)for(let e=0;e<i.lines.length;e++)t(i.lines[e]);if(i.circles)for(let e=0;e<i.circles.length;e++)t(i.circles[e]);if(i.points)for(let e=0;e<i.points.length;e++)t(i.points[e])}updateCheckMapOnPolygonRemove(e,t,i){const s=e=>{if(t.tags)for(let i=0;i<t.tags.length;i++)for(let s=0;s<e.tags.length;s++)if(t.tags[i]===e.tags[s])return!0;return!1};if(this.collidersByTag[i]){const n=this.collidersByTag[i];if(n.rects)for(let i=0;i<n.rects.length;i++){const r=n.rects[i];s(r)||(delete this.checkedMap[e][r._uid],delete this.checkedMap[r._uid][e],t.lines.forEach(e=>{delete this.checkedMap[e._uid][r._uid],delete this.checkedMap[r._uid][e._uid]}))}if(n.polygons)for(let i=0;i<n.polygons.length;i++){const r=n.polygons[i];s(r)||(delete this.checkedMap[e][r._uid],delete this.checkedMap[r._uid][e],t.lines.forEach(e=>{delete this.checkedMap[e._uid][r._uid],delete this.checkedMap[r._uid][e._uid]}),r.lines.forEach(i=>{delete this.checkedMap[e][i._uid],delete this.checkedMap[i._uid][e],t.lines.forEach(e=>{delete this.checkedMap[i._uid][e._uid],delete this.checkedMap[e._uid][i._uid]})}))}if(n.circles)for(let i=0;i<n.circles.length;i++){const r=n.circles[i];s(r)||(delete this.checkedMap[e][r._uid],delete this.checkedMap[r._uid][e],t.lines.forEach(e=>{delete this.checkedMap[e._uid][r._uid],delete this.checkedMap[r._uid][e._uid]}))}if(n.lines)for(let i=0;i<n.lines.length;i++){const r=n.lines[i];s(r)||(delete this.checkedMap[e][r._uid],delete this.checkedMap[r._uid][e],t.lines.forEach(e=>{delete this.checkedMap[e._uid][r._uid],delete this.checkedMap[r._uid][e._uid]}))}if(n.points)for(let i=0;i<n.points.length;i++){const r=n.points[i];s(r)||(delete this.checkedMap[e][r._uid],delete this.checkedMap[r._uid][e],t.lines.forEach(e=>{delete this.checkedMap[e._uid][r._uid],delete this.checkedMap[r._uid][e._uid]}))}}}updateCheckMapOnRemove(e,t,i){const s=e=>{if(t.tags)for(let i=0;i<t.tags.length;i++)for(let s=0;s<e.tags.length;s++)if(t.tags[i]===e.tags[s])return!0;return!1};if(this.collidersByTag[i]){const t=this.collidersByTag[i];if(t.rects)for(let i=0;i<t.rects.length;i++){const n=t.rects[i];s(n)||(delete this.checkedMap[e][n._uid],delete this.checkedMap[n._uid][e])}if(t.polygons)for(let i=0;i<t.polygons.length;i++){const n=t.polygons[i];s(n)||(delete this.checkedMap[e][n._uid],delete this.checkedMap[n._uid][e],n.lines.forEach(t=>{delete this.checkedMap[e][t._uid],delete this.checkedMap[t._uid][e]}))}if(t.circles)for(let i=0;i<t.circles.length;i++){const n=t.circles[i];s(n)||(delete this.checkedMap[e][n._uid],delete this.checkedMap[n._uid][e])}if(t.lines)for(let i=0;i<t.lines.length;i++){const n=t.lines[i];s(n)||(delete this.checkedMap[e][n._uid],delete this.checkedMap[n._uid][e])}if(t.points)for(let i=0;i<t.points.length;i++){const n=t.points[i];s(n)||(delete this.checkedMap[e][n._uid],delete this.checkedMap[n._uid][e])}}}updateCheckMapOnPolygonAdd(e,t,i,s,n){if(1!=(n=n||this.getTagCoupleArrayForTag(i)))for(let i=1;i<n.length;i++){const r=this.collidersByTag[n[i]];if(r){if(r.rects)for(let t=0;t<r.rects.length;t++){const i=r.rects[t];this.checkedMap[e][i._uid]||(s.push(i._uid),this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1)}if(r.points)for(let t=0;t<r.points.length;t++){const i=r.points[t];this.checkedMap[e][i._uid]||(s.push(i._uid),this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1)}if(r.polygons)for(let t=0;t<r.polygons.length;t++){const i=r.polygons[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(s.push(i._uid),this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}if(r.circles)for(let t=0;t<r.circles.length;t++){const i=r.circles[t];this.checkedMap[e][i._uid]||(s.push(i._uid),this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1)}if(r.lines)for(let i=0;i<r.lines.length;i++){const n=r.lines[i];n.parent&&n.parent===t||this.checkedMap[e][n._uid]||(s.push(n._uid),this.checkedMap[e][n._uid]=1,this.checkedMap[n._uid][e]=1)}}}}updateCheckMapOnAdd(e,t,i,s){if(1!==(s=s||this.getTagCoupleArrayForTag(i)))for(let i=1;i<s.length;i++){const n=this.collidersByTag[s[i]];if(n){if(n.rects)for(let t=0;t<n.rects.length;t++){const i=n.rects[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}if(n.points)for(let t=0;t<n.points.length;t++){const i=n.points[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}if(n.polygons)for(let t=0;t<n.polygons.length;t++){const i=n.polygons[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}if(n.circles)for(let t=0;t<n.circles.length;t++){const i=n.circles[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}if(n.lines)if(t.parent)for(let i=0;i<n.lines.length;i++){const s=n.lines[i];e===s._uid||s.parent&&t.parent===s.parent||t.parent===s.parent||this.checkedMap[e][s._uid]||(this.checkedMap[e][s._uid]=1,this.checkedMap[s._uid][e]=1)}else for(let t=0;t<n.lines.length;t++){const i=n.lines[t];e!==i._uid&&(this.checkedMap[e][i._uid]||(this.checkedMap[e][i._uid]=1,this.checkedMap[i._uid][e]=1))}}}}onRemovedStaticCollider(e){for(let t=0;t<this.staticColliders.length;t++)if(this.staticColliders[t]===e){this.staticColliders.splice(t,1);break}e.tags&&(e.parent||this._onRemovedColliderWithTags(e),this.removeColliderFromType(e,e.tags,a[e.shapeType]),this.removeStaticColliderFromBucket(e))}removeStaticColliderFromBucket(e){const t=e._bcache?e._bcache:this.getBucketsLookup[e.shapeType](e.shapeData);for(let i=0;i<t.length;i++)for(let s=0;s<this.staticBuckets[t[i]].length;s++){const n=t[i];if(this.staticBuckets[n][s]===e){this.staticBuckets[n].splice(s,1),this.staticBuckets[n].length||delete this.staticBuckets[n];break}}}addColliderToType(e,t,i){for(let s=0;s<t.length;s++){const n=t[s];this.collidersByTag[n]||(this.collidersByTag[n]={}),this.collidersByTag[n][i]||(this.collidersByTag[n][i]=[]),this.collidersByTag[n][i].push(e)}}removeColliderFromType(e,t,i){for(let s=0;s<t.length;s++){const n=t[s],r=this.collidersByTag[n][i];for(let t=0;t<r.length;t++)if(r[t]===e){r.splice(t,1),r.length||delete this.collidersByTag[n][i],Object.keys(this.collidersByTag[n]).length||delete this.collidersByTag[n];break}}if(e.isPolygon)for(let i=0;i<e.lines.length;i++)this.removeColliderFromType(e.lines[i],t,"lines")}getActiveBuckets(){const e={};for(let t=0;t<this.dynamicColliders.length;t++){const i=this.dynamicColliders[t];if(!i.tags)continue;const n=this.getBucketsLookup[i.shapeType](i.shapeData);i.shapeType,s.RuntimeColliderShape.LINE,this.iteration;for(let t=0;t<n.length;t++)e[n[t]]?e[n[t]].push(i):this.staticBuckets[n[t]]?e[n[t]]=[...this.staticBuckets[n[t]],i]:e[n[t]]=[i]}return e}getCollisions(e){this.curSeq++,this.iteration++;performance.now();const t=this.getActiveBuckets();performance.now();this.iteration;const i=[];for(let e in t){const s=t[e];for(let e=0;e<s.length;e++){let t=s[e]._uid;for(let n=s.length-1;n>0&&n!==e;n--){let r=s[n]._uid;const a=this.checkedMap[t][r];a&&a!==this.curSeq&&(this.checkedMap[t][r]=this.curSeq,this.checkedMap[r][t]=this.curSeq,this.resolveCollision(s[e],s[n])&&(i.push(s[e]),i.push(s[n])))}}}return this.curSeq>6e4&&(this.curSeq=1),i}resolveCollision(e,t){const i=e.shapeData,n=t.shapeData;if(e.shapeType===s.RuntimeColliderShape.RECT){if(t.shapeType===s.RuntimeColliderShape.RECT)return i.x+i.w>=n.x&&i.x<=n.x+n.w&&i.y+i.h>=n.y&&i.y<=n.y+n.h;if(t.shapeType===s.RuntimeColliderShape.CIRCLE)return this.resolveRectCircle(i,n);if(t.shapeType===s.RuntimeColliderShape.POLYGON)return this.resolveRectPolygon(i,n);if(t.shapeType===s.RuntimeColliderShape.POINT)return n.x>=i.x&&n.x<=i.x+i.w&&n.y>=i.y&&n.y<=i.y+i.h;if(t.shapeType===s.RuntimeColliderShape.LINE)return this.resolveLineRect(n[0].x,n[1].x,n[0].y,n[1].y,i.x,i.y,i.w,i.h)}else if(e.shapeType===s.RuntimeColliderShape.CIRCLE){if(t.shapeType===s.RuntimeColliderShape.RECT)return this.resolveRectCircle(n,i);if(t.shapeType===s.RuntimeColliderShape.CIRCLE)return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))<i.r+n.r;if(t.shapeType===s.RuntimeColliderShape.POLYGON)return this.resolvePolygonCircle(n,i);if(t.shapeType===s.RuntimeColliderShape.POINT)return Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))<=i.r;if(t.shapeType===s.RuntimeColliderShape.LINE)return this.resolveLineCircle(n[0].x,n[1].x,n[0].y,n[1].y,i.x,i.y,i.r)}else if(e.shapeType===s.RuntimeColliderShape.POLYGON){if(t.shapeType===s.RuntimeColliderShape.RECT)return this.resolveRectPolygon(n,i);if(t.shapeType===s.RuntimeColliderShape.CIRCLE)return this.resolvePolygonCircle(i,n);if(t.shapeType===s.RuntimeColliderShape.POLYGON)return this.resolvePolygonPolygon(i,n);if(t.shapeType===s.RuntimeColliderShape.POINT)return this.resolvePolygonPoint(i,n);if(t.shapeType===s.RuntimeColliderShape.LINE)return this.resolveLinePoly(n[0].x,n[0].y,n[1].x,n[1].y,i)}else if(e.shapeType===s.RuntimeColliderShape.POINT){if(t.shapeType===s.RuntimeColliderShape.RECT)return i.x>=n.x&&i.x<=n.x+n.w&&i.y>=n.y&&i.y<=n.y+n.h;if(t.shapeType===s.RuntimeColliderShape.CIRCLE)return Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2))<=n.r;if(t.shapeType===s.RuntimeColliderShape.POLYGON)return this.resolvePolygonPoint(n,i);if(t.shapeType===s.RuntimeColliderShape.POINT)return i.x===n.x&&i.y===n.y;if(t.shapeType===s.RuntimeColliderShape.LINE)return this.resolvePointLine(i.x,i.y,n[0].x,n[0].y,n[1].x,n[1])}else if(e.shapeType===s.RuntimeColliderShape.LINE){if(t.shapeType===s.RuntimeColliderShape.RECT)return this.resolveLineRect(i[0].x,i[1].x,i[0].y,i[1].y,n.x,n.y,n.w,n.h);if(t.shapeType===s.RuntimeColliderShape.CIRCLE)return this.resolveLineCircle(i[0].x,i[1].x,i[0].y,i[1].y,n.x,n.y,n.r);if(t.shapeType===s.RuntimeColliderShape.POLYGON)return this.resolveLinePoly(i[0].x,i[0].y,i[1].x,i[1].y,n);if(t.shapeType===s.RuntimeColliderShape.POINT)return this.resolvePointLine(n.x,n.y,i[0].x,i[0].y,i[1].x,i[1]);if(t.shapeType===s.RuntimeColliderShape.LINE)return this.resolveLineLine(i[0].x,i[0].y,i[1].x,i[1].y,n[0].x,n[0].y,n[1].x,n[1].y)}return!1}getEllipseFromScaledCircle(e,t,i,s,n){}getPolygonFromRotatedRect(e,t,i){return[]}resolveLineLineIntersectOnly(e,t,i,s,n,r,a,o){const h=((a-n)*(t-r)-(o-r)*(e-n))/((o-r)*(i-e)-(a-n)*(s-t)),l=((i-e)*(t-r)-(s-t)*(e-n))/((o-r)*(i-e)-(a-n)*(s-t));return h>=0&&h<=1&&l>=0&&l<=1}resolveLineLine(e,t,i,s,n,r,a,o,h=!1){const l=(o-r)*(i-e)-(a-n)*(s-t);if(0!=l){const h=((a-n)*(t-r)-(o-r)*(e-n))/l,d=((i-e)*(t-r)-(s-t)*(e-n))/l;return 0<=h&&h<=1&&0<=d&&d<=1}return!(Math.max(e,i)<Math.min(n,a))&&(!(Math.max(n,a)<Math.min(e,i))&&(!(Math.max(t,s)<Math.min(r,o))&&(!(Math.max(r,o)<Math.min(t,s))&&(this.resolvePointLine(e,t,n,r,a,o,1)||this.resolvePointLine(i,s,n,r,a,o,1)))))}resolveLineRect(e,t,i,s,n,r,a,o){return!!this.resolveLineLine(e,i,t,s,n,r,n,r+o)||(!!this.resolveLineLine(e,i,t,s,n+a,r,n+a,r+o)||(!!this.resolveLineLine(e,i,t,s,n,r,n+a,r)||(!!this.resolveLineLine(e,i,t,s,n,r+o,n+a,r+o)||void 0)))}resolvePointPoly(e,t,i){let s=!1,n=0;for(let r=0;r<i.length;r++){n=r+1,n===i.length&&(n=0);let a=i[r],o=i[n];(a.y>=t&&o.y<t||a.y<t&&o.y>=t)&&e<(o.x-a.x)*(t-a.y)/(o.y-a.y)+a.x&&(s=!s)}return s}resolveRectPolygon(e,t){for(let i=0;i<t.length;i++)if(this.resolvePointPoly(e.x,e.y,t))return!0}resolveRectCircle(e,t){const{x:i,y:s,w:n,h:r}=e,a=t.x,o=t.y;let h=a,l=o;return a<i?h=i:a>i+n&&(h=i+n),o<s?l=s:o>s+r&&(l=s+r),Math.sqrt(Math.pow(a-h,2)+Math.pow(o-l,2))<=t.r}resolveLineCircle(e,t,i,s,n,r,a){if(Math.sqrt(Math.pow(e-n,2)+Math.pow(i-r,2))<a)return!0;if(Math.sqrt(Math.pow(t-n,2)+Math.pow(s-r,2))<a)return!0;let o=e-t,h=i-s;const l=Math.sqrt(o*o+h*h),d=((n-e)*(t-e)+(r-i)*(s-i))/Math.pow(l,2),u=e+d*(t-e),c=i+d*(s-i);return!!this.resolvePointLine(u,c,e,i,t,s)&&(o=u-n,h=c-r,Math.sqrt(o*o+h*h)<=a)}resolvePolygonCircle(e,t){return this.resolvePolygonPoint(e,t)}resolvePolygonPoint(e,t){let i=!1,s=0;for(let n=0;n<e.length;n++){s=n+1,s===e.length&&(s=0);let r=e[n],a=e[s];(r.y>=t.y&&a.y<t.y||r.y<t.y&&a.y>=t.y)&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(i=!i)}return i}resolveLinePoly(e,t,i,s,n){let r=0;for(let a=0;a<n.length;a++){r=a+1,r===n.length&&(r=0);const o=n[a].x,h=n[a].y,l=n[r].x,d=n[r].y;if(this.resolveLineLine(e,t,i,s,o,h,l,d))return!0}return!1}resolveCircleEllipse(e,t){}resolvePolygonPolygon(e,t){for(let i=0;i<e.length;i++){if(this.resolvePolygonPoint(e,t[0]))return!0;if(this.resolvePolygonPoint(t,e[0]))return!0}return!1}getBucketsForPolygon(e,t=[]){for(let t=0;t<e.length;t++);for(let i=0;i<e.length;i++){const s=e[i],n=i===e.length-1?e[0]:e[i+1],r=[];this.getBucketsForLine([s,n],r),this.getBucketsForLine([s,n],t)}return t}getBucketsForCircle(e,t=[]){const i=2*e.r;return this.getBucketsForRect({x:e.x-e.r,y:e.y-e.r,w:i,h:i},t)}getBucketsForRect(e,t=[]){const i=this.cellSize;let s=e.x,n=e.y;if(e.w>=i||e.h>=i){const r=Math.floor(s/i),a=Math.floor(n/i),o=Math.ceil((s+e.w)/i),h=Math.ceil((n+e.h)/i);for(let e=r;e<o;e++)for(let i=a;i<h;i++){const s=e,n=i*this.cols+s;t.includes(n)||t.push(n)}}else{let r=s+e.w,a=n+e.h;if(!(s/i>=this.cols||n/i>=this.rows||s<0||s<0)){let e=Math.floor(s/i)+Math.floor(n/i)*this.cols;t.includes(e)||t.push(e)}if(!(s/i>=this.cols||a/i>=this.rows||s<0||a<0)){let e=Math.floor(s/i)+Math.floor(a/i)*this.cols;t.includes(e)||t.push(e)}if(!(r/i>=this.cols||n/i>=this.rows||r<0||n<0)){let e=Math.floor(r/i)+Math.floor(n/i)*this.cols;t.includes(e)||t.push(e)}if(!(r/i>=this.cols||a/i>=this.rows||r<0||a<0)){let e=Math.floor(r/i)+Math.floor(a/i)*this.cols;t.includes(e)||t.push(e)}}return t}getBucketsForSmallRect(e,t,i,s,n=[]){const r=this.cellSize;if(!(e/r>=this.cols||t/r>=this.rows||e<0||e<0)){let i=Math.floor(e/r)+Math.floor(t/r)*this.cols;n.includes(i)||n.push(i)}if(!(e/r>=this.cols||s/r>=this.rows||e<0||s<0)){let t=Math.floor(e/r)+Math.floor(s/r)*this.cols;n.includes(t)||n.push(t)}if(!(i/r>=this.cols||t/r>=this.rows||i<0||t<0)){let e=Math.floor(i/r)+Math.floor(t/r)*this.cols;n.includes(e)||n.push(e)}if(!(i/r>=this.cols||s/r>=this.rows||i<0||s<0)){let e=Math.floor(i/r)+Math.floor(s/r)*this.cols;n.includes(e)||n.push(e)}}getBucketsForPoint(e,t=[]){const{x:i,y:s}=e;if(!(i/this.cellSize>=this.cols||s/this.cellSize>=this.rows||i<0||s<0)){let e=Math.floor(i/this.cellSize)+Math.floor(s/this.cellSize)*this.cols;t.includes(e)||t.push(e)}return t}getBucketsForLine(e,t=[]){const i=e[0],s=e[1];if(i.x===s.x||i.y===s.y)return this.getBucketsForRect({x:Math.min(i.x,s.x),y:Math.min(i.y,s.y),w:Math.max(1,Math.abs(i.x-s.x)),h:Math.max(1,Math.abs(i.y-s.y))},t);s.y,i.y,s.x,s.x;const n=s.y-i.y/s.x-i.x,r=i.y-i.x*n;let a=0;const o=i.x>s.x?-1:1,h=i.y>s.y?-1:1;let l=i.x,d=i.y;let u=0;const c=[l,d,s.x,s.y];let p=!1;const g=(i.x+o)*n+r;Math.abs(g-i.y)<=1?(u=Math.abs(i.x-s.x),p=!0):u=Math.abs(i.y-s.y);let f=!0;for(;f;)p?(l+=o,a+=o,d=l*n+r):(d+=h,a+=h,l=(d-r)/n),l>=0&&d>=0&&(c.push(l),c.push(d)),Math.abs(a)>=u&&(f=!1);for(let e=0;e<c.length;e+=2){const i=Math.floor(c[e]/this.cellSize)+Math.floor(c[e+1]/this.cellSize)*this.cols;t.includes(i)||t.push(i)}return t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollidersWithTags=function(e,t){const i=[];if(1===e.length){const i=t[e[0]];return i||[]}let s;for(let i=0;i<e.length;i++){const n=e[i];t[n]&&(!s||t[n].length<s.length)&&(s=t[n])}return s?(s.forEach(t=>{let s=!0;for(let i=0;i<e.length;i++){const n=e[i];if(!t.tags.includes(n)){s=!1;break}}s&&i.push(t)}),i):[]}},function(e,t,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.CHILD=1]="CHILD",e[e.FULL=2]="FULL"}(s=t.LayoutSetting||(t.LayoutSetting={})),t.ResolutionModes={};class n{constructor(e,t){var i;this._ratioCap=!1,this._viewCap=!1,this._sizeCap=!1,this._widthSizeCap=-1,this._heightSizeCap=-1,this.resolution=1,this.dynamicResolution=!1,this.calculate=this.calculate.bind(this),this.calculateWithTimeout=this.calculateWithTimeout.bind(this),this.camera=e,t=t||{},this._layoutMode=(null===(i=t)||void 0===i?void 0:i.layout)||s.FULL,window.addEventListener("resize",this.calculateWithTimeout,{passive:!0}),t.maxView&&(this._widthViewCap=t.maxView.w,this._heightViewCap=t.maxView.h,this._viewCap=!0),t.aspectRatio&&(this._widthRatioCap=t.aspectRatio.w,this._heightSizeCap=t.aspectRatio.h,this._ratioCap=!0),t.maxSize&&(this._widthSizeCap=t.maxSize.w,this._heightSizeCap=t.maxSize.h,this._sizeCap=!0);this.dynamicResolution=!!t.dynamicResolution&&t.dynamicResolution}setResolution(e){this.dynamicResolution&&(this.dynamicResolution=!1),this.resolution=e}unlimitResolution(e){this.dynamicResolution=!1}limitResolution(){this.dynamicResolution=!0}setMapLengths(e,t){this.mapWidth=e,this.mapHeight=t,this.calculate()}destroy(){window.removeEventListener("resize",this.calculateWithTimeout)}calculate(){var e,t,i,r,a,o,h,l;let d,u;this._layoutMode===s.FULL?(u=(null===(e=window)||void 0===e?void 0:e.innerWidth)||(null===(i=null===(t=document)||void 0===t?void 0:t.body)||void 0===i?void 0:i.clientWidth),d=(null===(r=window)||void 0===r?void 0:r.innerHeight)||(null===(o=null===(a=document)||void 0===a?void 0:a.body)||void 0===o?void 0:o.clientHeight)):this._layoutMode===s.CHILD?(u=(null===(h=this.camera.renderer.view.parentElement)||void 0===h?void 0:h.clientWidth)||this.camera.renderer.view.clientWidth,d=(null===(l=this.camera.renderer.view.parentElement)||void 0===l?void 0:l.clientHeight)||this.camera.renderer.view.clientHeight):(u=this.camera.renderer.view.width,d=this.camera.renderer.view.height);let c,p,g=0,f=0;if(this._sizeCap&&(this._widthSizeCap<u&&(g=u-this._widthSizeCap/2,u=this._widthSizeCap),this._heightSizeCap<d&&(f=d-this._heightSizeCap/2,d=this._heightSizeCap)),this._viewCap){if(c=this._widthViewCap,p=this._heightViewCap,this._ratioCap){const e=c/this._widthRatioCap,t=p/this._heightRatioHCap;e<t?p*=this._widthRatioCap/this._heightRatioHCap:t>e&&(c*=this._widthRatioCap/this._heightRatioHCap)}}else if(this._ratioCap){const e=u/this._widthRatioCap,t=d/this._heightRatioHCap;e<t?(c=u,p=d*(this._widthRatioCap/this._heightRatioHCap)):t>e&&(p=d,c=u*(this._widthRatioCap/this._heightRatioHCap))}else c=u,p=d;const m=n.calculateDynamicResolution(u,d,this.mapWidth,this.mapHeight,c,p);this.dynamicResolution?this.resolution=m.resolution:(m.resolution=this.resolution,m.fixedResolution=!0),g&&(m.offsetWidth+=g),f&&(m.offsetHeight+=f),this.camera.onResolutionUpdate(m)}calculateWithTimeout(){this.calculateTimeout&&clearTimeout(this.calculateTimeout),this.calculateTimeout=setTimeout(this.calculate,50)}static calculateDynamicResolution(e,t,i,s,n,r){const a=e/n,o=t/r;let h,l,d=o,u=0,c=0,p=!1,g=!1;a<o?(d=a,h=e>n?n:e,t>r?(c=(t-r)/2,c%1&&(p=!0,c=Math.floor(c)),l=r):l=t-2*c,d<1&&(c+=c*d,l*=d)):o<a?(d=o,l=t>r?r:t,e>n?(u=Math.floor(e-n)/2,u%1&&(g=!0,u=Math.floor(u)),h=n):l=e,d<1&&(u+=u*d,h*=d)):(l=Math.min(r,t),h=Math.min(n,e));const f=h+2*u,m=h+2*u;if(f>i){u+=(g?Math.ceil:Math.floor)((f-i)/2)}if(m>s){c+=(p?Math.ceil:Math.floor)((m-s)/2)}return{resolution:d,viewHeight:l,viewWidth:h,offsetWidth:u,offsetHeight:c,canvasWidth:e,canvasHeight:t}}}t.ResolutionManager=n},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(e){try{h(s.next(e))}catch(e){r(e)}}function o(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(9),r=i(1);t.InterfaceManager=class{constructor(e,t,i){this.needsReRender=!1,this.indexedDbLoader=i,this.interfaceAtlas=n.AtlasFactory(t,i),this.renderer=t,this.interfaceStage=e}clearInterface(){this.interfaceStage.removeChildren(0)}loadTexture(e,t){return s(this,void 0,void 0,(function*(){let i;if(t=t||e,this.indexedDbLoader)try{if(i=yield this.indexedDbLoader.loadImageData(e),!i)throw new Error("couldnt get image from indexeddb.")}catch(t){i=yield r.httpGetAsync(e,!1)}else i=yield r.httpGetAsync(e,!1);if(!i)throw new Error(`Failed to load interface image from path ${e}`);const s=yield r.getTextureFromDataUrl(i);return this.interfaceAtlas.addTexture(t,s,null,!0)}))}addTextureToInterfaceAtlas(e,t,i=!0){return this.interfaceAtlas.addTexture(e,t,null,i)}getTexture(e){return this.interfaceAtlas.getTexture(e)}addInterfaceItem(e){this.interfaceStage.addChild(e)}removeInterfaceItem(e){this.interfaceStage.removeChild(e)}addChild(e){this.interfaceStage.addChild(e)}removeChild(e){this.interfaceStage.removeChild(e)}}}]).default}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Xb3JsZC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vV29ybGQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci90eXBlcy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Db2xsaXNpb25NYW5hZ2VyL0NvbGxpZGVyLnRzIiwid2VicGFjazovL1dvcmxkLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvR2FtZU9iamVjdC50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL01peGlucy9UYWdNaXhpbi50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL01peGlucy9UcmFuc2Zvcm1FdmVudE1peGluLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL0NvbGxpc2lvbk1hbmFnZXIvQ29sbGlzaW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Db2xsaXNpb25NYW5hZ2VyL1BvbHlnb25Db2xsaWRlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1RleHR1cmVBdGxhc3Nlcy9HYW1lT2JqZWN0VGV4dHVyZUF0bGFzL2luZGV4LnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvVGV4dHVyZUF0bGFzc2VzL1NlY3Rpb25UZXh0dXJlQXRsYXMvQmFzZVRleHR1cmVBdGxhcy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1dvcmtlcnMvbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9Xb3JsZC50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL0lQbHVnaW4udHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9NYXAudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9MYXllckNvbnRhaW5lci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1RpbGVNYW5hZ2VyLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvVGlsZXNldC50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL0dhbWVPYmplY3RNYW5hZ2VyLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvVGV4dHVyZUF0bGFzc2VzL0dhbWVPYmplY3RUZXh0dXJlQXRsYXMvV2ViR0xHYW1lT2JqZWN0QXRsYXMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9UZXh0dXJlQXRsYXNzZXMvR2FtZU9iamVjdFRleHR1cmVBdGxhcy9CYXNlR2FtZU9iamVjdEF0bGFzLnRzIiwid2VicGFjazovL1dvcmxkLy4vbm9kZV9tb2R1bGVzL21heHJlY3RzLXBhY2tlci9kaXN0L21heHJlY3RzLXBhY2tlci5tanMiLCJ3ZWJwYWNrOi8vV29ybGQvLi4vRWRpdG9yQ29yZS91dGlscy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9saWIvTG9hZGVyLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvQ2h1bmtNYW5hZ2VyLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvV29ya2Vycy91dGlscy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1dvcmxkQ2h1bmsudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9UZXh0dXJlQXRsYXNzZXMvU2VjdGlvblRleHR1cmVBdGxhcy9DYW52YXNUZXh0dXJlQXRsYXMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9UZXh0dXJlQXRsYXNzZXMvU2VjdGlvblRleHR1cmVBdGxhcy9XZWJHTFRleHR1cmVBdGxhcy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uLi9FbmNvZGVyL3NyYy9EZWNvZGVyLnRzIiwid2VicGFjazovL1dvcmxkLy4uL3V0aWxzL0Zhc3RDb21wcmVzc2lvbi50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uLi9FbmNvZGVyL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIzL2luZGV4LmpzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvUGxheWVyQ2FtZXJhLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvV29ya2Vycy9DaHVua0xvYWRlcldvcmtlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1dvcmtlcnMvQ2h1bmtMb2FkZXIud29ya2VyLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL2V4dHJhcy9Db2xsaXNpb24vU3BhdGlhbEdyaWQudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi4vU2hhcmVkUnVudGltZS9Db2xsaWRlclF1ZXJpZXMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9SZXNvbHV0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL0ludGVyZmFjZU1hbmFnZXIudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk1hcFNpemVzIiwiUnVudGltZUNvbGxpZGVyU2hhcGUiLCJNYXBTaXplIiwiYnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImJ0b2EiLCJVaW50OEFycmF5IiwicmVkdWNlIiwiZGF0YSIsImJ5dGUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJnZXRUZXh0dXJlRnJvbUJsb2IiLCJibG9iIiwiVVJMIiwid2Via2l0VVJMIiwiYmxvYlVSTCIsIm5lZWRSZXZva2UiLCJjcmVhdGVPYmplY3RVUkwiLCJlcnIiLCJiYXNlNjQiLCJpbWciLCJJbWFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicmV2b2tlT2JqZWN0VVJMIiwiUElYSSIsIlRleHR1cmUiLCJCYXNlVGV4dHVyZSIsImRhdGFVUkx0b0Jsb2IiLCJkYXRhdXJsIiwiYXJyIiwic3BsaXQiLCJtaW1lIiwibWF0Y2giLCJic3RyIiwiYXRvYiIsImxlbmd0aCIsInU4YXJyIiwiY2hhckNvZGVBdCIsIkJsb2IiLCJ0eXBlIiwidXJsIiwicGFyc2VKc29uIiwieG1sSHR0cCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUeXBlIiwib3BlbiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3IiwiaCIsIlNNQUxMIiwiTEFSR0UiLCJkYXRhVXJsIiwiY29sbGlkZXJzIiwiZmxpcHMiLCJmaWxlTmFtZSIsInJlcGxhY2UiLCJpbmRleGVkREIiLCJtb3pJbmRleGVkREIiLCJ3ZWJraXRJbmRleGVkREIiLCJtc0luZGV4ZWREQiIsInJlbmRlcmVyIiwibWF4U2l6ZSIsImdsIiwiTUFYX1RFWFRVUkVfU0laRSIsImFjdHVhbFNpemUiLCJtYXhMZW5ndGgiLCJ0aWxlU2l6ZSIsImN1cnJlbnRMZW5ndGgiLCJkaXZpZGVyIiwiYWRkIiwibWFpbkxlbmd0aCIsIm9mZnNldExlbmd0aCIsIk1hdGgiLCJhYnMiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJyZXF1aXJlZFBhcmFtcyIsImN1ck9wdGlvbnMiLCJtaXNzaW5nUGFyYW1zIiwidW5kZWZpbmVkUGFyYW1zIiwibnVsbFBhcmFtcyIsInB1c2giLCJ1bmRlZmluZWQiLCJlcnJvclN0cmluZyIsImNvbmNhdCIsImpvaW4iLCJsYXllckluZGV4Iiwic2hhcGVUeXBlIiwic2hhcGVEYXRhIiwidGFncyIsImlzRHluYW1pYyIsImNvbGxpc2lvbk1hbmFnZXIiLCJwcm9wcyIsImdhbWVPYmplY3QiLCJwYXJlbnQiLCJhY3RpdmUiLCJ1cGRhdGVQb3NpdGlvbiIsIkVycm9yIiwidXBkYXRlUm90YXRpb24iLCJfcm90YXRpb24iLCJfc2NhbGVYIiwiX3NjYWxlWSIsInRoaXMiLCJ0YWdNYW5hZ2VyIiwiVGFnTWl4aW4iLCJBcHBseU1peGluIiwiVHJhbnNmb3JtRXZlbnRNaXhpbiIsImxheWVyIiwidHJhbnNmb3JtZWRTaGFwZURhdGEiLCJkeW5hbWljIiwiUE9MWUdPTiIsImlzUG9seWdvbiIsIkxJTkUiLCJ1cGRhdGVBZGp1c3RlZFNoYXBlRGF0YSIsInVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhTGluZSIsImlzTGluZSIsIkNJUkNMRSIsInVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhQ2lyY2xlIiwiaXNDaXJjbGUiLCJSRUNUIiwidXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFSZWN0IiwiaXNSZWN0IiwiUE9JTlQiLCJ1cGRhdGVBZGp1c3RlZFNoYXBlRGF0YVBvaW50IiwiaXNQb2ludCIsIkVMSVBTRSIsInVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhRWxpcHNlIiwicmViaW5kUG9zaXRpb25VcGRhdGUiLCJyZWJpbmRSb3RhdGlvblVwZGF0ZSIsIngiLCJ5IiwiZ2V0TWlucyIsIm1pblgiLCJtaW5ZIiwic2V0UGl2b3QiLCJyYWRpYW5zIiwicG9pbnQiLCJwaXZvdCIsIm9YIiwib1kiLCJjb3NUaGV0YSIsImNvcyIsInNpblRoZXRhIiwic2luIiwic2NhbGVYIiwic2NhbGVZIiwicGl2b3RQb2ludEluUGxhY2UiLCJjYiIsImRlZmF1bHRQaXZvdFBvaW50IiwicmFkaWFuRGVsdGEiLCJwaXZvdFBvaW50IiwiZG9Sb3RhdGlvbiIsIm9uUm90YXRpb25VcGRhdGVzIiwicGl2b3RYIiwiX3Bpdm90WCIsIl9waXZvdFkiLCJwaXZvdFkiLCJyb3RhdGlvbiIsInVwZGF0ZVRyYW5zZm9ybWVkU2hhcGVEYXRhIiwiTnVtYmVyIiwiTUFYX1NBRkVfSU5URUdFUiIsIm1pbiIsImRlZ3JlZXMiLCJQSSIsInVwZGF0ZVJvdGF0aW9uV2l0aE91dExpc3RlbmVycyIsInVwZGF0ZVJvdGF0aW9uV2l0aExpc3RlbmVycyIsIm9uUG9zaXRpb25VcGRhdGVzIiwidXBkYXRlUG9zaXRpb25XaXRoTGlzdGVuZXJzIiwidXBkYXRlQXJyYXlXaXRoTGlzdGVuZXJzIiwidXBkYXRlUG9zaXRpb25XaXRob3V0TGlzdGVuZXJzIiwidXBkYXRlQXJyYXlXaXRob3V0TGlzdGVuZXJzIiwidiIsImRYIiwiZFkiLCJjbGVhckxpc3RlbmVycyIsInN0YXJ0TGlzdGVuZXJzIiwib25MaXN0ZW5lcnMiLCJlbmRMaXN0ZW5lcnMiLCJyZW1vdmVGcm9tTGlzdGVuZXJzIiwiY2xlYXJUYWdMaXN0ZW5lcnMiLCJjbGVhclRyYW5zZm9ybUxpc3RlbmVycyIsImxpc3RlbmVyQ2IiLCJhcnJheSIsIm5ld0FycmF5IiwiQXJyYXkiLCJmb3VuZEF0SWR4IiwiUkVTRVJWRURfRkxBR1MiLCJSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFIiwiRURJVE9SX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFIiwiQ29sbGlkZXJTaGFwZSIsIlNwcml0ZSIsIkdhbWVPYmplY3QiLCJnYW1lU3RhZ2UiLCJnb01hbmFnZXIiLCJzdXBlciIsIndvcmxkWCIsIndvcmxkWSIsImNodW5rQ291bnQiLCJwb29sIiwic29ydEJ5WSIsImRlbGVnYXRlZFNwcml0ZSIsInBvc2l0aW9uIiwicm91bmQiLCJkZWx0YVJvdGF0aW9uIiwic2V0Um90YXRpb24iLCJuZXdMYXllckluZGV4Iiwib2xkSW5kZXgiLCJsYXllclBhcmVudCIsInJlbW92ZU1hcFNwcml0ZSIsIm5ld0xheWVyU3RhZ2UiLCJjaGlsZHJlbiIsImFkZE1hcFNwcml0ZSIsIm9iamVjdENvbnRhaW5lciIsImFkZENoaWxkIiwib25MYXllckNoYW5nZUxpc3RlbmVycyIsInBvbHlnb25EYXRhIiwibWFwIiwiX2FkZENvbGxpZGVyIiwiUG9seWdvbkNvbGxpZGVyIiwiQ29sbGlkZXIiLCJjb2xsaWRlciIsImluaXRDb2xsaWRlciIsInNwbGljZSIsInJlbW92ZUNvbGxpZGVyIiwiZ2FtZU9iamVjdE9wdHMiLCJpbWFnZURhdGEiLCJ2aXNpYmxlIiwiekluZGV4IiwiX3lTb3J0UG9pbnQiLCJ5U29ydFBvaW50IiwieVNvcnQiLCJ0ZXh0dXJlIiwiaGVpZ2h0Iiwic3ByaXRlIiwiaXNOYU4iLCJjaGFuZ2VMYXllciIsImFkZENvbGxpZGVycyIsImZsaXBEaWFnIiwiZmxpcEhvciIsImZsaXBWZXJ0IiwieFNjYWxlIiwieVNjYWxlIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJzZXRTY2FsZSIsIndpZHRoIiwib2xkWCIsInNldCIsInNjYWxlIiwiY29sIiwiQ29sbGlzaW9uTWFuYWdlciIsIlJlc29sdmVDb2xsaWRlclR5cGUiLCJhZGRSZWN0Q29sbGlkZXIiLCJhZGRDaXJjbGVDb2xsaWRlciIsImFkZFBvbHlnb25Db2xsaWRlciIsImFkZFBvaW50Q29sbGlkZXIiLCJhZGRMaW5lQ29sbGlkZXIiLCJhZGRDb2xsaWRlciIsIm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMiLCJyYWRpYW4iLCJmb3JFYWNoIiwidGFnZ2VkR2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnMiLCJnYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVycyIsImFscGhhIiwiYW5jaG9yIiwib25UYWdBZGRlZCIsIm9mZlRhZ0FkZGVkIiwib25UYWdSZW1vdmVkIiwib2ZmVGFnUmVtb3ZlZCIsImFkZFRhZyIsInJlbW92ZVRhZyIsInRhZ0FkZGVkTGlzdGVuZXJzIiwia2V5cyIsImsiLCJhbnlUYWdBZGRlZExpc3RlbmVycyIsInRhZ1JlbW92ZWRMaXN0ZW5lcnMiLCJhbnlUYWdSZW1vdmVkTGlzdGVuZXJzIiwidGFnIiwiY2hlY2tEdXBsaWNhdGUiLCJpbmNsdWRlcyIsImxpc3RlbmVycyIsIl9vbkFkZGVkVGFnIiwiX29uUmVtb3ZlZFRhZyIsIm9uUm90YXRpb25VcGRhdGUiLCJvblBvc2l0aW9uVXBkYXRlIiwib2ZmUG9zaXRpb25VcGRhdGUiLCJjb2xsaXNpb25TeXN0ZW0iLCJwbHVnaW5zIiwibGFzdENvbGxpc2lvbnMiLCJjb2xsaXNpb25IYW5kbGVyc01hcCIsImVuZENvbGxpc2lvbkhhbmRsZXJzTWFwIiwic3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcCIsInNlcVRvVGFnIiwicmVjdExheWVyTG9va3VwIiwicG9seWdvbkxheWVyTG9va3VwIiwicG9pbnRMYXllckxvb2t1cCIsImNpcmNsZUxheWVyTG9va3VwIiwibGluZUxheWVyTG9va3VwIiwiY2h1bmtDb2xsaWRlckxvb2t1cCIsIm5leHRUYWdTZXEiLCJjYWNoZWRUeXBlRXhlY3V0aW9uIiwiY2FjaGVUeXBlT25OZXh0UnVuIiwiY2FjaGVDb3VudCIsInNldENvbGxpc2lvblN5c3RlbSIsImdldENvbGxpZGVyc1dpdGhUYWdzIiwib25BZnRlckhhbmRsZXJzIiwib25CZWZvcmVIYW5kbGVycyIsInR5cGVzIiwiYWRkZWRUYWdIYW5kbGVycyIsImFkZGVkQ29sbGlkZXJIYW5kbGVycyIsInJlbW92ZWRUYWdIYW5kbGVycyIsInJlbW92ZWRDb2xsaWRlckhhbmRsZXJzIiwiYSIsImoiLCJvbkFkZGVkVGFnVG9Db2xsaWRlciIsIm9uUmVtb3ZlZFRhZ0Zyb21Db2xsaWRlciIsImNodW5rRGF0YSIsImxheWVycyIsImxheWVyRGF0YSIsInJlY3RzIiwiYWRkQ29sbGlkZXJzVG9Mb29rdXAiLCJwb2x5Z29ucyIsInBvaW50cyIsImNpcmNsZXMiLCJsaW5lcyIsInNoYXBlQ29sbGlkZXJDb3VudExvb2t1cCIsImN1ckxvb2t1cCIsImNvbGxpZGVyRGF0YSIsImlkIiwib25BZGRlZER5bmFtaWNDb2xsaWRlciIsIm9uQWRkZWRTdGF0aWNDb2xsaWRlciIsInNraXBBcyIsInNraXBCcyIsInNraXBBbGwiLCJza2lwU2luZ2xlIiwiY3VyVGFnIiwicGx1Z2luSW5pdEhhbmRsZXJzIiwiZG9UYWdIYW5kbGVycyIsInBsdWdpblRhZ0FJbml0SGFuZGxlcnMiLCJwbHVnaW5UYWdCSW5pdEhhbmRsZXJzIiwib25SZW1vdmVkRHluYW1pY0NvbGxpZGVyIiwib25SZW1vdmVkU3RhdGljQ29sbGlkZXIiLCJwbHVnaW5SZW1vdmVIYW5kbGVycyIsInBsdWdpblRhZ0FSZW1vdmVIYW5kbGVycyIsInBsdWdpblRhZ0JSZW1vdmVIYW5kbGVycyIsImlzQXJyYXkiLCJoYW5kbGVyTWFwIiwic2tpcCIsImhhbmRsZXJzIiwicmVtb3ZlQ29sbGlkZXJGcm9tTG9va3VwIiwibG9va3VwIiwiaGFzaCIsImdldEFsbENvbGxpZGVycyIsIm9uQ2xlYXIiLCJtZXRhRGF0YSIsIm9uSW5pdCIsIm1hcFciLCJtYXBIIiwibGF5ZXJDb3VudCIsImxheWVyVGlsZUxheWVyT3JkZXIiLCJuZXh0IiwibWF4IiwicGFyc2VJbnQiLCJvbGQiLCJhZGRDb2xsaWRlckNvdXBsZSIsIm9uQWRkZWRDb2xsaWRlckNvdXBsZSIsInJlbW92ZUNvbGxpZGVyQ291cGxlIiwib25SZW1vdmVkQ29sbGlkZXJDb3VwbGUiLCJkZWx0YSIsIm5vTG9uZ2VyQ29sbGlkaW5nIiwiY29sbGlzaW9ucyIsImdldENvbGxpc2lvbnMiLCJjb2xBIiwiY29sQiIsIndhc0NvbGxpZGluZyIsImRvQ29sbGlzaW9uSGFuZGxlckl0ZXJhdGlvbiIsInBsdWdpbiIsIl9mIiwiX3BsdWdpbiIsIm9uQmVmb3JlQ29sbGlzaW9ucyIsIm9mZkJlZm9yZUNvbGxpc2lvbnMiLCJvbkFmdGVyQ29sbGlzaW9ucyIsIm9mZkFmdGVyQ29sbGlzaW9ucyIsInJlbW92ZUZyb21QbHVnaW5NYXAiLCJjYkhvb2siLCJ0YWdCcyIsInRhZ0FzIiwidGFnQSIsImN1ckNvdXBsZXMiLCJjb3VwbGVzIiwiY3VyQ291cGxlQXJyYXkiLCJzaW5nbGVzIiwiY3VyU2luZ2xlQXJyYXkiLCJvbkNvbGxpc2lvblN0YXJ0Iiwib25Db2xsaXNpb24iLCJvbkNvbGxpc2lvbkVuZCIsInJlbW92ZVRhZ0hvb2tzIiwiaG9vayIsInJlbW92ZWRBbGwiLCJvbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSIsIm9uQWRkZWRDb2xsaWRlcldpdGhUYWdCIiwib25Db2xsaWRlckFkZGVkVGFnQSIsInBsdWdpbkNvbGxpZGVyQWRkZWRUYWdBSGFuZGxlcnMiLCJvbkNvbGxpZGVyQWRkZWRUYWdCIiwicGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0JIYW5kbGVycyIsIm9uQ29sbGlkZXJSZW1vdmVkVGFnQSIsInBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0FIYW5kbGVycyIsIm9uQ29sbGlkZXJSZW1vdmVkVGFnQiIsInBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0JIYW5kbGVycyIsIm9uQWRkZWQiLCJmaWx0ZXIiLCJvZmZBZGRlZENvbGxpZGVyIiwib25SZW1vdmVkVGFnQSIsIm9uUmVtb3ZlZFRhZ0IiLCJvblJlbW92ZWQiLCJvZmZSZW1vdmVkQ29sbGlkZXIiLCJyZWFwcGx5UGx1Z2lucyIsInRhZ0IiLCJ3b3JsZCIsIm9wdHMiLCJ2YWxpZGF0ZVBsdWdpbiIsImluaXQiLCJhZGRUb1BsdWdpbk1hcCIsImluaXRUYWdIb29rcyIsImhhbmRsZXIiLCJpdGVtIiwiYXIiLCJpbmRleE9mIiwib25BZGRlZENvbGxpZGVyIiwib25SZW1vdmVkQ29sbGlkZXIiLCJpdGVyYXRlQ29sbGlzaW9uVGFnSGFuZGxlcnMiLCJoYW5kbGVyTG9va3VwIiwic3RhcnRUcyIsInBlcmZvcm1hbmNlIiwibm93IiwiY29sQVR5cGVzIiwiY29sQlR5cGVzIiwic2tpcEJUeXBlcyIsImNhbGxlZENvdXBsZXMiLCJjYWxsZWRTaW5nbGVzIiwidGFnZEFQbHVnaW5IYW5kbGVycyIsInRhZ2RCUGx1Z2luSGFuZGxlcnMiLCJwb2ludEEiLCJwb2ludEIiLCJvcmlnaW5hbFgiLCJvcmlnaW5hbFkiLCJhbmdsZSIsImxpbmVTdGFydExpc3RlbmVycyIsImxpbmVMaXN0ZW5lcnMiLCJsaW5lRW5kTGlzdGVuZXJzIiwicmVtb3ZlRnJvbUFycmF5IiwibWF4WCIsIm1heFkiLCJBdGxhc0ZhY3RvcnkiLCJsb2FkZXIiLCJXZWJHbEdhbWVPYmplY3RBdGxhcyIsIm1heFRleHR1cmVTaXplIiwibmV4dFBvc2l0aW9ucyIsIm5leHRPcGVuUmVjdHMiLCJuZXh0T3BlblBvc2l0aW9ucyIsIm5leHRQb3NpdGlvbkluZGV4IiwibmV4dFJlY3RBdGxhc0luZGV4IiwibmV4dE9wZW5JbmRleCIsImF0bGFzc2VzIiwic3ViQ2h1bmtXIiwic3ViQ2h1bmtIIiwib3BlblJlY3RzIiwic2F2ZWRTdWJDaHVua0luZGV4ZXMiLCJjbGVhciIsInRleHR1cmVTdGFydFgiLCJ0ZXh0dXJlU3RhcnRZIiwiUmVuZGVyVGV4dHVyZSIsImZpbGwiLCJldmVyeSIsIm1heFciLCJtYXhIIiwiY29udGFpbmVyIiwiQ29udGFpbmVyIiwiclQiLCJyZW5kZXIiLCJtYXBXaWR0aCIsIm1hcEhlaWdodCIsImNyZWF0ZWQiLCJjZWlsIiwiYUlkeCIsImRlc3Ryb3kiLCJzZWN0aW9uSW5kZXgiLCJzdWJDaHVua0luZGV4dSIsInN1YkNodW5rSW5kZXgiLCJnZXROZXh0UmVjdCIsInNldFRyYW5zZm9ybSIsIm5ld1RleHR1cmUiLCJiYXNlVGV4dHVyZSIsIlJlY3RhbmdsZSIsImxheWVyQ29udGFpbmVyIiwibG9nIiwiZ2V0TG9jYWxCb3VuZHMiLCJjaGVjayIsInJlY3RUb1NwbGl0Iiwid2lkdGhMZWZ0IiwiaGVpZ2h0TGVmdCIsInBvcCIsImF0bGFzSW5kZXgiLCJNZXNzYWdlcyIsIlJlc3VsdENvZGVzIiwiTWFwQ29sbGlkZXIiLCJfQ0hVTktfVVBEQVRFX0lOVEVSVkFMIiwiX19fY29sbGlzaW9uU3lzdGVtIiwiX19fcGx1Z2lucyIsIl9fX2luaXRpYWxpemVkV29ybGQiLCJXb3JsZCIsImJhc2VQYXRoIiwibWFwTG9hZENvdW50IiwiY2FjaGVkTWFwTWV0YURhdGEiLCJhd2FpdGluZ0NvbGxpc2lvbkVuZCIsIm1hcHNJbml0RGF0YSIsImluaXRpYWxpemVkIiwiY2h1bmtJdGVyYXRpb24iLCJlbGFwc2VkIiwiZWxhcHNlZENvbCIsImNvbGxpc2lvblBsdWdpbnMiLCJjb2xsaXNpb25IYW5kbGVycyIsInNlcVRvUHJvcCIsIl9pc0xvYWRpbmdNYXAiLCJfb25NYXBDcmVhdGVkTGlzdGVuZXJzIiwiX29uTWFwRGVzdHJveWVkTGlzdGVuZXJzIiwiX29uQmVmb3JlTWFwRGVzdHJveWVkTGlzdGVuZXJzIiwiYnVmZmVyZWRPYmplY3RzIiwiQ29sbGlkZXJTaGFwZXMiLCJtYWluU3RhZ2UiLCJpbnRlcmZhY2VTdGFnZSIsIlNwYXRpYWxHcmlkIiwidXBkYXRlQ29sbGlzaW9ucyIsInVwZGF0ZSIsImFkZENvbGxpZGVyQ291cGxlcyIsInJlbW92ZUNvbGxpZGVyQ291cGxlcyIsImdhbWVPYmplY3RNYW5hZ2VyIiwiR2FtZU9iamVjdE1hbmFnZXIiLCJhZGRHYW1lT2JqZWN0IiwiZ2V0VGV4dHVyZSIsIm9uVGFnZ2VkR2FtZU9iamVjdEFkZGVkIiwib25UYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZCIsIm9uR2FtZU9iamVjdEFkZGVkIiwib25HYW1lT2JqZWN0UmVtb3ZlZCIsInN5c3RlbSIsInZhbGlkIiwiVmFsaWRhdGVQbHVnaW4iLCJQbHVnaW5UeXBlcyIsIkNvbGxpc2lvbiIsImFkZFBsdWdpbiIsIndhbnQiLCJ6IiwiZm91bmQiLCJmaW5kIiwidXNlIiwid29ybGRJbmRleCIsInJlbW92ZVBsdWdpbiIsImlkeCIsImNodW5rVmlzaWJpbGl0eUludGVydmFsIiwiY2FtZXJhIiwicmVzb2x1dGlvblNldHRpbmdzIiwibWVyZ2VPcHRpb25zIiwiX2luaXQiLCJmbGFncyIsImluZGV4ZWREQl9lbmFibGVkIiwibG9jYWxTdG9yYWdlIiwid2ViV29ya2VyIiwicmVzb2x2ZU1heFRleHR1cmVTaXplIiwid2ViR2wiLCJodHRwR2V0QXN5bmMiLCJ3b3JsZE1ldGFEYXRhIiwicHJvcFNlcVRvTmFtZUxvb2t1cCIsImNvbFRhZ3MiLCJyZWFwcGx5TWFwUGx1Z2lucyIsIm1hcHMiLCJzaXplc2VxIiwic2l6ZSIsImluZGV4RGJMb2FkZXIiLCJMb2FkZXIiLCJpbml0aWFsaXplIiwiY2h1bmtXb3JrZXIiLCJDaHVua0xvYWRlcldvcmtlciIsImluaXRXb3JsZCIsInRpbGVTaXplU2VxTG9va3VwIiwiU1VDQ0VTUyIsImludGVyZmFjZU1hbmFnZXIiLCJJbnRlcmZhY2VNYW5hZ2VyIiwiYWRkVGV4dHVyZVRvSW50ZXJmYWNlQXRsYXMiLCJsb2FkSW50ZXJmYWNlVGV4dHVyZSIsImxvYWRUZXh0dXJlIiwiYWRkSW50ZXJmYWNlSXRlbSIsInJlbW92ZUludGVyZmFjZUl0ZW0iLCJjbGVhckludGVyZmFjZSIsIm9mZlRhZ2dlZEdhbWVPYmplY3RBZGRlZCIsIm9mZlRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkIiwib2ZmR2FtZU9iamVjdEFkZGVkIiwib2ZmR2FtZU9iamVjdFJlbW92ZWQiLCJ0aWxlTWFuYWdlciIsIlRpbGVNYW5hZ2VyIiwidGlsZXNldHMiLCJwbGF5ZXJDYW1lcmEiLCJQbGF5ZXJDYW1lcmEiLCJiaW5kQ2FtZXJhQ2VudGVyIiwic2NyZWVuVG9Xb3JsZCIsIndvcmxkVG9TY3JlZW4iLCJyZXNvbHV0aW9uTWFuYWdlciIsIlJlc29sdXRpb25NYW5hZ2VyIiwiY2h1bmtNYW5hZ2VyIiwiQ2h1bmtNYW5hZ2VyIiwibG9hZGVkTWFwIiwidXBkYXRlQWxtb3N0VmlzaWJsZUNodW5rcyIsInVwZGF0ZVZpc2libGVDaHVua3MiLCJuZXh0QmF0Y2giLCJ1cGRhdGVTdGFnZSIsImN1cnJlbnRNYXAiLCJtYXBJZCIsInVwZGF0ZUNodW5rcyIsInVwZGF0ZU5vb3AiLCJtYXBNZXRhRGF0YSIsImdldE1hcE1ldGFEYXRhIiwidHMiLCJyZXF1ZXN0TWFwTWV0YURhdGEiLCJ3YXNJbml0aWFsaXplZCIsInJlc2V0IiwiaW5pdE1hcCIsInNldE1hcExlbmd0aHMiLCJ1cGRhdGVNYXBTaXplIiwiY2FtZXJhUG9zaXRpb24iLCJib3VuZENhbWVyYUNlbnRlciIsInVwZGF0ZVZpZXdSZWN0IiwibWFwU2l6ZSIsInJlc29sdmVNYXBTaXplIiwicmViaW5kVXBkYXRlIiwibG9hZE1hcCIsIk1FRElVTSIsInVwZGF0ZU1hc3NpdmUiLCJ1cGRhdGVTbWFsbCIsInAxIiwicDIiLCJhdGFuMiIsInN0YWdlIiwibWFuYWdlZFBsdWdpbnMiLCJwYW5SaWdodCIsImxheWVyU3RhZ2VzIiwiaW5pdFNlY3Rpb25NYW5hZ2VyRXZlbnRIYW5kbGVycyIsInNwcml0ZXNCeUxheWVyIiwib24iLCJhZGRTdWJDaHVuayIsInNwcml0ZXMiLCJyZW1vdmVDaGlsZCIsImNvbnRhaW5lcnMiLCJhZGRTdWJDaHVua3MiLCJMYXllckNvbnRhaW5lciIsInBsYXllciIsImRlc3Ryb3lMYXllciIsInJlc2V0VGltZW91dCIsImNvbGxpZGVyVHlwZSIsIm9uQmxvY2tlckRhdGFBZGRlZEhhbmRsZXIiLCJvbkJsb2NrZXJEYXRhUmVtb3ZlZEhhbmRsZXIiLCJjaHVua0luZGV4IiwiYmxvY2tlckRhdGEiLCJzdWJDaHVua3MiLCJmcm9tIiwiZGVzdHJveU9iamVjdENvbnRhaW5lciIsImlzTGF5ZXJDaGFuZ2UiLCJzcHJpdGVUb1JlbW92ZSIsInJlbW92ZUZyb21NYXAiLCJzcHJpdGVUb0FkZCIsInNvcnQiLCJiIiwidGlsZXNldE1ldGFEYXRhVG9Mb2FkIiwic3ByaXRlUG9vbCIsImNhY2hlZFRpbGVDb2xsaWRlcnMiLCJiYXNlVXJsIiwiaW5kZXhlZERiRW5hYmxlZCIsImxvYWRlcnMiLCJ0aWxlc2V0TWV0YURhdGEiLCJsb2FkVGlsZXNldCIsInNpemVLZXkiLCJ0aWxlc2V0SWQiLCJ0aWxlc2V0SW5pdE1ldGFEYXRhIiwidGlsZXNldCIsIlRpbGVzZXQiLCJsb2FkUmVzb3VyY2VzIiwiZm91bmRTZXEiLCJ0aWxlc2V0RGF0YSIsInRpbGVXaWR0aCIsInRpbGVIZWlnaHQiLCJzdHJpbmdpZnkiLCJ0aWxlU2l6ZVNlcSIsInRpbGVJbmRleCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsImdldFRpbGVUZXh0dXJlIiwiZ2V0Q29sbGlkZXJzIiwiY3JlYXRlZFRleHR1cmVzTG9va3VwIiwidGlsZUNvbGxpZGVyTG9va3VwIiwibG9hZGVkIiwiaW5kZXhlZERiTG9hZGVyIiwianNvblVybCIsInJlbW92ZUZpbGVFeHRlbnNpb24iLCJwbmdVcmwiLCJsYXN0VXBkYXRlVHNEYXRhIiwiZGF0YVRzIiwibGFzdFVwZGF0ZVRzSW1hZ2UiLCJpbWFnZVRzIiwidGlsZXNldENvbHVtbnMiLCJmbG9vciIsInRpbGVzZXRUZXh0dXJlIiwibG9hZCIsInRpbGVzZXRUZXh0dXJlS2V5IiwibG9hZFNhdmVIdHRwIiwic2F2ZVRleHR1cmUiLCJ0aGVuIiwic2V0SXRlbSIsInRpbGVzZXRMYXN0VXBkYXRlSW1hZ2VLZXkiLCJsYXN0VXBkYXRlSW1hZ2UiLCJnZXRJdGVtIiwic2F2ZUpzb24iLCJ0aWxlc2V0TGFzdFVwZGF0ZURhdGFLZXkiLCJsYXN0VXBkYXRlZFRzIiwibG9hZEpzb24iLCJsYXN0Q2FjaGVkVHMiLCJzdGFydGluZ0luZGV4IiwiYWxsIiwibG9hZERhdGEiLCJpbWFnZVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJ0aWxlQ291bnQiLCJ0aWxlRGF0YSIsIm1ha2VUZXh0dXJlIiwidGFnZ2VkR2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzIiwiY2FjaGVkSW1hZ2VEYXRhIiwicGVuZGluZ0xvYWRzIiwibGFzdFRvdWNoZWRUaW1lc3RhbXBzIiwidXNlckdhbWVPYmplY3RBdGxhc3NlcyIsImNhY2hlZEltYWdlVGV4dHVyZXMiLCJ1c2VyVGV4dHVyZXMiLCJ1c2VyVGV4dHVyZUNhY2hlVGltZXN0YW1wTG9va3VwIiwidGV4dHVyZUF0bGFzc2VzIiwiZ2FtZU9ialBvb2wiLCJpbnN0YWxsZWRQbHVnaW5zIiwidGFnU2VxVG9JZCIsInJlbW92ZVVudG91Y2hlZCIsImltYWdlSWQiLCJ0ZXh0dXJlcyIsImxvYWRJbWFnZUNvbGxpZGVyRGF0YSIsImltYWdlS2V5IiwiZm91bmRUZXh0dXJlIiwiZ2FtZU9iamVjdEltYWdlQXRsYXMiLCJjaGVja0ZvckltYWdlSW5DYWNoZSIsIl90IiwibG9hZEltYWdlVGV4dHVyZSIsImFkZFRleHR1cmUiLCJ1cGRhdGVTdG9yYWdlIiwiZGF0dW0iLCJhdGxhc0luZGV4ZXMiLCJyZXNEYXRhIiwib2JqIiwiYXRsYXNEYXRhIiwicGFyc2VDb2xsaWRlckRhdGEiLCJhdGxhc0ltYWdlcyIsImV4dHJhY3QiLCJkZWxldGVJdGVtIiwic2F2ZUltYWdlRGF0YSIsImRvVGltZW91dCIsImNsZWFyVXNlclRleHR1cmVDYWNoZVRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidXNlclRleHR1cmVDYWNoZU5lZWRzUmVzYXZlIiwiY2xlYXJUaW1lb3V0IiwicGF0aCIsImFkZFRvQXRsYXMiLCJjYWNoZUZvciIsImdldENhY2hlZFVzZXJUZXh0dXJlVGltZXN0YW1wIiwiRGF0ZSIsImxvYWRJbWFnZURhdGEiLCJ3YXJuIiwiZ2V0VGV4dHVyZUZyb21EYXRhVXJsIiwibmVlZGVkQXRsYXNJbmRleGVzIiwibmVlZGVkUmVtb3ZlSW5kZXhlcyIsInRpbWVzdGFtcHMiLCJuZXdUaW1lU3RhbXBzIiwicGFyc2VkVGltZXN0YW1wcyIsImltYWdlcyIsImN1ckF0bGFzVHMiLCJkaWZmIiwiZW5kIiwibG9hZEltYWdlc0h0dHAiLCJjdXJBdGxhc0RhdGEiLCJzcGxpdEFuZFNhdmVJbWFnZSIsImdhbWVPYmplY3RBZGRlZExpc3RlbmVycyIsImdldE1hcEltYWdlVGV4dHVyZSIsImRlY29kZWRGbGlwcyIsImRlY29kZVJvdGF0aW9uIiwiZ2V0SW1hZ2VEYXRhIiwiZ2FtZU9iaiIsInRpbWVXaXRob3V0VXNlIiwiaWRzIiwicmVtb3ZlSW1hZ2UiLCJCYXNlR2FtZU9iamVjdEF0bGFzIiwicmVjdCIsImNhY2hlZFRleHR1cmVzIiwiYmluZFJlbmRlclRleHR1cmUiLCJlbmFibGUiLCJTQ0lTU09SX1RFU1QiLCJzY2lzc29yIiwicGFja2VyIiwiTWF4UmVjdHNQYWNrZXIiLCJzbWFydCIsInBvdCIsImFsbG93Um90YXRpb24iLCJ0ZXh0dXJlSWQiLCJkZXN0cm95QWZ0ZXIiLCJiaW5zIiwicm90Iiwib3ZlcnNpemVkIiwiX3JvdCIsIl9hbGxvd1JvdGF0aW9uIiwiX2RpcnR5IiwiX3dpZHRoIiwiX2hlaWdodCIsIl94IiwiX3kiLCJfZGF0YSIsImZpcnN0Iiwic2Vjb25kIiwiY29sbGlkZSIsImNvbnRhaW4iLCJ0bXAiLCJCaW4iLCJzb21lIiwiZGlydHkiLCJzZXREaXJ0eSIsIk1heFJlY3RzQmluIiwibWF4V2lkdGgiLCJFREdFX01BWF9WQUxVRSIsIm1heEhlaWdodCIsInBhZGRpbmciLCJzcXVhcmUiLCJib3JkZXIiLCJsb2dpYyIsIlBBQ0tJTkdfTE9HSUMiLCJNQVhfRURHRSIsImZyZWVSZWN0cyIsInZlcnRpY2FsRXhwYW5kIiwiYXJncyIsInJlc3VsdCIsInBsYWNlIiwidW5wYWNrZWQiLCJkZWVwUmVzZXQiLCJyZXNldE9wdGlvbiIsIm5vZGUiLCJmaW5kTm9kZSIsInVwZGF0ZUJpblNpemUiLCJudW1SZWN0VG9Qcm9jZXNzIiwic3BsaXROb2RlIiwicHJ1bmVGcmVlTGlzdCIsImFyZWFGaXQiLCJiZXN0Tm9kZSIsInNjb3JlIiwiTUFYX1ZBTFVFIiwiTUFYX0FSRUEiLCJmcmVlUmVjdCIsInVzZWROb2RlIiwibmV3Tm9kZSIsImxlbiIsInRtcFJlY3QxIiwidG1wUmVjdDIiLCJ0bXBXaWR0aCIsInRtcEhlaWdodCIsInJvdFdpZHRoIiwicm90SGVpZ2h0IiwicG93IiwiTE9HMkUiLCJleHBhbmRGcmVlUmVjdHMiLCJpbmRleCIsIk92ZXJzaXplZEVsZW1lbnRCaW4iLCJfY3VycmVudEJpbkluZGV4Iiwic2xpY2UiLCJiaW4iLCJxdWljayIsInVucGFjayIsInVwIiwicmVwYWNrIiwiYWRkQXJyYXkiLCJhbGxSZWN0cyIsIm5ld0JpbiIsInNhdmVCaW5zIiwic2F2ZUJpbiIsImFzc2lnbiIsInJvdGF0ZVBvaW50cyIsImNvc0FuZ2xlIiwic2luQW5nbGUiLCJkeCIsImR5IiwiYm91bmRpbmdCb3hUb1BvbHlnb24iLCJiYiIsImJvdW5kaW5nQm94RnJvbVBvbHlnb24iLCJyZWN0RnJvbUJvdW5kaW5nQm94IiwibG9jYXRpb25PZiIsImVsZW1lbnQiLCJzdGFydCIsImdldFZlcnRleGVzRnJvbUJvdW5kaW5nQm94Iiwib2Zmc2V0IiwibWlkWCIsIm1pZFkiLCJkcmF3RGFzaGVkUG9seWdvbiIsImciLCJkYXNoIiwiZ2FwIiwib2Zmc2V0UGVyY2VudGFnZSIsImRhc2hMZWZ0IiwiZ2FwTGVmdCIsInByb2dyZXNzT2Zmc2V0Iiwicm90YXRlZFBvaW50cyIsInNxcnQiLCJub3JtYWwiLCJwcm9ncmVzc09uTGluZSIsIm1vdmVUbyIsImxpbmVUbyIsImdldE11bHRpcGxlVGV4dHVyZXNGcm9tQmxvYiIsImNvdW50IiwiZ2V0QmxvYkZyb21TcHJpdGUiLCJkaXNwbGF5T2JqZWN0IiwiY2FudmFzIiwidG9CbG9iIiwiZ2V0QmxvYkZyb21UZXh0dXJlIiwiYmxvYlRvRGF0YVVSTCIsIkZpbGVSZWFkZXIiLCJyZWFkQXNEYXRhVVJMIiwib25sb2FkIiwiZSIsInRhcmdldCIsImRvd25sb2FkQmxvYlBuZyIsImZpbGVuYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZCIsImRvd25sb2FkIiwiaHJlZiIsImNsaWNrIiwicmVtb3ZlIiwicmVuZGVyVGV4dHVyZSIsIldlYkdMUmVuZGVyZXIiLCJfY2FudmFzUmVuZGVyVGFyZ2V0IiwiY29udGV4dCIsImNsZWFyUmVjdCIsImZsYXR0ZW4iLCJ0aWxlSWQiLCJmbGlwVmVyIiwiZGVyaXZlZEN0b3IiLCJiYXNlQ3RvcnMiLCJiYXNlQ3RvciIsImdldE93blByb3BlcnR5TmFtZXMiLCJmbGlwMSIsImZsaXAyIiwiZmxpcERpYWdTdW0iLCJjb21wYXJlSG9yMSIsImNvbXBhcmVWZXIxIiwiY29tcGFyZUhvcjIiLCJmbGlwSW5QbGFjZSIsIm1hdHJpeCIsImxvY2FsVHJhbnNmb3JtIiwiY2xvbmUiLCJydCIsInRyYW5zbGF0ZSIsInBvbHlnb24iLCJjZWxsVyIsImNlbGxIIiwidG90YWxXIiwidG90YWxIIiwiY29sb3IiLCJ0aGlja25lc3MiLCJHcmFwaGljcyIsImxpbmVTdHlsZSIsInJlY3Vyc2VFbWl0IiwiZW1pdCIsInB0IiwibGF5ZXJUaWxlRGF0YSIsIm9sZFRpbGVDb3VudCIsIm5ld1RpbGVDb3VudCIsIm9sZEVuZCIsIm5ld0VuZCIsInNpZ24iLCJwaXhlbHMiLCJDYW52YXNSZW5kZXJlciIsIm9yZGVyZWRLZXlzIiwiaW5kZXhBIiwiaW5kZXhCIiwibmV3SXRlbSIsInRvIiwiYmluYXJ5U2VhcmNoSW5kZXgiLCJtaWQiLCJvbGRJZCIsImluUGxhY2UiLCJwb2ludFNpemUiLCJvdXRsaW5lV2lkdGgiLCJiZWdpbkZpbGwiLCJkcmF3UmVjdCIsImVuZEZpbGwiLCJidWZmZXJXaWR0aCIsImJ1ZmZlckhlaWdodCIsImNodW5rU2l6ZSIsIlIiLCJ0b1giLCJ0b1kiLCJkYXNoZWRMZW5ndGgiLCJsYXN0WCIsInNhdmVUb0ZpbGVQYXRoIiwidGltZSIsImpzb25EYXRhIiwiYmxvYnMiLCJ0ZXh0dXJlUHJvbWlzZXMiLCJkYXRhVXJsUHJvbWlzZXMiLCJkYXRhVXJscyIsInRleHR1cmVPYmoiLCJkYXRhVXJsT2JqIiwiaXNWYWxpZCIsInJnMSIsInJnMiIsInJnMyIsImZuYW1lIiwidGVzdCIsImJsb2NrU2l6ZSIsIk9JbmRleGVkREIiLCJzZWxmIiwid2Via2l0SW5kZXhlZERiIiwiZGIiLCJyZXF1ZXN0Iiwib25lcnJvciIsIm9uc3VjY2VzcyIsInNldFZlcnNpb24iLCJ2ZXJzaW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiZGVsZXRlIiwicHV0IiwiYnVmZmVyIiwic291cmNlIiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsInRvRGF0YVVSTCIsImltZ0ZpbGUiLCJkYXRhVXJsVG9UZXh0dXJlIiwiRXZlbnRFbWl0dGVyIiwiU2VjdGlvblJlbmRlck1vZGUiLCJWaXNpYmlsaXR5U3RhdGVzIiwid29ybGRJbml0RGF0YSIsInNlcVRvVGFnU3RyaW5nIiwiaW1hZ2VNYW5hZ2VyIiwiY2h1bmtMb2FkZXJXb3JrZXIiLCJ1c2VXb3JrZXIiLCJjdXJCYXRjaEluZGV4IiwiY3VyQmF0Y2hDaHVua0luZGV4ZXMiLCJhbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzIiwidmlzaWJsZUNodW5rSW5kZXhlcyIsImNodW5rc0luQmF0Y2giLCJpbml0QmF0Y2hlcyIsImluaXRpYWlsaXplZFNwcml0ZXMiLCJ0cmFja2VkQ2h1bmtCYXRjaEluZGV4ZXMiLCJjaHVua1RleHR1cmVBdGxhc3NlcyIsInBlbmRpbmdDaHVua0ltYWdlTG9hZHMiLCJpbnRlcnVwdGVkQ2h1bmtJbWFnZXMiLCJpbnRlcnVwdGVkQ2h1bmtEYXRhIiwibG9hZGluZ0NodW5rRGF0YSIsImxvYWRpbmciLCJsb2FkZWRDaHVua3MiLCJjYWNoZWRDaHVua1RleHR1cmVzIiwiaW5kZXhlc1RvVXBkYXRlIiwiY2FjaGVkQ2h1bmtEYXRhIiwiY29udGFpbmVyUG9vbCIsInNob3dlZENodW5rSW1hZ2VzIiwic2hvd2VkQ2h1bmtDb2xsaWRlcnMiLCJjYWNoZWRTbWFsbE1hcERhdGEiLCJhZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzIiwicmVzZXR0aW5nIiwidGlsZVNpemVCeVNlcUxvb2t1cCIsImNhY2hlZE1hcENodW5rc0RhdGFzIiwiY2h1bmtXaWR0aCIsImNodW5rSGVpZ2h0IiwiaGFsZkNodW5rV2lkdGgiLCJoYWxmQ2h1bmtIZWlnaHQiLCJjaHVua1RleHR1cmVBdGxhc0ZhY3RvcnkiLCJ3ZWJHbEF0bGFzRmFjdG9yeSIsImNhbnZhc0F0bGFzRmFjdG9yeSIsInBsYXllclZpZXdSZWN0IiwidXNlSW5kZXhlZERiV29ya2VyIiwiV29ybGRDaHVuayIsIm1hcERhdGEiLCJtYXBXb3JsZEluaXREYXRhIiwiZGVjb2RlciIsIkRlY29kZXIiLCJfbWFwRmlsZUtleSIsIm1hcEZpbGVLZXkiLCJhbGxEYXRhIiwiZGVjb2RlZCIsImRlY29kZU1hcCIsInNhdmVNYXBNZXRhRGF0YSIsImNodW5rcyIsIm1lcmdlQ2h1bmtMYXllcnNBc1RleHR1cmVzIiwiY2h1bmtLZXkiLCJzYXZlU21hbGxNYXBJbWFnZUFuZENvbGxpZGVyRGF0YU9ubHkiLCJkZWxldGVBbGxDaHVua3NHcmVhdGVyVGhhbiIsInRpbGVMYXllcnMiLCJjYWNoZWQiLCJhdGxhcyIsImNodW5rIiwiY3JlYXRlV29ybGRDaHVuayIsInJlbmRlcmVkIiwiaW5pdFRpbGVMYXllcnMiLCJtZXJnZUFsbExheWVyQ2h1bmtzIiwibGFzdFRzIiwicGFyc2VkIiwibWFwTWV0YVBhdGgiLCJkZWNvZGVNZXRhRGF0YSIsImNodW5rVGltZXN0YW1wcyIsImNodW5rc1RzIiwicmVxdWVzdEFuZFN0b3JlQWxsTWFwQ2h1bmtzIiwibWF4Q2h1bmtJbmRleCIsImluaXRMb29rdXAiLCJpbml0U21hbGxNYXAiLCJpbml0TWFzc2l2ZU1hcCIsImxhc3RFeGlzdGluZ0NodW5rSW5kZXgiLCJpdGVtc1RvRGVsZXRlIiwicmVtb3ZlSXRlbSIsImF0U2VxIiwiaGlkZGVuIiwiaGlkZSIsInJlbW92ZUNodW5rQ29sbGlkZXJzIiwib2xkU3RhdGUiLCJuZXdTdGF0ZSIsImFsbW9zdF92aXNpYmxlIiwiaGlkZUNodW5rIiwiY3VyTWFwU2VxIiwiZGVzdHJveUNodW5rIiwiZGVzdHJveWVkIiwic2hvd0NodW5rIiwiYmF0Y2hJbml0Q2h1bmsiLCJzaGlmdCIsInRyYW5zZm9ybSIsImJhdGNoQXJyYXkiLCJzdGlsbExvYWRpbmciLCJvbkFkZGVkTGF5ZXJTcHJpdGUiLCJwYXlsb2FkIiwiaW5pdFN1YkNodW5rQmF0Y2hlcyIsImluaXRCYXRjaFJlbmRlciIsImRvU3ViQ2h1bmtCYXRjaCIsInJlbW92ZUNodW5rRnJvbUJhdGNoIiwiZm9yY2VTaG93Q2h1bmtJbWFnZXMiLCJsb2FkQ2h1bmtEYXRhIiwicmVtb3ZlQ2h1bmtJbWFnZXMiLCJzcGxpY2VDaHVua0JhdGNoIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2VsbENvbF9zdGFydCIsImNlbGxSb3dfc3RhcnQiLCJjZWxsQ29sX2VuZCIsInN1YkNodW5rQ29scyIsImNlbGxSb3dfZW5kIiwic3ViQ2h1bmtSb3dzIiwiY29sdW1uIiwiY2VsbFBvc2l0aW9uIiwibWF4U3ViQ2h1bmtzIiwiY2h1bmtDb2xzIiwiY2h1bmtSb3dzIiwibWF4Q2h1bmtzIiwib2xkQWxtb3N0VmlzaWJsZSIsImJ1ZlgiLCJidWZZIiwiZGlmZlgiLCJkaWZmWSIsImdldFZpc2libGVDaHVua3MiLCJzSWR4Iiwib2xkVmlzSWR4Iiwib25DaHVua1Zpc2liaWxpdHlTdGF0ZUNoYW5nZSIsIm9sZFZpc2libGUiLCJhbG1vc3RWaXNJZHgiLCJ2aXNpYmxlU3ViQ2h1bmtzIiwiZ2V0VmlzaWJsZVN1YkNodW5rcyIsInVwZGF0ZVZpc2libGVTdWJDaHVua3MiLCJzcGxpY2VkIiwiaW5pdEZvck1hcCIsInJlbmRlck1vZGUiLCJMQVpZX0lOREVYRURfREJfTE9BRCIsInRpbWVFbmQiLCJsb2FkU21hbGxNYXBUZXh0dXJlcyIsImxvYWRTbWFsbE1hcEltYWdlQW5kQ29sbGlkZXJEYXRhT25seSIsImFkZFNtYWxsTWFwRGF0YVRvQ2FjaGUiLCJhZGRDaHVua0NvbGxpZGVycyIsInRpbWVvdXQiLCJjdXJNYXBTaXplIiwibG9hZFNtYWxsTWFwIiwibG9hZExhcmdlTWFwIiwiQkFUQ0hfU1VCX1NFQ1RJT05TX0NPTlRBSU5FUlMiLCJiYXRjaGVzIiwiZm9yY2VDb21wbGV0ZUJhdGNoZXMiLCJzaG93IiwieHl6QXJyYXkiLCJfZ2V0TWFwSW1hZ2UiLCJkZXN0cm95SW5pdGlhbGl6ZWRDaHVuayIsImRlc3Ryb3lDaHVua0luQmF0Y2giLCJsb2FkQ2h1bmsiLCJiYWtlIiwic2F2ZUNodW5rVGV4dHVyZXMiLCJzdGFydE1hcElkIiwiZ2V0Q2h1bmtEYXRhIiwibG9jYWxTdG9yYWdlRGF0YUtleSIsIm1ha2VDaHVua0xheWVyS2V5IiwicHJvbWlzZXMiLCJXZWJHTFRleHR1cmVBdGxhcyIsIkNhbnZhc1RleHR1cmVBdGxhcyIsInV0aWxzIiwidGV4dHVyZUF0bGFzc2VzQnlMYXllckluZGV4Iiwic2VjdGlvbkxheWVyVGV4dHVyZXMiLCJzdWJDaHVua0NvbnRhaW5lcnMiLCJzdWJDaHVua1JlbmRlcmVkU3ByaXRlcyIsImxheWVyUmVuZGVyZWRDb250YWluZXJzIiwiaXNCYXRjaGluZyIsInZpc2libGVDaHVua3MiLCJpbml0aWFsaXplZFN1YkNodW5rcyIsInVzaW5nQmFrZWRSZW5kZXJUZXh0dXJlcyIsImJha2luZ09uVGhlR28iLCJsYXllckNvbnRhaW5lcnMiLCJ3b3JsZFN1YkNodW5rSW5kZXhlcyIsImxvY2FsQ2h1bmtJbmRleGVzQXJyYXkiLCJsb2NhbFRvV29ybGRTdWJDaHVua0luZGV4ZXMiLCJzdWJDaHVua0NvbHVtbnMiLCJ3b3JsZFN1YkNodW5rQ29scyIsInJvdyIsInBhcmVudFN0YXJ0aW5nU3ViQ2h1bmtJbmRleCIsImxvY2FsIiwibGF5ZXJUZXh0dXJlcyIsInNYIiwic1kiLCJhZGRUaWxlc1RvU3ViQ2h1bmtDb250YWluZXIiLCJhcnJheUJ5TGF5ZXJzIiwicGxheWVyUG9zaXRpb24iLCJkZXNjRGlzdGFuY2VPcmRlcmVkIiwib3JkZXJTdWJDaHVua3NCeURpc3RhbmNlRGVzY2VuZGluZyIsImNJZHgiLCJyZW5kZXJTdWJDaHVua0xheWVyIiwiYWRkU2l6ZWRUaWxlc1RvU3ViQ2h1bmtMYXllckNvbnRhaW5lciIsImFjYyIsInJlbW92ZUNodW5rRnJvbVRleHR1cmUiLCJ2aWV3UmVjdCIsImZvcmNlQmF0Y2hlcyIsInJlbmRlclN1YkNodW5rIiwic3Vic2VjdGlvbkluZGV4Iiwic3Vic2VjdGlvbkluZGV4ZXMiLCJhZGRlZCIsInJlbFN1YklkeCIsImlzQmF0Y2giLCJjYWNoZVRleHR1cmVzIiwiYWRkVGlsZXNUb1N1YkNodW5rTGF5ZXJDb250YWluZXIiLCJyZW5kZXJTdWJDaHVua0xheWVyR3JvdXAiLCJjMiIsInRpIiwidGlsZUxheWVySW5kZXgiLCJsYXllcklkIiwic3ViQ2h1bmtUaWxlQ29udGFpbmVyIiwibWF4VGlsZUlkIiwic3RhcnRPZmZzZXRzIiwic3ViQ2h1bmsiLCJpbmNyWCIsImluY3JZIiwiZW5jb2RlZElkIiwiZ2V0VGlsZSIsImRpdiIsInZpZXdyZWN0IiwiQWJzdHJhY3RUZXh0dXJlQXRsYXMiLCJhZGRPcGVuU3BvdCIsInRpbGVJZFRvU2l6ZUxvb2t1cCIsInRhZ1NlcVRvU3RyaW5nTG9va3VwIiwiY2h1bmtBcnJheSIsImN1ckNoZWNrSW5kZXgiLCJjdXJMYXllciIsInN0YXJ0aW5nQ2h1bmtJbmRleCIsImZvdW5kU2VwZXJhdG9ycyIsIkJMT0JfU0VQQVJBVE9SIiwiRU1QVFlfU0VDVElPTl9GTEFHIiwiTkVHQVRJVkVfTlVNQkVSIiwiZW5jb2RlZEFycmF5IiwiZGVjb2RlZFN0cmluZyIsImN1ckludCIsIklNQUdFX0FORF9TVFJJTkdfU0VQRVJBVE9SIiwiY3VycmVudFByb3BOYW1lIiwiY3VyIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJjdXJJbmRleCIsIm1hcFNlcSIsImNvbGxpZGVyVGFnQ291bnQiLCJmb3VuZFBvaW50cyIsInBvaW50Q291bnQiLCJhZGp1c3ROZWciLCJmaW5hbE9iaiIsImNvbE9iaiIsImRlY29kZUNvbGxpZGVyVGFnc0FuZFByb3BzIiwibnVtYmVyQXJyYXkiLCJmaW5hbFByb3BzIiwiZW5kQXRJbmRleCIsImRlY29kZVByb3BCb29sZWFucyIsImRlY29kZVByb3BOdW1iZXJzIiwiZGVjb2RlUHJvcFN0cmluZ3MiLCJ0YWdFbmRlZEluZGV4IiwiZGVjb2RlVGFncyIsImRlY29kZVByb3BzIiwibWFwVGFncyIsImRlY29kZVBvbHlnb24iLCJkZWNvZGVSZWN0IiwiZGVjb2RlUG9pbnQiLCJmb3VuZENvbGxpZGVycyIsImN1clR5cGVJZHgiLCJkZWNvZGVkQ29sbGlkZXJzIiwiZXhwZWN0ZWRDb2xsaWRlcnMiLCJkZWNvZGVDb2xsaWRlciIsInRpbGVBcnJheXMiLCJjdXJFbGVtZW50SW5kZXgiLCJ0aWxlTGF5ZXJJZHMiLCJmb3VuZFRpbGVCbG9iU2VwZXJhdG9ycyIsImN1ckxheWVyRm9ySW1hZ2UiLCJmb3VuZEltYWdlcyIsIm5leHRWYWx1ZUlzSW1hZ2VDb3VudCIsImN1ckltZ0kiLCJvbkltZ1NlcCIsImN1ckVsbSIsImRlY29kZUNvbGxpZGVycyIsImNodW5rVyIsImNodW5rSCIsImxheWVyVGlsZUxheWVyT3JkZXJEYXRhIiwidW5jb21wcmVzcyIsImNvbHMiLCJjaHVua1dvcmxkWCIsImNodW5rV29ybGRZIiwiZW5kWCIsImVuZFkiLCJjYWxjdWxhdGVFbmRPZkNodW5rIiwic3BsaXRDaHVua0FycmF5TGF5ZXJzIiwiaGFzSW1hZ2VzIiwiaGFzQ29sbGlkZXJzIiwiY3VyVGlsZXMiLCJ0aWxlc0FycmF5IiwidW5tZXJnZVN1YnNlY3Rpb25UaWxlcyIsInVubWVyZ2VMYXllckltYWdlcyIsIm1hcE51bWJlckFycmF5IiwidG90YWwiLCJjdXJDaHVuayIsInNwbGl0Q2h1bmtzIiwiQ0hVTktfU0VQRVJBVE9SIiwiYnVmZmVycyIsImNvbXByZXNzIiwibWFwQ2h1bmtBcnJheSIsImZvckVhY2hDaHVuayIsImRlY29kZUNodW5rIiwiaW1hZ2VBcnJheSIsIm5leHRJc0ltYWdlSWQiLCJ4eXpJbmRleCIsImN1ckltYWdlSWQiLCJlbmNvZGVkU3ViQ2h1bmtXIiwiZW5jb2RlZFN1YkNodW5rSCIsImNodW5rWCIsImNodW5rWSIsInRpbGVBcnJheSIsImVuZFBvc2l0aW9uIiwiZXhwZWN0ZWREZWNvZGVkU3ViQ2h1bmtzIiwiY2FsY3VsYXRlU3ViQ2h1bmtzIiwidW5tZXJnZWRBcnJheXMiLCJjdXJFbmNvZGVkU3ViU2VjdGlvbiIsImN1ckNodW5rWCIsImN1ckNodW5rWSIsInBhZFgiLCJwYWRZIiwiZ2V0VG9wTGVmdFBhZGRpbmciLCJjdXJUaWxlWCIsImN1clRpbGVZIiwiaW5jciIsIkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24iLCJieXRlbG9nIiwidmFsIiwiemlnemFnX2VuY29kZSIsInppZ3phZ19kZWNvZGUiLCJjb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzIiwiaW5wdXQiLCJhbnN3ZXIiLCJjb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzU2lnbmVkIiwiYnVmIiwiQXJyYXlCdWZmZXIiLCJ2aWV3IiwiSW50OEFycmF5IiwicG9zIiwiY29tcHV0ZUhvd01hbnlJbnRlZ2VycyIsImluYnl0ZSIsImNvbXByZXNzU2lnbmVkIiwidW5jb21wcmVzc1NpZ25lZCIsImNhbGN1bGF0ZVJvd3NBbmRDb2x1bW5zIiwicmVtYWluaW5nTWFwV2lkdGgiLCJyZW1haW5pbmdNYXBIZWlnaHQiLCJjb2x1bW5zIiwicm93cyIsInRvcExlZnRQYWRkaW5nIiwiYW5zIiwiYm90dG9tUmlnaHRPdmVyZmxvdyIsImhhcyIsInByZWZpeCIsIkV2ZW50cyIsIkVFIiwiZm4iLCJvbmNlIiwiYWRkTGlzdGVuZXIiLCJlbWl0dGVyIiwiVHlwZUVycm9yIiwibGlzdGVuZXIiLCJldnQiLCJfZXZlbnRzIiwiX2V2ZW50c0NvdW50IiwiY2xlYXJFdmVudCIsIl9fcHJvdG9fXyIsImV2ZW50TmFtZXMiLCJldmVudHMiLCJuYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImVlIiwibGlzdGVuZXJDb3VudCIsImExIiwiYTIiLCJhMyIsImE0IiwiYTUiLCJhcmd1bWVudHMiLCJyZW1vdmVMaXN0ZW5lciIsImFwcGx5Iiwib2ZmIiwicHJlZml4ZWQiLCJMZXZlbENhbWVyYVJlbmRlck1vZGUiLCJmb2N1c2VkIiwib2Zmc2V0Vmlld1JlY3QiLCJjZW50ZXJlZFNjcmVlblBvc2l0aW9uIiwibWFwT2Zmc2V0WCIsIm1hcE9mZnNldFkiLCJtYXBQYWRkaW5nTGVmdCIsIm1hcFBhZGRpbmdUb3AiLCJyZXNpemVXaXRoU2NyZWVuIiwic3RvcENhbWVyYUF0Qm91bmRhcmllcyIsImlzU3RvcHBpbmciLCJzdGF0aWNTcHJpdGVzIiwiZHluYW1pY1Nwcml0ZXMiLCJyZXNvbHV0aW9uIiwiY29tcHV0ZWRSZXNvbHV0aW9uIiwiSU5GSU5JVEVfU0laRSIsInZpZXdXaWR0aCIsImlubmVyV2lkdGgiLCJzY3JlZW4iLCJ2aWV3SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJyZXNpemVWaWV3IiwiaGFuZGxlUmVtb3ZlZEZvY3VzZWRHYW1lT2JqZWN0IiwiZm9jdXNlZEdhbWVPYmplY3QiLCJvZmZSZW1vdmVkRnJvbU1hcCIsImZvY3VzT24iLCJwcmVGb2N1c0JvdW5kUG9pbnQiLCJzcHJpdGVBcnJheSIsIl9wIiwiYm91bmRQb3NpdGlvbk9mZnNldHMiLCJvZmZzZXRzIiwibGV2ZWxXaWR0aEluUGl4ZWxzIiwibGV2ZWxIZWlnaHRJblBpeGVscyIsImxhc3RZIiwibGV2ZWxIZWlnaHRSZXNBZGp1c3RlZCIsImxldmVsV2lkdGhSZXNBZGp1c3RlZCIsImhhbGZXIiwiaGFsZkgiLCJyYXRpb1ciLCJyYXRpb0giLCJzY3JlZW5YIiwic2NyZWVuWSIsImZvY3VzZWRQb2ludCIsImZvY3VzT2Zmc2V0WCIsImZvY3VzT2Zmc2V0WSIsImhhbGZXaWR0aCIsImhhbGZIZWlnaHQiLCJwbGF5ZXJTcHJpdGUiLCJuZXdQb3NpdGlvbiIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJmaXhlZFJlc29sdXRpb24iLCJhdXRvUmVzaXplIiwic3R5bGUiLCJwYXJlbnRXaWR0aCIsInBhcmVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsInBhcmVudEhlaWdodCIsImNsaWVudEhlaWdodCIsIm9mZnNldExlZnQiLCJvZmZzZXRUb3AiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwicm9vdFJlbmRlcmVyIiwicm9vdFJlbmRlclRhcmdldCIsInJlc2l6ZSIsImludGVyYWN0aW9uIiwiX2FjdGl2ZVJlbmRlclRhcmdldCIsImFjdGl2YXRlIiwiX2FjdGl2ZVNoYWRlciIsInVuaWZvcm1zIiwicHJvamVjdGlvbk1hdHJpeCIsInRvQXJyYXkiLCJyZXNpemVWaWV3SGVpZ2h0IiwicmVzaXplVmlld1dpZHRoIiwiQ2h1bmtXb3JrZXIiLCJuZXh0UmVxIiwicGVuZGluZ1JlcXVlc3RzIiwid29ya2VyIiwib25tZXNzYWdlIiwid29ybGRJZCIsInByb3BTZXFUb05hbWUiLCJhd2FpdFJlc3BvbnNlIiwiSU5JVF9MT0FERVIiLCJtYXBJbml0RGF0YSIsIklOSVRfTUFQIiwicmVzIiwiR0VUX1NFQ1RJT05fREFUQSIsIlJFUVVFU1RfQU5EX1NBVkVfQUxMX01BUF9DSFVOS1MiLCJFUlJPUiIsIlJFUVVFU1RfQU5EX1NBVkVfU0lOR0xFX01BUF9DSFVOSyIsIlJFUVVFU1RfQU5EX1NBVkVfTUFQX0NIVU5LUyIsIm1lc3NhZ2UiLCJuZXh0U2VxIiwicG9zdE1lc3NhZ2UiLCJXb3JrZXIiLCJTaGFwZUVudW1Ub1Byb3BlcnR5IiwiU2hhcGVUeXBlQWRqdXN0bWVudHMiLCJ3b3JsZFBvc2l0aW9uIiwid3AiLCJ1aWRJZHgiLCJkeW5hbWljQ29sbGlkZXJzIiwic3RhdGljQ29sbGlkZXJzIiwiaXRlcmF0aW9uIiwiY29sbGlkZXJzQnlUYWciLCJjb2xsaWRlclRhZ3MiLCJ0YWdDb3VwbGVzIiwic3RhdGljQnVja2V0cyIsInVpZENoZWNrZWRDb2xsaWRlZE1hcCIsInVpZEFycmF5IiwiY2hlY2tlZE1hcCIsImN1clNlcSIsInJlc29sdmVQb2ludExpbmUiLCJ4MSIsInkxIiwic3giLCJzeSIsImV4IiwiZXkiLCJkMSIsImQyIiwibGluZUxlbiIsImdldEJ1Y2tldHNMb29rdXAiLCJnZXRCdWNrZXRzRm9yUmVjdCIsImdldEJ1Y2tldHNGb3JQb2x5Z29uIiwiZ2V0QnVja2V0c0ZvclBvaW50IiwiZ2V0QnVja2V0c0ZvckNpcmNsZSIsImdldEJ1Y2tldHNGb3JMaW5lIiwiY2VsbFNpemUiLCJhZGRDb2xsaWRlclRvVHlwZSIsImhhbmRsZUFkZGVkVGFnVG9Qb2x5Z29uIiwiYnVja2V0c1RvQWRkVG8iLCJsaW5lQnVja2V0cyIsInVwZGF0ZUNoZWNrTWFwT25BZGQiLCJyZW1vdmVDb2xsaWRlckZyb21UeXBlIiwidXBkYXRlQ2hlY2tNYXBPblBvbHlnb25SZW1vdmUiLCJyZW1vdmVTdGF0aWNDb2xsaWRlckZyb21CdWNrZXQiLCJ1cGRhdGVDaGVja01hcE9uUmVtb3ZlIiwiZm91bmRBcnJheUEiLCJmb3VuZEFycmF5QiIsImNoZWNrZWQiLCJjb2xsaWRlcnNBIiwiY29sbGlkZXJzQiIsImN1clBvbHlnb24iLCJjYWNoZUFycmF5IiwidXBkYXRlQ2hlY2tNYXBPblBvbHlnb25BZGQiLCJjdXJMaW5lVWlkIiwiYzEiLCJjYWNoZSIsImNvdXBsZWRUYWdzIiwiZ2V0VGFnQ291cGxlQXJyYXlGb3JUYWciLCJmb3VuZEFycmF5QXQiLCJmb3VuZEJBdCIsImZvdW5kQXJyYXlBdDIiLCJmb3VuZEJBdDIiLCJjb3VwbGVJbmRleExvb2t1cENhY2hlIiwiZm9yRWFjaENvbGxpZGVyV2l0aFRhZyIsImNvbGxpZGVyQSIsImNvbGxpZGVyQiIsImNvbGxpZGVyc1NoYXJlSW5pdGlhbGl6ZWRDb3VwbGUiLCJfb25BZGRlZENvbGxpZGVyV2l0aFRhZ3MiLCJjdXJVaWQiLCJfb25SZW1vdmVkQ29sbGlkZXJXaXRoVGFncyIsInN0aWxsQ291cGxlZCIsImNoZWNrQ29sIiwibDIiLCJjb3VwbGVBcnJheSIsImJ1Y2tldHNUb1JlbW92ZUZyb20iLCJjdXJCdWNrZXQiLCJzaGFwZVR5cGVQcm9wZXJ0eSIsImFjdGl2ZUJ1Y2tldHMiLCJidWNrZXRzIiwiZ2V0QWN0aXZlQnVja2V0cyIsImZvdW5kQ29sbGlzaW9ucyIsImJ1Y2tldElkIiwiYnVja2V0IiwidWlkX2EiLCJ1aWRfYiIsImNoZWNrZWRTZXEiLCJyZXNvbHZlQ29sbGlzaW9uIiwic2hBIiwic2hCIiwicmVzb2x2ZVJlY3RDaXJjbGUiLCJyZXNvbHZlUmVjdFBvbHlnb24iLCJyZXNvbHZlTGluZVJlY3QiLCJyZXNvbHZlUG9seWdvbkNpcmNsZSIsInJlc29sdmVMaW5lQ2lyY2xlIiwicmVzb2x2ZVBvbHlnb25Qb2x5Z29uIiwicmVzb2x2ZVBvbHlnb25Qb2ludCIsInJlc29sdmVMaW5lUG9seSIsInJlc29sdmVMaW5lTGluZSIsImNpcmNsZURhdGEiLCJyZWN0RGF0YSIsIngyIiwieTIiLCJ4MyIsInkzIiwieDQiLCJ5NCIsInVBIiwidUIiLCJnZXRJbnRlcnNlY3QiLCJ1X2IiLCJ1YSIsInViIiwicngiLCJyeSIsImNvbGxpc2lvbiIsInJlc29sdmVQb2ludFBvbHkiLCJjWCIsImNZIiwiY3giLCJjeSIsImRpc3RYIiwiZGlzdFkiLCJkb3QiLCJfY3giLCJfY3kiLCJ2YyIsInZuIiwiYnVja2V0SWRzIiwidGVtcCIsImNpcmNsZSIsImNlbGxYX3N0YXJ0IiwiY2VsbFlfc3RhcnQiLCJjZWxsWF9lbmQiLCJjZWxsWV9lbmQiLCJfcG9pbnRzIiwic2xvcGUiLCJ5X2ludGVyY2VwdCIsImRpc3RhbmNlVHJhdmVyc2VkIiwieF9pbmMiLCJ5X2luYyIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJuZWVkZWREaXN0YW5jZSIsInVzZVhJbmMiLCJuZXh0WSIsInRyYXZlbGluZyIsImxvd2VzdEFycmF5IiwiY29sbGlkZXJIYXNFdmVyeVRhZyIsIkxheW91dFNldHRpbmciLCJSZXNvbHV0aW9uTW9kZXMiLCJzZXR0aW5ncyIsIl9yYXRpb0NhcCIsIl92aWV3Q2FwIiwiX3NpemVDYXAiLCJfd2lkdGhTaXplQ2FwIiwiX2hlaWdodFNpemVDYXAiLCJkeW5hbWljUmVzb2x1dGlvbiIsImNhbGN1bGF0ZSIsImNhbGN1bGF0ZVdpdGhUaW1lb3V0IiwiX2xheW91dE1vZGUiLCJsYXlvdXQiLCJGVUxMIiwicGFzc2l2ZSIsIm1heFZpZXciLCJfd2lkdGhWaWV3Q2FwIiwiX2hlaWdodFZpZXdDYXAiLCJhc3BlY3RSYXRpbyIsIl93aWR0aFJhdGlvQ2FwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhbnZhc1RvdGFsSGVpZ2h0IiwiY2FudmFzVG90YWxXaWR0aCIsIkNISUxEIiwiX29mZnNldFgiLCJfb2Zmc2V0WSIsInNjYWxlVyIsInNjYWxlSCIsIl9oZWlnaHRSYXRpb0hDYXAiLCJjYWxjdWxhdGVEeW5hbWljUmVzb2x1dGlvbiIsIm9uUmVzb2x1dGlvblVwZGF0ZSIsImNhbGN1bGF0ZVRpbWVvdXQiLCJtYXhBbGxvd2VkV2lkdGgiLCJtYXhBbGxvd2VkSGVpZ2h0IiwiZmxvb3JlZEgiLCJmbG9vcmVkVyIsInV0aWxpemVkV2lkdGgiLCJ1dGlsaXplZEhlaWdodCIsIm5lZWRzUmVSZW5kZXIiLCJpbnRlcmZhY2VBdGxhcyIsInJlbW92ZUNoaWxkcmVuIiwiYWxpYXNJZCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFlLE1BQUlELElBRW5CRCxFQUFZLE1BQUlDLElBUmxCLENBU0dLLFFBQVEsV0FDWCxPLFlDVEUsSUFBSUMsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVVAsUUFHbkMsSUFBSUMsRUFBU0ksRUFBaUJFLEdBQVksQ0FDekNDLEVBQUdELEVBQ0hF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ZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJXb3JsZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJXb3JsZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEyKTtcbiIsIi8vaW1wb3J0IHtSZWN0fSBmcm9tIFwiLi4vLi4vLi4vU2hhcmVkL3R5cGVzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBDb2xsaWRlckRhdGEsIEZsaXBzLFxyXG4gICAgU2VjdGlvbkxheWVySW5pdERhdGFcclxufSBmcm9tIFwiLi4vLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtHYW1lT2JqZWN0fSBmcm9tIFwiLi9HYW1lT2JqZWN0XCI7XHJcbmltcG9ydCB7b25Db2xsaXNpb25Ib29rfSBmcm9tIFwiLi9JUGx1Z2luXCI7XHJcblxyXG50eXBlIEdhbWVPYmplY3RJbWFnZVBhcmFtID0gUElYSS5UZXh0dXJlIHwgUElYSS5TcHJpdGUgfCBzdHJpbmcgfCBIVE1MSW1hZ2VFbGVtZW50XHJcblxyXG5leHBvcnQgdHlwZSBUZXh0dXJlTG9hZE9wdHMgPSB7XHJcbiAgICBjYWNoZUZvcj86IG51bWJlcixcclxuICAgIGFkZFRvQXRsYXM6IGJvb2xlYW4sXHJcbiAgICBpc01hcEltYWdlPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNYXBTaXplcyB7XHJcbiAgICBNQVNTSVZFLFxyXG4gICAgTEFSR0UsXHJcbiAgICBNRURJVU0sXHJcbiAgICBTTUFMTCxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQXZhaWxhYmlsaXR5RmxhZ3MgPSB7XHJcbiAgICBpbmRleGVkREI6IGJvb2xlYW47XHJcbiAgICBsb2NhbFN0b3JhZ2U6IGJvb2xlYW47XHJcbiAgICB3ZWJXb3JrZXI6IGJvb2xlYW47XHJcbiAgICBtYXhUZXh0dXJlU2l6ZTogbnVtYmVyLFxyXG4gICAgd2ViR2w6IGJvb2xlYW4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpc2lvblBsdWdpbkhhbmRsZXJzID0ge1xyXG4gICAgc2luZ2xlcz86IEFycmF5PG9uQ29sbGlzaW9uSG9vaz4sXHJcbiAgICBjb3VwbGVzPzogeyBbdHlwZUI6IHN0cmluZ106IEFycmF5PG9uQ29sbGlzaW9uSG9vaz4gfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDb2xsaXNpb25QbHVnaW5IYW5kbGVyTWFwID0ge1xyXG4gICAgW3R5cGVBOiBzdHJpbmddOiBDb2xsaXNpb25QbHVnaW5IYW5kbGVyc1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQb2ludCA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcclxuZXhwb3J0IHR5cGUgUG9seWdvbiA9IEFycmF5PFBvaW50PlxyXG5leHBvcnQgdHlwZSBMaW5lID0gQXJyYXk8UG9pbnQ+XHJcbmV4cG9ydCB0eXBlIFJlY3QgPSBQb2ludCAmIHsgdzogbnVtYmVyLCBoOiBudW1iZXIgfVxyXG5leHBvcnQgdHlwZSBDaXJjbGUgPSBQb2ludCAmIHsgcjogbnVtYmVyIH1cclxuZXhwb3J0IHR5cGUgRWxpcHNlID0geyBjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIFNoYXBlRGF0YSA9IFBvaW50IHwgUG9seWdvbiB8IFJlY3QgfCBDaXJjbGUgfCBFbGlwc2U7XHJcblxyXG5leHBvcnQgdHlwZSBMZXZlbExpbmtEYXRhID0geyBhcmVhSWQ6IHN0cmluZywgcmVjdD86IFJlY3QsIGNsaWVudEZsYWdzPzogQXJyYXk8c3RyaW5nPiwgc2VydmVyRmxhZ3M6IEFycmF5PHN0cmluZz4sIGRhdGE/OiBhbnkgfTtcclxuXHJcbmV4cG9ydCB0eXBlIExldmVsQmxvY2tlckRhdGEgPSB7XHJcbiAgICByZWN0czogQXJyYXk8eyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfT4sXHJcbiAgICBsaW5lczogQXJyYXk8QXJyYXk8e3g6IG51bWJlciwgeTogbnVtYmVyIH0+PlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXJ2ZXJNb2RlID0ge1xyXG4gICAgRklMRSxcclxuICAgIFdFQixcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUnVudGltZUNvbGxpZGVyU2hhcGUge1xyXG4gICAgUkVDVCxcclxuICAgIFBPTFlHT04sXHJcbiAgICBQT0lOVCxcclxuICAgIENJUkNMRSxcclxuICAgIExJTkUsXHJcbiAgICBFTElQU0VcclxufVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIEdhbWVPYmplY3RPcHRpb25zID0ge1xyXG4gICAgZmxpcHM/OiBGbGlwcyxcclxuICAgIGxheWVyPzogbnVtYmVyLFxyXG4gICAgdGV4dHVyZT86IFBJWEkuVGV4dHVyZSxcclxuICAgIHNwcml0ZT86IFBJWEkuQ29udGFpbmVyIHwgUElYSS5TcHJpdGUsXHJcbiAgICB0YWdzPzogQXJyYXk8c3RyaW5nPixcclxuICAgIGNvbGxpZGVycz86IEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPixcclxuICAgIHBvc2l0aW9uPzogIFBvaW50LFxyXG4gICAgekluZGV4PzogbnVtYmVyLFxyXG4gICAgeVNvcnQ/OiBudW1iZXIsXHJcbiAgICBkYXRhPzogYW55LFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUYWcgPSBzdHJpbmcgfCBudW1iZXI7XHJcbmV4cG9ydCB0eXBlIFBhcnNlZE1hcEltYWdlQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgZHluYW1pYz86IGJvb2xlYW4sXHJcbiAgICB0YWdzPzogQXJyYXk8c3RyaW5nPixcclxuICAgIHNoYXBlRGF0YTogUmVjdCB8IFBvbHlnb24gfCBQb2ludCxcclxuICAgIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUsXHJcbn1cclxuZXhwb3J0IHR5cGUgTWFwSW1hZ2VSYXdDb2xsaWRlckRhdGEgPSB7XHJcbiAgICBkeW5hbWljPzogYm9vbGVhbixcclxuICAgIHRhZ3M/OiBBcnJheTxudW1iZXI+LFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IFBvaW50LFxyXG4gICAgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTmV3Q29sbGlkZXJQYXJhbXMgPSB7XHJcbiAgICBkeW5hbWljPzogYm9vbGVhbixcclxuICAgIHRhZ3M6IEFycmF5PHN0cmluZyB8IG51bWJlcj4sXHJcbiAgICBkYXRhPzogYW55LFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IENpcmNsZSB8IFBvaW50LFxyXG4gICAgc2hhcGVUeXBlPzogUnVudGltZUNvbGxpZGVyU2hhcGVcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEYXR1bTxUPiA9IHtcclxuICAgIHByb3BzPzoge1twcm9wTmFtZTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB9XHJcbiAgICBpZD86IHN0cmluZyB8IG51bWJlcixcclxuICAgIGxheWVyPzogbnVtYmVyLFxyXG4gICAgZHluYW1pYz86IGJvb2xlYW4sXHJcbiAgICAvL3Byb3BlcnRpZXM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBzaGFwZVR5cGU6IFJ1bnRpbWVDb2xsaWRlclNoYXBlLFxyXG4gICAgc2hhcGVEYXRhOiBULFxyXG4gICAgYWRqdXN0ZWRTaGFwZURhdGE/OiBULFxyXG4gICAgcm90YXRpb24/OiBudW1iZXIsXHJcbiAgICBzY2FsZVg/OiBudW1iZXIsXHJcbiAgICBzY2FsZVk/OiBudW1iZXIsXHJcbiAgICB0YWdzPzogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPixcclxuICAgIGRhdGE/OiBhbnksXHJcbiAgICBsaXN0ZW5lcnM/OiBBcnJheTwoY29sOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQgPlxyXG4gICAgc3ByaXRlPzogR2FtZU9iamVjdCB8IFBJWEkuQ29udGFpbmVyIHwgUElYSS5HcmFwaGljcztcclxuICAgIGNodW5rcz86IEFycmF5PG51bWJlcj4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIER5bmFtaWNDb2xsaWRlckRhdHVtPFQ+ID0gQ29sbGlkZXJEYXR1bTxUPiAmIHtcclxuICAgIHA6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRTZWN0aW9uQ29udGFpbmVycyA9IEFycmF5PFBJWEkuQ29udGFpbmVyIHwgUElYSS5TcHJpdGU+IHwgQXJyYXk8QXJyYXk8UElYSS5Db250YWluZXIgfCBQSVhJLlNwcml0ZT4+O1xyXG5leHBvcnQgdHlwZSBUaWxlU3ByaXRlID0gUElYSS5TcHJpdGUgJiB7IHJlbW92ZUZyb21NYXA6IChvcHRzPykgPT4gdm9pZCwgY29sbGlkZXJzPzogQ29sbGlkZXJEYXRhLCB3b3JsZFg/OiBudW1iZXIgLCB3b3JsZFk/OiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldEluaXRNZXRhRGF0YSA9IHsgaWQ6IHN0cmluZywgZGF0YVRzOiBudW1iZXIsIGltYWdlVHM6IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIFdvcmxkTWFwSW5pdE1ldGFEYXRhID0geyBpZDogc3RyaW5nLCB0czogbnVtYmVyLCBjaHVua3NUczogQXJyYXk8bnVtYmVyPiwgc2l6ZT86IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIEF0bGFzSW5pdE1ldGFEYXRhID0geyBkYXRhVHM6IG51bWJlciwgaW1hZ2VzVHM6IEFycmF5PG51bWJlcj4gfTtcclxuZXhwb3J0IHR5cGUgU3ByaXRlT3B0aW9ucyA9IHtcclxuICAgIGNvbGxpZGVycz86IEFycmF5PENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPj4sXHJcbiAgICBwb3NpdGlvbj86IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSxcclxufVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFdvcmxkSW5pdE1ldGFEYXRhID0ge1xyXG4gICAgd29ybGQ6IHN0cmluZyxcclxuICAgIGNvbFRhZ3M6IHtbdGFnOiBzdHJpbmddOiBudW1iZXIgfSxcclxuICAgIC8vIGFycmF5IG9mIFt3aWR0aCwgaGVpZ2h0XHJcbiAgICB0aWxlU2l6ZVNlcUxvb2t1cDogQXJyYXk8bnVtYmVyPixcclxuICAgIHByb3BTZXFUb05hbWVMb29rdXA6IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9LFxyXG4gIC8vICB1bmlxdWVUaWxlQ291bnQ6IHtbc2l6ZUtleTogc3RyaW5nXTogbnVtYmVyIH1cclxuICAgIHRpbGVzZXRzOiBBcnJheTxUaWxlc2V0SW5pdE1ldGFEYXRhPixcclxuICAgIG1hcHM6IEFycmF5PEFycmF5PFdvcmxkTWFwSW5pdE1ldGFEYXRhPj4sXHJcbiAgICBpbWFnZXM6IEFycmF5PG51bWJlcj4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcE1ldGFEYXRhID0ge1xyXG4gICAgYmFzZVVybDogc3RyaW5nLFxyXG4gICAgdGlsZXNldE1ldGFEYXRhOiB7W3RpbGVzZXRJZDogc3RyaW5nXTogVGlsZXNldE1ldGFEYXRhfSxcclxuICAgIHRpbGVTaXplOiBudW1iZXIsXHJcbiAgICB0aWxlc2V0SWRzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgaW1hZ2VJZHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBzZWN0aW9uTWV0YURhdGE6IFNlY3Rpb25NZXRhRGF0YSxcclxuICAgIGxldmVsSWQ6IHN0cmluZyxcclxuICAgIGxldmVsV2lkdGg6IG51bWJlcixcclxuICAgIGxldmVsSGVpZ2h0OiBudW1iZXIsXHJcbiAgICB0b3RhbExheWVyczogbnVtYmVyLFxyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldE1ldGFEYXRhID0ge1xyXG4gICAgc3RhcnRJbmRleDogbnVtYmVyLFxyXG4gICAgbGFzdFRzVXBkYXRlOiBudW1iZXIsXHJcbiAgICB0aWxlc2V0SWQ6IHN0cmluZyxcclxuICAgIHRpbGVXaWR0aDogbnVtYmVyLFxyXG4gICAgdGlsZUhlaWdodDogbnVtYmVyLFxyXG4gICAgdGlsZUNvdW50OiBudW1iZXIsXHJcbiAgICBpbWFnZVdpZHRoOiBudW1iZXIsXHJcbiAgICBpbWFnZUhlaWdodDogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZU1ldGFEYXRhID0ge1xyXG4gICAgaW1hZ2VJZDogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNYXBTaXplIHtcclxuICAgIFNNQUxMLFxyXG4gICAgTUVESVVNLFxyXG4gICAgTEFSR0VcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU2VjdGlvbk1ldGFEYXRhID0ge1xyXG4gICAgc2VjdGlvblVwZGF0ZVRpbWVzdGFtcHM6IEFycmF5PG51bWJlcj4sXHJcbiAgICBzZWN0aW9uV2lkdGg6IG51bWJlcixcclxuICAgIHNlY3Rpb25IZWlnaHQ6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldERhdGEgPSB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRpbGVEYXRhID0ge1xyXG4gICAgaXNCbG9ja2luZzogYm9vbGVhbixcclxuICAgIGlkOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNwcml0ZUltYWdlRGF0YSA9IHtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQmxvY2tlckRhdGEgPSB7XHJcbiAgICBwbGF5ZXI6IExldmVsQmxvY2tlckRhdGEsXHJcbiAgICBwcm9qZWN0aWxlOiBMZXZlbEJsb2NrZXJEYXRhLFxyXG4gICAgcGxheWVyQW5kUHJvamVjdGlsZTogTGV2ZWxCbG9ja2VyRGF0YSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGV2ZWxJbWFnZURhdGEgPSB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICB1cmw6IHN0cmluZyxcclxuICAgIGJsb2NrZXJzOiBCbG9ja2VyRGF0YSxcclxuICAgIHlTb3J0UG9pbnQ6IG51bWJlcixcclxuICAgIHpJbmRleDogbnVtYmVyO1xyXG4gICAgZGF0YT86IGFueSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGREaXNwbGF5T2JqZWN0ID0gUElYSS5EaXNwbGF5T2JqZWN0ICYgeyB3b3JsZFg6IG51bWJlciwgd29ybGRZOiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRMZXZlbFNlY3Rpb25EYXRhID0ge1xyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyLFxyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIGxheWVyczogQXJyYXk8U2VjdGlvbkxheWVySW5pdERhdGE+LFxyXG4gICAgdG90YWxMYXllcnM6IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIHN1YlNlY3Rpb25NYXhMZW5ndGg6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGV2ZWxTcHJpdGVEYXRhID0ge1xyXG4gICAgc3ByaXRlOiBQSVhJLlNwcml0ZSxcclxuICAgIHdvcmxkWDogbnVtYmVyLFxyXG4gICAgd29ybGRZOiBudW1iZXIsXHJcbiAgICBsYXllckluZGV4OiBudW1iZXIsXHJcbiAgICBzdGF0aWM6IGJvb2xlYW4sXHJcbiAgICBhbmltYXRlZDogYm9vbGVhbixcclxuICAgIHByb3BlcnRpZXM6IEFycmF5PEFycmF5PGFueT4+LFxyXG59XHJcbmV4cG9ydCB0eXBlIEltYWdlQXRsYXNDb2xsaWRlckV4cG9ydERhdGEgPSB7XHJcbiAgICBzaGFwZURhdGE6IFJlY3QgfCBQb2x5Z29uIHwgUG9pbnQsXHJcbiAgICBjb2xsaWRlclR5cGVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgY29tcHV0ZWQ/OiBib29sZWFuLFxyXG4gICAgY29tcHV0ZWRCeT86IHN0cmluZyxcclxufVxyXG5leHBvcnQgdHlwZSBMYXllckRhdGEgPSB7XHJcbiAgICBsYXllckluZGV4OiBudW1iZXIsXHJcbiAgICBsZXZlbExpbmtzOiBBcnJheTxMZXZlbExpbmtEYXRhPixcclxuICAgIGJsb2NrZXJzOiBCbG9ja2VyRGF0YSxcclxuICAgIHRpbGVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgdGlsZVdpZHRoOiBudW1iZXIsXHJcbiAgICB0aWxlSGVpZ2h0OiBudW1iZXIsXHJcbiAgICBpbWFnZXM6IEFycmF5PHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIGlkOiBzdHJpbmcsIGRhdGE/OiBhbnkgfT4sXHJcbiAgICBpbWFnZUlkQ291bnRMb29rdXA6IHtbaW1hZ2VJZDogc3RyaW5nXTogbnVtYmVyIH0sXHJcbiAgICByb3RhdGVkVGlsZXM6IEFycmF5PHN0cmluZz4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFdvcmxkTWV0YUluaXREYXRhID0ge1xyXG4gICAgd29ybGQ6IHN0cmluZyxcclxuICAgIG1hcHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICB0aWxlc2V0czogQXJyYXk8c3RyaW5nPixcclxuICAgIGltYWdlQXRsYXNzZXM6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRMZXZlbERhdGEgPSB7XHJcbiAgICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgICBzZWN0aW9uVXBkYXRlVGltZXN0YW1wczogQXJyYXk8bnVtYmVyPixcclxuICAgIHNlY3Rpb25zTWV0YURhdGE6IEFycmF5PFNlY3Rpb25NZXRhRGF0YT4sXHJcbiAgICBsZXZlbFdpZHRoOiBudW1iZXIsXHJcbiAgICBsZXZlbEhlaWdodDogbnVtYmVyLFxyXG4gICAgc2VjdGlvbkNvbHVtbnM6IG51bWJlcixcclxuICAgIHNlY3Rpb25Sb3dzOiBudW1iZXIsXHJcbiAgICBsZXZlbE5hbWU6IHN0cmluZyxcclxuICAgIHRpbGVJZENvdW50OiB7WyB0aWxlSWQ6IHN0cmluZyBdOiBudW1iZXIgfSxcclxuICAgIHRpbGVJZFRleHR1cmU6IHtbdGlsZUlkOiBzdHJpbmddOiBQSVhJLlRleHR1cmUgfSxcclxuICAgIGltYWdlRGF0YToge1tpbWFnZUlkOiBzdHJpbmddIDogTGV2ZWxJbWFnZURhdGEgfSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQW5pbWF0aW5nSW1hZ2VTcHJpdGVEYXRhID0geyBbIGFuaW1hdGlvbk5hbWU6IHN0cmluZ106IHsgdGV4dHVyZXM6IEFycmF5PFBJWEkuVGV4dHVyZT4sIGZyYW1lVGltZTogbnVtYmVyIH0gfVxyXG5cclxuZXhwb3J0IHR5cGUgUGxheWVyVmlldyA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodCA6IG51bWJlciB9IiwiaW1wb3J0IHtDb2xsaWRlckRhdGEsIEZsaXBzfSBmcm9tIFwiLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtNYXBTaXplfSBmcm9tIFwiLi9Xb3JsZFJlbmRlcmVyL3R5cGVzXCI7XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGh0dHBHZXRBc3luYyh1cmw6IHN0cmluZywgcGFyc2VKc29uPXRydWUpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIGlmKCFwYXJzZUpzb24pIHtcclxuICAgICAgICB4bWxIdHRwLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgIH1cclxuICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpOyAvLyB0cnVlIGZvciBhc3luY2hyb25vdXNcclxuICAgIHhtbEh0dHAuc2VuZChudWxsKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoeG1sSHR0cC5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VKc29uID8gcmVzb2x2ZShKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KSkgOiByZXNvbHZlKHhtbEh0dHAucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VKc29uID8gcmVqZWN0KEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpKSA6IHJlamVjdCh4bWxIdHRwLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIGh0dHAgZXJyb3IgcmVzcG9uc2UnLCB4bWxIdHRwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlTWFwU2l6ZSh3OiBudW1iZXIsIGg6IG51bWJlcikgOiBNYXBTaXplIHtcclxuICAgIGlmKHcgPD0gMTAyOCAmJiBoIDw9IDEwMjgpIHtcclxuICAgICAgICByZXR1cm4gTWFwU2l6ZS5TTUFMTFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1RPRE86IHdlIGRvbnQgaGF2ZSBhIHJlbmRlciBtZXRob2QgZm9yIGhhbmRsaW5nIG1lZGl1bSB5ZXQgc28gYWx3YXlzIHJldHVybiBsYXJnZSBmb3Igbm93XHJcbiAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcblxyXG4gICAgICAgIGNvbnN0IGFyZWEgPSB3ICogaDtcclxuICAgICAgICBpZihhcmVhID49IDQwMDAwMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjQgKGFycmF5QnVmZmVyKSB7XHJcbiAgICByZXR1cm4gYnRvYShcclxuICAgICAgICBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcilcclxuICAgICAgICAgICAgLnJlZHVjZSgoZGF0YSwgYnl0ZSkgPT4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSksICcnKVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRleHR1cmVGcm9tQmxvYihibG9iOiBCbG9iKSA6IFByb21pc2U8UElYSS5UZXh0dXJlPiB7XHJcbiAgICBjb25zdCBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XHJcbiAgICBsZXQgYmxvYlVSTDtcclxuICAgIGxldCBuZWVkUmV2b2tlID0gdHJ1ZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgIG5lZWRSZXZva2UgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSBidWZmZXJUb0Jhc2U2NChibG9iKTtcclxuICAgICAgICBibG9iVVJMID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0XHJcbiAgICAgICAgLy8gcmV0dXJuIFBJWEkuVGV4dHVyZS5mcm9tKGJhc2U2NCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLnNyYyA9IGJsb2JVUkw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYobmVlZFJldm9rZSkge1xyXG4gICAgICAgICAgICAgICAge1VSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG5ldyBQSVhJLlRleHR1cmUobmV3IFBJWEkuQmFzZVRleHR1cmUoaW1nKSkpO1xyXG4gICAgICAgIH0pOy8vIG9ubG9hZCByZXZva2UgdGhlIGJsb2IgVVJMIChiZWNhdXNlIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgYW5kIHBhcnNlZCB0aGUgaW1hZ2UgZGF0YSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGV4dHVyZUZyb21EYXRhVXJsKGRhdGFVcmw6IHN0cmluZykgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgY29uc3QgVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMO1xyXG4gICAgbGV0IGJsb2JVUkw7XHJcbiAgICBsZXQgbmVlZFJldm9rZSA9IHRydWU7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLnNyYyA9IGRhdGFVcmw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3IFBJWEkuVGV4dHVyZShuZXcgUElYSS5CYXNlVGV4dHVyZShpbWcpKSk7XHJcbiAgICAgICAgfSk7Ly8gb25sb2FkIHJldm9rZSB0aGUgYmxvYiBVUkwgKGJlY2F1c2UgdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCBhbmQgcGFyc2VkIHRoZSBpbWFnZSBkYXRhKVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRhdGFVcmxUb1RleHR1cmUoZGF0YVVybCkge1xyXG4gICAgcmV0dXJuIGdldFRleHR1cmVGcm9tQmxvYihkYXRhVVJMdG9CbG9iKGRhdGFVcmwpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFVUkx0b0Jsb2IoZGF0YXVybCkge1xyXG4gICAgbGV0IGFyciA9IGRhdGF1cmwuc3BsaXQoJywnKSwgbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLFxyXG4gICAgICAgIGJzdHIgPSBhdG9iKGFyclsxXSksIG4gPSBic3RyLmxlbmd0aCwgdThhcnIgPSBuZXcgVWludDhBcnJheShuKTtcclxuICAgIHdoaWxlKG4tLSl7XHJcbiAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEJsb2IoW3U4YXJyXSwge3R5cGU6bWltZX0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvbGxpZGVycyhjb2xsaWRlcnM6IENvbGxpZGVyRGF0YSwgZmxpcHM6IEZsaXBzKSB7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlRXh0ZW5zaW9uKGZpbGVOYW1lOiBzdHJpbmcpIDogc3RyaW5nIHtcclxuICAgIHJldHVybiBmaWxlTmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIilcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4ZWREQl9lbmFibGVkKCkgOiBib29sZWFuIHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNvbnN0IGluZGV4REJleGlzdHMgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREI7XHJcbiAgICByZXR1cm4gISFpbmRleERCZXhpc3RzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZU1heFRleHR1cmVTaXplKHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyIHwgUElYSS5XZWJHTFJlbmRlcmVyKSB7XHJcbiAgICBpZihyZW5kZXJlci50eXBlID09IDEpIHsgLy8xIGlzIHRoZSB3ZWJnbCByZW5kZXJlci5cclxuICAgICAgICBjb25zdCBtYXhTaXplID0gKDxQSVhJLldlYkdMUmVuZGVyZXI+cmVuZGVyZXIpLmdsLk1BWF9URVhUVVJFX1NJWkU7XHJcbiAgICAgICAgbGV0IGFjdHVhbFNpemU7XHJcbiAgICAgICAgaWYobWF4U2l6ZSA+PSA0MDk2KSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemU9ICAgbWF4U2l6ZSAtIChtYXhTaXplJTQwOTYpO1xyXG4gICAgICAgIH0gZWxzZSBpZihtYXhTaXplID49IDIwNDgpIHtcclxuICAgICAgICAgICAgYWN0dWFsU2l6ZSA9ICAgbWF4U2l6ZSAtIChtYXhTaXplJTIwNDgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF4U2l6ZSA+PSAxMDI0KSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAgIG1heFNpemUgLSAobWF4U2l6ZSUxMDI0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1heFNpemUgPj0gNTEyKSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAgIG1heFNpemUgLSAobWF4U2l6ZSU1MTIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAyNTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY3R1YWxTaXplO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMjA0ODtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVkU2VjdGlvbkxlbmd0aChsZW5ndGgsIG1heExlbmd0aCwgdGlsZVNpemUpIHtcclxuICAgIGxldCBjdXJyZW50TGVuZ3RoO1xyXG5cclxuICAgIGxldCBkaXZpZGVyID0gMTtcclxuXHJcbiAgICBpZihsZW5ndGggPCBtYXhMZW5ndGgpIHtcclxuICAgICAgICBjdXJyZW50TGVuZ3RoID0gbGVuZ3RoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkaXZpZGVyID0gMjtcclxuICAgICAgICB3aGlsZShsZW5ndGggLyBkaXZpZGVyID4gbWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRpdmlkZXIgKj0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3VycmVudExlbmd0aCA9IGxlbmd0aCAvIGRpdmlkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlbWFpbmRlciA9IGN1cnJlbnRMZW5ndGggJSB0aWxlU2l6ZTtcclxuICAgIGxldCBhZGQgPSB0aWxlU2l6ZSAtIHJlbWFpbmRlcjtcclxuXHJcbiAgICBsZXQgbWFpbkxlbmd0aCA9IGN1cnJlbnRMZW5ndGggKyBhZGQ7XHJcblxyXG4gICAgbGV0IG9mZnNldExlbmd0aCA9IE1hdGguYWJzKGN1cnJlbnRMZW5ndGggLSAoYWRkICogKGRpdmlkZXIgLSAxKSkpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCdtYWluIGxlbmd0aCB3YXMnLCBtYWluTGVuZ3RoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdvZmZzZXQgbGVuZ3RoIHdhcycsIG9mZnNldExlbmd0aCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW5MZW5ndGgsXHJcbiAgICAgICAgb2Zmc2V0TGVuZ3RoXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU9wdGlvbnMob3B0aW9uczogYW55LCBkZWZhdWx0T3B0aW9uczogYW55LCByZXF1aXJlZFBhcmFtczogQXJyYXk8c3RyaW5nPj1bXSkge1xyXG4gICAgY29uc3QgY3VyT3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xyXG4gICAgZm9yKGxldCBrZXkgaW4gY3VyT3B0aW9ucykge1xyXG4gICAgICAgIGlmKG9wdGlvbnNba2V5XSkge1xyXG4gICAgICAgICAgICBjdXJPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBtaXNzaW5nUGFyYW1zID0gW107XHJcbiAgICBjb25zdCB1bmRlZmluZWRQYXJhbXMgPSBbXTtcclxuICAgIGNvbnN0IG51bGxQYXJhbXMgPSBbXTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXF1aXJlZFBhcmFtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHJlcXVpcmVkUGFyYW1zW2ldO1xyXG4gICAgICAgIGlmKCEoa2V5IGluIGN1ck9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG1pc3NpbmdQYXJhbXMucHVzaChrZXkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGN1ck9wdGlvbnNba2V5XSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBudWxsUGFyYW1zLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY3VyT3B0aW9uc1trZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdW5kZWZpbmVkUGFyYW1zLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgZXJyb3JTdHJpbmcgPSAnJztcclxuICAgIGVycm9yU3RyaW5nID0gbWlzc2luZ1BhcmFtcy5sZW5ndGggPyBlcnJvclN0cmluZy5jb25jYXQoJ01pc3NpbmcgcGFyYW0gZm91bmQgZm9yIHJlcXVpcmVkIHBhcmFtczonICsgbWlzc2luZ1BhcmFtcy5qb2luKCcsICcpKSA6IGVycm9yU3RyaW5nO1xyXG4gICAgZXJyb3JTdHJpbmcgPSBudWxsUGFyYW1zLmxlbmd0aCA/IGVycm9yU3RyaW5nLmNvbmNhdCgnbnVsbCBwYXJhbSBmb3VuZCBmb3IgcmVxdWlyZWQgcGFyYW1zOicgKyBudWxsUGFyYW1zLmpvaW4oJywgJykpIDogZXJyb3JTdHJpbmc7XHJcbiAgICBlcnJvclN0cmluZyA9IG1pc3NpbmdQYXJhbXMubGVuZ3RoID8gZXJyb3JTdHJpbmcuY29uY2F0KCd1bmRlZmluZWQgcGFyYW0gZm91bmQgZm9yIHJlcXVpcmVkIHBhcmFtczonICsgdW5kZWZpbmVkUGFyYW1zLmpvaW4oJywgJykpIDogZXJyb3JTdHJpbmc7XHJcbiAgICBpZihlcnJvclN0cmluZykge1xyXG4gICAgICAgIHRocm93IGVycm9yU3RyaW5nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGN1ck9wdGlvbnNcclxufSIsImltcG9ydCB7XHJcbiAgICBDaXJjbGUsXHJcbiAgICBDb2xsaWRlckRhdHVtLFxyXG4gICAgTGluZSxcclxuICAgIFBvaW50LFxyXG4gICAgUG9seWdvbixcclxuICAgIFJlY3QsXHJcbiAgICBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxuICAgIFNoYXBlRGF0YSxcclxuICAgIFRhZ1xyXG59IGZyb20gXCIuLi9Xb3JsZFJlbmRlcmVyL3R5cGVzXCI7XHJcbmltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSBcIi4uL1dvcmxkUmVuZGVyZXIvR2FtZU9iamVjdFwiO1xyXG5pbXBvcnQge1BvbHlnb25Db2xsaWRlcn0gZnJvbSBcIi4vUG9seWdvbkNvbGxpZGVyXCI7XHJcbmltcG9ydCB7Q29sbGlzaW9uTWFuYWdlcn0gZnJvbSBcIi4vQ29sbGlzaW9uTWFuYWdlclwiO1xyXG5pbXBvcnQge1RhZ01hbmFnZXIsIFRhZ01peGlufSBmcm9tIFwiLi4vV29ybGRSZW5kZXJlci9NaXhpbnMvVGFnTWl4aW5cIjtcclxuaW1wb3J0IHtUcmFuc2Zvcm1FdmVudE1peGlufSBmcm9tIFwiLi4vV29ybGRSZW5kZXJlci9NaXhpbnMvVHJhbnNmb3JtRXZlbnRNaXhpblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbGxpZGVyPFQ+IGltcGxlbWVudHMgQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+LCBUYWdNaXhpbiwgVHJhbnNmb3JtRXZlbnRNaXhpbntcclxuICAgIHByaXZhdGUgYWN0aXZlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgbGF5ZXI6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcG9vbDogQXJyYXk8Q29sbGlkZXI8VD4+O1xyXG4gICAgcHVibGljIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGU7XHJcbiAgICBwdWJsaWMgc2hhcGVEYXRhOiBTaGFwZURhdGE7XHJcbiAgICByZWFkb25seSB0cmFuc2Zvcm1lZFNoYXBlRGF0YTogU2hhcGVEYXRhO1xyXG4gICAgcHVibGljIGRhdGE6IGFueTtcclxuICAgIHB1YmxpYyBwcm9wczoge1twcm9wTmFtZTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB9ID0ge307XHJcbiAgICBwdWJsaWMgc3RhcnRMaXN0ZW5lcnM6IEFycmF5PChjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBvbkxpc3RlbmVyczogQXJyYXk8KGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ+O1xyXG4gICAgcHVibGljIGVuZExpc3RlbmVyczogQXJyYXk8KGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ+O1xyXG5cclxuICAgIHByaXZhdGUgY29sbGlzaW9uTWFuYWdlcjogQ29sbGlzaW9uTWFuYWdlcjtcclxuXHJcbiAgICBwdWJsaWMgZHluYW1pYzogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBnYW1lT2JqZWN0PzogUElYSS5HcmFwaGljcyB8IFBJWEkuU3ByaXRlIHwgUElYSS5Db250YWluZXIgfCBHYW1lT2JqZWN0O1xyXG4gICAgcHVibGljIHVwZGF0ZVBvc2l0aW9uOiAoZFg6IG51bWJlciwgZFk6IG51bWJlcikgPT4gdm9pZCA9ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKGBTdGF0aWMgY29sbGlkZXIgY2FuIG5vdCBzZXQgcG9zaXRpb24uYCl9O1xyXG4gICAgcHVibGljIHVwZGF0ZVJvdGF0aW9uOiAocmFkaWFuRGVsdGE6IG51bWJlciwgcm90YXRlUG9pbnQ6IFBvaW50KSA9PiB2b2lkID0gKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoYFN0YXRpYyBjb2xsaWRlciBjYW4gbm90IHNldCByb3RhdGlvbi5gKX07XHJcblxyXG4gICAgcmVhZG9ubHkgcGFyZW50PyA6IFBvbHlnb25Db2xsaWRlcjtcclxuXHJcbiAgICByZWFkb25seSBpc1BvbHlnb24gOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgaXNMaW5lIDogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IGlzUmVjdCA6IGJvb2xlYW47XHJcbiAgICByZWFkb25seSBpc0NpcmNsZSA6IGJvb2xlYW47XHJcbiAgICByZWFkb25seSBpc1BvaW50OiBib29sZWFuO1xyXG5cclxuICAgIHByaXZhdGUgX3JvdGF0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfc2NhbGVYOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfc2NhbGVZOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfcGl2b3RYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9waXZvdFk6IG51bWJlcjtcclxuXHJcbiAgICAvLyBNSVhJTiBPVkVSUklERSBUWVBFUyAtXHJcbiAgICAvLyAoYm91bmQgdG8gdGhlIG1peGluJ3MgcHJvdG90eXBlIGluIEFwcGx5TWl4aW4gc3RhdGljIGluIHRoZSBnYW1lIG9iamVjdCdzIGNvbnN0cnVjdGlvbilcclxuICAgIC8vVHJhbnNmb3JtRXZlbnRNaXhpblxyXG4gICAgcHVibGljIGNsZWFyVHJhbnNmb3JtTGlzdGVuZXJzOiAoKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9uUm90YXRpb25VcGRhdGVzPzogQXJyYXk8KGRlbHRhUmFkaWFuOiBudW1iZXIsIHdvcmxkUGl2b3Q/OiBQb2ludCkgPT4gdm9pZD47XHJcbiAgICBwdWJsaWMgb25Qb3NpdGlvblVwZGF0ZXM/OiBBcnJheTwoZFg6IG51bWJlciwgZFk6IG51bWJlcikgPT4gdm9pZD47XHJcbiAgICBwdWJsaWMgb25Qb3NpdGlvblVwZGF0ZTogKGNiIDogKGRYOiBudW1iZXIsIGRZOiBudW1iZXIpID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmUG9zaXRpb25VcGRhdGU6IChjYjogKGRYOiBudW1iZXIsIGRZOiBudW1iZXIpID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25Sb3RhdGlvblVwZGF0ZTogKGNiOiAoZFI6IG51bWJlciwgd29ybGRQaXZvdD86IFBvaW50LCBsb2NhbFBpdm90PzogUG9pbnQpID0+IHZvaWQpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgb2ZmUm90YXRpb25VcGRhdGU6IChjYjogKGRSOiBudW1iZXIsIHdvcmxkUGl2b3Q/OiBQb2ludCwgbG9jYWxQaXZvdD86IFBvaW50KSA9PiB2b2lkKSA9PiBib29sZWFuO1xyXG5cclxuICAgIC8vIFRhZ01peGluXHJcbiAgICBwdWJsaWMgY2xlYXJUYWdMaXN0ZW5lcnMgOiAoKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9uVGFnQWRkZWQgOiAoY2I6ICh0YWc6IFRhZykgPT4gdm9pZCwgdGFnPzogVGFnLCApID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmVGFnQWRkZWQ6IChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgb25UYWdSZW1vdmVkOiAoY2I6ICh0YWc6IFRhZykgPT4gdm9pZCwgdGFnPzogVGFnKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9mZlRhZ1JlbW92ZWQ6IChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgYWRkVGFnIDogKHRhZzogVGFnLCBjaGVja0R1cGxpY2F0ZT86IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgcmVtb3ZlVGFnIDogKHRhZzogVGFnKSA9PiBib29sZWFuO1xyXG4gICAgLy9yZXF1aXJlZCBpbXBsZW1lbnRhdGlvbnMgZm9yIHRhZyBtaXhpbi5cclxuICAgIHJlYWRvbmx5IHRhZ01hbmFnZXI6IFRhZ01hbmFnZXI7XHJcbiAgICBwdWJsaWMgdGFnQWRkZWRMaXN0ZW5lcnM6IHtbdGFnOiBzdHJpbmddOiBBcnJheTwodGFnOiBUYWcpID0+IHZvaWQ+IH07XHJcbiAgICBwdWJsaWMgdGFnUmVtb3ZlZExpc3RlbmVyczoge1t0YWc6IHN0cmluZ106IEFycmF5PCh0YWc6IFRhZykgPT4gdm9pZD4gfTtcclxuICAgIHB1YmxpYyBhbnlUYWdBZGRlZExpc3RlbmVyczogQXJyYXk8KHRhZzogVGFnKSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBhbnlUYWdSZW1vdmVkTGlzdGVuZXJzOiBBcnJheTwodGFnOiBUYWcpID0+IHZvaWQ+O1xyXG4gICAgcHVibGljIHRhZ3M6IEFycmF5PFRhZz47XHJcbiAgICBwdWJsaWMgbWluWDtcclxuICAgIHB1YmxpYyBtaW5ZO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxheWVySW5kZXg6IG51bWJlciwgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZSwgc2hhcGVEYXRhOiBTaGFwZURhdGEsIHRhZ3M6IEFycmF5PHN0cmluZyB8IG51bWJlcj4sIGlzRHluYW1pYzogYm9vbGVhbiwgY29sbGlzaW9uTWFuYWdlcjogQ29sbGlzaW9uTWFuYWdlciwgcHJvcHM/OiB7W3Byb3BOYW1lOiBzdHJpbmddOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuIH0sIGdhbWVPYmplY3Q/OiBHYW1lT2JqZWN0IHwgUElYSS5Db250YWluZXIgfCBQSVhJLkdyYXBoaWNzLCBkYXRhPzogYW55LCBwYXJlbnQ/OiBQb2x5Z29uQ29sbGlkZXIpIHtcclxuICAgICAgICBpZihjb2xsaXNpb25NYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlciA9IGNvbGxpc2lvbk1hbmFnZXI7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy50YWdNYW5hZ2VyID0gY29sbGlzaW9uTWFuYWdlcjtcclxuICAgICAgICAgICAgVGFnTWl4aW4uQXBwbHlNaXhpbih0aGlzKTtcclxuICAgICAgICAgICAgVHJhbnNmb3JtRXZlbnRNaXhpbi5BcHBseU1peGluKHRoaXMpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIFRhZ01peGluLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKCFwYXJlbnQpIHt0aHJvdyBuZXcgRXJyb3IoYE5vIHBhcmVudCBmb3VuZCBvbiBjb2xsaWRlciB3aXRob3V0IHJlZiB0byBtYW5hZ2VyLmApfVxyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzID8gcHJvcHMgOiB7fTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QgPSBnYW1lT2JqZWN0O1xyXG4gICAgICAgIHRoaXMuc2hhcGVUeXBlID0gc2hhcGVUeXBlO1xyXG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllckluZGV4O1xyXG4gICAgICAgIHRoaXMuc2hhcGVEYXRhID0gc2hhcGVEYXRhO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtZWRTaGFwZURhdGEgPSBzaGFwZURhdGE7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmR5bmFtaWMgPSBpc0R5bmFtaWM7XHJcbiAgICAgICAgaWYoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OKSB7XHJcbiAgICAgICAgICAgIC8vIGRvbnQgbmVlZCB0byByZWJpbmQgdXBkYXRlIGFkanVzdGVkIHNoYXBlIGRhdGEgc2luY2UgcG9seWdvbiBjb2xsaWRlciBvdmVycmlkZXMgaXQuXHJcbiAgICAgICAgICAgIHRoaXMuaXNQb2x5Z29uID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhID0gdGhpcy51cGRhdGVBZGp1c3RlZFNoYXBlRGF0YUxpbmUuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5pc0xpbmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBZGp1c3RlZFNoYXBlRGF0YSA9IHRoaXMudXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFDaXJjbGUuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5pc0NpcmNsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBZGp1c3RlZFNoYXBlRGF0YSA9IHRoaXMudXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFSZWN0LmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSZWN0ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9JTlQpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBZGp1c3RlZFNoYXBlRGF0YSA9IHRoaXMudXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFQb2ludC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmlzUG9pbnQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5FTElQU0UpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBZGp1c3RlZFNoYXBlRGF0YSA9IHRoaXMudXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFFbGlwc2UuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaXNEeW5hbWljKSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgd2FudCBub24gc3RhdGljIGFjY2VzcyB0byBvbnBvc2l0aW9uIHVwZGF0ZXMgc28gbm8gcG9pbnQgY2hlY2tpbmcgaXQuXHJcbiAgICAgICAgICAgIHRoaXMucmViaW5kUG9zaXRpb25VcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWJpbmRSb3RhdGlvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgIC8vIHRoaXMuc2V0RGVmYXVsdFBpdm90KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRNaW5zKCk7XHJcbiAgICAgICAgdGhpcy5taW5YID0geDtcclxuICAgICAgICB0aGlzLm1pblkgPSB5O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzZXREZWZhdWx0UGl2b3QoKSB7XHJcbiAgICAgICAgaWYodGhpcy5pc1JlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQaXZvdCggKDxSZWN0PnRoaXMuc2hhcGVEYXRhKS53IC8gMiwgKDxSZWN0PnRoaXMuc2hhcGVEYXRhKS5oIC8gMiApXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ2lyY2xlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGl2b3QoICg8Q2lyY2xlPnRoaXMuc2hhcGVEYXRhKS5yLCAoPENpcmNsZT50aGlzLnNoYXBlRGF0YSkucilcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNQb2ludCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBpdm90KCAoPExpbmU+dGhpcy5zaGFwZURhdGEpWzBdLnggLSAoPExpbmU+dGhpcy5zaGFwZURhdGEpWzFdLnggLyAyLCAoPExpbmU+dGhpcy5zaGFwZURhdGEpWzBdLnkgLSAoPExpbmU+dGhpcy5zaGFwZURhdGEpWzFdLnkgLyAyKVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5UKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGl2b3QoMCwgMCk7XHJcbiAgICAgICAgfSAvLyBvdmVycmlkZGVuIGZvciBwb2x5Z29uIGluIFBvbGx5Z29uQ29sbGRpZXIudHNcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBpdm90UG9pbnRJblBsYWNlKHJhZGlhbnM6IG51bWJlciwgcG9pbnQ6IFBvaW50LCBwaXZvdDogUG9pbnQpIHtcclxuICAgICAgICBjb25zdCBvWCA9IHBvaW50Lng7XHJcbiAgICAgICAgY29uc3Qgb1kgPSBwb2ludC55O1xyXG4gICAgICAgIGNvbnN0IGNvc1RoZXRhID0gTWF0aC5jb3MocmFkaWFucyk7XHJcbiAgICAgICAgY29uc3Qgc2luVGhldGEgPSBNYXRoLnNpbihyYWRpYW5zKTtcclxuICAgICAgICBwb2ludC54ID0gKGNvc1RoZXRhICogKG9YIC0gcGl2b3QueCkgLVxyXG4gICAgICAgICAgICBzaW5UaGV0YSAqIChvWSAtIHBpdm90LnkpICsgcGl2b3QueCk7XHJcbiAgICAgICAgcG9pbnQueCA9IChzaW5UaGV0YSAqIChvWCAtIHBpdm90LngpICtcclxuICAgICAgICAgICAgY29zVGhldGEgKiAob1kgLSBwaXZvdC55KSArIHBpdm90LnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBkb1NjYWxlKHNjYWxlWDogbnVtYmVyLCBzY2FsZVk6IG51bWJlcikge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlVHJhbnNmb3JtZWRTaGFwZURhdGEgKCkgeyB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbG1lbnRlZCwgc3VwcG9zZWQgdG8gYmUgcmVib3VuZCBpbiBjb25zdHJ1Y3Rvci4nKX07XHJcbiAgICBwcml2YXRlIHVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhUmVjdCgpIDogdm9pZCB7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhQ2lyY2xlKCkgOiB2b2lkIHtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFFbGlwc2UgKCkgOiB2b2lkIHtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlQWRqdXN0ZWRTaGFwZURhdGFQb2ludCgpIDogdm9pZCB7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZUFkanVzdGVkU2hhcGVEYXRhTGluZSgpIDogdm9pZCB7XHJcbiAgICB9XHJcblxyXG4gICAgLy9vdmVycmlkZGVuIGZvciBwb2x5Z29uXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlQWRqdXN0ZWRTaGFwZURhdGEoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb3ZlcnJpZGRlbiBmb3IgcG9seWdvbi5cclxuICAgIHByb3RlY3RlZCBkb1JvdGF0aW9uKHJhZGlhbnM6IG51bWJlciwgcGl2b3Q6IFBvaW50KSB7XHJcbiAgICAgICAgaWYodGhpcy5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QpIHtcclxuICAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ1JvdGF0aW5nIHJlY3RzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkLCB1c2UgcG9seWdvbiBpbnN0ZWFkLicpXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSkge1xyXG4gICAgICAgICAgICB0aGlzLnBpdm90UG9pbnRJblBsYWNlKHJhZGlhbnMsIHRoaXMuc2hhcGVEYXRhWzBdLCBwaXZvdCk7XHJcbiAgICAgICAgICAgIHRoaXMucGl2b3RQb2ludEluUGxhY2UocmFkaWFucywgdGhpcy5zaGFwZURhdGFbMV0sIHBpdm90KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBpdm90UG9pbnRJblBsYWNlKHJhZGlhbnMsIHRoaXMuc2hhcGVEYXRhIGFzIFBvaW50LCBwaXZvdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkdldFBpdm90UG9pbnQoY2I6ICgpID0+IFBvaW50KSB7dGhpcy5kZWZhdWx0UGl2b3RQb2ludCA9IGNiO31cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlUm90YXRpb25XaXRoTGlzdGVuZXJzKHJhZGlhbkRlbHRhOiBudW1iZXIsIHBpdm90UG9pbnQ6IFBvaW50KSB7XHJcbiAgICAgICAgdGhpcy5fcm90YXRpb24gKz0gcmFkaWFuRGVsdGE7XHJcbiAgICAgICAgdGhpcy5kb1JvdGF0aW9uKHJhZGlhbkRlbHRhLCBwaXZvdFBvaW50KTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5vblJvdGF0aW9uVXBkYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLm9uUm90YXRpb25VcGRhdGVzW2ldKHJhZGlhbkRlbHRhLCBwaXZvdFBvaW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVJvdGF0aW9uV2l0aE91dExpc3RlbmVycyhyYWRpYW5EZWx0YTogbnVtYmVyLCBwaXZvdFBvaW50OiBQb2ludCkge1xyXG4gICAgICAgIGlmKCFwaXZvdFBvaW50KSB0aHJvdyBuZXcgRXJyb3IoJ05lZWQgcGl2b3QgcG9pbnQgZm9yIHJvdGF0aW9uLicpXHJcbiAgICAgICAgdGhpcy5fcm90YXRpb24gKz0gcmFkaWFuRGVsdGE7XHJcbiAgICAgICAgdGhpcy5kb1JvdGF0aW9uKHJhZGlhbkRlbHRhLCBwaXZvdFBvaW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0U2NhbGUoc2NhbGVYOiBudW1iZXIsIHNjYWxlWTogbnVtYmVyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFRyYW5zZm9ybURhdGEoZGF0YTogeyBwaXZvdFg/OiBudW1iZXIsIHBpdm90WT86IG51bWJlciwgc2NhbGVYPzogbnVtYmVyLCBzY2FsZVk/OiBudW1iZXIsIHJvdGF0aW9uPzogbnVtYmVyIH0pIHtcclxuICAgICAgICBpZihkYXRhLnBpdm90WCkge1xyXG4gICAgICAgICAgICB0aGlzLl9waXZvdFggPSBkYXRhLnBpdm90WFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhLnBpdm90WCkge1xyXG4gICAgICAgICAgICB0aGlzLl9waXZvdFkgPSBkYXRhLnBpdm90WVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhLnNjYWxlWCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zY2FsZVggPSBkYXRhLnBpdm90WVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhLnNjYWxlWSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zY2FsZVkgPSBkYXRhLnNjYWxlWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZGF0YS5yb3RhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9yb3RhdGlvbiA9IGRhdGEucm90YXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtZWRTaGFwZURhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE1pbnMoKSA6IFBvaW50IHtcclxuICAgICAgICBsZXQgbWluWCwgbWluWTtcclxuICAgICAgICBpZih0aGlzLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTikge1xyXG4gICAgICAgICAgICBtaW5YID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XHJcbiAgICAgICAgICAgIG1pblkgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hhcGVEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgdGhpcy5zaGFwZURhdGFbaV0ueCk7XHJcbiAgICAgICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgdGhpcy5zaGFwZURhdGFbaV0ueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHsgeDogbWluWCwgeTogbWluWSB9O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgeDogTWF0aC5taW4odGhpcy5zaGFwZURhdGFbMF0ueCwgdGhpcy5zaGFwZURhdGFbMV0ueCksIHk6ICBNYXRoLm1pbih0aGlzLnNoYXBlRGF0YVswXS55LCB0aGlzLnNoYXBlRGF0YVsxXS55KSB9XHJcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXR1cm4geyB4OiB0aGlzLnNoYXBlRGF0YS54IC0gdGhpcy5zaGFwZURhdGEuciwgeTogdGhpcy5zaGFwZURhdGEueSAtIHRoaXMuc2hhcGVEYXRhLnIgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIG1pblggPSB0aGlzLnNoYXBlRGF0YS54O1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIG1pblkgPSB0aGlzLnNoYXBlRGF0YS55O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyB4OiBtaW5YLCB5OiBtaW5ZIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRQaXZvdCh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3Bpdm90WCA9IHg7XHJcbiAgICAgICAgdGhpcy5fcGl2b3RZID0geTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU2hhcGVEYXRhKHNoYXBlRGF0YTogU2hhcGVEYXRhKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVJvdGF0aW9uRGVncmVlcyhkZWdyZWVzOiBudW1iZXIsIHBpdm90UG9pbnQ/OiBQb2ludCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlUm90YXRpb24oZGVncmVlcyAqIE1hdGguUEkgLyAxODAsIHBpdm90UG9pbnQpXHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRlZmF1bHRQaXZvdFBvaW50KCkgOiBQb2ludCB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLmdldE1pbnMoKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHsgeDogdGhpcy5waXZvdFggKyB4LCB5OiB0aGlzLnBpdm90WSArIHkgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWJpbmRSb3RhdGlvblVwZGF0ZSgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVJvdGF0aW9uID0gdGhpcy51cGRhdGVSb3RhdGlvbldpdGhPdXRMaXN0ZW5lcnMuYmluZCh0aGlzKTtcclxuICAgICAgICBpZih0aGlzLm9uUm90YXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm90YXRpb24gPSB0aGlzLnVwZGF0ZVJvdGF0aW9uV2l0aExpc3RlbmVycy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyByZWJpbmRQb3NpdGlvblVwZGF0ZSgpIHtcclxuICAgICAgICBpZih0aGlzLm9uUG9zaXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24gPSB0aGlzLnVwZGF0ZVBvc2l0aW9uV2l0aExpc3RlbmVycy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUgfHwgdGhpcy5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT04pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24gPSB0aGlzLnVwZGF0ZUFycmF5V2l0aExpc3RlbmVycy5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbiA9IHRoaXMudXBkYXRlUG9zaXRpb25XaXRob3V0TGlzdGVuZXJzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSB8fCB0aGlzLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbiA9IHRoaXMudXBkYXRlQXJyYXlXaXRob3V0TGlzdGVuZXJzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJvdGF0aW9uKCkge3JldHVybiB0aGlzLl9yb3RhdGlvbjt9XHJcbiAgICBwdWJsaWMgc2V0Um90YXRpb24odjogbnVtYmVyLCBwOiBQb2ludCkge3RoaXMudXBkYXRlUm90YXRpb24odiAtIHRoaXMuX3JvdGF0aW9uLCBwKTt9XHJcbiAgICBwdWJsaWMgc2V0Um90YXRpb25EZWdyZWVzKGRlZ3JlZXM6IG51bWJlciwgcDogUG9pbnQpe3RoaXMudXBkYXRlUm90YXRpb24oKGRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwKSAtIHRoaXMuX3JvdGF0aW9uLCBwKX1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlQXJyYXlXaXRob3V0TGlzdGVuZXJzKGRYOiBudW1iZXIsIGRZOiBudW1iZXIpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgKDxQb2x5Z29uPnRoaXMuc2hhcGVEYXRhKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXBlRGF0YVtpXS54ICs9IGRYO1xyXG4gICAgICAgICAgICB0aGlzLnNoYXBlRGF0YVtpXS55ICs9IGRZO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlQXJyYXlXaXRoTGlzdGVuZXJzKGRYOiBudW1iZXIsIGRZOiBudW1iZXIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8ICg8UG9seWdvbj50aGlzLnNoYXBlRGF0YSkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFwZURhdGFbaV0ueCArPSBkWDtcclxuICAgICAgICAgICAgdGhpcy5zaGFwZURhdGFbaV0ueSArPSBkWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9uUG9zaXRpb25VcGRhdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Qb3NpdGlvblVwZGF0ZXNbaV0oZFgsIGRZKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlUG9zaXRpb25XaXRob3V0TGlzdGVuZXJzKGRYOiBudW1iZXIsIGRZOiBudW1iZXIpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgKDxQb2ludD50aGlzLnNoYXBlRGF0YSkueCArPSBkWDtcclxuICAgICAgICAoPFBvaW50PnRoaXMuc2hhcGVEYXRhKS55ICs9IGRZO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIHVwZGF0ZVBvc2l0aW9uV2l0aExpc3RlbmVycyhkWDogbnVtYmVyLCBkWTogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICg8UG9pbnQ+dGhpcy5zaGFwZURhdGEpLnggKz0gZFg7XHJcbiAgICAgICAgKDxQb2ludD50aGlzLnNoYXBlRGF0YSkueSArPSBkWTtcclxuICAgICAgICBpZih0aGlzLm9uUG9zaXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm9uUG9zaXRpb25VcGRhdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUG9zaXRpb25VcGRhdGVzW2ldKGRYLCBkWSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVhY3RpdmF0ZSgpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5kYXRhO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhZ3M7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNoYXBlRGF0YTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sYXllcjtcclxuICAgICAgICBkZWxldGUgdGhpcy5nYW1lT2JqZWN0O1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jbGVhckxpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMucmViaW5kUG9zaXRpb25VcGRhdGUoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkNvbGxpc2lvblN0YXJ0KGNiOiAoY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZCkgOiBudW1iZXIge1xyXG4gICAgICAgIGlmKCF0aGlzLnN0YXJ0TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRMaXN0ZW5lcnMgPSBbY2JdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0TGlzdGVuZXJzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Db2xsaXNpb24oY2IgOiAoY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZCkgOiBudW1iZXIge1xyXG4gICAgICAgIGlmKCF0aGlzLm9uTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25MaXN0ZW5lcnMgPSBbY2JdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25MaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9uTGlzdGVuZXJzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Db2xsaXNpb25FbmQoY2IgOiAoY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZCkgOiBudW1iZXIge1xyXG4gICAgICAgIGlmKCF0aGlzLmVuZExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLmVuZExpc3RlbmVycyA9IFtjYl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5lbmRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuZExpc3RlbmVycy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZkNvbGxpc2lvbihjYjogKGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm9uTGlzdGVuZXJzID10aGlzLnJlbW92ZUZyb21MaXN0ZW5lcnMoY2IsIHRoaXMub25MaXN0ZW5lcnMpO1xyXG4gICAgICAgIGlmKCF0aGlzLm9uTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9uTGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZDb2xsaXNpb25FbmQoY2I6IChjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5lbmRMaXN0ZW5lcnMgPSB0aGlzLnJlbW92ZUZyb21MaXN0ZW5lcnMoY2IsIHRoaXMuZW5kTGlzdGVuZXJzKTtcclxuICAgICAgICBpZighdGhpcy5lbmRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZW5kTGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZDb2xsaXNpb25TdGFydChjYjogKGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQpIHtcclxuICAgICAgICAvL3RvZG86IFBST0ZJTEUuLlxyXG4gICAgICAgIHRoaXMuc3RhcnRMaXN0ZW5lcnMgPSB0aGlzLnJlbW92ZUZyb21MaXN0ZW5lcnMoY2IsIHRoaXMuc3RhcnRMaXN0ZW5lcnMpO1xyXG4gICAgICAgIGlmKCF0aGlzLnN0YXJ0TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0YXJ0TGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXJMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gY2hpbGRyZW4gY29sbGlkZXJzIGRvbnQgd29ycnkgYWJvdXQgbWFuYWdpbmcgdGhlaXIgb3duIHRhZyBsaXN0ZW5lcnMsIHNvIG9ubHkgbmVlZCB0byBjbGVhciBpZiB3ZSBkb250IGhhdmUgYSBwYXJlbnQuXHJcbiAgICAgICAgaWYoIXRoaXMucGFyZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUYWdMaXN0ZW5lcnMoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclRyYW5zZm9ybUxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm9uTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25MaXN0ZW5lcnMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMub25MaXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuZW5kTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kTGlzdGVuZXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmVuZExpc3RlbmVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5zdGFydExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0TGlzdGVuZXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0YXJ0TGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVtb3ZlRnJvbUxpc3RlbmVycyhsaXN0ZW5lckNiOiAoY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZCwgYXJyYXk6IEFycmF5PChjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkPikgOiBBcnJheTwoY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IEFycmF5KGFycmF5Lmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIGxldCBmb3VuZEF0SWR4ID0gLTE7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKGFycmF5W2ldID09PSBsaXN0ZW5lckNiKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0SWR4ID0gaTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0FycmF5W2ldID0gYXJyYXlbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IGZvdW5kQXRJZHgrMTsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5ld0FycmF5W2ktMV0gPSBhcnJheVtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIW5ld0FycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld0FycmF5O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7TGF5ZXJEYXRhLCBSdW50aW1lQ29sbGlkZXJTaGFwZX0gZnJvbSBcIi4uLy4uL1J1bnRpbWUvc3JjL1dvcmxkUmVuZGVyZXIvdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJFU0VSVkVEX0ZMQUdTIHtcclxuICAgIE5FR0FUSVZFX05VTUJFUj0weDQwMDAwMDAwLFxyXG4gICAgSU1BR0VfQU5EX1NUUklOR19TRVBFUkFUT1IgPSAweDExMTExMSxcclxuICAgIEVNUFRZX1NFQ1RJT05fRkxBRyA9IDB4MTExMTEyLFxyXG4gICAgQkxPQl9TRVBBUkFUT1IgPSAweDExMTExMyxcclxuICAgIENIVU5LX1NFUEVSQVRPUiA9IDB4MTExMTE0LFxyXG4gICAgVElMRV9cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldEluaXREYXRhID0ge1xyXG4gICAgdGlsZXNldElkOiBzdHJpbmcsXHJcbiAgICB0aWxlV2lkdGg6IG51bWJlcixcclxuICAgIHRpbGVIZWlnaHQ6IG51bWJlcixcclxuICAgIHN0YXJ0aW5nSW5kZXg6IG51bWJlcixcclxuICAgIHRyYW5zcGFyZW50SW5kZXhlczogQXJyYXk8bnVtYmVyPixcclxuICAgIGRhdGFUcz86IG51bWJlcixcclxuICAgIGltYWdlVHM/OiBudW1iZXIsXHJcbiAgICB0aWxlRGF0YTogQXJyYXk8VGlsZUNvbGxpZGVyRGF0YT4sXHJcbiAgICBibG9iPzogYW55LFxyXG4gICAgdGV4dHVyZT86IFBJWEkuVGV4dHVyZVxyXG59XHJcbmV4cG9ydCB0eXBlIEVkaXRvck1hcEluaXRNZXRhRGF0YSA9IHsgaWQ6IHN0cmluZywgdHM6IG51bWJlciwgY2h1bmtzVHM6IEFycmF5PG51bWJlcj4sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH1cclxuXHJcblxyXG5leHBvcnQgdHlwZSBSZWN0ID0geyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfTtcclxuZXhwb3J0IHR5cGUgUG9pbnQgPSB7IHg6IG51bWJlciwgeTogbnVtYmVyIH07XHJcbmV4cG9ydCB0eXBlIFBvbHlnb24gPSBBcnJheTxQb2ludD47XHJcbmV4cG9ydCB0eXBlIExpbmUgPSBBcnJheTxQb2ludD47XHJcbmV4cG9ydCB0eXBlIENpcmNsZSA9IFBvaW50ICYgeyByOiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IHR5cGUgTWFwU2hhcGVEYXRhID0gUmVjdCB8IFBvaW50IHwgUG9seWdvbjtcclxuZXhwb3J0IHR5cGUgT2JqZWN0UHJvcGVydHlEYXRhID0ge1xyXG4gICAgbmFtZTogc3RyaW5nLFxyXG4gICAgdmFsdWU6IGFueSxcclxuICAgIHJlY3RzPzogQXJyYXk8UmVjdD4sXHJcbiAgICBwb2x5Z29ucz86IEFycmF5PEFycmF5PG51bWJlcj4+XHJcbn1cclxuZXhwb3J0IHR5cGUgVmFsaWRQcm9wVHlwZSA9ICdzdHJpbmcnIHwgJ251bWJlcicgfCAnYm9vbGVhbic7XHJcbmV4cG9ydCB0eXBlIFZhbGlkUHJvcFZhbHVlVHlwZXMgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJQcm9wZXJ0eURhdGEgPSB7XHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICB0eXBlOiBWYWxpZFByb3BUeXBlLFxyXG4gICAgdmFsdWU6IG51bWJlciB8IHN0cmluZyB8IGJvb2xlYW4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEltYWdlSW5pdERhdGEgPSB7XHJcbiAgICBpbWFnZUlkVG9TZXFNYXA6IHtbaW1hZ2VJZDogc3RyaW5nXTogbnVtYmVyfSxcclxuICAgIGJsb2I/OiBhbnksXHJcbiAgICBpbWFnZUlkOiBzdHJpbmcsXHJcbiAgICBpbWFnZURhdGE/OiBNYXBJbWFnZURhdGEsXHJcbiAgICBjb2xsaWRlckRhdGE/OiBUaWxlQ29sbGlkZXJEYXRhXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcEltYWdlRGF0YSA9IHtcclxuICAgIHByb3BlcnRpZXM6IEFycmF5PE9iamVjdFByb3BlcnR5RGF0YT4sXHJcbiAgICB0YWdzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgek9mZnNldD86IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUnVudGltZU1hcE1ldGFEYXRhID0ge1xyXG4gICAgdzogbnVtYmVyLFxyXG4gICAgaDogbnVtYmVyLFxyXG4gICAgc3c6IG51bWJlcixcclxuICAgIHNoOiBudW1iZXIsXHJcbiAgICB0czogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUaWxlc2V0SW5pdFNlY3Rpb25MYXllckRhdGEgPSB7XHJcbiAgICBzaXplS2V5OiBzdHJpbmcsXHJcbiAgICBtYXhUaWxlSWQ6IG51bWJlcixcclxuICAgIHRpbGVXaWR0aDogbnVtYmVyO1xyXG4gICAgdGlsZUhlaWdodDogbnVtYmVyO1xyXG4gICAgc3RhcnRPZmZzZXRzPyA6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSxcclxuICAgIHN1YlNlY3Rpb25zOiBBcnJheTxBcnJheTxudW1iZXI+PixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldEluaXRMYXllckRhdGEgPSB7XHJcbiAgICBzaXplS2V5OiBzdHJpbmcsXHJcbiAgICB0aWxlV2lkdGg6IG51bWJlcjtcclxuICAgIHRpbGVIZWlnaHQ6IG51bWJlcjtcclxuICAgIHRpbGVzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgbWF4VGlsZUlkOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyRGF0YSA9IHtcclxuICAgIHJlY3RzOiBBcnJheTxSZWN0Q29sbGlkZXJEYXRhPlxyXG4gICAgcG9seWdvbnM6IEFycmF5PFBvbHlnb25Db2xsaWRlckRhdGE+LFxyXG4gICAgcG9pbnRzOiBBcnJheTxQb2ludENvbGxpZGVyRGF0YT5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGF5ZXJJbml0RGF0YSA9IHtcclxuICAgIGxheWVySWQ6IG51bWJlcixcclxuICAgIGxheWVyTmFtZTogc3RyaW5nLFxyXG4gICAgY29sbGlkZXJzOiBDb2xsaWRlckRhdGEsXHJcbiAgICB0aWxlTGF5ZXJzOiBBcnJheTxUaWxlc2V0SW5pdExheWVyRGF0YT4sXHJcbiAgICBpbWFnZXM6IHtbaW1hZ2VJZDogc3RyaW5nXTogQXJyYXk8eyB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyIH0+IH07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIExheWVySW5pdERhdGEyID0ge1xyXG4gICAgY29sbGlkZXJzPzogVGlsZUNvbGxpZGVyRGF0YSxcclxuICAgIGxheWVySWQ6IG51bWJlcixcclxuICAgIGxheWVyTmFtZTogc3RyaW5nLFxyXG4gICAgdGlsZUxheWVyczogQXJyYXk8c3RyaW5nPixcclxuICAgIG1heFo6IG51bWJlcixcclxuICAgIG1pblo6IG51bWJlcixcclxufVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFRpbGVzZXRNYXBHaWRzID0ge1xyXG4gICAgdGlsZXNldElkOiBzdHJpbmcsXHJcbiAgICBzdGFydGluZ0luZGV4OiBudW1iZXIsXHJcbn1cclxuXHJcbi8vIHdvcmxkXHJcbiAgICAgICAgLy8gbWFwc1xyXG4gICAgICAgICAgICAvLyBtYXAuanNvblxyXG4gICAgICAgIC8vIHRpbGVzZXRzXHJcbiAgICAgICAgICAgIC8vIHRpbGVzZXQucG5nXHJcbiAgICAgICAgICAgIC8vIHRpbGVzZXQuanNvblxyXG4gICAgICAgIC8vIGltYWdlc1xyXG4gICAgICAgICAgICAvLyBhdGxhc18xLnBuZ1xyXG4gICAgICAgICAgICAvLyBhdGxhc18yLmpzb25cclxuXHJcblxyXG5leHBvcnQgdHlwZSBXb3JsZEluaXREYXRhID0ge1xyXG4gICAgdGlsZUtleVRvU2VxOiB7W3NpemVLZXk6IHN0cmluZ106IG51bWJlcn0sXHJcbiAgICB3b3JsZElkOiBzdHJpbmcsXHJcbiAgICB1bmlxdWVUaWxlQ291bnQ6IHtbc2l6ZUtleTogc3RyaW5nXTogbnVtYmVyIH1cclxuICAgIHRpbGVzZXRzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAvLyBpbWFnZXM6IEltYWdlQXNzZXRzSW5pdERhdGEsXHJcbiAgICBtYXBJZHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBjb21wdXRlZENvbGxpZGVyczogQXJyYXk8Q29tcHV0ZWRDb2xvck9iamVjdFRpbGVQcm9wZXJ0eT4sXHJcbiAgICBjb2xsaWRlclRhZ3M6IEFycmF5PHN0cmluZz4sXHJcbiAgICBjb2xsaWRlclRhZ01hcDogQ29sbGlkZXJEYXRhTWFwLFxyXG4gICAgY29sbGlkZXJUYWdSZWxhdGlvbnNoaXBzOiBBcnJheTxBcnJheTxzdHJpbmc+PixcclxuICAgIHByb3BlcnR5TmFtZVRvU2VxOiB7W3Byb3BOYW1lOiBzdHJpbmddOiBudW1iZXJ9LFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZWN0aW9uTGF5ZXJJbml0RGF0YSA9IHtcclxuICAgIGxheWVySWQ6IG51bWJlcixcclxuICAgIGNvbGxpZGVyczogQ29sbGlkZXJEYXRhLFxyXG4gICAgdGlsZUxheWVyczogQXJyYXk8VGlsZXNldEluaXRTZWN0aW9uTGF5ZXJEYXRhPixcclxuICAgIGltYWdlczI/OiBBcnJheTx7W2ltYWdlSWQ6IHN0cmluZ106IEFycmF5PG51bWJlcj59PixcclxuICAgIC8vIHgsIHksIHpcclxuICAgIGltYWdlczoge1tpbWFnZUlkOiBzdHJpbmddOiBBcnJheTxudW1iZXI+IH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUgPSAxMjg7XHJcbmV4cG9ydCBjb25zdCBFRElUT1JfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUgPSAyNTY7XHJcbi8vIHgsIHksIHpcclxuZXhwb3J0IHR5cGUgTWFwTGF5ZXJTZWN0aW9uSW1hZ2VEYXRhID0geyBbaW1hZ2VJZDogc3RyaW5nXTogQXJyYXk8bnVtYmVyPiB9XHJcblxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIE1hcFNlY3Rpb25EYXRhID0ge1xyXG4gICAgaW5kZXg/OiBudW1iZXIsXHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBsYXllcnM6IEFycmF5PFNlY3Rpb25MYXllckluaXREYXRhPixcclxuICAgIHRvdGFsTGF5ZXJzOiBudW1iZXIsXHJcbiAgICBsYXN0VXBkYXRlZDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBNYXBJbml0RGF0YSA9IHtcclxuICAgIHN1YkNodW5rVz86IG51bWJlcixcclxuICAgIHN1YkNodW5rSD86IG51bWJlcixcclxuICAgIGNodW5rVz86IG51bWJlcixcclxuICAgIGNodW5rSD86IG51bWJlcixcclxuICAgIG1hcElkOiBzdHJpbmcsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBsYXllcklkczogQXJyYXk8bnVtYmVyPixcclxuICAvLyAgbGF5ZXJEYXRhOiBBcnJheTxMYXllckluaXREYXRhPixcclxuICAgIGxheWVySW5pdERhdGE/OiBBcnJheTxMYXllckluaXREYXRhMj4sXHJcbiAgICB0aWxlc2V0czogQXJyYXk8c3RyaW5nPixcclxuICAgIGltYWdlczogQXJyYXk8c3RyaW5nPixcclxuICAgIGNodW5rc1RzOiBBcnJheTxudW1iZXI+LFxyXG4gICAgdXBkYXRlVHM6IG51bWJlcixcclxuICAgIGxheWVyU2VxOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyRGF0YU1hcCA9IHtcclxuICAgIFtjb2xsaWRlclRhZzogc3RyaW5nXTogeyBzZXE6IG51bWJlciwgdGFnczogQXJyYXk8c3RyaW5nPiB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyRGlzcGxheVN0YXRlRGF0YSA9IHtcclxuICAgIHJlY3RWaXNpYmlsaXR5OiBib29sZWFuLFxyXG4gICAgcG9seWdvblZpc2liaWxpdHk6IGJvb2xlYW4sXHJcbiAgICBjb21wdXRlZFZpc2liaWxpdHk6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSW1hZ2VBc3NldHNJbml0RGF0YSA9IHtcclxuICAgIGltYWdlQ29sbGlkZXJEYXRhOiBBcnJheTxUaWxlQ29sbGlkZXJEYXRhPixcclxuICAgIGF0bGFzc2VzRGF0YTogQXJyYXk8SW1hZ2VBdGxhc0luaXREYXRhPixcclxuICAgIGltYWdlSWRUb1NlcU1hcDoge1tpbWFnZUlkOiBzdHJpbmddOiBudW1iZXJ9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEltYWdlQXRsYXNJbml0RGF0YSA9IHtcclxuICAgIGF0bGFzRGF0YTogSW1hZ2VBdGxhc0RhdGEsXHJcbiAgICB0ZXh0dXJlPzogUElYSS5UZXh0dXJlXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcEltYWdlUHJvcHMgPSB7XHJcbiAgICBmbGlwcz86IEZsaXBzLFxyXG4gICAgY3VzdG9tPzoge1xyXG4gICAgICAgIFtwcm9wTmFtZTogc3RyaW5nXSA6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSW1hZ2VBdGxhc0RhdGEgPSB7XHJcbiAgICBhdGxhc0luZGV4OiBudW1iZXIsXHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICBpbWFnZXM6IEFycmF5PHtcclxuICAgICAgICBpbWFnZUlkOiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlclxyXG4gICAgfT5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSW1hZ2VBdGxhc0V4cG9ydERhdGEgPSB7XHJcbiAgICBhSWR4OiBudW1iZXIsXHJcbiAgICB3OiBudW1iZXIsXHJcbiAgICBoOiBudW1iZXIsXHJcbiAgICBpbWFnZXM6IEFycmF5PHtcclxuICAgICAgICBpZDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXJcclxuICAgIH0+XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyRGF0dW08VD4gPSB7XHJcbiAgICBwcm9wZXJ0aWVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxuICAgIHNoYXBlRGF0YTogUmVjdCB8IFBvbHlnb24gfCBQb2ludCB8IENpcmNsZSxcclxuICAgIHByb3BzOiB7W3Byb3BOYW1lOiBzdHJpbmddIDogc3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlciB9LFxyXG4gICAgdHlwZTogbnVtYmVyLFxyXG4gICAgZGF0YT86IG9iamVjdFxyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgU2hhcGVDb2xsaWRlckRhdGEgPSB7XHJcbiAgICBpZDogc3RyaW5nLFxyXG4gICAgdmlzaWJsZTogYm9vbGVhbixcclxuICAgIGhpZ2hsaWdodGVkOiBib29sZWFuLFxyXG4gICAgc2hhcGVUeXBlOiBDb2xsaWRlclNoYXBlLFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IENpcmNsZSB8IFBvaW50LFxyXG4gICAgY29sbGlkZXJUYWdzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgcHJvcGVydGllcz86IEFycmF5PE9iamVjdFByb3BlcnR5RGF0YT4sXHJcbiAgICBwcm9wcz86IEFycmF5PENvbGxpZGVyUHJvcGVydHlEYXRhPixcclxuICAgIGNvbXB1dGVkPzogYm9vbGVhbixcclxuICAgIGNvbXB1dGVkQnk/OiBzdHJpbmcsXHJcbiAgICBsYXllcklkPzogbnVtYmVyLFxyXG4gICAgZHluYW1pYz86IGJvb2xlYW4sXHJcbiAgICBtYXBDb2xsaWRlck1hbmFnZXJJZD86IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gQ29sbGlkZXJTaGFwZSB7XHJcbiAgICBSRUNUPSdyZWN0cycsXHJcbiAgICBQT0xZR09OPSdwb2x5Z29ucycsXHJcbiAgICBQT0lOVD0ncG9pbnRzJ1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgUmVjdENvbGxpZGVyRGF0YSA9IHtcclxuICAgIHNoYXBlRGF0YTogUmVjdCxcclxufSAmIFNoYXBlQ29sbGlkZXJEYXRhO1xyXG5leHBvcnQgdHlwZSBQb2x5Z29uQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgc2hhcGVEYXRhOiBQb2x5Z29uLFxyXG59ICYgU2hhcGVDb2xsaWRlckRhdGE7XHJcbmV4cG9ydCB0eXBlIFBvaW50Q29sbGlkZXJEYXRhID0ge1xyXG4gICAgc2hhcGVEYXRhOiBQb2ludCxcclxufSAmIFNoYXBlQ29sbGlkZXJEYXRhO1xyXG5cclxuZXhwb3J0IHR5cGUgUmVzb2x2ZWRDb21wdXRlZENvbGxpZGVyRGF0YSA9IHtcclxuICAgIHNoYXBlRGF0YToge1xyXG4gICAgICAgIFtDb2xsaWRlclNoYXBlLlJFQ1RdOiBBcnJheTxSZWN0PixcclxuICAgICAgICBbQ29sbGlkZXJTaGFwZS5QT0xZR09OXTogQXJyYXk8UG9seWdvbj5cclxuICAgIH0sXHJcbiAgICBjb2xvcnM6IEFycmF5PG51bWJlcj4sXHJcbn0gJiBTaGFwZUNvbGxpZGVyRGF0YTtcclxuXHJcbmV4cG9ydCB0eXBlIEZsaXBzID0geyAgZmxpcERpYWc6IGJvb2xlYW4sIGZsaXBIb3I6IGJvb2xlYW4sIGZsaXBWZXJ0OiBib29sZWFuIH07XHJcblxyXG5leHBvcnQgdHlwZSBUaWxlQ29sbGlkZXJEYXRhID0gQ29sbGlkZXJEYXRhICYge1xyXG4gICAgaWQ/OiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFJhd0NvbXB1dGVkQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgY29sb3JzOiBBcnJheTxudW1iZXI+XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEJsb2NrZXJEYXRhID0ge1xyXG4gICAgbmFtZTogc3RyaW5nLFxyXG4gICAgY2hlY2tUeXBlczogQXJyYXk8c3RyaW5nPixcclxuICAgIHJlY3RzOiBBcnJheTxSZWN0PixcclxuICAgIHBvbHlnb25zOiBBcnJheTxQb2x5Z29uPlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBNYXBTcHJpdGVEYXRhID0ge1xyXG4gICAgLy8gIHByb3BlcnRpZXM6IEFycmF5PFByb3BlcnR5PixcclxuICAgIHRhZ3M6IEFycmF5PHN0cmluZz4sXHJcbiAgICBwcm9wZXJ0aWVzOiBBcnJheTxPYmplY3RQcm9wZXJ0eURhdGE+XHJcbiAgICBibG9ja2VyczogQXJyYXk8QmxvY2tlckRhdGE+XHJcbn1cclxuXHJcbi8qXHJcbmV4cG9ydCB0eXBlIFRpbGVEYXRhID0ge1xyXG4gICAgbWFwU3ByaXRlRGF0YTogTWFwU3ByaXRlRGF0YSxcclxuICAgIGNvbXB1dGVkT2JqZWN0czogQXJyYXk8Q29tcHV0ZWRDb2xvck9iamVjdFRpbGVQcm9wZXJ0eT5cclxufVxyXG4gKi9cclxuXHJcbmV4cG9ydCB0eXBlIENvbXB1dGVkQ29sb3JPYmplY3RUaWxlUHJvcGVydHkgPSB7XHJcbiAgICBjb21wdXRhdGlvblR5cGU6ICdwcm9wZXJ0eScgfCAnYmxvY2tlcidcclxuICAgIGNvbXB1dGF0aW9uTmFtZTogc3RyaW5nLFxyXG4gICAgY29sb3JzOiBBcnJheTxudW1iZXI+LFxyXG4gICAgbmFtZTogc3RyaW5nLFxyXG4gICAgdmFsdWU6IGFueSxcclxuICAgIG1pblJlY3RXaWR0aD86IG51bWJlcixcclxuICAgIG1pblJlY3RIZWlnaHQ/OiBudW1iZXIsXHJcbiAgICBleGNsdWRlVGlsZXM/OiBBcnJheTx7IHRpbGVJbmRleDogbnVtYmVyLCByZWN0czogQXJyYXk8UmVjdD4gfT5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9iamVjdFR5cGUge1xyXG4gICAgbmFtZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEJvdW5kaW5nQm94ID0ge1xyXG4gICAgbWluWDogbnVtYmVyLFxyXG4gICAgbWF4WDogbnVtYmVyLFxyXG4gICAgbWluWTogbnVtYmVyLFxyXG4gICAgbWF4WTogbnVtYmVyXHJcbn0iLCJpbXBvcnQge1xyXG4gICAgQW5pbWF0aW5nSW1hZ2VTcHJpdGVEYXRhLFxyXG4gICAgQmxvY2tlckRhdGEsXHJcbiAgICBDaXJjbGUsXHJcbiAgICBDb2xsaWRlckRhdHVtLFxyXG4gICAgR2FtZU9iamVjdE9wdGlvbnMsXHJcbiAgICBMaW5lLCBOZXdDb2xsaWRlclBhcmFtcyxcclxuICAgIFBvaW50LFxyXG4gICAgUG9seWdvbixcclxuICAgIFJlY3QsXHJcbiAgICBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxuICAgIFNoYXBlRGF0YSwgVGFnXHJcbn0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IHtJbWFnZUF0bGFzRXhwb3J0RGF0YX0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7Q29sbGlkZXJ9IGZyb20gXCIuLi9Db2xsaXNpb25NYW5hZ2VyL0NvbGxpZGVyXCI7XHJcbmltcG9ydCB7Q29sbGlzaW9uTWFuYWdlcn0gZnJvbSBcIi4uL0NvbGxpc2lvbk1hbmFnZXIvQ29sbGlzaW9uTWFuYWdlclwiO1xyXG5pbXBvcnQge0xheWVyQ29udGFpbmVyfSBmcm9tIFwiLi9MYXllckNvbnRhaW5lclwiO1xyXG5pbXBvcnQge1BvbHlnb25Db2xsaWRlcn0gZnJvbSBcIi4uL0NvbGxpc2lvbk1hbmFnZXIvUG9seWdvbkNvbGxpZGVyXCI7XHJcbmltcG9ydCB7VGFnTWFuYWdlciwgVGFnTWl4aW59IGZyb20gXCIuL01peGlucy9UYWdNaXhpblwiO1xyXG5pbXBvcnQge0dhbWVPYmplY3RNYW5hZ2VyfSBmcm9tIFwiLi9HYW1lT2JqZWN0TWFuYWdlclwiO1xyXG5pbXBvcnQge1RyYW5zZm9ybUV2ZW50TWl4aW59IGZyb20gXCIuL01peGlucy9UcmFuc2Zvcm1FdmVudE1peGluXCI7XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZVNwcml0ZURhdGEgPSB7XHJcbiAgICB5U29ydFBvaW50PzogbnVtYmVyLFxyXG4gICAgY29sbGlkZXJzPzogSW1hZ2VBdGxhc0V4cG9ydERhdGEsXHJcbn1cclxuXHJcbmNsYXNzIEFuaW1hdGluZ0ltYWdlU3ByaXRlIGV4dGVuZHMgUElYSS5TcHJpdGUge1xyXG4gICAgcmVhZG9ubHkgYmxvY2tlckRhdGE6IEJsb2NrZXJEYXRhO1xyXG4gICAgcHVibGljIGFuaW1hdGlvbkRhdGE6IEFuaW1hdGluZ0ltYWdlU3ByaXRlRGF0YTtcclxuICAgIHJlYWRvbmx5IGRlZmF1bHRBbmltYXRpb246IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKGJsb2NrZXJEYXRhOiBCbG9ja2VyRGF0YSwgYW5pbWF0aW9uRGF0YTogQW5pbWF0aW5nSW1hZ2VTcHJpdGVEYXRhLCBkZWZhdWx0QW5pbWF0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYmxvY2tlckRhdGEgPSBibG9ja2VyRGF0YTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkRhdGEgPSBhbmltYXRpb25EYXRhO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEFuaW1hdGlvbiA9IGRlZmF1bHRBbmltYXRpb247XHJcbiAgICB9XHJcbn1cclxuXHJcbnR5cGUgTGF5ZXJDaGFuZ2VDYWxsYmFjayA9IChuZXdMYXllckluZGV4OiBudW1iZXIsIG9sZExheWVySW5kZXg6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lT2JqZWN0IGV4dGVuZHMgUElYSS5TcHJpdGUgaW1wbGVtZW50cyBUYWdNaXhpbiwgVHJhbnNmb3JtRXZlbnRNaXhpbiB7XHJcbiAgICBwdWJsaWMgc2NhbGVYOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgc2NhbGVZOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgd29ybGRYOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIHdvcmxkWTogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyB0YWdzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgcHVibGljIGNvbGxpZGVyczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj47XHJcbiAgICBwcml2YXRlIG9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnM6IEFycmF5PCgpPT52b2lkPjtcclxuICAgIHByaXZhdGUgb25MYXllckNoYW5nZUxpc3RlbmVyczogQXJyYXk8TGF5ZXJDaGFuZ2VDYWxsYmFjaz47XHJcbiAgICBwdWJsaWMgbGF5ZXJJbmRleDogbnVtYmVyO1xyXG4gICAgcHVibGljIHpJbmRleDogbnVtYmVyO1xyXG4gICAgcHVibGljIGltYWdlRGF0YTogSW1hZ2VTcHJpdGVEYXRhO1xyXG4gICAgcHVibGljIGNodW5rQ291bnQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIF95U29ydFBvaW50OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGxheWVyUGFyZW50OiBMYXllckNvbnRhaW5lcjtcclxuICAgIHJlYWRvbmx5IHBvb2w6IEFycmF5PEdhbWVPYmplY3Q+ID0gW107XHJcbiAgICByZWFkb25seSBjb2xsaXNpb25NYW5hZ2VyOiBDb2xsaXNpb25NYW5hZ2VyO1xyXG4gICAgcmVhZG9ubHkgZ2FtZVN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuXHJcbiAgICBwdWJsaWMgc29ydEJ5WTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHVibGljIGRlbGVnYXRlZFNwcml0ZTogUElYSS5TcHJpdGUgfCBQSVhJLkNvbnRhaW5lcjtcclxuXHJcblxyXG4gICAgLy8gTUlYSU4gT1ZFUlJJREUgVFlQRVMgLVxyXG4gICAgLy8gKGJvdW5kIHRvIHRoZSBtaXhpbidzIHByb3RvdHlwZSBpbiBBcHBseU1peGluIHN0YXRpYyBpbiB0aGUgZ2FtZSBvYmplY3QncyBjb25zdHJ1Y3Rpb24pXHJcbiAgICAvL1RyYW5zZm9ybUV2ZW50TWl4aW5cclxuICAgIHB1YmxpYyBjbGVhclRyYW5zZm9ybUxpc3RlbmVyczogKCkgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvblJvdGF0aW9uVXBkYXRlcz86IEFycmF5PChkZWx0YVJhZGlhbjogbnVtYmVyLCB3b3JsZFBpdm90PzogUG9pbnQpID0+IHZvaWQ+O1xyXG4gICAgcHVibGljIG9uUG9zaXRpb25VcGRhdGVzPzogQXJyYXk8KGRYOiBudW1iZXIsIGRZOiBudW1iZXIpID0+IHZvaWQ+O1xyXG4gICAgcHVibGljIG9uUG9zaXRpb25VcGRhdGU6IChjYiA6IChkWDogbnVtYmVyLCBkWTogbnVtYmVyKSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9mZlBvc2l0aW9uVXBkYXRlOiAoY2I6IChkWDogbnVtYmVyLCBkWTogbnVtYmVyKSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9uUm90YXRpb25VcGRhdGU6IChjYjogKGRSOiBudW1iZXIsIHdvcmxkUGl2b3Q/OiBQb2ludCwgbG9jYWxQaXZvdD86IFBvaW50KSA9PiB2b2lkKSA9PiBib29sZWFuO1xyXG4gICAgcHVibGljIG9mZlJvdGF0aW9uVXBkYXRlOiAoY2I6IChkUjogbnVtYmVyLCB3b3JsZFBpdm90PzogUG9pbnQsIGxvY2FsUGl2b3Q/OiBQb2ludCkgPT4gdm9pZCkgPT4gYm9vbGVhbjtcclxuICAgIC8vIFRhZ01peGluXHJcbiAgICBwdWJsaWMgY2xlYXJUYWdMaXN0ZW5lcnMgOiAoKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9uVGFnQWRkZWQgOiAoY2I6ICh0YWc6IFRhZykgPT4gdm9pZCwgdGFnPzogVGFnLCApID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmVGFnQWRkZWQ6IChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgb25UYWdSZW1vdmVkOiAoY2I6ICh0YWc6IFRhZykgPT4gdm9pZCwgdGFnPzogVGFnKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9mZlRhZ1JlbW92ZWQ6IChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgYWRkVGFnIDogKHRhZzogVGFnLCBjaGVja0R1cGxpY2F0ZT86IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgcmVtb3ZlVGFnIDogKHRhZzogVGFnKSA9PiBib29sZWFuO1xyXG4gICAgLy9yZXF1aXJlZCBpbXBsZW1lbnRhdGlvbnMgZm9yIHRhZyBtaXhpbi5cclxuICAgIHJlYWRvbmx5IHRhZ01hbmFnZXI6IEdhbWVPYmplY3RNYW5hZ2VyO1xyXG4gICAgcHVibGljIHRhZ0FkZGVkTGlzdGVuZXJzOiB7W3RhZzogc3RyaW5nXTogQXJyYXk8KHRhZzogVGFnKSA9PiB2b2lkPiB9O1xyXG4gICAgcHVibGljIHRhZ1JlbW92ZWRMaXN0ZW5lcnM6IHtbdGFnOiBzdHJpbmddOiBBcnJheTwodGFnOiBUYWcpID0+IHZvaWQ+IH07XHJcbiAgICBwdWJsaWMgYW55VGFnQWRkZWRMaXN0ZW5lcnM6IEFycmF5PCh0YWc6IFRhZykgPT4gdm9pZD47XHJcbiAgICBwdWJsaWMgYW55VGFnUmVtb3ZlZExpc3RlbmVyczogQXJyYXk8KHRhZzogVGFnKSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBkYXRhIDogYW55O1xyXG4gICAgY29uc3RydWN0b3IocDogQXJyYXk8R2FtZU9iamVjdD4sIGNvbGxpc2lvbk1hbmFnZXI6IENvbGxpc2lvbk1hbmFnZXIsIGdhbWVTdGFnZTogUElYSS5Db250YWluZXIsIGdvTWFuYWdlcjogR2FtZU9iamVjdE1hbmFnZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlID0gZ2FtZVN0YWdlO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlciA9IGNvbGxpc2lvbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5wb29sID0gcDtcclxuICAgICAgICB0aGlzLnRhZ01hbmFnZXIgPSBnb01hbmFnZXI7XHJcbiAgICAgICAgVGFnTWl4aW4uQXBwbHlNaXhpbih0aGlzKTtcclxuICAgICAgICBUcmFuc2Zvcm1FdmVudE1peGluLkFwcGx5TWl4aW4odGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNwcml0ZSgpIDogUElYSS5Db250YWluZXIgfCBQSVhJLlNwcml0ZSB7XHJcbiAgICAgICAgaWYodGhpcy5kZWxlZ2F0ZWRTcHJpdGUpIHJldHVybiB0aGlzLmRlbGVnYXRlZFNwcml0ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlUG9zaXRpb24oZFg6IG51bWJlciwgZFk6IG51bWJlcikge1xyXG4gICAgICAgIGlmKGRYIHx8IGRZKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29ybGRYICs9IGRYO1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkWSArPSBkWTtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gTWF0aC5yb3VuZCh0aGlzLndvcmxkWCk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IE1hdGgucm91bmQodGhpcy53b3JsZFkpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmRlbGVnYXRlZFNwcml0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZWRTcHJpdGUucG9zaXRpb24ueCA9IE1hdGgucm91bmQodGhpcy53b3JsZFgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZWRTcHJpdGUucG9zaXRpb24ueSA9IE1hdGgucm91bmQodGhpcy53b3JsZFkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY29sbGlkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpZGVyc1tpXS51cGRhdGVQb3NpdGlvbihkWCwgZFkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NvbGxpZGVyIHdhcycsIHRoaXMuY29sbGlkZXJzW2ldLnNoYXBlRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncGxheWVyIHdhcycsIHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMub25Qb3NpdGlvblVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vblBvc2l0aW9uVXBkYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Qb3NpdGlvblVwZGF0ZXNbaV0oZFgsIGRZKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVSb3RhdGlvbihkZWx0YVJvdGF0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uICs9IGRlbHRhUm90YXRpb247XHJcbiAgICAgICAgaWYodGhpcy5kZWxlZ2F0ZWRTcHJpdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZWRTcHJpdGUucm90YXRpb24gKz0gZGVsdGFSb3RhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5jb2xsaWRlcnMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29sbGlkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwaXZvdCA9IHsgeDogdGhpcy5jb2xsaWRlcnNbaV0ubWluWCArIHRoaXMueCArIHRoaXMucGl2b3QueCwgeTogdGhpcy5jb2xsaWRlcnNbaV0ubWluWSArIHRoaXMueSArIHRoaXMucGl2b3QueSB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxpZGVyc1tpXS5zZXRSb3RhdGlvbih0aGlzLnJvdGF0aW9uLCB0aGlzLnBpdm90KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm9uUm90YXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm9uUm90YXRpb25VcGRhdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUm90YXRpb25VcGRhdGVzW2ldKGRlbHRhUm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIGlmKHggPT09IHRoaXMud29ybGRYICYmIHkgPT09IHRoaXMud29ybGRZKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZFggPSB4IC0gdGhpcy53b3JsZFg7XHJcbiAgICAgICAgY29uc3QgZFkgPSB5IC0gdGhpcy53b3JsZFk7XHJcbiAgICAgICAgdGhpcy53b3JsZFggKz0gZFg7XHJcbiAgICAgICAgdGhpcy53b3JsZFkgKz0gZFk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gTWF0aC5yb3VuZCh0aGlzLndvcmxkWCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gIE1hdGgucm91bmQodGhpcy53b3JsZFkpO1xyXG4gICAgICAgIGlmKHRoaXMuZGVsZWdhdGVkU3ByaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGVkU3ByaXRlLnBvc2l0aW9uLnggPSB0aGlzLnBvc2l0aW9uLnhcclxuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZWRTcHJpdGUucG9zaXRpb24ueSA9IHRoaXMucG9zaXRpb24ueVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmNvbGxpZGVycykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzW2ldLnVwZGF0ZVBvc2l0aW9uKGRYLCBkWSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5vblBvc2l0aW9uVXBkYXRlcykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5vblBvc2l0aW9uVXBkYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblBvc2l0aW9uVXBkYXRlc1tpXShkWCwgZFkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjaGFuZ2VMYXllcihuZXdMYXllckluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBpZihuZXdMYXllckluZGV4ICE9PSB0aGlzLmxheWVySW5kZXgpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkSW5kZXggPSB0aGlzLmxheWVySW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJQYXJlbnQ/LnJlbW92ZU1hcFNwcml0ZSh0aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGF5ZXJTdGFnZSA6IExheWVyQ29udGFpbmVyID0gdGhpcy5nYW1lU3RhZ2UuY2hpbGRyZW5bbmV3TGF5ZXJJbmRleF0gYXMgTGF5ZXJDb250YWluZXI7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ25ldyBsYXllciBzdGFnZTonLCBuZXdMYXllclN0YWdlKTtcclxuICAgICAgICAgICAgaWYoIW5ld0xheWVyU3RhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTGF5ZXIgaW5kZXg6ICR7bmV3TGF5ZXJJbmRleH0gaXMgb3V0IG9mIHJhbmdlIGZvciBjdXJyZW50IG1hcC5gKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IG5ld0xheWVySW5kZXg7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJQYXJlbnQgPSBuZXdMYXllclN0YWdlO1xyXG4gICAgICAgICAgICBuZXdMYXllclN0YWdlLmFkZE1hcFNwcml0ZSh0aGlzKTtcclxuICAgICAgICAgICAgaWYodGhpcy5kZWxlZ2F0ZWRTcHJpdGUpIHtcclxuICAgICAgICAgICAgICAgIG5ld0xheWVyU3RhZ2Uub2JqZWN0Q29udGFpbmVyLmFkZENoaWxkKHRoaXMuZGVsZWdhdGVkU3ByaXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0aGlzLm9uTGF5ZXJDaGFuZ2VMaXN0ZW5lcnMgJiYgb2xkSW5kZXggIT09IG51bGwgJiYgb2xkSW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMub25MYXllckNoYW5nZUxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25MYXllckNoYW5nZUxpc3RlbmVyc1tpXShuZXdMYXllckluZGV4LCBvbGRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkUG9seWdvbkNvbGxpZGVyKHBvbHlnb25EYXRhOiBQb2x5Z29uLCB0YWdzOiBBcnJheTxzdHJpbmcgfCBudW1iZXI+LCBpc0R5bmFtaWM6IGJvb2xlYW4sIHByb3BzPzogYW55LCBkYXRhPzogYW55KSA6IFBvbHlnb25Db2xsaWRlciB7XHJcbiAgICAgICAgcG9seWdvbkRhdGEgPSBwb2x5Z29uRGF0YS5tYXAoZCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB4OiBkLnggKyB0aGlzLndvcmxkWCxcclxuICAgICAgICAgICAgICAgIHk6IGQueSArIHRoaXMud29ybGRZXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ29sbGlkZXIobmV3IFBvbHlnb25Db2xsaWRlcih0aGlzLmxheWVySW5kZXgsIHBvbHlnb25EYXRhLCB0YWdzLCBpc0R5bmFtaWMsIHRoaXMuY29sbGlzaW9uTWFuYWdlciwgcHJvcHMsIHRoaXMsIGRhdGEpKSBhcyBQb2x5Z29uQ29sbGlkZXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkTGluZUNvbGxpZGVyKHNoYXBlRGF0YTogTGluZSwgdGFnczogQXJyYXk8c3RyaW5nIHwgbnVtYmVyPiwgaXNEeW5hbWljOiBib29sZWFuLCBwcm9wcz86IGFueSwgZGF0YT86IGFueSkgOiBDb2xsaWRlcjxMaW5lPiB7XHJcbiAgICAgICAgc2hhcGVEYXRhWzBdLnggKz0gdGhpcy53b3JsZFg7XHJcbiAgICAgICAgc2hhcGVEYXRhWzBdLnkgKz0gdGhpcy53b3JsZFk7XHJcbiAgICAgICAgc2hhcGVEYXRhWzFdLnggKz0gdGhpcy53b3JsZFg7XHJcbiAgICAgICAgc2hhcGVEYXRhWzFdLnkgKz0gdGhpcy53b3JsZFk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENvbGxpZGVyKG5ldyBDb2xsaWRlcjxMaW5lPih0aGlzLmxheWVySW5kZXgsIFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUsIHNoYXBlRGF0YSwgdGFncywgaXNEeW5hbWljLCB0aGlzLmNvbGxpc2lvbk1hbmFnZXIsIHByb3BzLCB0aGlzLCBkYXRhKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkUmVjdENvbGxpZGVyKHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgdGFnczogQXJyYXk8c3RyaW5nIHwgbnVtYmVyPiwgaXNEeW5hbWljOiBib29sZWFuLCBwcm9wcz86IGFueSwgZGF0YT86IGFueSkgIDogQ29sbGlkZXI8UmVjdD57XHJcbiAgICAgICAgeCArPSB0aGlzLndvcmxkWDtcclxuICAgICAgICB5ICs9IHRoaXMud29ybGRZO1xyXG5cclxuICAgICAgICAvLyAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBsYXllckluZGV4OiBudW1iZXIsIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUsIHNoYXBlRGF0YTogU2hhcGVEYXRhLCB0eXBlczogQXJyYXk8c3RyaW5nPiwgaXNEeW5hbWljOiBib29sZWFuLCB3b3JsZFBvc2l0aW9uPzogUG9pbnQsIHNwcml0ZT86IEltYWdlU3ByaXRlIHwgUElYSS5Db250YWluZXIgfCBQSVhJLkdyYXBoaWNzLCBkYXRhPzogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENvbGxpZGVyKG5ldyBDb2xsaWRlcjxSZWN0Pih0aGlzLmxheWVySW5kZXgsIFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QsIHsgeCwgeSwgdywgaCB9LCB0YWdzLCBpc0R5bmFtaWMsIHRoaXMuY29sbGlzaW9uTWFuYWdlciwgcHJvcHMsIHRoaXMsIGRhdGEpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhZGRDaXJjbGVDb2xsaWRlcih4OiBudW1iZXIsIHk6IG51bWJlciwgcjogbnVtYmVyLCB0YWdzOiBBcnJheTxzdHJpbmcgfCBudW1iZXI+LCBpc0R5bmFtaWM6IGJvb2xlYW4sIHByb3BzPzogYW55LCBkYXRhPzogYW55KSA6IENvbGxpZGVyPENpcmNsZT4ge1xyXG4gICAgICAgIHggKz0gdGhpcy53b3JsZFg7XHJcbiAgICAgICAgeSArPSB0aGlzLndvcmxkWTtcclxuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCd0aGlzIHBvc2l0aW9uIHdhcycsIHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygneCB5IGZvciBjaXJjbGUgYmVjYW1lJywgeyB4LCB5LCByIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDb2xsaWRlcihuZXcgQ29sbGlkZXI8Q2lyY2xlPih0aGlzLmxheWVySW5kZXgsIFJ1bnRpbWVDb2xsaWRlclNoYXBlLkNJUkNMRSwgeyB4LCB5LCByIH0sIHRhZ3MsIGlzRHluYW1pYywgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLCBwcm9wcywgdGhpcywgZGF0YSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFkZFBvaW50Q29sbGlkZXIoeDogbnVtYmVyLCB5OiBudW1iZXIsIHRhZ3M6IEFycmF5PHN0cmluZyB8IG51bWJlcj4sIGlzRHluYW1pYzogYm9vbGVhbiwgcHJvcHM/OiBhbnksIGRhdGE/OiBhbnkpIDogIENvbGxpZGVyPFBvaW50PiB7XHJcbiAgICAgICAgeCArPSB0aGlzLndvcmxkWDtcclxuICAgICAgICB5ICs9IHRoaXMud29ybGRZO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDb2xsaWRlcihuZXcgQ29sbGlkZXI8UG9pbnQ+KHRoaXMubGF5ZXJJbmRleCwgUnVudGltZUNvbGxpZGVyU2hhcGUuUE9JTlQsIHsgeCwgeSwgfSwgdGFncywgaXNEeW5hbWljLCB0aGlzLmNvbGxpc2lvbk1hbmFnZXIsIHByb3BzLCB0aGlzLCBkYXRhKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfYWRkQ29sbGlkZXIoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4pIDogQ29sbGlkZXI8U2hhcGVEYXRhPiB7XHJcbiAgICAgICAgaWYoIXRoaXMuY29sbGlkZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzID0gW2NvbGxpZGVyXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGVycy5wdXNoKGNvbGxpZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLmluaXRDb2xsaWRlcihjb2xsaWRlcik7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxpZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVDb2xsaWRlcihjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbGxpZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLmNvbGxpZGVyc1tpXSA9PT0gY29sbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlci5yZW1vdmVDb2xsaWRlcihjb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29sbGlkZXIuZ2FtZU9iamVjdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF0aGlzLmNvbGxpZGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY29sbGlkZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChnYW1lT2JqZWN0T3B0czogR2FtZU9iamVjdE9wdGlvbnMsIGltYWdlRGF0YT8pIHtcclxuICAgICAgICAvLyAgICBjb25zb2xlLmxvZygnSU5JVElBTElaSU5HIEdBTUVPQkpFQ1QgV0lUSCBEQVRBOycsIHsgLi4uZ2FtZU9iamVjdE9wdHMgfSlcclxuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIGlmKGdhbWVPYmplY3RPcHRzLmRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhID0gZ2FtZU9iamVjdE9wdHMuZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy56SW5kZXggPSBnYW1lT2JqZWN0T3B0cy56SW5kZXg7XHJcbiAgICAgICAgaWYodGhpcy56SW5kZXggPT09IG51bGwgfHwgdGhpcy56SW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnpJbmRleCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvcnRCeVkgPSB0aGlzLnpJbmRleCA9PT0gLTE7XHJcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBpbWFnZURhdGE7XHJcbiAgICAgICAgdGhpcy5feVNvcnRQb2ludCA9ICh0aGlzLmltYWdlRGF0YSAmJiAneVNvcnRQb2ludCcgaW4gdGhpcy5pbWFnZURhdGEpID8gdGhpcy5pbWFnZURhdGEueVNvcnRQb2ludCA6IChnYW1lT2JqZWN0T3B0cyAmJiAneVNvcnQnIGluIGdhbWVPYmplY3RPcHRzKSA/IGdhbWVPYmplY3RPcHRzLnlTb3J0IDogdGhpcy50ZXh0dXJlLmhlaWdodDtcclxuICAgICAgICBpZihnYW1lT2JqZWN0T3B0cy50ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IGdhbWVPYmplY3RPcHRzLnRleHR1cmU7XHJcbiAgICAgICAgfSBlbHNlIGlmKGdhbWVPYmplY3RPcHRzLnNwcml0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlbGVnYXRlZFNwcml0ZSA9IGdhbWVPYmplY3RPcHRzLnNwcml0ZTtcclxuICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZWRTcHJpdGVbJ3lTb3J0UG9pbnQnXSA9IHRoaXMuX3lTb3J0UG9pbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZWdhdGVkU3ByaXRlWydzb3J0QnlZJ10gPSB0aGlzLnNvcnRCeVk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGdhbWVPYmplY3RPcHRzLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29ybGRYID0gZ2FtZU9iamVjdE9wdHMucG9zaXRpb24ueDtcclxuICAgICAgICAgICAgdGhpcy53b3JsZFkgPSBnYW1lT2JqZWN0T3B0cy5wb3NpdGlvbi55O1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy53b3JsZFggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkWSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMueCA9IHRoaXMud29ybGRYO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMud29ybGRZO1xyXG5cclxuICAgICAgICAvL1RPRE8gOiBOTyBMQVlFUiBTWU5DIFNISVRcclxuICAgICAgICBpZighaXNOYU4oZ2FtZU9iamVjdE9wdHMubGF5ZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTGF5ZXIoZ2FtZU9iamVjdE9wdHMubGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihnYW1lT2JqZWN0T3B0cy50YWdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFncyA9IGdhbWVPYmplY3RPcHRzLnRhZ3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnYW1lT2JqZWN0T3B0cy5jb2xsaWRlcnMgJiYgdGhpcy5hZGRDb2xsaWRlcnMoZ2FtZU9iamVjdE9wdHMuY29sbGlkZXJzKTtcclxuXHJcbiAgICAgICAgaWYoZ2FtZU9iamVjdE9wdHMuZmxpcHMpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBmbGlwRGlhZywgZmxpcEhvciwgZmxpcFZlcnQgfSA9IGdhbWVPYmplY3RPcHRzLmZsaXBzO1xyXG4gICAgICAgICAgICBjb25zdCB4U2NhbGUgPSBmbGlwSG9yID8gLTEgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCB5U2NhbGUgPSBmbGlwVmVydCA/IC0xIDogMTtcclxuICAgICAgICAgICAgbGV0IG9mZnNldFggPSAwO1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgIGlmKGZsaXBIb3IgfHwgZmxpcFZlcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2NhbGUoeFNjYWxlLCB5U2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgaWYoZmxpcEhvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFggPSAtdGhpcy5zcHJpdGUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihmbGlwVmVydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSAtdGhpcy5zcHJpdGUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGZsaXBEaWFnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRYID0gb2Zmc2V0WDtcclxuICAgICAgICAgICAgICAgIG9mZnNldFggPSB0aGlzLnNwcml0ZS5oZWlnaHQgPCAwID8gMCA6IHRoaXMuc3ByaXRlLmhlaWdodCArIG9mZnNldFk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gdGhpcy5zcHJpdGUud2lkdGggPCAwID8gTWF0aC5hYnModGhpcy5zcHJpdGUud2lkdGgpIDogb2xkWFxyXG4gICAgICAgICAgICAgICAgaWYoZmxpcFZlcnQgJiYgIWZsaXBIb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRZICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZmxpcEhvciAmJiAhZmxpcFZlcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRYICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoIWZsaXBIb3IgJiYgIWZsaXBWZXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCAqPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRZICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb3RhdGlvbig5MCAqIChNYXRoLlBJIC8gMTgwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zcHJpdGUucGl2b3Quc2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnggPSB0aGlzLndvcmxkWCAtIG9mZnNldFg7XHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnkgPSB0aGlzLndvcmxkWSAtIG9mZnNldFk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTY2FsZSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2NhbGVYID0geDtcclxuICAgICAgICB0aGlzLnNjYWxlWSA9IHk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignc2V0dGluZyBzY2FsZXMnLCB7IHgsIHkgfSlcclxuICAgICAgICB0aGlzLnNwcml0ZS5zY2FsZS5zZXQoeCwgeSk7XHJcbiAgICAgICAgdGhpcy5jb2xsaWRlcnMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaWRlcnNbaV0uc2V0U2NhbGUoeCwgeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhckNvbGxpZGVycygpIHtcclxuICAgICAgICBpZih0aGlzLmNvbGxpZGVycykge1xyXG4gICAgICAgICAgICBjb25zdCBjID0gWy4uLnRoaXMuY29sbGlkZXJzXTtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sbGlkZXIoY1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZENvbGxpZGVyKGNvbDogTmV3Q29sbGlkZXJQYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBzaGFwZVR5cGUgPSAnc2hhcGVUeXBlJyBpbiBjb2wgPyBjb2wuc2hhcGVUeXBlIDogQ29sbGlzaW9uTWFuYWdlci5SZXNvbHZlQ29sbGlkZXJUeXBlKGNvbCk7XHJcbiAgICAgICAgaWYoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmVjdENvbGxpZGVyKCg8Q29sbGlkZXJEYXR1bTxSZWN0Pj5jb2wpLnNoYXBlRGF0YS54LCAoPENvbGxpZGVyRGF0dW08UmVjdD4+Y29sKS5zaGFwZURhdGEueSwgKDxDb2xsaWRlckRhdHVtPFJlY3Q+PmNvbCkuc2hhcGVEYXRhLncsICg8Q29sbGlkZXJEYXR1bTxSZWN0Pj5jb2wpLnNoYXBlRGF0YS5oLCBjb2wudGFncywgISFjb2wuZHluYW1pYywgbnVsbCwgY29sLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaXJjbGVDb2xsaWRlcigoPENvbGxpZGVyRGF0dW08Q2lyY2xlPj5jb2wpLnNoYXBlRGF0YS54LCAoPENvbGxpZGVyRGF0dW08Q2lyY2xlPj5jb2wpLnNoYXBlRGF0YS55LCAoPENvbGxpZGVyRGF0dW08Q2lyY2xlPj5jb2wpLnNoYXBlRGF0YS5yLCBjb2wudGFncywgISEoY29sLmR5bmFtaWMpLCBudWxsLCBjb2wuZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT04pIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRQb2x5Z29uQ29sbGlkZXIoKDxDb2xsaWRlckRhdHVtPFBvbHlnb24+PmNvbCkuc2hhcGVEYXRhLCBjb2wudGFncywgISEoY29sLmR5bmFtaWMpLCBudWxsLCBjb2wuZGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5UKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUG9pbnRDb2xsaWRlcigoPENvbGxpZGVyRGF0dW08UG9pbnQ+PmNvbCkuc2hhcGVEYXRhLngsICg8Q29sbGlkZXJEYXR1bTxQb2ludD4+Y29sKS5zaGFwZURhdGEueSwgY29sLnRhZ3MsICEhKGNvbC5keW5hbWljKSwgbnVsbCwgY29sLmRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5MSU5FKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTGluZUNvbGxpZGVyKCg8Q29sbGlkZXJEYXR1bTxMaW5lPj5jb2wpLnNoYXBlRGF0YSwgY29sLnRhZ3MsICEhKGNvbC5keW5hbWljKSwgbnVsbCwgY29sLmRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhZGRDb2xsaWRlcnMoY29sbGlkZXJzOiBBcnJheTxOZXdDb2xsaWRlclBhcmFtcz4pIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29sbGlkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29sbGlkZXIoY29sbGlkZXJzW2ldKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZW1vdmVkRnJvbU1hcChjYikge1xyXG4gICAgICAgIGlmKHRoaXMub25SZW1vdmVkRnJvbU1hcExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMucHVzaChjYilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMgPSBbY2JdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZSZW1vdmVkRnJvbU1hcChjYikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5vblJlbW92ZWRGcm9tTWFwTGlzdGVuZXJzW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblJlbW92ZWRGcm9tTWFwTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub25SZW1vdmVkRnJvbU1hcExpc3RlbmVyc1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkNoYW5nZWRMYXllcnMoY2I6IExheWVyQ2hhbmdlQ2FsbGJhY2spIHtcclxuICAgICAgICBpZih0aGlzLm9uTGF5ZXJDaGFuZ2VMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkxheWVyQ2hhbmdlTGlzdGVuZXJzLnB1c2goY2IpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vbkxheWVyQ2hhbmdlTGlzdGVuZXJzID0gW2NiXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmQ2hhbmdlZExheWVycyhjYjogKG5ld0xheWVySW5kZXg6IG51bWJlciwgb2xkTGF5ZXJJbmRleDogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMub25MYXllckNoYW5nZUxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLm9uTGF5ZXJDaGFuZ2VMaXN0ZW5lcnNbaV0gPT09IGNiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTGF5ZXJDaGFuZ2VMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMub25MYXllckNoYW5nZUxpc3RlbmVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vbkxheWVyQ2hhbmdlTGlzdGVuZXJzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFJvdGF0aW9uKHJhZGlhbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSb3RhdGlvbihyYWRpYW4gLSB0aGlzLnJvdGF0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVGcm9tTWFwKCkge1xyXG4gICAgICAgIGlmKHRoaXMubGF5ZXJQYXJlbnQpIHtcclxuICAgICAgICAgICAgLy8gd2UgdW5hc3NpZ24gdGhlIGxheWVyIHBhcmVudCBPTkxZIGluIHRoZSBsYXllciBwYXJlbnQgc28gaWYgd2UgZGlkbnQgZG8gdGhhdCB5ZXQgYW5kIHNvbWVvbmUgY2FsbGVkIGdhbWVPYmplY3QucmVtb3ZlRnJvbU1hcCxcclxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBjYWxsIHRoZSBsYXllclBhcmVudCdzIHJlbW92ZU1hcFNwcml0ZSBmaXJzdFxyXG4gICAgICAgICAgICAvLyBwYXNzIGluIGZhbHNlIGFzIHNlY29uZCBwYXJhbSBiZWNhdXNlIHRoaXMgaXMgZGVmaW5pdGV5IG5vdCBzaW1wbHkgYSBsYXllciBjaGFuZ2UuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxheWVyUGFyZW50LnJlbW92ZU1hcFNwcml0ZSh0aGlzLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFncz8uZm9yRWFjaCh0ID0+IHRoaXMudGFnTWFuYWdlci50YWdnZWRHYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVyc1t0XT8uZm9yRWFjaChjYiA9PiBjYih0aGlzKSkpO1xyXG4gICAgICAgIHRoaXMudGFnTWFuYWdlci5nYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVycz8uZm9yRWFjaChjYiA9PiBjYih0aGlzKSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuZGVsZWdhdGVkU3ByaXRlKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlbGVnYXRlZFNwcml0ZVsneVNvcnRQb2ludCddO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWxlZ2F0ZWRTcHJpdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsZWFyVGFnTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGFncztcclxuXHJcbiAgICAgICAgdGhpcy53b3JsZFggPSAwO1xyXG4gICAgICAgIHRoaXMud29ybGRZID0gMDtcclxuICAgICAgICBpZih0aGlzLmNvbGxpZGVycykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlci5yZW1vdmVDb2xsaWRlcih0aGlzLmNvbGxpZGVyc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb2xsaWRlcnMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY29sbGlkZXJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNsZWFyVHJhbnNmb3JtTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5jbGVhclRhZ0xpc3RlbmVycygpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxheWVySW5kZXg7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbWFnZURhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWxwaGEgPSAxO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoMSwgMSk7XHJcbiAgICAgICAgdGhpcy5zY2FsZVggPSAxO1xyXG4gICAgICAgIHRoaXMuc2NhbGVZID0gMTtcclxuICAgICAgICB0aGlzLmFuY2hvci5zZXQoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5waXZvdC5zZXQoMCwgMCk7XHJcbiAgICAgICAgaWYodGhpcy5vblJlbW92ZWRGcm9tTWFwTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25SZW1vdmVkRnJvbU1hcExpc3RlbmVyc1tpXSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vblJlbW92ZWRGcm9tTWFwTGlzdGVuZXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9uUmVtb3ZlZEZyb21NYXBMaXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMub25MYXllckNoYW5nZUxpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLm9uTGF5ZXJDaGFuZ2VMaXN0ZW5lcnMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMub25MYXllckNoYW5nZUxpc3RlbmVyc1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5kYXRhXHJcbiAgICAgICAgdGhpcy5wb29sLnB1c2godGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHlTb3J0UG9pbnQoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueSArIHRoaXMuX3lTb3J0UG9pbnQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtDb2xsaXNpb25NYW5hZ2VyfSBmcm9tIFwiLi4vLi4vQ29sbGlzaW9uTWFuYWdlci9Db2xsaXNpb25NYW5hZ2VyXCI7XHJcbmltcG9ydCB7VGFnfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFnTWFuYWdlciB7XHJcbiAgICBfb25BZGRlZFRhZzogKG9iamVjdDogVGFnTWl4aW4sIHRhZzogVGFnKSA9PiB2b2lkO1xyXG4gICAgX29uUmVtb3ZlZFRhZzogKG9iamVjdDogVGFnTWl4aW4sIHRhZzogVGFnKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFnTWl4aW4ge1xyXG4gICAgcHVibGljIGFueVRhZ0FkZGVkTGlzdGVuZXJzOiBBcnJheTwodGFnKSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBhbnlUYWdSZW1vdmVkTGlzdGVuZXJzOiBBcnJheTwodGFnKSA9PiB2b2lkPlxyXG4gICAgcHVibGljIHRhZ0FkZGVkTGlzdGVuZXJzOiB7W3RhZzogIHN0cmluZ106IEFycmF5PCh0YWc6IFRhZykgPT4gdm9pZD4gfTtcclxuICAgIHB1YmxpYyB0YWdSZW1vdmVkTGlzdGVuZXJzOiB7W3RhZzogIHN0cmluZ106IEFycmF5PCh0YWc6IFRhZykgPT4gdm9pZD4gfTtcclxuICAgIHB1YmxpYyB0YWdzOiBBcnJheTxUYWc+O1xyXG4gICAgcmVhZG9ubHkgdGFnTWFuYWdlcjogVGFnTWFuYWdlcjtcclxuICAgIHN0YXRpYyBBcHBseU1peGluKG9iamVjdDogYW55KSB7XHJcbiAgICAgICAgb2JqZWN0LmNsZWFyVGFnTGlzdGVuZXJzID0gVGFnTWl4aW4ucHJvdG90eXBlLmNsZWFyVGFnTGlzdGVuZXJzLmJpbmQob2JqZWN0KTtcclxuICAgICAgICBvYmplY3Qub25UYWdBZGRlZCA9IFRhZ01peGluLnByb3RvdHlwZS5vblRhZ0FkZGVkLmJpbmQob2JqZWN0KTtcclxuICAgICAgICBvYmplY3Qub2ZmVGFnQWRkZWQgPSBUYWdNaXhpbi5wcm90b3R5cGUub2ZmVGFnQWRkZWQuYmluZChvYmplY3QpO1xyXG4gICAgICAgIG9iamVjdC5vblRhZ1JlbW92ZWQgPSBUYWdNaXhpbi5wcm90b3R5cGUub25UYWdSZW1vdmVkLmJpbmQob2JqZWN0KTtcclxuICAgICAgICBvYmplY3Qub2ZmVGFnUmVtb3ZlZCA9IFRhZ01peGluLnByb3RvdHlwZS5vZmZUYWdSZW1vdmVkLmJpbmQob2JqZWN0KTtcclxuICAgICAgICBvYmplY3QuYWRkVGFnID0gVGFnTWl4aW4ucHJvdG90eXBlLmFkZFRhZy5iaW5kKG9iamVjdCk7XHJcbiAgICAgICAgb2JqZWN0LnJlbW92ZVRhZyA9IFRhZ01peGluLnByb3RvdHlwZS5yZW1vdmVUYWcuYmluZChvYmplY3QpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhclRhZ0xpc3RlbmVycygpIHtcclxuICAgICAgICBpZih0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMudGFnQWRkZWRMaXN0ZW5lcnMpLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzW2tdLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWdBZGRlZExpc3RlbmVyc1trXTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFnQWRkZWRMaXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuYW55VGFnQWRkZWRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5hbnlUYWdBZGRlZExpc3RlbmVycy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hbnlUYWdBZGRlZExpc3RlbmVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy50YWdSZW1vdmVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMudGFnUmVtb3ZlZExpc3RlbmVycykuZm9yRWFjaChrID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1trXS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1trXTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFnUmVtb3ZlZExpc3RlbmVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW55VGFnUmVtb3ZlZExpc3RlbmVycy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25UYWdBZGRlZChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpIHtcclxuICAgICAgICBpZighdGFnKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzID0gW2NiXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW55VGFnQWRkZWRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKCcxIERPSU5HIE1JWElOIE9OIFRBRyBBRERFRCcpXHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpcyBmaXJzdCBwb3NpdGlvbiB1cGRhdGUsIHJlYmluZCBoYW5kbGVycy5cclxuICAgICAgICAgICAgICAgIHRoaXMudGFnQWRkZWRMaXN0ZW5lcnMgPSB7IFt0YWddOiBbY2JdIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzW3RhZ10pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzW3RhZ10gPSBbY2JdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzW3RhZ10ucHVzaChjYilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZUYWdBZGRlZChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpIHtcclxuICAgICAgICBpZighdGFnKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW55VGFnQWRkZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbnlUYWdBZGRlZExpc3RlbmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGFnQWRkZWRMaXN0ZW5lcnNbdGFnXS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy50YWdBZGRlZExpc3RlbmVyc1t0YWddW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnQWRkZWRMaXN0ZW5lcnNbdGFnXS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMudGFnQWRkZWRMaXN0ZW5lcnNbdGFnXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFnQWRkZWRMaXN0ZW5lcnNbdGFnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShPYmplY3Qua2V5cyh0aGlzLnRhZ0FkZGVkTGlzdGVuZXJzKS5sZW5ndGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50YWdBZGRlZExpc3RlbmVycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBtb3JlIGxpc3RlbmVycywgcmViaW5kLlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uVGFnUmVtb3ZlZChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpIHtcclxuICAgICAgICBpZighdGFnKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmFueVRhZ1JlbW92ZWRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW55VGFnUmVtb3ZlZExpc3RlbmVycyA9IFtjYl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFueVRhZ1JlbW92ZWRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKCcyIERPSU5HIE1JWElOIE9OIFRBRyBSRU1PVkVEJylcclxuICAgICAgICAgICAgaWYoIXRoaXMudGFnUmVtb3ZlZExpc3RlbmVycykge1xyXG4gICAgICAgICAgICAgICAgLy8gaXMgZmlyc3QgcG9zaXRpb24gdXBkYXRlLCByZWJpbmQgaGFuZGxlcnMuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ1JlbW92ZWRMaXN0ZW5lcnMgPSB7IFt0YWddOiBbY2JdIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRhZ1JlbW92ZWRMaXN0ZW5lcnNbdGFnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1t0YWddID0gW2NiXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWdSZW1vdmVkTGlzdGVuZXJzW3RhZ10ucHVzaChjYilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmVGFnUmVtb3ZlZChjYjogKHRhZzogVGFnKSA9PiB2b2lkLCB0YWc/OiBUYWcpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYoIXRhZykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFueVRhZ1JlbW92ZWRMaXN0ZW5lcnNbaV0gPT09IGNiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy50YWdSZW1vdmVkTGlzdGVuZXJzW3RhZ10ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1t0YWddW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1t0YWddLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy50YWdSZW1vdmVkTGlzdGVuZXJzW3RhZ10ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhZ1JlbW92ZWRMaXN0ZW5lcnNbdGFnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShPYmplY3Qua2V5cyh0aGlzLnRhZ1JlbW92ZWRMaXN0ZW5lcnMpLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhZ1JlbW92ZWRMaXN0ZW5lcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBsaXN0ZW5lcnMsIHJlYmluZC5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVGFnKHRhZzogVGFnLCBjaGVja0R1cGxpY2F0ZT10cnVlKSAge1xyXG4gICAgICAgIGlmKGNoZWNrRHVwbGljYXRlKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MuaW5jbHVkZXModGFnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihcIkZvdW5kIGR1cGxpY2F0ZSB0YWcgb24gY29sbGlkZXInLCBjb2xsaWRlciwgJ3RvIHR1cm4gdGhpcyBlcnJvciBvZmYgY2FsbCBhZGRUYWcgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiBmYWxzZSwgaWU6IGFkZFRhZygndGFnJywgZmFsc2UpXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIGR1cGxpY2F0ZSB0YWcgJHt0YWd9IHRvIGNvbGxpZGVyLmApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXRoaXMudGFncykge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ3MgPSBbdGFnXVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFncy5wdXNoKHRhZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMudGFnQWRkZWRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcignMyBET0lORyBNSVhJTiBPTiBUQUcgQURERUQgTElTVEVORVJTJylcclxuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy50YWdBZGRlZExpc3RlbmVyc1t0YWddO1xyXG4gICAgICAgICAgICBpZihsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0odGFnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFueVRhZ0FkZGVkTGlzdGVuZXJzW2ldKHRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcignNCBET0lORyBUQUcgTUFOQUdFUiBPTiBUQUcgQURFRC4uIElOIFRISVMgQ0FTRSBDT0xMSVNJT04gU1lTVEVNJylcclxuICAgICAgICB0aGlzLnRhZ01hbmFnZXIuX29uQWRkZWRUYWcodGhpcywgdGFnKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZW1vdmVUYWcodGFnOiBUYWcpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGFncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLnRhZ3NbaV0gPT09IHRhZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRhZ3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFncztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMudGFnUmVtb3ZlZExpc3RlbmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMudGFnUmVtb3ZlZExpc3RlbmVyc1t0YWddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaV0odGFnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudGFnTWFuYWdlci5fb25SZW1vdmVkVGFnKHRoaXMsIHRhZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmFueVRhZ1JlbW92ZWRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYW55VGFnUmVtb3ZlZExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbnlUYWdSZW1vdmVkTGlzdGVuZXJzW2ldKHRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtQb2ludH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7Q29sbGlzaW9uTWFuYWdlcn0gZnJvbSBcIi4uLy4uL0NvbGxpc2lvbk1hbmFnZXIvQ29sbGlzaW9uTWFuYWdlclwiO1xyXG5pbXBvcnQge1RhZ30gZnJvbSBcIi4uL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtRXZlbnRNaXhpbiB7XHJcbiAgICBwdWJsaWMgcmViaW5kUm90YXRpb25VcGRhdGU/OiBGdW5jdGlvbjtcclxuICAgIHB1YmxpYyByZWJpbmRQb3NpdGlvblVwZGF0ZT86IEZ1bmN0aW9uO1xyXG4gICAgcHVibGljIG9uUm90YXRpb25VcGRhdGVzPzogQXJyYXk8KGRlbHRhUmFkaWFuOiBudW1iZXIsIHdvcmxkUGl2b3Q/OiBQb2ludCkgPT4gdm9pZD47XHJcbiAgICBwdWJsaWMgb25Qb3NpdGlvblVwZGF0ZXM/OiBBcnJheTwoZFg6IG51bWJlciwgZFk6IG51bWJlcikgPT4gdm9pZD47XHJcbiAgICBzdGF0aWMgQXBwbHlNaXhpbihvYmplY3Q6IGFueSkge1xyXG4gICAgICAgIG9iamVjdC5jbGVhclRyYW5zZm9ybUxpc3RlbmVycyA9IFRyYW5zZm9ybUV2ZW50TWl4aW4ucHJvdG90eXBlLmNsZWFyVHJhbnNmb3JtTGlzdGVuZXJzLmJpbmQob2JqZWN0KTtcclxuICAgICAgICBvYmplY3Qub25Sb3RhdGlvblVwZGF0ZSA9IFRyYW5zZm9ybUV2ZW50TWl4aW4ucHJvdG90eXBlLm9uUm90YXRpb25VcGRhdGUuYmluZChvYmplY3QpO1xyXG4gICAgICAgIG9iamVjdC5vblBvc2l0aW9uVXBkYXRlID0gVHJhbnNmb3JtRXZlbnRNaXhpbi5wcm90b3R5cGUub25Qb3NpdGlvblVwZGF0ZS5iaW5kKG9iamVjdCk7XHJcbiAgICAgICAgb2JqZWN0Lm9mZlBvc2l0aW9uVXBkYXRlID0gVHJhbnNmb3JtRXZlbnRNaXhpbi5wcm90b3R5cGUub2ZmUG9zaXRpb25VcGRhdGUuYmluZChvYmplY3QpO1xyXG4gICAgICAgIG9iamVjdC5vZmZQb3NpdGlvblVwZGF0ZSA9IFRyYW5zZm9ybUV2ZW50TWl4aW4ucHJvdG90eXBlLm9mZlBvc2l0aW9uVXBkYXRlLmJpbmQob2JqZWN0KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjbGVhclRyYW5zZm9ybUxpc3RlbmVycygpIHtcclxuICAgICAgICBpZih0aGlzLm9uUm90YXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Sb3RhdGlvblVwZGF0ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMub25Sb3RhdGlvblVwZGF0ZXM7XHJcbiAgICAgICAgICAgIHRoaXMucmViaW5kUG9zaXRpb25VcGRhdGUgJiYgdGhpcy5yZWJpbmRQb3NpdGlvblVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm9uUG9zaXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Qb3NpdGlvblVwZGF0ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMub25Qb3NpdGlvblVwZGF0ZXM7XHJcbiAgICAgICAgICAgIHRoaXMucmViaW5kUm90YXRpb25VcGRhdGUgJiYgdGhpcy5yZWJpbmRSb3RhdGlvblVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvblBvc2l0aW9uVXBkYXRlKGNiOiAoZFg6IG51bWJlciwgZFk6IG51bWJlcikgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmKCF0aGlzLm9uUG9zaXRpb25VcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIC8vIGlzIGZpcnN0IHBvc2l0aW9uIHVwZGF0ZSwgcmViaW5kIGhhbmRsZXJzLlxyXG4gICAgICAgICAgICB0aGlzLm9uUG9zaXRpb25VcGRhdGVzID0gW2NiXTtcclxuICAgICAgICAgICAgdGhpcy5yZWJpbmRQb3NpdGlvblVwZGF0ZSAmJiB0aGlzLnJlYmluZFBvc2l0aW9uVXBkYXRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vblBvc2l0aW9uVXBkYXRlcy5wdXNoKGNiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmUG9zaXRpb25VcGRhdGUoY2I6IChkWDogbnVtYmVyLCBkWTogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMub25Qb3NpdGlvblVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5vblBvc2l0aW9uVXBkYXRlc1tpXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qb3NpdGlvblVwZGF0ZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMub25Qb3NpdGlvblVwZGF0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub25Qb3NpdGlvblVwZGF0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBsaXN0ZW5lcnMsIHJlYmluZCBpZiBkZWZpbmVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmViaW5kUG9zaXRpb25VcGRhdGUgJiYgdGhpcy5yZWJpbmRQb3NpdGlvblVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJvdGF0aW9uVXBkYXRlKGNiOiAoZFI6IG51bWJlciwgd29ybGRQaXZvdD86IFBvaW50KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYoIXRoaXMub25Sb3RhdGlvblVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgLy8gaXMgZmlyc3QgcG9zaXRpb24gdXBkYXRlLCByZWJpbmQgaGFuZGxlcnMuXHJcbiAgICAgICAgICAgIHRoaXMub25Sb3RhdGlvblVwZGF0ZXMgPSBbY2JdO1xyXG4gICAgICAgICAgICB0aGlzLnJlYmluZFJvdGF0aW9uVXBkYXRlICYmIHRoaXMucmViaW5kUm90YXRpb25VcGRhdGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uUm90YXRpb25VcGRhdGVzLnB1c2goY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZSb3RhdGlvblVwZGF0ZShjYjogKGRSOiBudW1iZXIsIHdvcmxkUGl2b3Q/OiBQb2ludCwgbG9jYWxQaXZvdD86IFBvaW50KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMub25Sb3RhdGlvblVwZGF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5vblJvdGF0aW9uVXBkYXRlc1tpXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Sb3RhdGlvblVwZGF0ZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMub25Sb3RhdGlvblVwZGF0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub25Sb3RhdGlvblVwZGF0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBsaXN0ZW5lcnMsIHJlYmluZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYmluZFJvdGF0aW9uVXBkYXRlICYmIHRoaXMucmViaW5kUm90YXRpb25VcGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0NvbGxpZGVyfSBmcm9tIFwiLi9Db2xsaWRlclwiO1xyXG5pbXBvcnQgeyBDb2xsaWRlclF1ZXJ5IH0gZnJvbSAnLi4vLi4vLi4vU2hhcmVkUnVudGltZS9zcmMvQ29sbGlkZXJRdWVyeSc7XHJcbmltcG9ydCB7XHJcbiAgICBDb2xsaWRlckRhdHVtLFxyXG4gICAgQ29sbGlzaW9uUGx1Z2luSGFuZGxlck1hcCxcclxuICAgIENvbGxpc2lvblBsdWdpbkhhbmRsZXJzLFxyXG4gICAgTmV3Q29sbGlkZXJQYXJhbXMsIFBvbHlnb24sXHJcbiAgICBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxuICAgIFNoYXBlRGF0YSwgVGFnXHJcbn0gZnJvbSBcIi4uL1dvcmxkUmVuZGVyZXIvdHlwZXNcIjtcclxuaW1wb3J0IHtJQ29sbGlzaW9uU3lzdGVtfSBmcm9tIFwiLi4vZXh0cmFzL0NvbGxpc2lvbi9JQ29sbGlzaW9uU3lzdGVtXCI7XHJcbmltcG9ydCB7Q29sbGlkZXJIb29rLCBJTWFwQ29sbGlzaW9uUGx1Z2luLH0gZnJvbSBcIi4uL1dvcmxkUmVuZGVyZXIvSVBsdWdpblwiO1xyXG5pbXBvcnQge0RlY29kZWRNYXBDaHVua0RhdGEsIERlY29kZWRNYXBNZXRhRGF0YX0gZnJvbSBcIi4uLy4uLy4uL0VuY29kZXIvc3JjL0RlY29kZXJcIjtcclxuaW1wb3J0IFdvcmxkIGZyb20gXCIuLlwiO1xyXG5pbXBvcnQge1BvbHlnb25Db2xsaWRlcn0gZnJvbSBcIi4vUG9seWdvbkNvbGxpZGVyXCI7XHJcbmltcG9ydCB7VGFnTWFuYWdlcn0gZnJvbSBcIi4uL1dvcmxkUmVuZGVyZXIvTWl4aW5zL1RhZ01peGluXCI7XHJcblxyXG50eXBlIFBsdWdpbkNvbGxpZGVySW5pdFRhZ01hcCA9IHtbdGFnOiBzdHJpbmddOiBBcnJheTwoY29sOiBDb2xsaWRlcjxTaGFwZURhdGE+KSA9PiB2b2lkPiB9O1xyXG50eXBlIFBsdWdpbkNvbGxpZGVyVXBkYXRlVGFnTWFwID0ge1t0YWc6IHN0cmluZ106IEFycmF5PChjb2w6IENvbGxpZGVyPFNoYXBlRGF0YT4sIHRhZzogc3RyaW5nKSA9PiB2b2lkPiB9O1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbGxpc2lvbk1hbmFnZXIgaW1wbGVtZW50cyBUYWdNYW5hZ2VyIHt0aWxlV29ybGRcclxuICAgIHByaXZhdGUgZG9Db2xsaXNpb25IYW5kbGVySXRlcmF0aW9uOiAoY29sQTogQ29sbGlkZXI8YW55PiwgY29sQjogQ29sbGlkZXI8YW55PiwgaGFuZGxlckxvb2t1cDogQ29sbGlzaW9uUGx1Z2luSGFuZGxlck1hcCkgPT4gdm9pZDtcclxuICAgIHJlYWRvbmx5IHBsdWdpbnM6IEFycmF5PElNYXBDb2xsaXNpb25QbHVnaW4+ID0gW107XHJcbiAgICByZWFkb25seSBsYXN0Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj4gPSBbXTtcclxuICAgIHByaXZhdGUgb25CZWZvcmVIYW5kbGVyczogQXJyYXk8KGxhc3RDb2xsaXNpb25zOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PikgPT4gdm9pZD47XHJcbiAgICBwcml2YXRlIG9uQWZ0ZXJIYW5kbGVyczogQXJyYXk8KG5ld0NvbGxpc2lvbnM6IEFycmF5PENvbGxpZGVyPFNoYXBlRGF0YT4+KSA9PiB2b2lkPjtcclxuXHJcbiAgICBwcml2YXRlIGFkZGVkQ29sbGlkZXJIYW5kbGVyczogQXJyYXk8Q29sbGlkZXJIb29rPjtcclxuICAgIHByaXZhdGUgcmVtb3ZlZENvbGxpZGVySGFuZGxlcnM6IEFycmF5PENvbGxpZGVySG9vaz47XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRlZFRhZ0hhbmRsZXJzOiB7W3RhZzogc3RyaW5nXTogQXJyYXk8Q29sbGlkZXJIb29rPiB9O1xyXG4gICAgcHJpdmF0ZSByZW1vdmVkVGFnSGFuZGxlcnM6IHtbdGFnOiBzdHJpbmddOiBBcnJheTxDb2xsaWRlckhvb2s+IH07XHJcblxyXG4gICAgcHJpdmF0ZSBwbHVnaW5Jbml0SGFuZGxlcnM6IFBsdWdpbkNvbGxpZGVySW5pdFRhZ01hcDtcclxuICAgIHByaXZhdGUgcGx1Z2luVGFnQUluaXRIYW5kbGVyczogUGx1Z2luQ29sbGlkZXJJbml0VGFnTWFwO1xyXG4gICAgcHJpdmF0ZSBwbHVnaW5UYWdCSW5pdEhhbmRsZXJzOiBQbHVnaW5Db2xsaWRlckluaXRUYWdNYXA7XHJcblxyXG4gICAgcHJpdmF0ZSBwbHVnaW5SZW1vdmVIYW5kbGVyczogUGx1Z2luQ29sbGlkZXJJbml0VGFnTWFwO1xyXG4gICAgcHJpdmF0ZSBwbHVnaW5UYWdBUmVtb3ZlSGFuZGxlcnM6IFBsdWdpbkNvbGxpZGVySW5pdFRhZ01hcDtcclxuICAgIHByaXZhdGUgcGx1Z2luVGFnQlJlbW92ZUhhbmRsZXJzOiBQbHVnaW5Db2xsaWRlckluaXRUYWdNYXA7XHJcblxyXG4gICAgcHJpdmF0ZSBwbHVnaW5Db2xsaWRlckFkZGVkVGFnQUhhbmRsZXJzOiBQbHVnaW5Db2xsaWRlclVwZGF0ZVRhZ01hcDtcclxuICAgIHByaXZhdGUgcGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0JIYW5kbGVyczogUGx1Z2luQ29sbGlkZXJVcGRhdGVUYWdNYXA7XHJcbiAgICBwcml2YXRlIHBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0FIYW5kbGVyczogUGx1Z2luQ29sbGlkZXJVcGRhdGVUYWdNYXA7XHJcbiAgICBwcml2YXRlIHBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0JIYW5kbGVyczogUGx1Z2luQ29sbGlkZXJVcGRhdGVUYWdNYXA7XHJcblxyXG4gICAgcmVhZG9ubHkgY29sbGlzaW9uSGFuZGxlcnNNYXA6IENvbGxpc2lvblBsdWdpbkhhbmRsZXJNYXAgPSB7fTtcclxuICAgIHJlYWRvbmx5IGVuZENvbGxpc2lvbkhhbmRsZXJzTWFwOiAgQ29sbGlzaW9uUGx1Z2luSGFuZGxlck1hcCA9IHt9O1xyXG4gICAgcmVhZG9ubHkgc3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcDogQ29sbGlzaW9uUGx1Z2luSGFuZGxlck1hcCA9IHt9O1xyXG4gICAgcmVhZG9ubHkgc2VxVG9UYWc6IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9ID0ge307XHJcbiAgICByZWFkb25seSByZWN0TGF5ZXJMb29rdXA6IEFycmF5PHtbY29sSWQ6IHN0cmluZ106IG51bWJlciB9PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgcG9seWdvbkxheWVyTG9va3VwOiBBcnJheTx7W2NvbElkOiBzdHJpbmddOiBudW1iZXJ9PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgcG9pbnRMYXllckxvb2t1cDogQXJyYXk8e1tjb2xJZDogc3RyaW5nXTogbnVtYmVyfT4gPSBbXTtcclxuICAgIHJlYWRvbmx5IGNpcmNsZUxheWVyTG9va3VwOiBBcnJheTx7W2NvbElkOiBzdHJpbmddOiBudW1iZXJ9PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgbGluZUxheWVyTG9va3VwOiBBcnJheTx7W2NvbElkOiBzdHJpbmddOiBudW1iZXJ9PiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgY2h1bmtDb2xsaWRlckxvb2t1cCA6IHtbaWQ6IHN0cmluZ106IENvbGxpZGVyPFNoYXBlRGF0YT4gfSA9IHt9O1xyXG5cclxuICAgIHB1YmxpYyBjb2xsaXNpb25TeXN0ZW06IElDb2xsaXNpb25TeXN0ZW07XHJcblxyXG4gICAgcHJpdmF0ZSBuZXh0VGFnU2VxOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgY2FjaGVkVHlwZUV4ZWN1dGlvbjoge1toYXNoOiBzdHJpbmddOiBBcnJheTxBcnJheTxDb2xsaXNpb25QbHVnaW5IYW5kbGVycz4+IH0gPSB7fTtcclxuICAgIHByaXZhdGUgY2FjaGVUeXBlT25OZXh0UnVuOiB7W2hhc2g6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBjYWNoZUNvdW50ID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb2xsaXNpb25TeXN0ZW0/OiBJQ29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgaWYoY29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sbGlzaW9uU3lzdGVtKGNvbGxpc2lvblN5c3RlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb2xsaWRlcnNXaXRoVGFncyh0YWdzOiBBcnJheTxzdHJpbmc+KSAgOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiB7XHJcbiAgICAgICAgaWYoIXRoaXMuY29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gY29sbGlzaW9uIHN5c3RlbSBpbXBsZW1lbnRlZCB0byBtYWtlIHF1ZXJ5LmApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxpc2lvblN5c3RlbS5nZXRDb2xsaWRlcnNXaXRoVGFncyh0YWdzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BZnRlckNvbGxpc2lvbnMoY2I6IChsYXN0Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj4pID0+IHZvaWQpIHtcclxuICAgICAgICBpZighdGhpcy5vbkFmdGVySGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFmdGVySGFuZGxlcnMgPSBbY2JdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25BZnRlckhhbmRsZXJzLnB1c2goY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkJlZm9yZUNvbGxpc2lvbnMoY2I6IChsYXN0Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj4pID0+IHZvaWQpIHtcclxuICAgICAgICBpZighdGhpcy5vbkJlZm9yZUhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25CZWZvcmVIYW5kbGVycyA9IFtjYl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vbkJlZm9yZUhhbmRsZXJzLnB1c2goY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZBZnRlckNvbGxpc2lvbnMoY2I6IChuZXdDb2xsaXNpb25zOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PikgPT4gdm9pZCkge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5vbkFmdGVySGFuZGxlcnMubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlKGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm9uQWZ0ZXJIYW5kbGVyc1tpXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25BZnRlckhhbmRsZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLm9uQWZ0ZXJIYW5kbGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vbkFmdGVySGFuZGxlcnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmQmVmb3JlQ29sbGlzaW9ucyhjYjogKG5ld0NvbGxpc2lvbnM6IEFycmF5PENvbGxpZGVyPFNoYXBlRGF0YT4+KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgbGV0IGkgPSB0aGlzLm9uQmVmb3JlSGFuZGxlcnMubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlKGktLSkge1xyXG4gICAgICAgICAgICBpZih0aGlzLm9uQmVmb3JlSGFuZGxlcnNbaV0gPT09IGNiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmVmb3JlSGFuZGxlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMub25CZWZvcmVIYW5kbGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vbkJlZm9yZUhhbmRsZXJzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkFkZGVkQ29sbGlkZXIoY2I6IENvbGxpZGVySG9vaywgdHlwZXM/OiBBcnJheTxzdHJpbmcgfCBudW1iZXI+KSB7XHJcbiAgICAgICAgaWYodHlwZXMpIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMuYWRkZWRUYWdIYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRlZFRhZ0hhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5hZGRlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRUYWdIYW5kbGVyc1t0eXBlc1tpXV0gPSBbY2JdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGVkVGFnSGFuZGxlcnNbdHlwZXNbaV1dLnB1c2goY2IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMuYWRkZWRDb2xsaWRlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZGVkQ29sbGlkZXJIYW5kbGVycyA9IFtjYl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZGVkQ29sbGlkZXJIYW5kbGVycy5wdXNoKGNiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZW1vdmVkQ29sbGlkZXIoY2I6IENvbGxpZGVySG9vaywgdHlwZXM/OiBBcnJheTxzdHJpbmcgfCBudW1iZXI+KSB7XHJcbiAgICAgICAgaWYodHlwZXMpIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMucmVtb3ZlZFRhZ0hhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWRUYWdIYW5kbGVycyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMucmVtb3ZlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXSA9IFtjYl07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXS5wdXNoKGNiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnJlbW92ZWRDb2xsaWRlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWRDb2xsaWRlckhhbmRsZXJzID0gW2NiXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlZENvbGxpZGVySGFuZGxlcnMucHVzaChjYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmQWRkZWRDb2xsaWRlcihjYjogQ29sbGlkZXJIb29rLCB0eXBlcz86IEFycmF5PHN0cmluZyB8IG51bWJlcj4pIHtcclxuICAgICAgICBpZih0eXBlcykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgOiBBcnJheTxDb2xsaWRlckhvb2s+ID0gdGhpcy5hZGRlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXTtcclxuICAgICAgICAgICAgICAgIGxldCBqID0gYS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB3aGlsZShqLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihhW2pdID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZGVkVGFnSGFuZGxlcnNbdHlwZXNbaV1dLnNwbGljZShqLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZighYS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5hZGRlZFRhZ0hhbmRsZXJzW3R5cGVzW2ldXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighT2JqZWN0LmtleXModGhpcy5hZGRlZFRhZ0hhbmRsZXJzKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFkZGVkVGFnSGFuZGxlcnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5hZGRlZENvbGxpZGVySGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWRkZWRDb2xsaWRlckhhbmRsZXJzW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRDb2xsaWRlckhhbmRsZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5hZGRlZENvbGxpZGVySGFuZGxlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFkZGVkQ29sbGlkZXJIYW5kbGVycztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZSZW1vdmVkQ29sbGlkZXIoY2I6IENvbGxpZGVySG9vaywgdHlwZXM/OiBBcnJheTxzdHJpbmcgfCBudW1iZXI+KSB7XHJcbiAgICAgICAgaWYodHlwZXMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhID10aGlzLnJlbW92ZWRUYWdIYW5kbGVyc1t0eXBlc1tpXV07XHJcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGEubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUoai0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYVtqXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBhLnNwbGljZShqLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZighYS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5yZW1vdmVkVGFnSGFuZGxlcnNbdHlwZXNbaV1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCFPYmplY3Qua2V5cyh0aGlzLnJlbW92ZWRUYWdIYW5kbGVycykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5yZW1vdmVkVGFnSGFuZGxlcnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucmVtb3ZlZENvbGxpZGVySGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMucmVtb3ZlZENvbGxpZGVySGFuZGxlcnNbaV0gPT09IGNiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVkQ29sbGlkZXJIYW5kbGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMucmVtb3ZlZENvbGxpZGVySGFuZGxlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlbW92ZWRDb2xsaWRlckhhbmRsZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIF9vbkFkZGVkVGFnKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+LCB0YWc6IFRhZykge1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uU3lzdGVtLm9uQWRkZWRUYWdUb0NvbGxpZGVyKGNvbGxpZGVyLCB0YWcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIF9vblJlbW92ZWRUYWcoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4sIHRhZzogc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0ub25SZW1vdmVkVGFnRnJvbUNvbGxpZGVyKGNvbGxpZGVyLCB0YWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRDaHVua0NvbGxpZGVycyhjaHVua0RhdGE6IERlY29kZWRNYXBDaHVua0RhdGEpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2h1bmtEYXRhLmxheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsYXllckRhdGEgPWNodW5rRGF0YS5sYXllcnNbaV07XHJcbiAgICAgICAgICAgIGlmKCFsYXllckRhdGEgfHwgIWxheWVyRGF0YS5jb2xsaWRlcnMpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaWRlcnMgPSBsYXllckRhdGEuY29sbGlkZXJzO1xyXG4gICAgICAgICAgICBjb2xsaWRlcnMucmVjdHMgJiYgdGhpcy5hZGRDb2xsaWRlcnNUb0xvb2t1cChpLCB0aGlzLnJlY3RMYXllckxvb2t1cCwgY29sbGlkZXJzLnJlY3RzKTtcclxuICAgICAgICAgICAgY29sbGlkZXJzLnBvbHlnb25zICYmIHRoaXMuYWRkQ29sbGlkZXJzVG9Mb29rdXAoaSwgdGhpcy5wb2x5Z29uTGF5ZXJMb29rdXAsIGNvbGxpZGVycy5wb2x5Z29ucyk7XHJcbiAgICAgICAgICAgIGNvbGxpZGVycy5wb2ludHMgJiYgdGhpcy5hZGRDb2xsaWRlcnNUb0xvb2t1cChpLCB0aGlzLnBvaW50TGF5ZXJMb29rdXAsIGNvbGxpZGVycy5wb2ludHMpO1xyXG4gICAgICAgICAgICBjb2xsaWRlcnMuY2lyY2xlcyAmJiB0aGlzLmFkZENvbGxpZGVyc1RvTG9va3VwKGksIHRoaXMuY2lyY2xlTGF5ZXJMb29rdXAsIGNvbGxpZGVycy5jaXJjbGVzKTtcclxuICAgICAgICAgICAgY29sbGlkZXJzLmxpbmVzICYmIHRoaXMuYWRkQ29sbGlkZXJzVG9Mb29rdXAoaSwgdGhpcy5saW5lTGF5ZXJMb29rdXAsIGNvbGxpZGVycy5saW5lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRDb2xsaWRlcnNUb0xvb2t1cCggbGF5ZXJJbmRleDogbnVtYmVyLCBzaGFwZUNvbGxpZGVyQ291bnRMb29rdXA6IEFycmF5PHtbY29sSWQ6IHN0cmluZ106IG51bWJlciB9PiwgY29sbGlkZXJzOiBBcnJheTxDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4+KSB7XHJcbiAgICAgICAgbGV0IGN1ckxvb2t1cCA9IHNoYXBlQ29sbGlkZXJDb3VudExvb2t1cFtsYXllckluZGV4XTtcclxuICAgICAgICBpZighY3VyTG9va3VwKSB7XHJcbiAgICAgICAgICAgIGN1ckxvb2t1cCA9IHt9O1xyXG4gICAgICAgICAgICBzaGFwZUNvbGxpZGVyQ291bnRMb29rdXBbbGF5ZXJJbmRleF0gPSBjdXJMb29rdXBcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNvbGxpZGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaWRlckRhdGEgOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4gPSBjb2xsaWRlcnNbal07XHJcbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgYSBjaHVuayBpcyB0cnlpbmcgdG8gaW5pdGlhbGl6ZSBhIGNvbGxpZGVyLCB3ZSBjcmVhdGUgdGhlIGNvbGxpZGVyIGFuZCBhZGQgaXQgdG8gdGhlIGxvb2t1cCBhbmQgdGhlIGNvdW50IGxvb2t1cC5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FkZGluZyB0aGUgaWQnLCBjb2xsaWRlckRhdGEuaWQsICdmb3IgdHlwZScsIGNvbGxpZGVyRGF0YS5zaGFwZVR5cGUpO1xyXG4gICAgICAgICAgICBpZighY3VyTG9va3VwW2NvbGxpZGVyRGF0YS5pZF0pIHtcclxuICAgICAgICAgICAgICAgIGN1ckxvb2t1cFtjb2xsaWRlckRhdGEuaWRdID0gMTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxpZGVyID0gY29sbGlkZXJEYXRhLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTiA/XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFBvbHlnb25Db2xsaWRlcihsYXllckluZGV4LCBjb2xsaWRlckRhdGEuc2hhcGVEYXRhIGFzIFBvbHlnb24sIGNvbGxpZGVyRGF0YS50YWdzLCBjb2xsaWRlckRhdGEuZHluYW1pYywgdGhpcywgY29sbGlkZXJEYXRhLnByb3BzKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IENvbGxpZGVyPFNoYXBlRGF0YT4obGF5ZXJJbmRleCwgY29sbGlkZXJEYXRhLnNoYXBlVHlwZSwgY29sbGlkZXJEYXRhLnNoYXBlRGF0YSwgY29sbGlkZXJEYXRhLnRhZ3MsIGNvbGxpZGVyRGF0YS5keW5hbWljLCB0aGlzLCBjb2xsaWRlckRhdGEucHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0Q29sbGlkZXIoY29sbGlkZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua0NvbGxpZGVyTG9va3VwW2Ake2NvbGxpZGVyRGF0YS5pZH1fJHtjb2xsaWRlckRhdGEuc2hhcGVUeXBlfV8ke2xheWVySW5kZXh9YF0gPSBjb2xsaWRlcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBqdXN0IGFkZCAxIHRvIHRoZSBjb3VudC5cclxuICAgICAgICAgICAgICAgIGN1ckxvb2t1cFtjb2xsaWRlckRhdGEuaWRdKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvdW50IGJlY2FtZScsIGN1ckxvb2t1cFtjb2xsaWRlckRhdGEuaWRdKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdENvbGxpZGVyKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2luaXQgY29sbGlkZXIgc2hhcGUgZGF0YTonLCB7IC4uLmNvbGxpZGVyLnNoYXBlRGF0YSB9KVxyXG4gICAgICAgIGlmKGNvbGxpZGVyLmR5bmFtaWMpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0ub25BZGRlZER5bmFtaWNDb2xsaWRlcihjb2xsaWRlcilcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvblN5c3RlbS5vbkFkZGVkU3RhdGljQ29sbGlkZXIoY29sbGlkZXIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighY29sbGlkZXIucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIC8vdG9kbzogcHJvYmFibHkgb3B0aW1pemUgdGhpcyBieSBvbmx5IGNyZWF0aW5nIGFycmF5cyB3ZSdsbCBuZWVkLlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpcEFzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBza2lwQnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNraXBBbGwgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNraXBTaW5nbGUgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBjb2xsaWRlci50YWdzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyVGFnID0gY29sbGlkZXIudGFnc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhlIHRhZyB3YXMnLCBjdXJUYWcsICdhbmQgdGhlIGNvbmRpdGlvbiByZXNvbHZlZCBhcycsKHRoaXMucGx1Z2luSW5pdEhhbmRsZXJzICYmIHRoaXMucGx1Z2luSW5pdEhhbmRsZXJzW2N1clRhZ10pKTtcclxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW5Jbml0SGFuZGxlcnMgJiYgdGhpcy5wbHVnaW5Jbml0SGFuZGxlcnNbY3VyVGFnXSkgJiYgdGhpcy5kb1RhZ0hhbmRsZXJzKGN1clRhZywgY29sbGlkZXIsIHRoaXMucGx1Z2luSW5pdEhhbmRsZXJzLCBza2lwQWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW5UYWdBSW5pdEhhbmRsZXJzICYmIHRoaXMucGx1Z2luVGFnQUluaXRIYW5kbGVyc1tjdXJUYWddKSAmJiB0aGlzLmRvVGFnSGFuZGxlcnMoY3VyVGFnLCBjb2xsaWRlciwgdGhpcy5wbHVnaW5UYWdBSW5pdEhhbmRsZXJzLCBza2lwQnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnBsdWdpblRhZ0JJbml0SGFuZGxlcnMgJiYgdGhpcy5wbHVnaW5UYWdCSW5pdEhhbmRsZXJzW2N1clRhZ10pICYmIHRoaXMuZG9UYWdIYW5kbGVycyhjdXJUYWcsIGNvbGxpZGVyLCB0aGlzLnBsdWdpblRhZ0JJbml0SGFuZGxlcnMsIHNraXBBcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWRkZWRUYWdIYW5kbGVycyAmJiB0aGlzLmFkZGVkVGFnSGFuZGxlcnNbY3VyVGFnXSkgJiYgdGhpcy5kb1RhZ0hhbmRsZXJzKGN1clRhZywgY29sbGlkZXIsIHRoaXMuYWRkZWRUYWdIYW5kbGVycywgc2tpcFNpbmdsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy5hZGRlZENvbGxpZGVySGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCB0aGlzLmFkZGVkQ29sbGlkZXJIYW5kbGVycy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkZWRDb2xsaWRlckhhbmRsZXJzW2tdKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBjb2xsaWRlciBpcyBhIHBvbHlnb24gd2Ugd2FudCB0byBpbml0aWFsaXplIHRoZSBsaW5lcy5cclxuICAgICAgICAgICAgaWYoY29sbGlkZXIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgKDxQb2x5Z29uQ29sbGlkZXI+Y29sbGlkZXIpLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0Q29sbGlkZXIoKDxQb2x5Z29uQ29sbGlkZXI+Y29sbGlkZXIpLmxpbmVzW2ldKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVDb2xsaWRlcihjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPikge1xyXG4gICAgICAgIGlmKGNvbGxpZGVyLmR5bmFtaWMpIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0ub25SZW1vdmVkRHluYW1pY0NvbGxpZGVyKGNvbGxpZGVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvblN5c3RlbS5vblJlbW92ZWRTdGF0aWNDb2xsaWRlcihjb2xsaWRlcilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRvbnQgd2FudCB0byBkbyB0aGVzZSBob29rcyBpZiB0aGUgY29sbGlkZXIgaGFzIGEgcGFyZW50LlxyXG4gICAgICAgIGlmKCFjb2xsaWRlci5wYXJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIC8vdG9kbzogcHJvYmFibHkgb3B0aW1pemUgdGhpcyBieSBvbmx5IGNyZWF0aW5nIGFycmF5cyB3ZSdsbCBuZWVkLlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpcEFzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBza2lwQnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNraXBBbGwgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNraXBTaW5nbGUgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sbGlkZXIudGFncy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1clRhZyA9IGNvbGxpZGVyLnRhZ3Nba107XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luUmVtb3ZlSGFuZGxlcnMgJiYgdGhpcy5wbHVnaW5SZW1vdmVIYW5kbGVyc1tjdXJUYWddKSAmJiB0aGlzLmRvVGFnSGFuZGxlcnMoY3VyVGFnLCBjb2xsaWRlciwgdGhpcy5wbHVnaW5SZW1vdmVIYW5kbGVycywgc2tpcEFsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMucGx1Z2luVGFnQVJlbW92ZUhhbmRsZXJzICYmIHRoaXMucGx1Z2luVGFnQVJlbW92ZUhhbmRsZXJzW2N1clRhZ10pICYmIHRoaXMuZG9UYWdIYW5kbGVycyhjdXJUYWcsIGNvbGxpZGVyLCB0aGlzLnBsdWdpblRhZ0FSZW1vdmVIYW5kbGVycywgc2tpcEJzKTtcclxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wbHVnaW5UYWdCUmVtb3ZlSGFuZGxlcnMgJiYgdGhpcy5wbHVnaW5UYWdCUmVtb3ZlSGFuZGxlcnNbY3VyVGFnXSkgJiYgdGhpcy5kb1RhZ0hhbmRsZXJzKGN1clRhZywgY29sbGlkZXIsIHRoaXMucGx1Z2luVGFnQlJlbW92ZUhhbmRsZXJzLCBza2lwQXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnJlbW92ZWRUYWdIYW5kbGVycyAmJiB0aGlzLnJlbW92ZWRUYWdIYW5kbGVyc1tjdXJUYWddKSAmJiB0aGlzLmRvVGFnSGFuZGxlcnMoY3VyVGFnLCBjb2xsaWRlciwgdGhpcy5yZW1vdmVkVGFnSGFuZGxlcnMsIHNraXBTaW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZWRDb2xsaWRlckhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMucmVtb3ZlZENvbGxpZGVySGFuZGxlcnMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZWRDb2xsaWRlckhhbmRsZXJzW2tdKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb2xsaWRlci5jbGVhckxpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBSZXNvbHZlQ29sbGlkZXJUeXBlKGNvbGxpZGVyOiBOZXdDb2xsaWRlclBhcmFtcykge1xyXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoY29sbGlkZXIuc2hhcGVEYXRhKSkge1xyXG4gICAgICAgICAgICBpZihjb2xsaWRlci5zaGFwZURhdGEubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29sbGlkZXIuc2hhcGVEYXRhLmhhc093blByb3BlcnR5KCd4JykpIHtcclxuICAgICAgICAgICAgaWYgKGNvbGxpZGVyLnNoYXBlRGF0YS5oYXNPd25Qcm9wZXJ0eSgncicpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUnVudGltZUNvbGxpZGVyU2hhcGUuQ0lSQ0xFXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sbGlkZXIuc2hhcGVEYXRhLmhhc093blByb3BlcnR5KCd3JykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNUXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5UXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHNoYXBlIGRhdGEgZm91bmQgb24gY29sbGlkZXIgJHtjb2xsaWRlcn1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkb1RhZ0hhbmRsZXJzKHRhZzogc3RyaW5nIHwgbnVtYmVyLCBjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPiwgaGFuZGxlck1hcDogUGx1Z2luQ29sbGlkZXJJbml0VGFnTWFwLCBza2lwOiBBcnJheTxDb2xsaWRlckhvb2s+KSB7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBoYW5kbGVyTWFwW3RhZ107XHJcbiAgICAgICAgaWYoaGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBtID0gMDsgbSA8IGhhbmRsZXJzLmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNraXAuaW5jbHVkZXMoaGFuZGxlcnNbbV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcC5wdXNoKGhhbmRsZXJzW21dKTtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyc1ttXShjb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUNodW5rQ29sbGlkZXJzKGNodW5rRGF0YTogRGVjb2RlZE1hcENodW5rRGF0YSkge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjaHVua0RhdGEubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxheWVyRGF0YSA9IGNodW5rRGF0YS5sYXllcnNbaV07XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJEYXRhIHx8ICFsYXllckRhdGEuY29sbGlkZXJzKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgY29sbGlkZXJzID0gbGF5ZXJEYXRhLmNvbGxpZGVycztcclxuICAgICAgICAgICAgY29sbGlkZXJzLnJlY3RzICYmIHRoaXMucmVtb3ZlQ29sbGlkZXJGcm9tTG9va3VwKGksIHRoaXMucmVjdExheWVyTG9va3VwW2ldLCBjb2xsaWRlcnMucmVjdHMpO1xyXG4gICAgICAgICAgICBjb2xsaWRlcnMucG9seWdvbnMgJiYgdGhpcy5yZW1vdmVDb2xsaWRlckZyb21Mb29rdXAoaSwgdGhpcy5wb2x5Z29uTGF5ZXJMb29rdXBbaV0sIGNvbGxpZGVycy5wb2x5Z29ucyk7XHJcbiAgICAgICAgICAgIGNvbGxpZGVycy5wb2ludHMgJiYgdGhpcy5yZW1vdmVDb2xsaWRlckZyb21Mb29rdXAoaSwgdGhpcy5wb2ludExheWVyTG9va3VwW2ldLCBjb2xsaWRlcnMucG9pbnRzKTtcclxuICAgICAgICAgICAgY29sbGlkZXJzLmNpcmNsZXMgJiYgdGhpcy5yZW1vdmVDb2xsaWRlckZyb21Mb29rdXAoaSwgdGhpcy5jaXJjbGVMYXllckxvb2t1cFtpXSwgY29sbGlkZXJzLmNpcmNsZXMpO1xyXG4gICAgICAgICAgICBjb2xsaWRlcnMubGluZXMgJiYgdGhpcy5yZW1vdmVDb2xsaWRlckZyb21Mb29rdXAoaSwgdGhpcy5saW5lTGF5ZXJMb29rdXBbaV0sIGNvbGxpZGVycy5saW5lcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlQ29sbGlkZXJGcm9tTG9va3VwKGxheWVySW5kZXg6IG51bWJlciwgbG9va3VwOiB7W2NvbElkOiBzdHJpbmddOiBudW1iZXIgfSwgY29sbGlkZXJzOiBBcnJheTxDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4+KSB7XHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNvbGxpZGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gY29sbGlkZXJzW2pdO1xyXG4gICAgICAgICAgICAvL3RvZG8gcmVtb3ZlIHRoaXMgYXNzZXJ0aW9uXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cnlpbmcgdG8gcmVtb3ZlIGlkJywgZGF0YS5pZCk7XHJcbiAgICAgICAgICAgIGlmKCEoZGF0YS5pZCBpbiBsb29rdXApKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzaGFwZSBpZCBzaG91bGQgYmUgaW4gbG9va3VwIGF0IHRoaXMgcG9pbnQuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBgJHtkYXRhLmlkfV8ke2RhdGEuc2hhcGVUeXBlfV8ke2xheWVySW5kZXh9YDtcclxuICAgICAgICAgICAgaWYoISgtLWxvb2t1cFtkYXRhLmlkXSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxpZGVyIDogQ29sbGlkZXI8U2hhcGVEYXRhPiA9IHRoaXMuY2h1bmtDb2xsaWRlckxvb2t1cFtoYXNoXTtcclxuICAgICAgICAgICAgICAgIGlmKCFjb2xsaWRlcikgdGhyb3cgbmV3IEVycm9yKGBTaG91bGQgaGF2ZSBmb3VuZCBjb2xsaWRlcmApO1xyXG4gICAgICAgICAgICAgICAgIWNvbGxpZGVyLnBhcmVudCAmJiB0aGlzLnJlbW92ZUNvbGxpZGVyKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBsb29rdXBbZGF0YS5pZF07XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaHVua0NvbGxpZGVyTG9va3VwW2hhc2hdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpIHtcclxuICAgICAgICBjb25zdCBjb2xsaWRlcnMgPSB0aGlzLmNvbGxpc2lvblN5c3RlbS5nZXRBbGxDb2xsaWRlcnMoKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29sbGlkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKCEoY29sbGlkZXJzW2ldLnBhcmVudCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRvbnQgd2FudCB0byBydW4gY2hpbGQgY29sbGlkZXJzIHRocm91Z2ggdGhlIHJlbW92ZSBmdW5jdGlvbiBzaW5jZSB0aGUgcGFyZW50IHdpbGwgZG8gdGhhdCBpdHNlbGYuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyKGNvbGxpZGVyc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0ub25DbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0TWFwKG1ldGFEYXRhIDogRGVjb2RlZE1hcE1ldGFEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0ub25Jbml0KG1ldGFEYXRhLm1hcFcsIG1ldGFEYXRhLm1hcEgpO1xyXG4gICAgICAgIGNvbnN0IGxheWVyQ291bnQgPSBtZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDtcclxuICAgICAgICB0aGlzLnJlY3RMYXllckxvb2t1cC5sZW5ndGggPSBsYXllckNvdW50O1xyXG4gICAgICAgIHRoaXMucG9pbnRMYXllckxvb2t1cC5sZW5ndGggPSBsYXllckNvdW50O1xyXG4gICAgICAgIHRoaXMucG9seWdvbkxheWVyTG9va3VwLmxlbmd0aCA9IGxheWVyQ291bnQ7XHJcbiAgICAgICAgdGhpcy5jaXJjbGVMYXllckxvb2t1cC5sZW5ndGggPSBsYXllckNvdW50O1xyXG4gICAgICAgIHRoaXMubGluZUxheWVyTG9va3VwLmxlbmd0aCA9IGxheWVyQ291bnQ7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxheWVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5yZWN0TGF5ZXJMb29rdXBbaV07XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBvbHlnb25MYXllckxvb2t1cFtpXTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMucG9pbnRMYXllckxvb2t1cFtpXTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2lyY2xlTGF5ZXJMb29rdXBbaV07XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpbmVMYXllckxvb2t1cFtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXQoc2VxVG9UYWcpIHtcclxuICAgICAgICBsZXQgbmV4dCA9IDA7XHJcbiAgICAgICAgT2JqZWN0LmtleXMoc2VxVG9UYWcpLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VxVG9UYWdba10gPSBzZXFUb1RhZ1trXTtcclxuICAgICAgICAgICAgbmV4dCA9IE1hdGgubWF4KHBhcnNlSW50KGspLCBuZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm5leHRUYWdTZXEgPSBuZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRDb2xsaXNpb25TeXN0ZW0oY29sbGlzaW9uU3lzdGVtOiBJQ29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcy5jb2xsaXNpb25TeXN0ZW07XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0gPSBjb2xsaXNpb25TeXN0ZW07XHJcbiAgICAgICAgaWYoY29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29sbGlkZXJDb3VwbGUgPSB0aGlzLmNvbGxpc2lvblN5c3RlbS5vbkFkZGVkQ29sbGlkZXJDb3VwbGUuYmluZCh0aGlzLmNvbGxpc2lvblN5c3RlbSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sbGlkZXJDb3VwbGUgPSB0aGlzLmNvbGxpc2lvblN5c3RlbS5vblJlbW92ZWRDb2xsaWRlckNvdXBsZS5iaW5kKHRoaXMuY29sbGlzaW9uU3lzdGVtKTtcclxuICAgICAgICB9IGVsc2UgaWYob2xkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29sbGlkZXJDb3VwbGUgPSBDb2xsaXNpb25NYW5hZ2VyLnByb3RvdHlwZS5hZGRDb2xsaWRlckNvdXBsZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyQ291cGxlID0gQ29sbGlzaW9uTWFuYWdlci5wcm90b3R5cGUucmVtb3ZlQ29sbGlkZXJDb3VwbGUuYmluZCh0aGlzKTtcclxuICAgICAgICB9IC8vIGVsc2Ugd2UgY29uc3RydWN0ZWQgaXQgd2l0aCBub3RoaW5nIGFuZCBhbGwgaXMgZ29vZFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGE6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IG5vTG9uZ2VyQ29sbGlkaW5nID0gWy4uLnRoaXMubGFzdENvbGxpc2lvbnNdO1xyXG4gICAgICAgIGlmKHRoaXMub25CZWZvcmVIYW5kbGVycykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5vbkJlZm9yZUhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmVmb3JlSGFuZGxlcnNbaV0obm9Mb25nZXJDb2xsaWRpbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbGxpc2lvbnMgOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiA9IHRoaXMuY29sbGlzaW9uU3lzdGVtLmdldENvbGxpc2lvbnMoZGVsdGEpO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RDb2xsaXNpb25zLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgIGlmKGNvbGxpc2lvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaXNpb25zLmxlbmd0aDsgaSs9Mikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sQSA9IGNvbGxpc2lvbnNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xCID0gY29sbGlzaW9uc1tpKzFdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdhc0NvbGxpZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IG5vTG9uZ2VyQ29sbGlkaW5nLmxlbmd0aDsgais9Mikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKChub0xvbmdlckNvbGxpZGluZ1tqXSA9PT0gY29sQSAmJiBub0xvbmdlckNvbGxpZGluZ1tqKzFdID09PSBjb2xCKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobm9Mb25nZXJDb2xsaWRpbmdbal0gPT09IGNvbEIgJiYgbm9Mb25nZXJDb2xsaWRpbmdbaisxXSA9PT0gY29sQSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgY29sbGlkaW5nLCByZW1vdmUgZnJvbSB0aGUgYXJyYXkgdGhhdCB0cmFja3Mgbm8gbG9uZ2VyIGNvbGxpZGluZyBjb2xsaXNpb25zIGFuZCBtYXJrIHdhcyBjb2xsaWRpbmcgYXMgdHJ1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9Mb25nZXJDb2xsaWRpbmcuc3BsaWNlKGosIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXNDb2xsaWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RDb2xsaXNpb25zLnB1c2goY29sQSwgY29sQik7XHJcbiAgICAgICAgICAgICAgICBpZih3YXNDb2xsaWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvQ29sbGlzaW9uSGFuZGxlckl0ZXJhdGlvbihjb2xBLCBjb2xCLCB0aGlzLmNvbGxpc2lvbkhhbmRsZXJzTWFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY29sQS5vbkxpc3RlbmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgY29sQS5vbkxpc3RlbmVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sQS5vbkxpc3RlbmVyc1tqXShjb2xCKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihjb2xCLm9uTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBjb2xCLm9uTGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xCLm9uTGlzdGVuZXJzW2pdKGNvbEEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvQ29sbGlzaW9uSGFuZGxlckl0ZXJhdGlvbihjb2xBLCBjb2xCLCB0aGlzLnN0YXJ0Q29sbGlzaW9uSGFuZGxlcnNNYXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihjb2xBLnN0YXJ0TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBjb2xBLnN0YXJ0TGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xBLnN0YXJ0TGlzdGVuZXJzW2pdKGNvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbEIuc3RhcnRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2xCLnN0YXJ0TGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xCLnN0YXJ0TGlzdGVuZXJzW2pdKGNvbEEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihub0xvbmdlckNvbGxpZGluZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5vTG9uZ2VyQ29sbGlkaW5nLmxlbmd0aDsgaSs9Mikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sQSA9IG5vTG9uZ2VyQ29sbGlkaW5nW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sQiA9IG5vTG9uZ2VyQ29sbGlkaW5nW2krMV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvQ29sbGlzaW9uSGFuZGxlckl0ZXJhdGlvbihjb2xBLCBjb2xCLCB0aGlzLmVuZENvbGxpc2lvbkhhbmRsZXJzTWFwKTtcclxuICAgICAgICAgICAgICAgIGlmKGNvbEEuZW5kTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNvbEEuZW5kTGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbEEuZW5kTGlzdGVuZXJzW2pdKGNvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGNvbEIuZW5kTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNvbEIuZW5kTGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbEIuZW5kTGlzdGVuZXJzW2pdKGNvbEEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5vbkFmdGVySGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMub25BZnRlckhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWZ0ZXJIYW5kbGVyc1tpXSh0aGlzLmxhc3RDb2xsaXNpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlUGx1Z2luKHBsdWdpbjogKCgpID0+IElNYXBDb2xsaXNpb25QbHVnaW4pIHwgSU1hcENvbGxpc2lvblBsdWdpbikgOiBib29sZWFuIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kT2JqZWN0ID0gdGhpcy5wbHVnaW5zW2ldID09PSBwbHVnaW47XHJcbiAgICAgICAgICAgIGlmKGZvdW5kT2JqZWN0IHx8ICh0aGlzLnBsdWdpbnNbaV0uX2YgJiYgdGhpcy5wbHVnaW5zW2ldLl9mID09PSBwbHVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHJlZmVyZW5jZSB0byB0aGUgYWN0dWFsIHBsdWdpbiBvYmplY3Qgd2l0aCB0aGUgdHlwaW5nIHBhcnNlZCBjb3JyZWN0bHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBfcGx1Z2luIDogSU1hcENvbGxpc2lvblBsdWdpbiA9IHRoaXMucGx1Z2luc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZGlkbnQgZmluZCB0aGUgYWN0dWFsIHBsdWdpbiwgb2JqZWN0IHRoYXQgbWVhbnMgd2UgZm91bmQgdGhlIGNvbnN0cnVjdGluZyBmdW5jdGlvbiBtYXRjaC5cclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBpZihfcGx1Z2luLm9uQmVmb3JlQ29sbGlzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2ZmQmVmb3JlQ29sbGlzaW9ucyhfcGx1Z2luLm9uQmVmb3JlQ29sbGlzaW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihfcGx1Z2luLm9uQWZ0ZXJDb2xsaXNpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZBZnRlckNvbGxpc2lvbnMoX3BsdWdpbi5vbkFmdGVyQ29sbGlzaW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMucGx1Z2lucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuc3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcCkgaWYgKHRoaXMuc3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcC5oYXNPd25Qcm9wZXJ0eShpKSkgZGVsZXRlIHRoaXMuc3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuY29sbGlzaW9uSGFuZGxlcnNNYXApIGlmICh0aGlzLmNvbGxpc2lvbkhhbmRsZXJzTWFwLmhhc093blByb3BlcnR5KGkpKSBkZWxldGUgdGhpcy5jb2xsaXNpb25IYW5kbGVyc01hcFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuZW5kQ29sbGlzaW9uSGFuZGxlcnNNYXApIGlmICh0aGlzLmVuZENvbGxpc2lvbkhhbmRsZXJzTWFwLmhhc093blByb3BlcnR5KGkpKSBkZWxldGUgdGhpcy5lbmRDb2xsaXNpb25IYW5kbGVyc01hcFtpXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlRnJvbVBsdWdpbk1hcCA9IChjYkhvb2s6IChjb2xBOiBDb2xsaWRlcjxTaGFwZURhdGE+LCBjb2xCOiBDb2xsaWRlcjxTaGFwZURhdGE+KSA9PiB2b2lkLCBoYW5kbGVyTWFwOiBDb2xsaXNpb25QbHVnaW5IYW5kbGVyTWFwKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgd2UgaGF2ZSBicyB3ZSBuZWVkIHRvIGxvb3AgYm90aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYXJBcnJheSA9IChwcm9wLCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJDb3VwbGVBcnJheSA9IGN1ckNvdXBsZXNbX3BsdWdpbi50YWdCc1tqXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjdXJDb3VwbGVBcnJheS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ291cGxlQXJyYXlba10gPT09IGNiSG9vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ291cGxlQXJyYXkuc3BsaWNlKGssIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBoYW5kbGVycyBmb3IgdGhlIGNvdXBsZSBhLWIsIGNhbiBkZWxldGUgaXQgZnJvbSB0aGUgbG9va3VwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3VyQ291cGxlQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJDb3VwbGVzW19wbHVnaW4udGFnQnNbal1dXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3BsdWdpbi50YWdCcyAmJiBfcGx1Z2luLnRhZ0JzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfcGx1Z2luLnRhZ0FzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQSA9IF9wbHVnaW4udGFnQXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyQ291cGxlcyA9IGhhbmRsZXJNYXBbdGFnQV0uY291cGxlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IF9wbHVnaW4udGFnQnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyQ291cGxlQXJyYXkgPSBjdXJDb3VwbGVzW19wbHVnaW4udGFnQnNbal1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGN1ckNvdXBsZUFycmF5Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ291cGxlQXJyYXlba10gPT09IGNiSG9vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvdXBsZUFycmF5LnNwbGljZShrLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBtb3JlIGhhbmRsZXJzIGZvciB0aGUgY291cGxlIGEtYiwgY2FuIGRlbGV0ZSBpdCBmcm9tIHRoZSBsb29rdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3VyQ291cGxlQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY3VyQ291cGxlc1tfcGx1Z2luLnRhZ0JzW2pdXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm8gbW9yZSB0YWcgYnMgZm91bmQgZm9yIHRoZSB0YWcgYSBjb3VwbGUsIGRlbGV0ZSB0aGUgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGN1ckNvdXBsZXMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlck1hcFt0YWdBXS5jb3VwbGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB0YWcgYSBhbHNvIGRpZG50IGhhdmUgYW55IHNpbmdsZXMsIHNvIGRlbGV0ZSB0aGUgdGFnIGZyb20gdGhlIGhhbmRsZXIgbWFwIGVudGlyZWx5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXJNYXBbdGFnQV0uc2luZ2xlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJNYXBbdGFnQV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IF9wbHVnaW4udGFnQXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdBID0gX3BsdWdpbi50YWdBc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJTaW5nbGVBcnJheSA9IGhhbmRsZXJNYXBbdGFnQV0uc2luZ2xlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1clNpbmdsZUFycmF5Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTaW5nbGVBcnJheVtqXSA9PT0gY2JIb29rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTaW5nbGVBcnJheS5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1clNpbmdsZUFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaGFuZGxlck1hcFt0YWdBXS5zaW5nbGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXJNYXBbdGFnQV0uY291cGxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGhhbmRsZXJNYXBbdGFnQV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9wbHVnaW4ub25Db2xsaXNpb25TdGFydCAmJiByZW1vdmVGcm9tUGx1Z2luTWFwKF9wbHVnaW4ub25Db2xsaXNpb25TdGFydCwgdGhpcy5zdGFydENvbGxpc2lvbkhhbmRsZXJzTWFwKTtcclxuICAgICAgICAgICAgICAgICAgICBfcGx1Z2luLm9uQ29sbGlzaW9uICYmIHJlbW92ZUZyb21QbHVnaW5NYXAoX3BsdWdpbi5vbkNvbGxpc2lvbiwgdGhpcy5jb2xsaXNpb25IYW5kbGVyc01hcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BsdWdpbi5vbkNvbGxpc2lvbkVuZCAmJiByZW1vdmVGcm9tUGx1Z2luTWFwKF9wbHVnaW4ub25Db2xsaXNpb25FbmQsIHRoaXMuZW5kQ29sbGlzaW9uSGFuZGxlcnNNYXApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVUYWdIb29rcyA9ICh0YWdzLCBob29rOiBDb2xsaWRlckhvb2ssIGxvb2t1cCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVtb3ZlZEFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLmZvckVhY2godGFnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXJzID0gbG9va3VwW3RhZ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgaGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihoYW5kbGVyc1tqXSA9PT0gaG9vaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFoYW5kbGVycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkQWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbG9va3VwW3RhZ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkaWRudCByZW1vdmUgYWxsIG9mIGEgdGFnIGxvb2t1cCB0aGVuIHdlIGNhbiByZXR1cm4gMSBjYXVzZSB3ZSBrbm93IHRoZXJlcyBzdGlsbCBhcnJheXMgbGVmdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVtb3ZlZEFsbCkgcmV0dXJuIE9iamVjdC5rZXlzKGxvb2t1cCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXNlIGFyZSBpbmxpbmUgdG8gc2F2ZSBzb21lIHNwYWNlLCBidXQgcHJldHR5IG11Y2ggaWYgdGhlIHBsdWdpbiBpbXBsZW1lbnRzIHRoZSBob29rLCBpdGxsIGNhbGwgdGhlIHJlbW92ZVRhZ0hvb2tzIGFuZCBpZiB0aGF0IHJldHVybnMgMCwgaXRsbCByZW1vdmUgdGhlIGxvb2t1cCBlbnRpcmVseS5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5pbnN0YWxsIGxpc3RlbmVycyBmb3Igd2hlbiBhIGNvbGxpZGVyIHdpdGggYSBwbHVnaW4gdGFnIGlzIGFkZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSAmJiAhcmVtb3ZlVGFnSG9va3MoX3BsdWdpbi50YWdBcywgX3BsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSwgdGhpcy5wbHVnaW5UYWdBSW5pdEhhbmRsZXJzKSkgeyBkZWxldGUgdGhpcy5wbHVnaW5UYWdBSW5pdEhhbmRsZXJzO307XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQiAmJiAhcmVtb3ZlVGFnSG9va3MoX3BsdWdpbi50YWdCcywgX3BsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQiwgdGhpcy5wbHVnaW5UYWdCSW5pdEhhbmRsZXJzKSkgeyBkZWxldGUgdGhpcy5wbHVnaW5UYWdCSW5pdEhhbmRsZXJzO307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHVuaW5zdGFsbCBsaXN0ZW5lcnMgZm9yIHdoZW4gYSBjb2xsaWRlciBpcyBhZGRlZCB3aXRoIGEgdGFnLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9wbHVnaW4ub25Db2xsaWRlckFkZGVkVGFnQSAmJiAhcmVtb3ZlVGFnSG9va3MoX3BsdWdpbi50YWdBcywgX3BsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSwgdGhpcy5wbHVnaW5Db2xsaWRlckFkZGVkVGFnQUhhbmRsZXJzKSkgeyBkZWxldGUgdGhpcy5wbHVnaW5Db2xsaWRlckFkZGVkVGFnQUhhbmRsZXJzO307XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vbkNvbGxpZGVyQWRkZWRUYWdCICYmICFyZW1vdmVUYWdIb29rcyhfcGx1Z2luLnRhZ0JzLCBfcGx1Z2luLm9uQ29sbGlkZXJBZGRlZFRhZ0IsIHRoaXMucGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0JIYW5kbGVycykpIHsgZGVsZXRlIHRoaXMucGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0JIYW5kbGVyczt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9wbHVnaW4ub25Db2xsaWRlclJlbW92ZWRUYWdBICYmICFyZW1vdmVUYWdIb29rcyhfcGx1Z2luLnRhZ0FzLCBfcGx1Z2luLm9uQ29sbGlkZXJSZW1vdmVkVGFnQSwgdGhpcy5wbHVnaW5Db2xsaWRlclJlbW92ZWRUYWdBSGFuZGxlcnMpKSB7IGRlbGV0ZSB0aGlzLnBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0FIYW5kbGVyczt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9wbHVnaW4ub25Db2xsaWRlclJlbW92ZWRUYWdCICYmICFyZW1vdmVUYWdIb29rcyhfcGx1Z2luLnRhZ0JzLCBfcGx1Z2luLm9uQ29sbGlkZXJSZW1vdmVkVGFnQiwgdGhpcy5wbHVnaW5Db2xsaWRlclJlbW92ZWRUYWdCSGFuZGxlcnMpKSB7IGRlbGV0ZSB0aGlzLnBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0JIYW5kbGVyczt9O1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vbkFkZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFfcGx1Z2luLnRhZ0FzIHx8ICFfcGx1Z2luLnRhZ0FzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmZBZGRlZENvbGxpZGVyKF9wbHVnaW4ub25BZGRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZVRhZ0hvb2tzKF9wbHVnaW4udGFnQXMsIF9wbHVnaW4ub25BZGRlZCwgdGhpcy5wbHVnaW5Jbml0SGFuZGxlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luSW5pdEhhbmRsZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfcGx1Z2luLnRhZ0JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IF9wbHVnaW4udGFnQnMuZmlsdGVyKHRhZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhX3BsdWdpbi50YWdBcy5pbmNsdWRlcyh0YWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlVGFnSG9va3ModGFncywgX3BsdWdpbi5vbkFkZGVkLCB0aGlzLnBsdWdpbkluaXRIYW5kbGVycykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luSW5pdEhhbmRsZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vblJlbW92ZWRUYWdBICYmICFyZW1vdmVUYWdIb29rcyhfcGx1Z2luLnRhZ0FzLCBfcGx1Z2luLm9uUmVtb3ZlZFRhZ0EsIHRoaXMucGx1Z2luVGFnQVJlbW92ZUhhbmRsZXJzKSkge2RlbGV0ZSB0aGlzLnBsdWdpblRhZ0FSZW1vdmVIYW5kbGVyczt9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vblJlbW92ZWRUYWdCICYmICFyZW1vdmVUYWdIb29rcyhfcGx1Z2luLnRhZ0JzLCBfcGx1Z2luLm9uUmVtb3ZlZFRhZ0IsIHRoaXMucGx1Z2luVGFnQlJlbW92ZUhhbmRsZXJzKSkge2RlbGV0ZSB0aGlzLnBsdWdpblRhZ0JSZW1vdmVIYW5kbGVyczt9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoX3BsdWdpbi5vblJlbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIV9wbHVnaW4udGFnQXMgfHwgIV9wbHVnaW4udGFnQXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZlJlbW92ZWRDb2xsaWRlcihfcGx1Z2luLm9uUmVtb3ZlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBsdWdpbiBkaWRudCBoYXZlIHRhZ0FzIHNwZWNpZmllZCBzbyB3ZSBjYWxsIHRoZSBwbHVnaW4gaGFuZGxlciBvbiBhbGwgY29sbGlkZXJzIHdpdGggdGhlIHRhZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZVRhZ0hvb2tzKF9wbHVnaW4udGFnQXMsIF9wbHVnaW4ub25SZW1vdmVkLCB0aGlzLnBsdWdpblJlbW92ZUhhbmRsZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luUmVtb3ZlSGFuZGxlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3BsdWdpbi50YWdCcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFncyA9IF9wbHVnaW4udGFnQnMuZmlsdGVyKHRhZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFfcGx1Z2luLnRhZ0FzLmluY2x1ZGVzKHRhZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlVGFnSG9va3ModGFncywgX3BsdWdpbi5vblJlbW92ZWQsIHRoaXMucGx1Z2luUmVtb3ZlSGFuZGxlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luUmVtb3ZlSGFuZGxlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKF9wbHVnaW4udGFnQXMgJiYgX3BsdWdpbi50YWdCcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDxfcGx1Z2luLnRhZ0FzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgX3BsdWdpbi50YWdCcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uU3lzdGVtLm9uUmVtb3ZlZENvbGxpZGVyQ291cGxlKF9wbHVnaW4udGFnQXNbaV0sIF9wbHVnaW4udGFnQnNbal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhY2hlVHlwZU9uTmV4dFJ1biA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2FjaGVkVHlwZUV4ZWN1dGlvbiA9IHt9O1xyXG4gICAgICAgIHRoaXMucmVhcHBseVBsdWdpbnMoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkQ29sbGlkZXJDb3VwbGUodGFnQTogVGFnLCB0YWdCOiBUYWcpIHt0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbGxpc2lvbiBzeXN0ZW0gaXMgYmVpbmcgdXNlZC4nKX1cclxuICAgIHB1YmxpYyByZW1vdmVDb2xsaWRlckNvdXBsZSh0YWdBOiBUYWcsIHRhZ0I6IFRhZykge3Rocm93IG5ldyBFcnJvcignTm8gY29sbGlzaW9uIHN5c3RlbSBpcyBiZWluZyB1c2VkLicpfVxyXG4gICAgcHVibGljIGFkZENvbGxpZGVyQ291cGxlcyh0YWdzOiBBcnJheTxBcnJheTxUYWc+Pikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29sbGlkZXJDb3VwbGUodGFnc1tpXVswXSwgdGFnc1tpXVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZUNvbGxpZGVyQ291cGxlcyh0YWdzOiBBcnJheTxBcnJheTxUYWc+Pikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sbGlkZXJDb3VwbGUodGFnc1tpXVswXSwgdGFnc1tpXVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYWRkUGx1Z2luKHBsdWdpbjogSU1hcENvbGxpc2lvblBsdWdpbiwgd29ybGQ6IFdvcmxkLCBvcHRzPzogYW55KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BsdWdpbiBvcHRzOicsIG9wdHMpO1xyXG4gICAgICAgIGlmKCF0aGlzLnZhbGlkYXRlUGx1Z2luKHBsdWdpbikpIHJldHVybjtcclxuICAgICAgICBwbHVnaW4uaW5pdCAmJiBwbHVnaW4uaW5pdCh3b3JsZCwgb3B0cyk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5zLnB1c2gocGx1Z2luIGFzIElNYXBDb2xsaXNpb25QbHVnaW4pO1xyXG5cclxuICAgICAgICBpZihwbHVnaW4ub25Db2xsaXNpb25TdGFydCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZFRvUGx1Z2luTWFwKHBsdWdpbiwgcGx1Z2luLm9uQ29sbGlzaW9uU3RhcnQsIHRoaXMuc3RhcnRDb2xsaXNpb25IYW5kbGVyc01hcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBsdWdpbi5vbkNvbGxpc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLmFkZFRvUGx1Z2luTWFwKHBsdWdpbiwgcGx1Z2luLm9uQ29sbGlzaW9uLCB0aGlzLmNvbGxpc2lvbkhhbmRsZXJzTWFwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uQ29sbGlzaW9uRW5kKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVG9QbHVnaW5NYXAocGx1Z2luLCBwbHVnaW4ub25Db2xsaXNpb25FbmQsIHRoaXMuZW5kQ29sbGlzaW9uSGFuZGxlcnNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25CZWZvcmVDb2xsaXNpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25CZWZvcmVDb2xsaXNpb25zKHBsdWdpbi5vbkJlZm9yZUNvbGxpc2lvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25BZnRlckNvbGxpc2lvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkFmdGVyQ29sbGlzaW9ucyhwbHVnaW4ub25BZnRlckNvbGxpc2lvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaW5pdFRhZ0hvb2tzID0gKHRhZ3MsIGhhbmRsZXI6IENvbGxpZGVySG9vaywgbG9va3VwOiBQbHVnaW5Db2xsaWRlckluaXRUYWdNYXAgfCBQbHVnaW5Db2xsaWRlclVwZGF0ZVRhZ01hcCkgPT4ge1xyXG4gICAgICAgICAgICB0YWdzLmZvckVhY2godCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihsb29rdXBbdF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsb29rdXBbdF0ucHVzaChoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwW3RdID0gW2hhbmRsZXJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGluc3RhbGwgdGhlIGxpc3RlbmVycyBmb3Igd2hlbiBjb2xsaWRlcnMgYWRkL3JlbW92ZSB0YWdzLlxyXG4gICAgICAgIGlmKHBsdWdpbi5vbkNvbGxpZGVyQWRkZWRUYWdBKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnBsdWdpbkNvbGxpZGVyQWRkZWRUYWdBSGFuZGxlcnMpIHRoaXMucGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0FIYW5kbGVycyA9IHt9O1xyXG4gICAgICAgICAgICBpbml0VGFnSG9va3MocGx1Z2luLnRhZ0FzLCBwbHVnaW4ub25Db2xsaWRlckFkZGVkVGFnQSwgdGhpcy5wbHVnaW5Db2xsaWRlckFkZGVkVGFnQUhhbmRsZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uQ29sbGlkZXJBZGRlZFRhZ0IpIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMucGx1Z2luQ29sbGlkZXJBZGRlZFRhZ0JIYW5kbGVycykgdGhpcy5wbHVnaW5Db2xsaWRlckFkZGVkVGFnQkhhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgIGluaXRUYWdIb29rcyhwbHVnaW4udGFnQnMsIHBsdWdpbi5vbkNvbGxpZGVyQWRkZWRUYWdCLCB0aGlzLnBsdWdpbkNvbGxpZGVyQWRkZWRUYWdCSGFuZGxlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25Db2xsaWRlclJlbW92ZWRUYWdBKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0FIYW5kbGVycykgdGhpcy5wbHVnaW5Db2xsaWRlclJlbW92ZWRUYWdBSGFuZGxlcnMgPSB7fTtcclxuICAgICAgICAgICAgaW5pdFRhZ0hvb2tzKHBsdWdpbi50YWdBcywgcGx1Z2luLm9uQ29sbGlkZXJBZGRlZFRhZ0EsIHRoaXMucGx1Z2luQ29sbGlkZXJSZW1vdmVkVGFnQUhhbmRsZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uQ29sbGlkZXJSZW1vdmVkVGFnQikge1xyXG4gICAgICAgICAgICBpZighdGhpcy5wbHVnaW5Db2xsaWRlclJlbW92ZWRUYWdCSGFuZGxlcnMpIHRoaXMucGx1Z2luQ29sbGlkZXJSZW1vdmVkVGFnQkhhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgIGluaXRUYWdIb29rcyhwbHVnaW4udGFnQnMsIHBsdWdpbi5vbkNvbGxpZGVyQWRkZWRUYWdCLCB0aGlzLnBsdWdpbkNvbGxpZGVyUmVtb3ZlZFRhZ0JIYW5kbGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpbnN0YWxsIHRoZSBsaXN0ZW5lcnMgZm9yIHdoZW4gYSBjb2xsaWRlciB3aXRoIGEgdGFnIGlzIGFkZGVkIHRvIHRoZSBnYW1lLlxyXG4gICAgICAgIGlmKHBsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSkge1xyXG4gICAgICAgICAgICBpZighdGhpcy5wbHVnaW5UYWdBSW5pdEhhbmRsZXJzKSB0aGlzLnBsdWdpblRhZ0FJbml0SGFuZGxlcnMgPSB7fTtcclxuICAgICAgICAgICAgaW5pdFRhZ0hvb2tzKHBsdWdpbi50YWdBcywgcGx1Z2luLm9uQWRkZWRDb2xsaWRlcldpdGhUYWdBLCB0aGlzLnBsdWdpblRhZ0FJbml0SGFuZGxlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25BZGRlZENvbGxpZGVyV2l0aFRhZ0IpIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMucGx1Z2luVGFnQkluaXRIYW5kbGVycykgdGhpcy5wbHVnaW5UYWdCSW5pdEhhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgIGluaXRUYWdIb29rcyhwbHVnaW4udGFnQnMsIHBsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQiwgdGhpcy5wbHVnaW5UYWdCSW5pdEhhbmRsZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uQWRkZWQpIHtcclxuICAgICAgICAgICAgaWYoIXBsdWdpbi50YWdBcyB8fCAhcGx1Z2luLnRhZ0FzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFkZGVkQ29sbGlkZXIocGx1Z2luLm9uQWRkZWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMucGx1Z2luSW5pdEhhbmRsZXJzKSB0aGlzLnBsdWdpbkluaXRIYW5kbGVycyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlVGFncyA9IHBsdWdpbi50YWdBcyAmJiBwbHVnaW4udGFnQnMgPyBbLi4ucGx1Z2luLnRhZ0FzLCAuLi5wbHVnaW4udGFnQnNdLmZpbHRlcigoaXRlbSwgaSwgYXIpID0+IGFyLmluZGV4T2YoaXRlbSkgPT09IGkpIDogcGx1Z2luLnRhZ0FzO1xyXG4gICAgICAgICAgICAgICAgaW5pdFRhZ0hvb2tzKHVuaXF1ZVRhZ3MsIHBsdWdpbi5vbkFkZGVkLCB0aGlzLnBsdWdpbkluaXRIYW5kbGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uUmVtb3ZlZFRhZ0EpIHtcclxuICAgICAgICAgICAgaWYoIXRoaXMucGx1Z2luVGFnQVJlbW92ZUhhbmRsZXJzKSB0aGlzLnBsdWdpblRhZ0FSZW1vdmVIYW5kbGVycyA9IHt9O1xyXG4gICAgICAgICAgICBpbml0VGFnSG9va3MocGx1Z2luLnRhZ0FzLCBwbHVnaW4ub25SZW1vdmVkVGFnQSwgdGhpcy5wbHVnaW5UYWdBUmVtb3ZlSGFuZGxlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25SZW1vdmVkVGFnQikge1xyXG4gICAgICAgICAgICBpZighdGhpcy5wbHVnaW5UYWdCUmVtb3ZlSGFuZGxlcnMpIHRoaXMucGx1Z2luVGFnQlJlbW92ZUhhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgIGluaXRUYWdIb29rcyhwbHVnaW4udGFnQnMsIHBsdWdpbi5vblJlbW92ZWRUYWdCLCB0aGlzLnBsdWdpblRhZ0JSZW1vdmVIYW5kbGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBsdWdpbi5vblJlbW92ZWQpIHtcclxuICAgICAgICAgICAgaWYoIXBsdWdpbi50YWdBcyB8fCAhcGx1Z2luLnRhZ0FzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblJlbW92ZWRDb2xsaWRlcihwbHVnaW4ub25SZW1vdmVkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnBsdWdpblJlbW92ZUhhbmRsZXJzKSB0aGlzLnBsdWdpblJlbW92ZUhhbmRsZXJzID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVUYWdzID0gcGx1Z2luLnRhZ0FzICYmIHBsdWdpbi50YWdCcyA/IFsuLi5wbHVnaW4udGFnQXMsIC4uLnBsdWdpbi50YWdCc10uZmlsdGVyKChpdGVtLCBpLCBhcikgPT4gYXIuaW5kZXhPZihpdGVtKSA9PT0gaSkgOiBwbHVnaW4udGFnQXM7XHJcbiAgICAgICAgICAgICAgICBpbml0VGFnSG9va3ModW5pcXVlVGFncywgcGx1Z2luLm9uUmVtb3ZlZCwgdGhpcy5wbHVnaW5SZW1vdmVIYW5kbGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXRoaXMuY29sbGlzaW9uU3lzdGVtKSByZXR1cm47XHJcbiAgICAgICAgaWYocGx1Z2luLnRhZ0FzICYmIHBsdWdpbi50YWdCcykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDxwbHVnaW4udGFnQXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBwbHVnaW4udGFnQnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvblN5c3RlbS5vbkFkZGVkQ29sbGlkZXJDb3VwbGUocGx1Z2luLnRhZ0FzW2ldLCBwbHVnaW4udGFnQnNbal0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZWFwcGx5UGx1Z2lucygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkVG9QbHVnaW5NYXAocGx1Z2luOiBJTWFwQ29sbGlzaW9uUGx1Z2luLCBjYkhvb2s6IChjb2xBOiBDb2xsaWRlcjxTaGFwZURhdGE+LCBjb2xCOiBDb2xsaWRlcjxTaGFwZURhdGE+KSA9PiB2b2lkLCBoYW5kbGVyTWFwOiBDb2xsaXNpb25QbHVnaW5IYW5kbGVyTWFwKSA6IHZvaWQge1xyXG4gICAgICAgIGlmKHBsdWdpbi50YWdCcyAmJiBwbHVnaW4udGFnQnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwbHVnaW4udGFnQXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0EgPSBwbHVnaW4udGFnQXNbaV07XHJcbiAgICAgICAgICAgICAgICBpZighaGFuZGxlck1hcFt0YWdBXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJNYXBbdGFnQV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdXBsZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWhhbmRsZXJNYXBbdGFnQV0uY291cGxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyTWFwW3RhZ0FdLmNvdXBsZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgcGx1Z2luLnRhZ0JzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQiA9IHBsdWdpbi50YWdCc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZighaGFuZGxlck1hcFt0YWdBXS5jb3VwbGVzW3RhZ0JdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJNYXBbdGFnQV0uY291cGxlc1t0YWdCXSA9IFtjYkhvb2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJNYXBbdGFnQV0uY291cGxlc1t0YWdCXS5wdXNoKGNiSG9vayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBsdWdpbi50YWdBcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFnQSA9IHBsdWdpbi50YWdBc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmKCFoYW5kbGVyTWFwW3RhZ0FdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlck1hcFt0YWdBXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlczogW2NiSG9va10sXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFoYW5kbGVyTWFwW3RhZ0FdLnNpbmdsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyTWFwW3RhZ0FdLnNpbmdsZXMgPSBbY2JIb29rXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlck1hcFt0YWdBXS5zaW5nbGVzLnB1c2goY2JIb29rKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlUGx1Z2luKHBsdWdpbjogSU1hcENvbGxpc2lvblBsdWdpbikgOiBib29sZWFuIHtcclxuICAgICAgICBpZih0aGlzLnBsdWdpbnMuaW5jbHVkZXMocGx1Z2luIGFzIElNYXBDb2xsaXNpb25QbHVnaW4pKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3BsdWdpbiB2YWxpZGF0aW9uIGVycm9yLCBjb2xsaXNpb24gcGx1Z2luOicsIHBsdWdpbi5uYW1lLCAnYWxyZWFkeSBleGlzdHMuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXBsdWdpbi5vbkNvbGxpc2lvbiAmJiAhcGx1Z2luLm9uQ29sbGlzaW9uU3RhcnQgJiYgIXBsdWdpbi5vbkNvbGxpc2lvbkVuZCAmJiAhcGx1Z2luLm9uQWRkZWRDb2xsaWRlcldpdGhUYWdCICYmICFwbHVnaW4ub25BZGRlZENvbGxpZGVyV2l0aFRhZ0EgJiYgIXBsdWdpbi5vblJlbW92ZWRUYWdBICYmICFwbHVnaW4ub25SZW1vdmVkVGFnQiAmJiAhcGx1Z2luLm9uUmVtb3ZlZCAmJiAhcGx1Z2luLm9uQWRkZWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcigncGx1Z2luIHZhbGlkYXRpb24gZXJyb3IsIGNvbGxpc2lvbiBwbHVnaW46JywgcGx1Z2luLm5hbWUsICdkb2VzIG5vdCBpbXBsZW1lbnQgYW55IG9mIHRoZSBjb2xsaXNpb24gaG9va3M6IG9uQ29sbGlzaW9uLCBvbkNvbGxpc2lvblN0YXJ0LCBvbkNvbGxpc2lvbkVuZCwgb25BZGRlZCwgb25SZW1vdmVkLCBvbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSwgb25BZGRlZENvbGxpZGVyV2l0aFRhZ0IsIG9uUmVtb3ZlZFRhZ0EsIG9yIG9uUmVtb3ZlZFRhYkInKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighcGx1Z2luLnRhZ0FzIHx8ICFwbHVnaW4udGFnQXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmKHBsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQSB8fCBwbHVnaW4ub25SZW1vdmVkVGFnQSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigncGx1Z2luIHZhbGlkYXRpb24gZXJyb3IsIGNvbGxpc2lvbiBwbHVnaW46JywgcGx1Z2luLm5hbWUsICduZWVkcyBhIFwidGFnQXNcIiBwcm9wZXJ0eSB3aXRoIGFuIGFycmF5IG9mIGF0IGxlYXN0IDEgdGFnIHNpbmNlIHlvdXJlIHVzaW5nIG9uQWRkZWRDb2xsaWRlcldpdGhUYWdBL29uUmVtb3ZlZFRhZ0EnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihwbHVnaW4ub25Db2xsaXNpb24gfHwgcGx1Z2luLm9uQ29sbGlzaW9uU3RhcnQgfHwgcGx1Z2luLm9uQ29sbGlzaW9uRW5kKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdwbHVnaW4gdmFsaWRhdGlvbiBlcnJvciwgY29sbGlzaW9uIHBsdWdpbjonLCBwbHVnaW4ubmFtZSwgJ25lZWRzIGF0IGxlYXN0IFwidGFnQXNcIiBwcm9wZXJ0eSB3aXRoIGFuIGFycmF5IG9mIGF0IGxlYXN0IDEgdGFnIHNpbmNlIHlvdXJlIHVzaW5nIG9uQ29sbGlzaW9uLCBvbkNvbGxpc2lvblN0YXJ0LCBvbkNvbGxpc2lvbkVuZC4gVGhlIG9ubHkgbWV0aG9kIHlvdSBjYW4gdXNlIHdpdGhvdXQgdGFncyBhcmUgXCJpbml0XCIsIFwib25BZGRlZFwiLCBhbmQgXCJvblJlbW92ZWRcIicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighcGx1Z2luLnRhZ0JzIHx8ICFwbHVnaW4udGFnQnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmKHBsdWdpbi5vbkFkZGVkQ29sbGlkZXJXaXRoVGFnQikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigncGx1Z2luIHZhbGlkYXRpb24gZXJyb3IsIGNvbGxpc2lvbiBwbHVnaW46JywgcGx1Z2luLm5hbWUsICdpbnZhbGlkIG9uQWRkZWRDb2xsaWRlcldpdGhUYWdCIGhhbmRsZXIsIHRoZSBwbHVnaW4gbmVlZHMgYSBcInRhZ0JzXCIgcHJvcGVydHkgd2l0aCBhbiBhcnJheSBvZiBhdCBsZWFzdCAxIHRhZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHBsdWdpbi5vblJlbW92ZWRUYWdCKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdwbHVnaW4gdmFsaWRhdGlvbiBlcnJvciwgY29sbGlzaW9uIHBsdWdpbjonLCBwbHVnaW4ubmFtZSwgJ2ludmFsaWQgb25SZW1vdmVkVGFnQiBoYW5kbGVyLCB0aGUgcGx1Z2luIG5lZWRzIGEgXCJ0YWdCc1wiIHByb3BlcnR5IHdpdGggYW4gYXJyYXkgb2YgYXQgbGVhc3QgMSB0YWcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlYXBwbHlQbHVnaW5zKCkge1xyXG4gICAgICAgIGlmKHRoaXMucGx1Z2lucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5kb0NvbGxpc2lvbkhhbmRsZXJJdGVyYXRpb24gPSB0aGlzLml0ZXJhdGVDb2xsaXNpb25UYWdIYW5kbGVycy5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kb0NvbGxpc2lvbkhhbmRsZXJJdGVyYXRpb24gPSAoKSA9PiB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpdGVyYXRlQ29sbGlzaW9uVGFnSGFuZGxlcnMoY29sQTogQ29sbGlkZXI8U2hhcGVEYXRhPiwgY29sQjogQ29sbGlkZXI8U2hhcGVEYXRhPiwgaGFuZGxlckxvb2t1cDogQ29sbGlzaW9uUGx1Z2luSGFuZGxlck1hcCApIHtcclxuICAgICAgICBjb25zdCBzdGFydFRzID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3QgY29sQVR5cGVzID0gY29sQS50YWdzO1xyXG4gICAgICAgIGNvbnN0IGNvbEJUeXBlcyA9IGNvbEIudGFncztcclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIG92ZXIgNSBwbHVnaW5zIHdlIHdhbnQgdG8gY2hlY2sgZm9yIHBvc3NpYmlsaXR5IG9mIG5lZWRpbmcgdG8gY2FjaGUgdGhpcyBjb2xsaWRlciBvdXRwdXQuXHJcbiAgICAgICAgLypcclxuICAgICAgICBsZXQgY2FjaGVOZXh0O1xyXG4gICAgICAgIGxldCBjYWNoZUFycmF5O1xyXG4gICAgICAgIGxldCBjYWNoZUtleTtcclxuICAgICAgICBsZXQgY2FjaGVOZXh0SWZPdmVyO1xyXG4gICAgICAgIGxldCBzdGFydDtcclxuICAgICAgICBpZih0aGlzLnBsdWdpbnMubGVuZ3RoID4gNSkge1xyXG4gICAgICAgICAgICBpZiAoY29sQS50YWdzLmxlbmd0aCA+IDIgJiYgY29sQlR5cGVzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgIGNhY2hlS2V5ID0gYCR7Y29sQS50YWdzLmpvaW4oJywnKX1fJHtjb2xCVHlwZXMuam9pbignLCAnKX1gO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FjaGVkVHlwZUV4ZWN1dGlvbltjYWNoZUtleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUFycmF5ID0gdGhpcy5jYWNoZWRUeXBlRXhlY3V0aW9uW2NhY2hlS2V5XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jYWNoZVR5cGVPbk5leHRSdW5bY2FjaGVLZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVOZXh0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUFycmF5ID0gbmV3IEFycmF5KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkVHlwZUV4ZWN1dGlvbltjYWNoZUtleV0gPSBjYWNoZUFycmF5O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZU5leHRJZk92ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYoY2FjaGVBcnJheSAmJiAhY2FjaGVOZXh0KSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYWNoZUFycmF5WzBdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZUFycmF5WzBdW2ldKGNvbEEsIGNvbEIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjYWNoZUFycmF5WzFdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZUFycmF5WzBdW2ldKGNvbEIsIGNvbEEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNhY2hlTmV4dElmT3Zlcikge1xyXG4gICAgICAgICAgICBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIH1cclxuICAgICovXHJcblxyXG4gICAgICAgIGxldCBza2lwQlR5cGVzID0gW107XHJcbiAgICAgICAgbGV0IGNhbGxlZENvdXBsZXMgPSBbXTtcclxuICAgICAgICBsZXQgY2FsbGVkU2luZ2xlcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29sQVR5cGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IGNvbEFUeXBlc1tqXTtcclxuICAgICAgICAgICAgY29uc3QgdGFnZEFQbHVnaW5IYW5kbGVycyA9IGhhbmRsZXJMb29rdXBbdGFnXTtcclxuICAgICAgICAgICAgaWYgKHRhZ2RBUGx1Z2luSGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWdkQVBsdWdpbkhhbmRsZXJzLmNvdXBsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbEJUeXBlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVzZSBhcmUgdGFnIGNvdXBsZSBoYW5kbGVycyB3aGVyZSBjb2xBIGFuZCBjb2xCIHdlcmUgZXhwbGljaXRseSBkZWZpbmVkLCBzbyB3ZSB3YW50IHRvIHJ1blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgdGhlIGhhbmRsZXJzIGZvciBib3RoIG9yZGVycyBvZiBjb2xBIGFuZCBjb2xCLCB1bmxlc3MgdGhlIHRhZ3MgYXJlIHRoZSBzYW1lLCB3aGljaCB3ZSBjaGVjayBmb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBpdGVyYXRpbmcgdGhlIHRhZ3MgaW4gY29sQi4gKGFyb3VuZCBsaW5lIDI1MykgZm9yKGxldCBrID0gMDsgayA8IGNvbEFUeXBlcy5sZW5ndGg7IGsrKyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWdkQVBsdWdpbkhhbmRsZXJzLmNvdXBsZXNbY29sQlR5cGVzW2tdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zb2xlLnRpbWVFbmQoJ2lmIHN0YXRlbWVudD8/PycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUudGltZSgndGhpcmQgbG9vcCBoYW5kbGVycycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnZEFQbHVnaW5IYW5kbGVycy5jb3VwbGVzW2NvbEJUeXBlc1trXV0uZm9yRWFjaChoYW5kbGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGkgZW50aXJlbHkgZm9yZ290IGFib3V0IHRoaXMgY2FzZSwgd2UgZG9udCB3YW50IHRvIGNhbGwgdGhlIGhhbmRsZXIgdHdpY2Ugc28gaW0gdHJhY2tpbmcgaXQgaW4gYW4gYXJyYXkgYnV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW0gZ29pbmcgdG8gaG9wZWZ1bGx5IG9wdGltaXplIHRoaXMgd2l0aCBhIGJldHRlciBhbmQgbGVzcyByZWR1bmRhbnQgZGF0YSBzdHJ1Y3R1cmUgZXZlbnR1YWxseS4gaW4gdGhlIG1lYW50aW1lLCBpdHMgcGxlbnR5IGZhc3QgcmVnYXJkbGVzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoZSB1Z2x5IE8obilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighY2FsbGVkQ291cGxlcy5pbmNsdWRlcyhoYW5kbGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKGNvbEEsIGNvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWRDb3VwbGVzLnB1c2goaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGNvbnNvbGUudGltZUVuZCgndGhpcmQgbG9vcCBoYW5kbGVycycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGVzZSBhcmUgdG9wIGxldmVsIGNvbGxpZGVyIGhhbmRsZXJzIHdoZXJlIGNvbEEgYW5kIGNvbEIgZG9udCBtYXR0ZXJcclxuICAgICAgICAgICAgICAgIGlmICh0YWdkQVBsdWdpbkhhbmRsZXJzLnNpbmdsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRhZ2RBUGx1Z2luSGFuZGxlcnMuc2luZ2xlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb2xCVHlwZXMuaW5jbHVkZXModGFnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEJUeXBlcy5wdXNoKHRhZyk7IC8vIGNhbiBza2lwIGIgc2luZ2xlIHNpbmNlIHRoZSB0YWcgb3JkZXIgZG9lc250IG1hdHRlciBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHRhZ2RBUGx1Z2luSGFuZGxlcnMuc2luZ2xlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VlIHRvIGRvIGJsdXJiIGFib3ZlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighY2FsbGVkU2luZ2xlcy5pbmNsdWRlcyhoYW5kbGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihjb2xBLCBjb2xCKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZFNpbmdsZXMucHVzaChoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmKGNhY2hlQXJyYXkpIHtcclxuICAgICAgICAgICAgY2FjaGVBcnJheVswXSA9IFsuLi5jYWxsZWRTaW5nbGVzLCAuLi5jYWxsZWRDb3VwbGVzXTtcclxuICAgICAgICB9Ki9cclxuICAgICAgICBjYWxsZWRTaW5nbGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgY2FsbGVkQ291cGxlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29sQlR5cGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IGNvbEJUeXBlc1tqXTtcclxuICAgICAgICAgICAgY29uc3QgdGFnZEJQbHVnaW5IYW5kbGVycyA9IGhhbmRsZXJMb29rdXBbdGFnXTtcclxuICAgICAgICAgICAgaWYodGFnZEJQbHVnaW5IYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYodGFnZEJQbHVnaW5IYW5kbGVycy5jb3VwbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2xBVHlwZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sQVR5cGVzW2tdID09PSB0YWcpIGNvbnRpbnVlOyAvLyBpZiB0aGUgdGFncyB3ZXJlIHRoZSBzYW1lIHdlIGNhbiBhc3N1bWUgd2UgYWxyZWFkeSByYW4gdGhlc2UgY291cGxlIGhhbmRsZXJzIGFuZCBjYW4gc2tpcC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZ2RCUGx1Z2luSGFuZGxlcnMuY291cGxlc1tjb2xBVHlwZXNba11dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdkQlBsdWdpbkhhbmRsZXJzLmNvdXBsZXNbY29sQVR5cGVzW2tdXS5mb3JFYWNoKGhhbmRsZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWNhbGxlZENvdXBsZXMuaW5jbHVkZXMoaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihjb2xCLCBjb2xBKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVkQ291cGxlcy5wdXNoKGhhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkb250IHdhbnQgdG8gcnVuIHRoZSB0b3AgbGV2ZWwgaGFuZGxlcnMgb2YgdGFncyB3ZSBhbHJlYWR5IHJhbiB3aXRoIHRoaXMgY29sbGlzaW9uIGNvdXBsZS5cclxuICAgICAgICAgICAgICAgIGlmICh0YWdkQlBsdWdpbkhhbmRsZXJzLnNpbmdsZXMgJiYgIXNraXBCVHlwZXMuaW5jbHVkZXModGFnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGFnZEJQbHVnaW5IYW5kbGVycy5zaW5nbGVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0YWdkQlBsdWdpbkhhbmRsZXJzLnNpbmdsZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjYWxsZWRTaW5nbGVzLmluY2x1ZGVzKGhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKGNvbEIsIGNvbEEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVkU2luZ2xlcy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgaWYoY2FjaGVBcnJheSkge1xyXG4gICAgICAgICAgICBjYWNoZUFycmF5WzFdID0gWy4uLmNhbGxlZFNpbmdsZXMsIC4uLmNhbGxlZENvdXBsZXNdO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZVR5cGVPbk5leHRSdW5bY2FjaGVLZXldO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY2FjaGVOZXh0SWZPdmVyKSB7XHJcbiAgICAgICAgICAgIGlmKHN0YXJ0IC0gcGVyZm9ybWFuY2Uubm93KCkgPiAzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlVHlwZU9uTmV4dFJ1bltjYWNoZUtleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBmaW4gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VHM7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvdGFsIGNvbGxpc2lvbiBwbHVnaW4gaXRlcmF0aW9uIHRpbWU6JywgZmluKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7Q29sbGlkZXJ9IGZyb20gXCIuL0NvbGxpZGVyXCI7XHJcbmltcG9ydCB7Q29sbGlkZXJEYXR1bSwgTGluZSwgUG9pbnQsIFBvbHlnb24sIFJ1bnRpbWVDb2xsaWRlclNoYXBlLCBTaGFwZURhdGF9IGZyb20gXCIuLi9Xb3JsZFJlbmRlcmVyL3R5cGVzXCI7XHJcbmltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSBcIi4uL1dvcmxkUmVuZGVyZXIvR2FtZU9iamVjdFwiO1xyXG5pbXBvcnQge0NvbGxpc2lvbk1hbmFnZXJ9IGZyb20gXCIuL0NvbGxpc2lvbk1hbmFnZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uQ29sbGlkZXIgZXh0ZW5kcyBDb2xsaWRlcjxQb2x5Z29uPiB7XHJcbiAgICByZWFkb25seSBsaW5lczogQXJyYXk8Q29sbGlkZXI8TGluZT4+O1xyXG5cclxuICAgIHB1YmxpYyBsaW5lU3RhcnRMaXN0ZW5lcnM6IEFycmF5PChsaW5lOiBDb2xsaWRlcjxMaW5lPiwgY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZD47XHJcbiAgICBwdWJsaWMgbGluZUVuZExpc3RlbmVyczogQXJyYXk8KGxpbmU6IENvbGxpZGVyPExpbmU+LCBjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBsaW5lTGlzdGVuZXJzOiBBcnJheTwobGluZTogQ29sbGlkZXI8TGluZT4sIGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ+O1xyXG4gICAgcHVibGljIHNoYXBlRGF0YTogUG9seWdvbjtcclxuXHJcbiAgLy9jb25zdHJ1Y3RvcihsYXllckluZGV4OiBudW1iZXIsIHNoYXBlRGF0YTogU2hhcGVEYSwgdGFnczogQXJyYXk8c3RyaW5nIHwgbnVtYmVyPiwgaXNEeW5hbWljOiBib29sZWFuLCBjb2xsaXNpb25NYW5hZ2VyOiBDb2xsaXNpb25NYW5hZ2VyLCBwcm9wcz86IHtbcHJvcE5hbWU6IHN0cmluZ106IG51bWJlciB8IHN0cmluZyB8IGJvb2xlYW4gfSwgZ2FtZU9iamVjdD86IEdhbWVPYmplY3QgfCBQSVhJLkNvbnRhaW5lciB8IFBJWEkuR3JhcGhpY3MsIGRhdGE/OiBhbnksIHBhcmVudD86IFBvbHlnb25Db2xsaWRlcikge1xyXG4gICAgY29uc3RydWN0b3IobGF5ZXJJbmRleDogbnVtYmVyLCBzaGFwZURhdGE6IFBvbHlnb24sIHRhZ3M6IEFycmF5PHN0cmluZyB8IG51bWJlcj4sIGlzRHluYW1pYzogYm9vbGVhbiwgY29sbGlzaW9uTWFuYWdlcjogQ29sbGlzaW9uTWFuYWdlciwgcHJvcHM/OiB7W3Byb3BOYW1lOiBzdHJpbmddOiBudW1iZXIgfCBzdHJpbmcgfCBib29sZWFuIH0sIGdhbWVPYmplY3Q/OiBHYW1lT2JqZWN0IHwgUElYSS5Db250YWluZXIgfCBQSVhJLkdyYXBoaWNzLCBkYXRhPzogYW55LCBwYXJlbnQ/OiBDb2xsaWRlcjxhbnk+KSB7XHJcbiAgICAgICAgc3VwZXIobGF5ZXJJbmRleCwgUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTiwgc2hhcGVEYXRhLCB0YWdzLCBpc0R5bmFtaWMsIGNvbGxpc2lvbk1hbmFnZXIsIHByb3BzLCBnYW1lT2JqZWN0LCBkYXRhKTtcclxuICAgICAgICB0aGlzLmxpbmVzID0gbmV3IEFycmF5KCg8KENvbGxpZGVyRGF0dW08UG9seWdvbj4pPnRoaXMpLnNoYXBlRGF0YS5sZW5ndGgpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvaW50QSA9IHRoaXMuc2hhcGVEYXRhW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBwb2ludEIgPSBpID09PSAoPChDb2xsaWRlckRhdHVtPFBvbHlnb24+KT50aGlzKS5zaGFwZURhdGEubGVuZ3RoIC0gMSA/ICB0aGlzLnNoYXBlRGF0YVswXSA6IHRoaXMuc2hhcGVEYXRhW2krMV07XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb250IHdhbnQgdG8gaW5pdCB0aGUgbGluZXMgd2l0aCBjb2xsaXNpb24gbWFuYWdlciBzbyBpdCBkb2VzbnQgYWRkIHRoZSB0YWcgbWl4aW4uXHJcbiAgICAgICAgICAgIHRoaXMubGluZXNbaV0gPSBuZXcgQ29sbGlkZXI8TGluZT4odGhpcy5sYXllciwgUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSwgW3BvaW50QSwgcG9pbnRCXSwgdGhpcy50YWdzLCB0aGlzLmR5bmFtaWMsIG51bGwsIHByb3BzLCBnYW1lT2JqZWN0LCBudWxsLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRvUm90YXRpb24ocmFkaWFuczogbnVtYmVyLCBwaXZvdDogUG9pbnQpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zaGFwZURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxYID0gdGhpcy5zaGFwZURhdGFbaV0ueDtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxZID0gdGhpcy5zaGFwZURhdGFbaV0ueTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gcmFkaWFucztcclxuICAgICAgICAgICAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpblRoZXRhID0gTWF0aC5zaW4oYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeCA9ICAgKGNvc1RoZXRhICogKG9yaWdpbmFsWCAtIHBpdm90LngpIC1cclxuICAgICAgICAgICAgICAgIHNpblRoZXRhICogKG9yaWdpbmFsWSAtIHBpdm90LnkpICsgcGl2b3QueCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB5ID0gKHNpblRoZXRhICogKG9yaWdpbmFsWCAtIHBpdm90LngpICtcclxuICAgICAgICAgICAgICAgIGNvc1RoZXRhICogKG9yaWdpbmFsWSAtIHBpdm90LnkpICsgcGl2b3QueSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNoYXBlRGF0YVtpXS54ID0geDtcclxuICAgICAgICAgICAgdGhpcy5zaGFwZURhdGFbaV0ueSA9IHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgb25MaW5lQ29sbGlzaW9uU3RhcnQoY2I6IChsaW5lOiBDb2xsaWRlcjxMaW5lPiwgY29sbGlkZWQ6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmxpbmVTdGFydExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVTdGFydExpc3RlbmVycyA9IFtjYl07XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmxpbmVzW2ldLnN0YXJ0TGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgY2FuIG5vdCBoYXZlIGxpc3RlbmVycyBvbiBwb2x5Z29uIGNoaWxkcmVuIGNvbGxpZGVycyBhbmQgdXNlIHRoZSBwYXJlbnQgb25MaW5lQ29sbGlzaW9uJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubGluZXNbaV0ub25Db2xsaXNpb25TdGFydChjb2xCID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5saW5lU3RhcnRMaXN0ZW5lcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lU3RhcnRMaXN0ZW5lcnNbal0odGhpcy5saW5lc1tpXSwgY29sQik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGluZVN0YXJ0TGlzdGVuZXJzLnB1c2goY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25MaW5lQ29sbGlzaW9uKGNiIDogKGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQpIHtcclxuICAgICAgICBpZighdGhpcy5saW5lTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUxpc3RlbmVycyA9IFtjYl07XHJcblxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5saW5lc1tpXS5vbkxpc3RlbmVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGNhbiBub3QgaGF2ZSBsaXN0ZW5lcnMgb24gcG9seWdvbiBjaGlsZHJlbiBjb2xsaWRlcnMgYW5kIHVzZSB0aGUgcGFyZW50IG9uTGluZUNvbGxpc2lvbicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzW2ldLm9uQ29sbGlzaW9uKGNvbEIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLmxpbmVMaXN0ZW5lcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lTGlzdGVuZXJzW2pdKHRoaXMubGluZXNbaV0sIGNvbEIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uTGluZUNvbGxpc2lvbkVuZChjYiA6IChjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYoIXRoaXMubGluZUVuZExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVFbmRMaXN0ZW5lcnMgPSBbY2JdO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5saW5lc1tpXS5lbmRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW4gbm90IGhhdmUgbGlzdGVuZXJzIG9uIHBvbHlnb24gY2hpbGRyZW4gY29sbGlkZXJzIGFuZCB1c2UgdGhlIHBhcmVudCBvbkxpbmVDb2xsaXNpb24nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lc1tpXS5vbkNvbGxpc2lvbkVuZChjb2xCID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5saW5lRW5kTGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUVuZExpc3RlbmVyc1tqXSh0aGlzLmxpbmVzW2ldLCBjb2xCKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5saW5lRW5kTGlzdGVuZXJzLnB1c2goY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXJMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xlYXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgIGwuY2xlYXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb2ZmTGluZUNvbGxpc2lvbihjYjogKGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5saW5lTGlzdGVuZXJzID0gdGhpcy5yZW1vdmVGcm9tQXJyYXkoY2IsIHRoaXMubGluZUxpc3RlbmVycyk7XHJcbiAgICAgICAgaWYoIXRoaXMubGluZUxpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsLm9uTGlzdGVuZXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbC5vbkxpc3RlbmVycztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpbmVMaXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZkxpbmVDb2xsaXNpb25FbmQoY2I6IChjb2xsaWRlZDogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMubGluZUVuZExpc3RlbmVycyA9IHRoaXMucmVtb3ZlRnJvbUFycmF5KGNiLCB0aGlzLmxpbmVFbmRMaXN0ZW5lcnMpO1xyXG4gICAgICAgIGlmKCF0aGlzLmxpbmVFbmRMaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5saW5lcy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgbC5lbmRMaXN0ZW5lcnMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBsLmVuZExpc3RlbmVycztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpbmVFbmRMaXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZkxpbmVDb2xsaXNpb25TdGFydChjYjogKGNvbGxpZGVkOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5saW5lU3RhcnRMaXN0ZW5lcnMgPSB0aGlzLnJlbW92ZUZyb21BcnJheShjYiwgdGhpcy5saW5lU3RhcnRMaXN0ZW5lcnMpO1xyXG4gICAgICAgIGlmKCF0aGlzLmxpbmVTdGFydExpc3RlbmVycykge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsLnN0YXJ0TGlzdGVuZXJzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbC5zdGFydExpc3RlbmVycztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0YXJ0TGlzdGVuZXJzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc2V0RGVmYXVsdFBpdm90KCkge1xyXG4gICAgICAgIGxldCBtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaGFwZURhdGEubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtaW5YID0gKCB0aGlzLnNoYXBlRGF0YVtpXS54IDwgbWluWCB8fCBtaW5YID09IG51bGwpID8gIHRoaXMuc2hhcGVEYXRhW2ldLng6IG1pblg7XHJcbiAgICAgICAgICAgIG1heFggPSAoIHRoaXMuc2hhcGVEYXRhW2ldLnggID4gbWF4WCB8fCBtYXhYID09IG51bGwpID8gIHRoaXMuc2hhcGVEYXRhW2ldLnggIDogbWF4WDtcclxuICAgICAgICAgICAgbWluWSA9ICggdGhpcy5zaGFwZURhdGFbaV0ueSA8IG1pblkgfHwgbWluWSA9PSBudWxsKSA/ICB0aGlzLnNoYXBlRGF0YVtpXS55IDogbWluWTtcclxuICAgICAgICAgICAgbWF4WSA9ICggdGhpcy5zaGFwZURhdGFbaV0ueSA+IG1heFkgfHwgbWF4WSA9PSBudWxsKSA/ICB0aGlzLnNoYXBlRGF0YVtpXS55IDogbWF4WTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRQaXZvdCgoKG1pblggKyBtYXhYKSAvIDIpIC0gbWluWCwgKChtaW5ZICsgbWF4WSkgLyAyKSAtIG1pblkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBkZWZhdWx0UGl2b3RQb2ludCgpIDogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHtcclxuICAgICAgICBsZXQgbWluWCwgbWF4WCwgbWluWSwgbWF4WTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hhcGVEYXRhLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWluWCA9ICggdGhpcy5zaGFwZURhdGFbaV0ueCA8IG1pblggfHwgbWluWCA9PSBudWxsKSA/ICB0aGlzLnNoYXBlRGF0YVtpXS54OiBtaW5YO1xyXG4gICAgICAgICAgICBtYXhYID0gKCB0aGlzLnNoYXBlRGF0YVtpXS54ICA+IG1heFggfHwgbWF4WCA9PSBudWxsKSA/ICB0aGlzLnNoYXBlRGF0YVtpXS54ICA6IG1heFg7XHJcbiAgICAgICAgICAgIG1pblkgPSAoIHRoaXMuc2hhcGVEYXRhW2ldLnkgPCBtaW5ZIHx8IG1pblkgPT0gbnVsbCkgPyAgdGhpcy5zaGFwZURhdGFbaV0ueSA6IG1pblk7XHJcbiAgICAgICAgICAgIG1heFkgPSAoIHRoaXMuc2hhcGVEYXRhW2ldLnkgPiBtYXhZIHx8IG1heFkgPT0gbnVsbCkgPyAgdGhpcy5zaGFwZURhdGFbaV0ueSA6IG1heFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHg6IChtaW5YICsgbWF4WCkgLyAyLCB5OiAobWluWSArIG1heFkpIC8gMiB9O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCYXNlR2FtZU9iamVjdEF0bGFzfSBmcm9tIFwiLi9CYXNlR2FtZU9iamVjdEF0bGFzXCI7XHJcbmltcG9ydCB7V2ViR2xHYW1lT2JqZWN0QXRsYXN9IGZyb20gXCIuL1dlYkdMR2FtZU9iamVjdEF0bGFzXCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vLi4vLi4vbGliL0xvYWRlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEF0bGFzRmFjdG9yeSA9IChyZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlciwgbG9hZGVyPzogTG9hZGVyKSA6IEJhc2VHYW1lT2JqZWN0QXRsYXMgPT4ge1xyXG4gICAgaWYocmVuZGVyZXIudHlwZSA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBXZWJHbEdhbWVPYmplY3RBdGxhcyhyZW5kZXJlciBhcyBQSVhJLldlYkdMUmVuZGVyZXIsIGxvYWRlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgV2ViR2xHYW1lT2JqZWN0QXRsYXMocmVuZGVyZXIgYXMgUElYSS5XZWJHTFJlbmRlcmVyLCBsb2FkZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuXHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUZXh0dXJlQXRsYXMge1xyXG4gICAgcmVhZG9ubHkgbWF4VGV4dHVyZVNpemU7XHJcbiAgICByZWFkb25seSByZW5kZXJlcjogUElYSS5XZWJHTFJlbmRlcmVyIHwgUElYSS5DYW52YXNSZW5kZXJlcjtcclxuICAgIHJlYWRvbmx5IGxvb2t1cDoge1tzdWJDaHVua0luZGV4OiBzdHJpbmddOiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgYUlkeDogbnVtYmVyLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUgfX0gPSB7fTtcclxuICAgIHJlYWRvbmx5IG5leHRQb3NpdGlvbnM6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW107XHJcbiAgICByZWFkb25seSBuZXh0T3BlblJlY3RzOiBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgYUlkeDogbnVtYmVyIH0+ID0gW107XHJcbiAgICByZWFkb25seSBuZXh0T3BlblBvc2l0aW9uczogQXJyYXk8QXJyYXk8bnVtYmVyPj4gPVtdO1xyXG4gICAgcHJpdmF0ZSBuZXh0UG9zaXRpb25JbmRleDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbmV4dFJlY3RBdGxhc0luZGV4IDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbmV4dE9wZW5JbmRleDogbnVtYmVyID0gMDtcclxuICAgIHJlYWRvbmx5IGF0bGFzc2VzOiBBcnJheTxQSVhJLlJlbmRlclRleHR1cmU+ID0gW107XHJcbiAgICBwcm90ZWN0ZWQgc3ViQ2h1bmtXOiBudW1iZXIgPSAxMjg7XHJcbiAgICBwcm90ZWN0ZWQgc3ViQ2h1bmtIOiBudW1iZXIgPSAxMjg7XHJcbiAgICByZWFkb25seSBvcGVuUmVjdHM6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW107XHJcbiAgICBwcml2YXRlIHRleHR1cmVTdGFydFg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGV4dHVyZVN0YXJ0WTogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IobWF4VGV4dHVyZVNpemU6IG51bWJlciwgcmVuZGVyZXI6IFBJWEkuV2ViR0xSZW5kZXJlciB8IFBJWEkuQ2FudmFzUmVuZGVyZXIpIHtcclxuICAgICAgICBpZihtYXhUZXh0dXJlU2l6ZSA+PSAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VGV4dHVyZVNpemUgPSAgIG1heFRleHR1cmVTaXplIC0gKG1heFRleHR1cmVTaXplJTIwNDgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF4VGV4dHVyZVNpemUgPj0gMTAyNCkge1xyXG4gICAgICAgICAgICB0aGlzLm1heFRleHR1cmVTaXplID0gICBtYXhUZXh0dXJlU2l6ZSAtIChtYXhUZXh0dXJlU2l6ZSUxMDI0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1heFRleHR1cmVTaXplID49IDUxMikge1xyXG4gICAgICAgICAgICB0aGlzLm1heFRleHR1cmVTaXplID0gICBtYXhUZXh0dXJlU2l6ZSAtIChtYXhUZXh0dXJlU2l6ZSU1MTIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VGV4dHVyZVNpemUgPSAyNTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdEZvck1hcChzdWJDaHVua1c6IG51bWJlciwgc3ViQ2h1bmtIOiBudW1iZXIsIHNhdmVkU3ViQ2h1bmtJbmRleGVzPzogQXJyYXk8bnVtYmVyPikge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLnN1YkNodW5rVyA9IHN1YkNodW5rVyB8IDEyODtcclxuICAgICAgICB0aGlzLnN1YkNodW5rSCA9IHN1YkNodW5rSCB8IDEyODtcclxuICAgICAgICB0aGlzLnRleHR1cmVTdGFydFggPSB0aGlzLm1heFRleHR1cmVTaXplIC0gdGhpcy5zdWJDaHVua1c7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlU3RhcnRZID0gdGhpcy5tYXhUZXh0dXJlU2l6ZSAtIHRoaXMuc3ViQ2h1bmtIO1xyXG5cclxuICAgICAgICB0aGlzLmF0bGFzc2VzLnB1c2goUElYSS5SZW5kZXJUZXh0dXJlLmNyZWF0ZSh0aGlzLm1heFRleHR1cmVTaXplLCB0aGlzLm1heFRleHR1cmVTaXplKSk7XHJcbiAgICAgICAgdGhpcy5uZXh0UG9zaXRpb25JbmRleCA9IDA7XHJcbiAgICAgICAgZm9yKGxldCB5ID0gdGhpcy50ZXh0dXJlU3RhcnRYOyB5ID49IDA7IHkgLT0gdGhpcy5zdWJDaHVua0gpIHtcclxuICAgICAgICAgICAgZm9yKGxldCB4ID0gdGhpcy50ZXh0dXJlU3RhcnRYOyB4ID49IDA7IHggLT0gdGhpcy5zdWJDaHVua1cpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dFBvc2l0aW9ucy5wdXNoKFt4LCB5XSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWVyZ2VBbGxMYXllckNodW5rcyhsYXllcnM6IEFycmF5PEFycmF5PFBJWEkuU3ByaXRlIHwgUElYSS5Db250YWluZXI+PikgOiBBcnJheTxQSVhJLlRleHR1cmU+IHtcclxuICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IG5ldyBBcnJheShsYXllcnMubGVuZ3RoKS5maWxsKDEpLm1hcCgobiwgaSkgPT4ge1xyXG4gICAgICAgICAgICBpZihsYXllcnNbaV0gJiYgbGF5ZXJzW2ldLmxlbmd0aCAmJiAhKGxheWVyc1tpXS5ldmVyeSh2ID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhdjtcclxuICAgICAgICAgICAgfSkpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4VyA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4SCA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tpXS5mb3JFYWNoKHNwcml0ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3ByaXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFcgPSBNYXRoLm1heChzcHJpdGUueCArIHNwcml0ZS53aWR0aCwgbWF4Vyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEggPSBNYXRoLm1heChzcHJpdGUueSArIHNwcml0ZS5oZWlnaHQsIG1heEgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJUID0gUElYSS5SZW5kZXJUZXh0dXJlLmNyZWF0ZShtYXhXLCBtYXhIKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKGNvbnRhaW5lciwgclQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0ZXh0dXJlcztcclxuICAgIH1cclxuXHJcbiAgICAvL1RPRE86IHRoaXMgd2lsbCBiZSBmbGV4aWJsZSBiYXNlZCBvbiBtYXggdGV4dHVyZSBzaXplLlxyXG4gICAgcHVibGljIGdldE1pblRleHR1cmVzRm9yTWFwKG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBsYXllcnM6IEFycmF5PEFycmF5PFBJWEkuU3ByaXRlPj4pIDogQXJyYXk8QXJyYXk8UElYSS5UZXh0dXJlPj4ge1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgbmVlZGVkUnRzUGVyTGF5ZXIgPSBNYXRoLmNlaWwobWFwV2lkdGggLyB0aGlzLm1heFRleHR1cmVTaXplKSAqIE1hdGguY2VpbChtYXBIZWlnaHQgLyB0aGlzLm1heFRleHR1cmVTaXplKTtcclxuXHJcbiAgICAgICAgbGF5ZXJzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgIGlmKGwpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjcmVhdGVkLnB1c2goW10pO1xyXG4gICAgICAgICAgICBsLmZvckVhY2goc3ByaXRlID0+IHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFkZE9wZW5SZWN0KGFJZHg6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYWRkT3BlblNwb3QoYUlkeDogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLm5leHRPcGVuUmVjdHMucHVzaCh7IGFJZHgsIHgsIHksIHcsIGggfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHJlbW92ZUNodW5rRnJvbVRleHR1cmUoc3ViQ2h1bmtJbmRleDogbnVtYmVyKSA6IHZvaWQ7XHJcbiAgICBwdWJsaWMgY2xlYXIoKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5sb29rdXApLmZvckVhY2goayA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvb2t1cFtrXTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm5leHRQb3NpdGlvbkluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLm5leHRPcGVuSW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMubmV4dFBvc2l0aW9ucy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMubmV4dE9wZW5Qb3NpdGlvbnMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLm5leHRPcGVuUmVjdHMubGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5hdGxhc3Nlcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICAgICAgICBhLmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hdGxhc3Nlcy5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRQYXJlbnRDaHVua0xheWVyR3JvdXAoc2VjdGlvbkluZGV4OiBudW1iZXIsIHRleHR1cmU6IFBJWEkuVGV4dHVyZSkge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRUaWxlVG9MYXllckdyb3VwKHN1YkNodW5rSW5kZXh1OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmKCEoc3ViQ2h1bmtJbmRleCBpbiB0aGlzLmxvb2t1cCkpIHtcclxuICAgICAgICAgICAgY29uc3QgW3gsIHksIGFJZHhdID0gdGhpcy5nZXROZXh0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIocywgdGhpcy5hdGxhc3Nlc1thSWR4XSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XSA9IHsgdGV4dHVyZTogbnVsbCwgYUlkeCwgeCwgeSB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICovXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFN1YkNodW5rTGF5ZXJHcm91cChzdWJDaHVua0luZGV4OiBudW1iZXIsIHRleHR1cmU6IFBJWEkuVGV4dHVyZSkgOiBQSVhJLlRleHR1cmUge1xyXG4gICAgICAgIGlmKHN1YkNodW5rSW5kZXggaW4gdGhpcy5sb29rdXApIHtcclxuICAgICAgICAgIC8vICBjb25zb2xlLmVycm9yKHRoaXMubG9va3VwW3N1YkNodW5rSW5kZXhdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwW3N1YkNodW5rSW5kZXhdLnRleHR1cmU7XHJcbiAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdBbHJlYWR5IGluLicgKyAnc3ViQ2h1bmtJbmRleDogJyArIHN1YkNodW5rSW5kZXgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgdywgaCwgYUlkeCB9ID0gdGhpcy5nZXROZXh0UmVjdCh0ZXh0dXJlLndpZHRoLCB0ZXh0dXJlLmhlaWdodCk7XHJcbiAgICAgICAgY29uc3QgcyA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICBzLnNldFRyYW5zZm9ybSh4LCB5KTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcihzLCB0aGlzLmF0bGFzc2VzW2FJZHhdLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgbmV3VGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUodGhpcy5hdGxhc3Nlc1thSWR4XS5iYXNlVGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKHgsIHksIHcsIGgpKTtcclxuICAgICAgICB0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XSA9IHsgdGV4dHVyZTogbmV3VGV4dHVyZSwgeCwgeSwgdywgaCwgYUlkeCB9O1xyXG4gICAgICAgIHJldHVybiBuZXdUZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJTdWJDaHVua0xheWVyR3JvdXAoc3ViQ2h1bmtJbmRleDogbnVtYmVyLCBsYXllckNvbnRhaW5lcjogUElYSS5Db250YWluZXIsIGxvZz1mYWxzZSkgOiBQSVhJLlRleHR1cmUge1xyXG4gICAgICAgIGlmKHN1YkNodW5rSW5kZXggaW4gdGhpcy5sb29rdXApIHtcclxuICAgICAgICAvLyAgICBjb25zb2xlLmVycm9yKHRoaXMubG9va3VwW3N1YkNodW5rSW5kZXhdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwW3N1YkNodW5rSW5kZXhdLnRleHR1cmU7XHJcbiAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdBbHJlYWR5IGluLicgKyAnc3ViQ2h1bmtJbmRleDogJyArIHN1YkNodW5rSW5kZXgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihsb2cpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignbGF5ZXIgd2lkdGgvaGVpZ2h0OicsIHsgd2lkdGg6IGxheWVyQ29udGFpbmVyLndpZHRoLCBoZWlnaHQ6IGxheWVyQ29udGFpbmVyLmhlaWdodCB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHg6IG1pblgsIHk6IG1pblkgfSA9IGxheWVyQ29udGFpbmVyLmdldExvY2FsQm91bmRzKCk7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3LCBoLCBhSWR4IH0gPSB0aGlzLmdldE5leHRSZWN0KGxheWVyQ29udGFpbmVyLndpZHRoLCBsYXllckNvbnRhaW5lci5oZWlnaHQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCduZXh0IHBvc2l0aW9uIHdhcycsIHgsIHksIGFJZHgpO1xyXG4gICAgIC8vICAgbGF5ZXJDb250YWluZXIueCA9IHg7XHJcbiAgICAgICAvLyBsYXllckNvbnRhaW5lci55ID0geTtcclxuICAgICAgLy8gIGNvbnNvbGUuZXJyb3IoeyBtaW5YLCBtaW5ZIH0pO1xyXG4gICAgICAgIGxheWVyQ29udGFpbmVyLnNldFRyYW5zZm9ybSh4LW1pblgsIHktbWluWSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIobGF5ZXJDb250YWluZXIsIHRoaXMuYXRsYXNzZXNbYUlkeF0sIGZhbHNlLCBudWxsLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgbmV3VGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUodGhpcy5hdGxhc3Nlc1thSWR4XS5iYXNlVGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKHgsIHksIHcsIGgpKTtcclxuICAgICAgICB0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XSA9IHsgdGV4dHVyZTogbmV3VGV4dHVyZSwgeCwgeSwgdywgaCwgYUlkeCAgfTtcclxuICAgICAgICByZXR1cm4gbmV3VGV4dHVyZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0TmV4dFJlY3Qod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIDogeyAgeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCBhSWR4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgLy8gc2VlIGlmIHdlIGhhdmUgYW55IHBvc2l0aW9ucyBsZWZ0IGluIHRoZSBuZXh0IHBvc2l0aW9ucyBhcnJheVxyXG4gICAgICAgIGxldCBjaGVjayA9IHRoaXMubmV4dE9wZW5SZWN0c1swXTtcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUoY2hlY2sgJiYgKGNoZWNrLncgPCB3aWR0aCB8fCBjaGVjay5oIDwgaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICBjaGVjayA9IHRoaXMubmV4dE9wZW5SZWN0c1srK2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzcGxpdCA9IChyZWN0VG9TcGxpdCAgOiB7ICB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIsIGFJZHg6IG51bWJlciB9ICkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhSWR4ID0gcmVjdFRvU3BsaXQuYUlkeDtcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGhMZWZ0ID0gcmVjdFRvU3BsaXQudyAtIHdpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHRMZWZ0ID0gcmVjdFRvU3BsaXQuaCAtIGhlaWdodDtcclxuICAgICAgICAgICAgaWYod2lkdGhMZWZ0ID49IHRoaXMuc3ViQ2h1bmtXKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRPcGVuUmVjdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYUlkeCxcclxuICAgICAgICAgICAgICAgICAgICB4OiByZWN0VG9TcGxpdC54ICsgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogcmVjdFRvU3BsaXQueSxcclxuICAgICAgICAgICAgICAgICAgICB3OiB3aWR0aExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgaDogaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihoZWlnaHRMZWZ0ID49IHRoaXMuc3ViQ2h1bmtIKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRPcGVuUmVjdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYUlkeCxcclxuICAgICAgICAgICAgICAgICAgICB4OiByZWN0VG9TcGxpdC54LFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHJlY3RUb1NwbGl0LnkgKyBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgdzogd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaDogaGVpZ2h0TGVmdCxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYod2lkdGhMZWZ0ID49IHRoaXMuc3ViQ2h1bmtXICYmIGhlaWdodExlZnQgPj0gdGhpcy5zdWJDaHVua0gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dE9wZW5SZWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBhSWR4LFxyXG4gICAgICAgICAgICAgICAgICAgIHg6IHJlY3RUb1NwbGl0LnggKyB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICB5OiByZWN0VG9TcGxpdC55ICsgaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIHc6IHdpZHRoTGVmdCxcclxuICAgICAgICAgICAgICAgICAgICBoOiBoZWlnaHRMZWZ0LFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjaGVjaykge1xyXG4gICAgICAgICAgICB0aGlzLm5leHRPcGVuUmVjdHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICBzcGxpdChjaGVjaylcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGFJZHg6IGNoZWNrLmFJZHgsXHJcbiAgICAgICAgICAgICAgICB4OiBjaGVjay54LFxyXG4gICAgICAgICAgICAgICAgeTogY2hlY2sueSxcclxuICAgICAgICAgICAgICAgIHc6IHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaDogaGVpZ2h0LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF0bGFzc2VzLnB1c2goUElYSS5SZW5kZXJUZXh0dXJlLmNyZWF0ZSh0aGlzLm1heFRleHR1cmVTaXplLCB0aGlzLm1heFRleHR1cmVTaXplKSk7XHJcbiAgICAgICAgY29uc3QgYUlkeCA9IHRoaXMuYXRsYXNzZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICBjb25zdCBuZXdSZWN0ID0geyB4OiAwLCB5OiAwLCB3OiB0aGlzLm1heFRleHR1cmVTaXplLCBoOiB0aGlzLm1heFRleHR1cmVTaXplLCBhSWR4IH07XHJcbiAgICAgICAgc3BsaXQobmV3UmVjdCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYUlkeCxcclxuICAgICAgICAgICAgeDowLFxyXG4gICAgICAgICAgICB5OjAsXHJcbiAgICAgICAgICAgIHc6IHdpZHRoLFxyXG4gICAgICAgICAgICBoOiBoZWlnaHQsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXROZXh0UG9zaXRpb24oKSA6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIC8vIHNlZSBpZiB3ZSBoYXZlIGFueSBwb3NpdGlvbnMgbGVmdCBpbiB0aGUgbmV4dCBwb3NpdGlvbnMgYXJyYXlcclxuICAgICAgICBsZXQgcCA9IHRoaXMubmV4dFBvc2l0aW9ucy5wb3AoKTtcclxuICAgICAgICBsZXQgYXRsYXNJbmRleCA9IHRoaXMubmV4dFBvc2l0aW9uSW5kZXg7XHJcbiAgICAgICAgaWYocCkge1xyXG4gICAgICAgICAgICByZXR1cm4gWy4uLnAsIGF0bGFzSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgd2UgZG9udC4uLiBjaGVjayB0byBzZWUgaWYgdGhlcmUgd2FzIGFueSBvcGVuZWQgc3BvdHMgZnJvbSBkZXN0cm95aW5nIG5vbiB1c2VkIHRleHR1cmVzXHJcbiAgICAgICAgcCA9IHRoaXMubmV4dE9wZW5Qb3NpdGlvbnMucG9wKCk7XHJcbiAgICAgICAgaWYgKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmaW5hbGx5IHRoZXJlIHdhcyBhYnNvbHV0ZWx5IG5vIG9wZW4gc3BvdHMgZnJvbSBlaXRoZXIgdGhlIG9yaWdpbmFsIGluaXRpYWxpemF0aW9uIG9yIGZyb20gZGVzdHJveWluZyxcclxuICAgICAgICAvLyBjcmVhdGUgbmV3IGF0bGFzIHRoZW4gcmV0dXJuIHRoZSBuZXh0IHBvc2l0aW9uIGZyb20gdGhhdC5cclxuICAgICAgICB0aGlzLmF0bGFzc2VzLnB1c2goUElYSS5SZW5kZXJUZXh0dXJlLmNyZWF0ZSh0aGlzLm1heFRleHR1cmVTaXplLCB0aGlzLm1heFRleHR1cmVTaXplKSk7XHJcbiAgICAgICAgdGhpcy5uZXh0UG9zaXRpb25JbmRleCA9IHRoaXMuYXRsYXNzZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICBmb3IobGV0IHkgPSB0aGlzLnRleHR1cmVTdGFydFg7IHkgPj0gMDsgeSAtPSB0aGlzLnN1YkNodW5rSCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IHggPSB0aGlzLnRleHR1cmVTdGFydFg7IHggPj0gMDsgeCAtPSB0aGlzLnN1YkNodW5rVykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0UG9zaXRpb25zLnB1c2goW3gsIHldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbLi4udGhpcy5uZXh0UG9zaXRpb25zLnBvcCgpLCB0aGlzLm5leHRQb3NpdGlvbkluZGV4XTtcclxuICAgIH1cclxufSIsImV4cG9ydCBlbnVtIE1lc3NhZ2VzIHtcclxuICAgIEdFVF9TRUNUSU9OX0RBVEEsXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX01BUF9DSFVOS1MsXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX1NJTkdMRV9NQVBfQ0hVTkssXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX0FMTF9NQVBfQ0hVTktTLFxyXG4gICAgSU5JVF9MT0FERVIsXHJcbiAgICBJTklUX01BUCxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVzdWx0Q29kZXMge1xyXG4gICAgU1VDQ0VTUyxcclxuICAgIEVSUk9SXHJcbn0iLCJpbXBvcnQgV29ybGQgZnJvbSAnLi9Xb3JsZFJlbmRlcmVyL1dvcmxkJztcclxuZXhwb3J0IGRlZmF1bHQgV29ybGQ7IiwiaW1wb3J0IHtcclxuICAgIENvbGxpZGVySG9vayxcclxuICAgIElNYXBDb2xsaXNpb25QbHVnaW4sXHJcbiAgICBJTWFwR2FtZU9iamVjdFBsdWdpbixcclxuICAgIElQbHVnaW4sXHJcbiAgICBvbkNvbGxpc2lvbkhvb2ssXHJcbiAgICBQbHVnaW5UeXBlc1xyXG59IGZyb20gXCIuL0lQbHVnaW5cIjtcclxuXHJcbmltcG9ydCBNYXAgZnJvbSAnLi9NYXAnO1xyXG5pbXBvcnQge1RpbGVNYW5hZ2VyfSBmcm9tIFwiLi9UaWxlTWFuYWdlclwiO1xyXG5pbXBvcnQge0dhbWVPYmplY3RNYW5hZ2VyfSBmcm9tIFwiLi9HYW1lT2JqZWN0TWFuYWdlclwiO1xyXG5pbXBvcnQge2h0dHBHZXRBc3luYywgaW5kZXhlZERCX2VuYWJsZWQsIG1lcmdlT3B0aW9ucywgcmVzb2x2ZU1hcFNpemUsIHJlc29sdmVNYXhUZXh0dXJlU2l6ZX0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBBdmFpbGFiaWxpdHlGbGFncyxcclxuICAgIENvbGxpZGVyRGF0dW0sXHJcbiAgICBHYW1lT2JqZWN0T3B0aW9ucyxcclxuICAgIE1hcFNpemUsXHJcbiAgICBQb2ludCxcclxuICAgIFJ1bnRpbWVDb2xsaWRlclNoYXBlLFxyXG4gICAgU2hhcGVEYXRhLFxyXG4gICAgVGFnLFxyXG4gICAgVGV4dHVyZUxvYWRPcHRzLFxyXG4gICAgV29ybGRJbml0TWV0YURhdGEsXHJcbiAgICBXb3JsZE1hcEluaXRNZXRhRGF0YVxyXG59IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge0NodW5rTWFuYWdlcn0gZnJvbSBcIi4vQ2h1bmtNYW5hZ2VyXCI7XHJcbmltcG9ydCB7UGxheWVyQ2FtZXJhLCBQbGF5ZXJDYW1lcmFPcHRpb25zfSBmcm9tIFwiLi9QbGF5ZXJDYW1lcmFcIjtcclxuaW1wb3J0IHtDaHVua0xvYWRlcldvcmtlcn0gZnJvbSBcIi4vV29ya2Vycy9DaHVua0xvYWRlcldvcmtlclwiO1xyXG5pbXBvcnQge1Jlc3VsdENvZGVzfSBmcm9tIFwiLi9Xb3JrZXJzL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7RGVjb2RlZE1hcE1ldGFEYXRhfSBmcm9tIFwiLi4vLi4vLi4vRW5jb2Rlci9zcmMvRGVjb2RlclwiO1xyXG5pbXBvcnQge0NvbGxpZGVyfSBmcm9tIFwiLi4vQ29sbGlzaW9uTWFuYWdlci9Db2xsaWRlclwiO1xyXG5pbXBvcnQge0lDb2xsaXNpb25TeXN0ZW19IGZyb20gXCIuLi9leHRyYXMvQ29sbGlzaW9uL0lDb2xsaXNpb25TeXN0ZW1cIjtcclxuaW1wb3J0IHtDb2xsaXNpb25NYW5hZ2VyfSBmcm9tIFwiLi4vQ29sbGlzaW9uTWFuYWdlci9Db2xsaXNpb25NYW5hZ2VyXCI7XHJcbmltcG9ydCB7U3BhdGlhbEdyaWR9IGZyb20gXCIuLi9leHRyYXMvQ29sbGlzaW9uL1NwYXRpYWxHcmlkXCI7XHJcbmltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSBcIi4vR2FtZU9iamVjdFwiO1xyXG5cclxuaW1wb3J0IHtSZXNvbHV0aW9uTWFuYWdlciwgUmVzb2x1dGlvblNldHRpbmdzfSBmcm9tIFwiLi9SZXNvbHV0aW9uTWFuYWdlclwiO1xyXG5pbXBvcnQge0ludGVyZmFjZU1hbmFnZXJ9IGZyb20gXCIuL0ludGVyZmFjZU1hbmFnZXJcIjtcclxuXHJcbnR5cGUgUGx1Z2luSW5pdCA9IFBsdWdpbiB8IFBsdWdpbkZhY3Rvcnk7XHJcbnR5cGUgUGx1Z2luID0gIElQbHVnaW48UGx1Z2luVHlwZXM+O1xyXG50eXBlIFBsdWdpbkZhY3RvcnkgPSAoKSA9PiBJUGx1Z2luPFBsdWdpblR5cGVzPlxyXG4vLyAxMCBmcHM7XHJcbnR5cGUgV29ybGRPcHRpb25zID0ge1xyXG4gICAgY2FtZXJhPzogUGxheWVyQ2FtZXJhT3B0aW9ucyxcclxuICAgIGNodW5rVmlzaWJpbGl0eUludGVydmFsPzogbnVtYmVyLFxyXG4gICAgcmVzb2x1dGlvblNldHRpbmdzPzogUmVzb2x1dGlvblNldHRpbmdzXHJcbn1cclxuXHJcbmxldCBfQ0hVTktfVVBEQVRFX0lOVEVSVkFMID0gMjUvMTAwMDtcclxuXHJcbmNvbnN0IF9kZWZhdWx0V29ybGRPcHRpb25zID0gKCkgPT4gIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2h1bmtWaXNpYmlsaXR5SW50ZXJ2YWw6IDEwMC8xMDAwLFxyXG4gICAgICAgIGNhbWVyYToge30sXHJcbiAgICAgICAgcmVzb2x1dGlvblNldHRpbmdzOiBudWxsLFxyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgX19fcGx1Z2lucyA6IEFycmF5PElQbHVnaW48UGx1Z2luVHlwZXM+PiA9IFtdO1xyXG5sZXQgX19fY29sbGlzaW9uU3lzdGVtIDogSUNvbGxpc2lvblN5c3RlbTtcclxubGV0IF9fX2luaXRpYWxpemVkV29ybGQgPSBmYWxzZTtcclxuXHJcbmNsYXNzIFdvcmxkIHtcclxuICAgIHByaXZhdGUgbWFwTG9hZENvdW50OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vIEludGVyZmFjZSBNZXRob2RzLCBib3VuZCB0byBpbnRlcmZhY2VNYW5hZ2VyJ3MgYXQgaW5pdGlhbGl6YXRpb25cclxuICAgIHB1YmxpYyBhZGRUZXh0dXJlVG9JbnRlcmZhY2VBdGxhcyA6IChpZDogc3RyaW5nLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUsIGRlc3Ryb3lBZnRlcjogYm9vbGVhbikgPT4gUElYSS5UZXh0dXJlO1xyXG4gICAgcHVibGljIGxvYWRJbnRlcmZhY2VUZXh0dXJlIDogKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgYWxpYXNJZD86IHN0cmluZykgPT4gUHJvbWlzZTxQSVhJLlRleHR1cmU+O1xyXG4gICAgcHVibGljIGFkZEludGVyZmFjZUl0ZW0gOiAoaXRlbTogUElYSS5TcHJpdGUgfCBQSVhJLkNvbnRhaW5lciB8IFBJWEkuRGlzcGxheU9iamVjdCB8IFBJWEkuR3JhcGhpY3MpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgcmVtb3ZlSW50ZXJmYWNlSXRlbSA6IChpdGVtOiBQSVhJLlNwcml0ZSB8IFBJWEkuQ29udGFpbmVyIHwgUElYSS5EaXNwbGF5T2JqZWN0IHwgUElYSS5HcmFwaGljcykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBjbGVhckludGVyZmFjZSA6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgLy8gQ29sbGlzaW9uIEV2ZW50IE1ldGhvZHMsIGJvdW5kIHRvIGNvbGxpc2lvbk1hbmFnZXIncyBhdCBjb25zdHVjdG9yXHJcbiAgICBwdWJsaWMgb25BZGRlZENvbGxpZGVyOiAoY2I6IENvbGxpZGVySG9vaykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvZmZBZGRlZENvbGxpZGVyOiAoY2I6IENvbGxpZGVySG9vaykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvblJlbW92ZWRDb2xsaWRlcjogKGNiOiBDb2xsaWRlckhvb2spID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmUmVtb3ZlZENvbGxpZGVyOiAoY2I6IENvbGxpZGVySG9vaykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvbkJlZm9yZUNvbGxpc2lvbnM6IChjYjogKGxhc3RDb2xsaXNpb25zOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PikgPT4gdm9pZCkgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvbkFmdGVyQ29sbGlzaW9uczogKGNiOiAobmV3Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj4pID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmQmVmb3JlQ29sbGlzaW9uczogKGNiOiAobGFzdENvbGxpc2lvbnM6IEFycmF5PENvbGxpZGVyPFNoYXBlRGF0YT4+KSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9mZkFmdGVyQ29sbGlzaW9uczogKGNiOiAobmV3Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXI8U2hhcGVEYXRhPj4pID0+IHZvaWQpID0+IHZvaWQ7XHJcblxyXG4gICAgLy8gQ29sbGlzaW9uIHB1YmxpYyBtZXRob2RzLCBib3VuZCB0byBjb2xsaXNpb25NYW5hZ2VyJ3MgYXQgY29uc3R1Y3RvclxyXG4gICAgLy90b2RvOiBsaW1pdFNoYXBlcyAtIGdvb2QgaWRlYSB3ZSBjYW4gb3B0aW1pemUgcXVpdGUgYSBiaXQgaWYgd2UgZ2l2ZSB0aGVtIHRoaXMgb3B0aW9uLi4uIGJhc2ljYWxseSB3ZWQgaGF2ZSBhbiBpbmRleCBvbiB0eXBlcyBpbiBhIGZldyBtb3JlIHBsYWNlcy5cclxuICAgIHB1YmxpYyBhZGRDb2xsaWRlckNvdXBsZSA6ICh0eXBlQTogc3RyaW5nLCB0eXBlQjogc3RyaW5nLCBsaW1pdFNoYXBlc1RoaXNEb2VzbnREb0FueXRoaW5nWWV0PzpBcnJheTxSdW50aW1lQ29sbGlkZXJTaGFwZT4pID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgYWRkQ29sbGlkZXJDb3VwbGVzIDogKHR5cGVDb3VwbGVzIDogQXJyYXk8QXJyYXk8VGFnPj4pID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29sbGlkZXJDb3VwbGUgOiAodHlwZUE6IHN0cmluZywgdHlwZUI6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyByZW1vdmVDb2xsaWRlckNvdXBsZXMgOiAodHlwZUNvdXBsZXMgOiBBcnJheTxBcnJheTxUYWc+PikgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBnZXRDb2xsaWRlcnNXaXRoVGFncyA6ICh0YWdzOiBBcnJheTxzdHJpbmc+KSA9PiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PlxyXG4gICAgcHVibGljIHVwZGF0ZUNvbGxpc2lvbnMgOiAoZGVsdGE/OiBudW1iZXIpID0+IHZvaWQ7XHJcblxyXG4gICAgLy8gQ2FtZXJhIG1ldGhvZCwgYm91bmQgZnJvbSBQbGF5ZXJDYW1lcmEgb24gaW5pdC5cclxuICAgIHB1YmxpYyBiaW5kQ2FtZXJhQ2VudGVyIDogKHA6IFBvaW50KSA9PiB2b2lkO1xyXG4gICAgcHVibGljIHNjcmVlblRvV29ybGQgOiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IFBvaW50O1xyXG4gICAgcHVibGljIHdvcmxkVG9TY3JlZW4gOiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IFBvaW50O1xyXG5cclxuICAgIC8vIGJvdW5kIHRvIEdhbWVPYmplY3RNYW5hZ2VyJ3MgYWRkR2FtZU9iamVjdCBtZXRob2QgYXQgY29uc3RydWN0b3JcclxuICAgIHB1YmxpYyBhZGRHYW1lT2JqZWN0OiAoZ2FtZU9iamVjdE9wdHM6IEdhbWVPYmplY3RPcHRpb25zKSA9PiBHYW1lT2JqZWN0O1xyXG4gICAgcHVibGljIGdldFRleHR1cmU6ICh0ZXh0dXJlUGF0aDogc3RyaW5nLCBvcHRzPzogVGV4dHVyZUxvYWRPcHRzKSA9PiBQSVhJLlRleHR1cmU7XHJcbiAgICBwdWJsaWMgb25UYWdnZWRHYW1lT2JqZWN0QWRkZWQ6ICh0YWc6IHN0cmluZywgY2I6IEdhbWVPYmplY3QpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmVGFnZ2VkR2FtZU9iamVjdEFkZGVkOiAodGFnOiBzdHJpbmcsIGNiOiBHYW1lT2JqZWN0KSA9PiBib29sZWFuO1xyXG4gICAgcHVibGljIG9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQ6ICh0YWc6IHN0cmluZywgY2I6IEdhbWVPYmplY3QpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQ6ICh0YWc6IHN0cmluZywgY2I6IEdhbWVPYmplY3QpID0+IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgb25HYW1lT2JqZWN0QWRkZWQ6IChjYjogR2FtZU9iamVjdCkgPT4gdm9pZDtcclxuICAgIHB1YmxpYyBvZmZHYW1lT2JqZWN0QWRkZWQ6IChjYjogR2FtZU9iamVjdCkgPT4gYm9vbGVhbjtcclxuICAgIHB1YmxpYyBvbkdhbWVPYmplY3RSZW1vdmVkOiAoY2I6IEdhbWVPYmplY3QpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb2ZmR2FtZU9iamVjdFJlbW92ZWQ6IChjYjogR2FtZU9iamVjdCkgPT4gYm9vbGVhbjtcclxuXHJcbiAgICBwcml2YXRlIGNhY2hlZE1hcE1ldGFEYXRhOiB7W21hcElkOiBzdHJpbmddIDogRGVjb2RlZE1hcE1ldGFEYXRhIH0gPSB7fTtcclxuICAgIHB1YmxpYyB1cGRhdGVDaHVua3MgOiAoZGVsdGE/OiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgbG9hZGVkTWFwOiBNYXA7XHJcbiAgICBwcml2YXRlIHRpbGVNYW5hZ2VyOiBUaWxlTWFuYWdlcjtcclxuICAgIHByaXZhdGUgZ2FtZU9iamVjdE1hbmFnZXI6IEdhbWVPYmplY3RNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBjaHVua01hbmFnZXI6IENodW5rTWFuYWdlcjtcclxuICAgIHByaXZhdGUgYXdhaXRpbmdDb2xsaXNpb25FbmQgOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgYmFzZVBhdGg6IHN0cmluZztcclxuICAgIHByaXZhdGUgZmxhZ3M6IEF2YWlsYWJpbGl0eUZsYWdzO1xyXG4gICAgcHJpdmF0ZSB3b3JsZE1ldGFEYXRhOiBXb3JsZEluaXRNZXRhRGF0YTtcclxuICAgIHByaXZhdGUgbWFwc0luaXREYXRhOiBBcnJheTxXb3JsZE1hcEluaXRNZXRhRGF0YT4gPSBbXTtcclxuICAgIHByaXZhdGUgaW5kZXhEYkxvYWRlciA6IExvYWRlcjtcclxuICAgIHByaXZhdGUgcGxheWVyQ2FtZXJhOiBQbGF5ZXJDYW1lcmE7XHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVkIDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcmVhZG9ubHkgZ2FtZVN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuICAgIHJlYWRvbmx5IGludGVyZmFjZVN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuICAgIHJlYWRvbmx5IG1haW5TdGFnZTogUElYSS5Db250YWluZXI7XHJcbiAgICBwdWJsaWMgcmVuZGVyOiAoKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBjaHVua0l0ZXJhdGlvbjogbnVtYmVyID0gMTtcclxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXI7XHJcbiAgICBwcml2YXRlIGNodW5rV29ya2VyOiBDaHVua0xvYWRlcldvcmtlcjtcclxuICAgIHByaXZhdGUgZWxhcHNlZDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgZWxhcHNlZENvbDogbnVtYmVyID0gMDtcclxuICAgIHJlYWRvbmx5IHBsdWdpbnM6IEFycmF5PElQbHVnaW48UGx1Z2luVHlwZXM+PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgY29sbGlzaW9uUGx1Z2luczogQXJyYXk8SU1hcENvbGxpc2lvblBsdWdpbj4gPSBbXTtcclxuICAgIHByaXZhdGUgY29sbGlzaW9uU3lzdGVtIDogSUNvbGxpc2lvblN5c3RlbTtcclxuICAgIHJlYWRvbmx5IGNvbGxpc2lvbk1hbmFnZXI6IENvbGxpc2lvbk1hbmFnZXI7XHJcbiAgICBwcml2YXRlIHJlc29sdXRpb25NYW5hZ2VyOiBSZXNvbHV0aW9uTWFuYWdlcjtcclxuICAgIHByaXZhdGUgY29sbGlzaW9uSGFuZGxlcnM6IEFycmF5PG9uQ29sbGlzaW9uSG9vaz4gPSBbXTtcclxuICAgIHByaXZhdGUgbGFzdENvbGxpc2lvbnM6IEFycmF5PENvbGxpZGVyPFNoYXBlRGF0YT4+ID0gW107XHJcbiAgICBwcml2YXRlIHNlcVRvVGFnOiB7W3NlcTpudW1iZXJdOiBzdHJpbmd9ID0ge307XHJcbiAgICBwcml2YXRlIHNlcVRvUHJvcDoge1tzZXE6IG51bWJlcl06IHN0cmluZ30gPXt9O1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50TWFwOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIF9pc0xvYWRpbmdNYXA6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX29uTWFwQ3JlYXRlZExpc3RlbmVyczogQXJyYXk8YW55PiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfb25NYXBEZXN0cm95ZWRMaXN0ZW5lcnM6IEFycmF5PGFueT4gPSBbXTtcclxuICAgIHByaXZhdGUgX29uQmVmb3JlTWFwRGVzdHJveWVkTGlzdGVuZXJzOiBBcnJheTxhbnk+ID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBpbnRlcmZhY2VNYW5hZ2VyOiBJbnRlcmZhY2VNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBidWZmZXJlZE9iamVjdHMgPSBbXTtcclxuICAgIHJlYWRvbmx5IENvbGxpZGVyU2hhcGVzOiB7W2tleTogc3RyaW5nXTogUnVudGltZUNvbGxpZGVyU2hhcGUgfSA9IHtcclxuICAgICAgICBbJ1JFQ1QnXTogUnVudGltZUNvbGxpZGVyU2hhcGUuUkVDVCxcclxuICAgICAgICBbJ1BPTFlHT04nXTogUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTixcclxuICAgICAgICBbJ1BPSU5UJ106IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5ULFxyXG4gICAgICAgIFsnQ0lSQ0xFJ106IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkNJUkNMRSxcclxuICAgICAgICBbJ0xJTkUnXTogUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSxcclxuICAgICAgICBbJ0VMSVBTRSddOiBSdW50aW1lQ29sbGlkZXJTaGFwZS5FTElQU0UsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJhc2VQYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmJhc2VQYXRoID0gYmFzZVBhdGg7XHJcbiAgICAgICAgdGhpcy5tYWluU3RhZ2UgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGFnZSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlU3RhZ2UgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICB0aGlzLm1haW5TdGFnZS5hZGRDaGlsZCh0aGlzLmdhbWVTdGFnZSk7XHJcbiAgICAgICAgdGhpcy5tYWluU3RhZ2UuYWRkQ2hpbGQodGhpcy5pbnRlcmZhY2VTdGFnZSk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gW107XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25TeXN0ZW0gPSBfX19jb2xsaXNpb25TeXN0ZW0gPyBfX19jb2xsaXNpb25TeXN0ZW0gOiBuZXcgU3BhdGlhbEdyaWQoKTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIgPSBuZXcgQ29sbGlzaW9uTWFuYWdlcih0aGlzLmNvbGxpc2lvblN5c3RlbSk7XHJcbiAgICAgICAgdGhpcy5nZXRDb2xsaWRlcnNXaXRoVGFncyA9IHRoaXMuY29sbGlzaW9uTWFuYWdlci5nZXRDb2xsaWRlcnNXaXRoVGFncy5iaW5kKHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDb2xsaXNpb25zID0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnVwZGF0ZS5iaW5kKHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vbkFkZGVkQ29sbGlkZXIgPSB0aGlzLmNvbGxpc2lvbk1hbmFnZXIub25BZGRlZENvbGxpZGVyLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9uUmVtb3ZlZENvbGxpZGVyID0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLm9uUmVtb3ZlZENvbGxpZGVyLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9mZkFkZGVkQ29sbGlkZXIgPSB0aGlzLmNvbGxpc2lvbk1hbmFnZXIub25BZGRlZENvbGxpZGVyLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9mZlJlbW92ZWRDb2xsaWRlciA9IHRoaXMuY29sbGlzaW9uTWFuYWdlci5vblJlbW92ZWRDb2xsaWRlci5iaW5kKHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGRDb2xsaWRlckNvdXBsZT0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLmFkZENvbGxpZGVyQ291cGxlLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyQ291cGxlPSB0aGlzLmNvbGxpc2lvbk1hbmFnZXIucmVtb3ZlQ29sbGlkZXJDb3VwbGUuYmluZCh0aGlzLmNvbGxpc2lvbk1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkQ29sbGlkZXJDb3VwbGVzPSB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuYWRkQ29sbGlkZXJDb3VwbGVzLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyQ291cGxlcz0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnJlbW92ZUNvbGxpZGVyQ291cGxlcy5iaW5kKHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vbkFmdGVyQ29sbGlzaW9ucz0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLm9uQWZ0ZXJDb2xsaXNpb25zLmJpbmQodGhpcy5jb2xsaXNpb25NYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9uQmVmb3JlQ29sbGlzaW9ucz0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLm9uQmVmb3JlQ29sbGlzaW9ucy5iaW5kKHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vZmZBZnRlckNvbGxpc2lvbnM9IHRoaXMuY29sbGlzaW9uTWFuYWdlci5vZmZBZnRlckNvbGxpc2lvbnMuYmluZCh0aGlzLmNvbGxpc2lvbk1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMub2ZmQmVmb3JlQ29sbGlzaW9ucz0gdGhpcy5jb2xsaXNpb25NYW5hZ2VyLm9mZkJlZm9yZUNvbGxpc2lvbnMuYmluZCh0aGlzLmNvbGxpc2lvbk1hbmFnZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyID0gbmV3IEdhbWVPYmplY3RNYW5hZ2VyKHRoaXMuYmFzZVBhdGgsIHRoaXMuY29sbGlzaW9uTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5hZGRHYW1lT2JqZWN0ID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5hZGRHYW1lT2JqZWN0LmJpbmQodGhpcy5nYW1lT2JqZWN0TWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5nZXRUZXh0dXJlID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5nZXRUZXh0dXJlLmJpbmQodGhpcy5nYW1lT2JqZWN0TWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vblRhZ2dlZEdhbWVPYmplY3RBZGRlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub25UYWdnZWRHYW1lT2JqZWN0QWRkZWQuYmluZCh0aGlzLmdhbWVPYmplY3RNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQgPSB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQuYmluZCh0aGlzLmdhbWVPYmplY3RNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9uR2FtZU9iamVjdEFkZGVkID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5vbkdhbWVPYmplY3RBZGRlZC5iaW5kKHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMub25HYW1lT2JqZWN0UmVtb3ZlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub25HYW1lT2JqZWN0UmVtb3ZlZC5iaW5kKHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIpO1xyXG5cclxuICAgICAgICBfX19jb2xsaXNpb25TeXN0ZW0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uTWFwRGVzdHJveWVkKGNiOiAoKSA9PiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9vbk1hcERlc3Ryb3llZExpc3RlbmVycy5wdXNoKGNiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkJlZm9yZU1hcERlc3Ryb3llZChjYjogKG1hcE5hbWU6IHN0cmluZywgbmV4dE1hcD86IHN0cmluZykgPT4gYW55KSB7XHJcbiAgICAgICAgdGhpcy5fb25CZWZvcmVNYXBEZXN0cm95ZWRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmQmVmb3JlTWFwRGVzdHJveWVkKGNiOiAobWFwTmFtZTogc3RyaW5nLCBuZXh0TWFwPzogc3RyaW5nKSA9PiBhbnkpIHtcclxuICAgICAgICB0aGlzLl9vbkJlZm9yZU1hcERlc3Ryb3llZExpc3RlbmVycyA9IHRoaXMuX29uTWFwRGVzdHJveWVkTGlzdGVuZXJzLmZpbHRlcihjID0+IGMgIT09IGNiKVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uTWFwQ3JlYXRlZChjYjogKCkgPT4gYW55KSB7XHJcbiAgICAgICAgdGhpcy5fb25NYXBDcmVhdGVkTGlzdGVuZXJzLnB1c2goY2IpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZk1hcENyZWF0ZWQoY2I6ICgpID0+IGFueSkge1xyXG4gICAgICAgIHRoaXMuX29uTWFwQ3JlYXRlZExpc3RlbmVycyA9IHRoaXMuX29uTWFwQ3JlYXRlZExpc3RlbmVycy5maWx0ZXIoYyA9PiBjICE9PSBjYilcclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmZNYXBEZXN0cm95ZWQoY2I6ICgpID0+IGFueSkge1xyXG4gICAgICAgIHRoaXMuX29uTWFwRGVzdHJveWVkTGlzdGVuZXJzID0gdGhpcy5fb25NYXBEZXN0cm95ZWRMaXN0ZW5lcnMuZmlsdGVyKGMgPT4gYyAhPT0gY2IpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENvbGxpc2lvblN5c3RlbShzeXN0ZW06IElDb2xsaXNpb25TeXN0ZW0pIHtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvblN5c3RlbSA9IHN5c3RlbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHVzZUNvbGxpc2lvblN5c3RlbShzeXN0ZW0gOiBJQ29sbGlzaW9uU3lzdGVtKSB7XHJcbiAgICAgICAgaWYoX19faW5pdGlhbGl6ZWRXb3JsZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFdvcmxkIHdhcyBhbHJlYWR5IGluaXRpYWxpemVkIG9yIGluaXRpYWxpemluZyB3aGVuIHdlIGNhbGxlZCB1c2UsIHRvIHVzZSBhIHBsdWdpbiB3aXRoIHRoZSBzdGF0aWMgbWV0aG9kLCB1c2Ugd29ybGQuc2V0Q29sbGlzaW9uU3lzdGVtIGlmIGl0cyBhbHJlYWR5IGluaXRpYWxpemVkLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX19jb2xsaXNpb25TeXN0ZW0gPSBzeXN0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyB1c2UocGx1Z2luOiBQbHVnaW5Jbml0LCBvcHRzPzogYW55KSB7XHJcbiAgICAgICAgLy90b2RvIG1heWJlIGl0J2QgYmUgYmV0dGVyIHRvIGp1c3QgZG8gaXQgb24gYSBnbG9iYWwgaW5zdGFuY2U/IHJpZ2h0IG5vdyBfX19pbml0IGlzIGEgYm9vbGVhblxyXG4gICAgICAgIC8vIGlmKHR5cGVvZiBfX19pbml0aWFsaXplZFdvcmxkICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIF9fX2luaXRpYWxpemVkV29ybGQudXNlKCk7XHJcbiAgICAgICAgaWYoX19faW5pdGlhbGl6ZWRXb3JsZCkgdGhyb3cgbmV3IEVycm9yKGBXb3JsZCB3YXMgYWxyZWFkeSBpbml0aWFsaXplZCBvciBpbml0aWFsaXppbmcgd2hlbiB3ZSBjYWxsZWQgdXNlLCB0byB1c2UgYSBwbHVnaW4gd2l0aCB0aGUgc3RhdGljIG1ldGhvZCwgbWFrZSBzdXJlIHRvIGNhbGwgV29ybGQudXNlIGJlZm9yZSB5b3UgY2FsbCBXb3JsZC5pbml0LCBvdGhlcndpc2UgdXNlIHRoZSByZXR1cm5lZCB3b3JsZCBvYmplY3QncyAudXNlIG1ldGhvZCBhbmQgbm90IHRoZSBzdGF0aWMgb25lLmApO1xyXG4gICAgICAgIGNvbnN0IHZhbGlkID0gV29ybGQuVmFsaWRhdGVQbHVnaW4oX19fcGx1Z2lucywgcGx1Z2luKTtcclxuICAgICAgICBpZihvcHRzKSB7XHJcbiAgICAgICAgICAgIHZhbGlkWydfX29wdHMnXSA9IG9wdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9fX3BsdWdpbnMucHVzaCh2YWxpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVzZShwbHVnaW46IFBsdWdpbkluaXQsIG9wdHM/OiBhbnkpIHtcclxuICAgICAgICBwbHVnaW4gPSBXb3JsZC5WYWxpZGF0ZVBsdWdpbih0aGlzLnBsdWdpbnMsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW5zLnB1c2gocGx1Z2luKTtcclxuICAgICAgICBzd2l0Y2gocGx1Z2luLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBQbHVnaW5UeXBlcy5Db2xsaXNpb246XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuYWRkUGx1Z2luKHBsdWdpbiBhcyBJTWFwQ29sbGlzaW9uUGx1Z2luLCB0aGlzLCBvcHRzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBsdWdpblR5cGVzLkdhbWVPYmplY3Q6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLmFkZFBsdWdpbihwbHVnaW4gYXMgSU1hcEdhbWVPYmplY3RQbHVnaW4sIHRoaXMsIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8qICBjYXNlIFBsdWdpblR5cGVzLk1hcDpcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMucGx1Z2lucy5pbmNsdWRlcyhwbHVnaW4gYXMgSU1hcFBsdWdpbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEdXBsaWNhdGUgcGx1Z2luOiAnICsgcGx1Z2luLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5wdXNoKHBsdWdpbiBhcyBJTWFwUGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFwcGx5TWFwUGx1Z2lucygpO1xyXG5cclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluc3RhbGwgcGx1Z2luOiBcIiR7cGx1Z2luLm5hbWV9XCIgQWxsIHBsdWdpbnMgbmVlZCBhIHR5cGUgcHJvcGV0eSBvZiAnY29sbGlzaW9uJywgJ2dhbWVfb2JqZWN0Jywgb3IgJ21hcCcgYnV0IHRoZSB0eXBlIHdhcyBzZXQgYXM6IFwiJHtwbHVnaW4udHlwZX1cImApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGFsbG93cyB1cyB0byBwYXNzIGluIGEgZmFjdG9yeSBwbHVnaW4gZnVuY3Rpb24gYW5kIHZhbGlkYXRlcyBpdCB3aXRob3V0IGludm9raW5nLiByZXR1cm5zIHRoZSBhY3R1YWwgcGx1Z2luLlxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgVmFsaWRhdGVQbHVnaW4oYTogQXJyYXk8UGx1Z2luPiwgcGx1Z2luOiBQbHVnaW5Jbml0LCB3YW50PWZhbHNlKSA6IFBsdWdpbiB7XHJcbiAgICAgICAgbGV0IHogPSB3YW50ID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgZm91bmQgOiBQbHVnaW4gPSB0eXBlb2YgKHBsdWdpbikgPT09ICdmdW5jdGlvbicgP1xyXG4gICAgICAgICAgICBhLmZpbmQocCA9PiBwLl9mICYmIHAuX2YgPT09IHBsdWdpbikgOiAvLyBpZiB0aGV5IGFzc2VkIGluIGZ1bmN0aW9uLCBmaW5kIHBsdWdpbiB3aXRoIHNhbWUgY29uc3RydWN0b3IgKF9mKVxyXG4gICAgICAgICAgICBhLmZpbmQocCA9PiBwLnR5cGUgPT09ICg8UGx1Z2luPnBsdWdpbikudHlwZSAmJiBwLm5hbWUgPT09IHBsdWdpbi5uYW1lKTsgLy9vdGhlcndpc2UgY2hlY2sgZm9yIHByb3BldHR5IG5hbWUgYW5kIHR5cGVcclxuICAgICAgICBpZihmb3VuZCkgeis9MjtcclxuICAgICAgICBzd2l0Y2goeikge1xyXG4gICAgICAgICAgICAvLyBub3QgZm91bmQsIG5vdCB3YW50ZWQsIHZhbGlkYXRlLlxyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBsZXQgX19fdmFsaWQgOiBJUGx1Z2luPFBsdWdpblR5cGVzPiA9IHR5cGVvZiAocGx1Z2luKSA9PT0gJ2Z1bmN0aW9uJyA/ICAoPFBsdWdpbkZhY3Rvcnk+cGx1Z2luKSgpIDogcGx1Z2luO1xyXG4gICAgICAgICAgICAgLy8gICBjb25zb2xlLmVycm9yKCdjPScsIF9fX3ZhbGlkLl9mID09PSBfX192YWxpZC5jb25zdHJ1Y3RvciwgJ29iaj0nLCBfX192YWxpZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX19fdmFsaWQ7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIC8vIHdhbnQsIG5vdCBmb3VuZFxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBwbHVnaW4gbmFtZSAke3BsdWdpbi5uYW1lfWApO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAvLyBmb3VuZCBub3Qgd2FudFxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBbHJlYWR5IGFkZGVkIHBsdWdpbiBvZiB0eXBlICR7Zm91bmQudHlwZX0gYW5kIG5hbWUgJHtmb3VuZC5uYW1lfWApO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAvLyB3YW50IGFuZCBmb3VuZFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBqdXN0IGFsaWFzZWQgdXNlLlxyXG4gICAgcHVibGljIHN0YXRpYyBhZGRQbHVnaW4ocGx1Z2luOiBQbHVnaW5Jbml0KSB7V29ybGQudXNlKHBsdWdpbik7fVxyXG4gICAgcHVibGljIGFkZFBsdWdpbihwbHVnaW46IFBsdWdpbkluaXQpIHt0aGlzLnVzZShwbHVnaW4pO31cclxuICAgIHN0YXRpYyB1bnVzZVBsdWdpbihwbHVnaW46IFBsdWdpbkluaXQpIHtcclxuICAgICAgICBpZighX19faW5pdGlhbGl6ZWRXb3JsZCkge1xyXG4gICAgICAgICAgY29uc3Qgd29ybGRJbmRleCA9IF9fX3BsdWdpbnMuaW5kZXhPZihXb3JsZC5WYWxpZGF0ZVBsdWdpbihfX19wbHVnaW5zLCBwbHVnaW4sIHRydWUpKTtcclxuICAgICAgICAgICAgX19fcGx1Z2lucy5zcGxpY2Uod29ybGRJbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2UgdGhlIGluaXRpYWxpemVkIFdvcmxkIGluc3RhbmNlIHVudXNlUGx1Z2luLCBub3Qgc3RhdGljIG1ldGhvZHMuJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdW51c2VQbHVnaW4ocGx1Z2luOiBQbHVnaW5Jbml0KSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVQbHVnaW4ocGx1Z2luKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZW1vdmVQbHVnaW4ocGx1Z2luOiBQbHVnaW5Jbml0KSB7XHJcbiAgICAgICAgcGx1Z2luID0gV29ybGQuVmFsaWRhdGVQbHVnaW4odGhpcy5wbHVnaW5zLCBwbHVnaW4sIHRydWUpO1xyXG4gICAgICAgIGlmKHBsdWdpbi50eXBlID09PSBQbHVnaW5UeXBlcy5Db2xsaXNpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnJlbW92ZVBsdWdpbihwbHVnaW4gYXMgSU1hcENvbGxpc2lvblBsdWdpbik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwbHVnaW4udHlwZSA9PT0gUGx1Z2luVHlwZXMuR2FtZU9iamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLnJlbW92ZVBsdWdpbihwbHVnaW4gYXMgSU1hcEdhbWVPYmplY3RQbHVnaW4pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMucGx1Z2lucy5pbmRleE9mKHBsdWdpbiBhcyBQbHVnaW4pO1xyXG4gICAgICAgIGlmKGlkeCA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgcGx1Z2luICR7cGx1Z2lufWApO1xyXG4gICAgICAgIHRoaXMucGx1Z2lucy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICBpZighdGhpcy5wbHVnaW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgLy8gIHRoaXMucmVhcHBseU1hcFBsdWdpbnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWFwcGx5TWFwUGx1Z2lucygpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGluaXQgKGJhc2VQYXRoOiBzdHJpbmcsIHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyIHwgUElYSS5XZWJHTFJlbmRlcmVyLCBvcHRpb25zPzogV29ybGRPcHRpb25zKSA6IFByb21pc2U8V29ybGQ+ICB7XHJcbiAgIC8vICAgICBQSVhJLnNldHRpbmdzLlNDQUxFX01PREUgPSBQSVhJLlNDQUxFX01PREVTLk5FQVJFU1Q7XHJcbiAgICAgICAgX19faW5pdGlhbGl6ZWRXb3JsZCA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBfZGVmYXVsdFdvcmxkT3B0aW9ucygpO1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gbWVyZ2VPcHRpb25zKG9wdGlvbnMsIGRlZmF1bHRPcHRpb25zKSA6IGRlZmF1bHRPcHRpb25zO1xyXG5cclxuICAgICAgICBjb25zdCB3ID0gbmV3IFdvcmxkKGJhc2VQYXRoKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgX19fcGx1Z2lucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB3LnVzZShfX19wbHVnaW5zW2ldLCBfX19wbHVnaW5zW2ldWydfX29wdHMnXSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBfX19wbHVnaW5zWydvcHRzJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9fX3BsdWdpbnMubGVuZ3RoID0gMDtcclxuICAgICAgICBpZih0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBpZih3aW5kb3dbJ19fX3BsdWdpbnMnXSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvd1snX19fcGx1Z2lucyddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHcuX2luaXQoYmFzZVBhdGgsIHJlbmRlcmVyLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2luaXQoYmFzZVBhdGg6IHN0cmluZywgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXIsIG9wdGlvbnM6IFdvcmxkT3B0aW9ucykgOiBQcm9taXNlPFdvcmxkPiB7XHJcbiAgICAgICAgaWYodGhpcy5jb2xsaXNpb25TeXN0ZW0gIT09IHRoaXMuY29sbGlzaW9uTWFuYWdlci5jb2xsaXNpb25TeXN0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnNldENvbGxpc2lvblN5c3RlbSh0aGlzLmNvbGxpc2lvblN5c3RlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICBpZihvcHRpb25zLmNodW5rVmlzaWJpbGl0eUludGVydmFsKSB7XHJcbiAgICAgICAgICAgIF9DSFVOS19VUERBVEVfSU5URVJWQUwgPSBvcHRpb25zLmNodW5rVmlzaWJpbGl0eUludGVydmFsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmxhZ3MgPSB7XHJcbiAgICAgICAgICAgIGluZGV4ZWREQjogaW5kZXhlZERCX2VuYWJsZWQoKSxcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlOiB0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJyxcclxuICAgICAgICAgICAgd2ViV29ya2VyOiAodHlwZW9mIChXb3JrZXIpICE9PSBcInVuZGVmaW5lZFwiKSxcclxuICAgICAgICAgICAgbWF4VGV4dHVyZVNpemU6IHJlc29sdmVNYXhUZXh0dXJlU2l6ZShyZW5kZXJlciksXHJcbiAgICAgICAgICAgIHdlYkdsOiByZW5kZXJlci50eXBlID09PSAxXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmluaXRpYWxpemVkKSB0aHJvdyBuZXcgRXJyb3IoJ1dvcmxkIGFscmVhZHkgaW5pdGlhbGl6ZWQuJyk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA6IFdvcmxkSW5pdE1ldGFEYXRhID0gYXdhaXQgaHR0cEdldEFzeW5jKHRoaXMuYmFzZVBhdGggKyAnL21ldGEuanNvbicpO1xyXG4gICAgICAgIHRoaXMud29ybGRNZXRhRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgZm9yKGxldCB0YWcgaW4gZGF0YS5wcm9wU2VxVG9OYW1lTG9va3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VxVG9Qcm9wW3RhZ10gPSBkYXRhLnByb3BTZXFUb05hbWVMb29rdXBbdGFnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCB0YWcgaW4gZGF0YS5jb2xUYWdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VxVG9UYWdbZGF0YS5jb2xUYWdzW3RhZ11dID0gdGFnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnJlYXBwbHlQbHVnaW5zKCk7XHJcbiAgICAgICAgdGhpcy5yZWFwcGx5TWFwUGx1Z2lucygpO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlci5pbml0KHRoaXMuc2VxVG9UYWcpO1xyXG4gICAgICAgIHRoaXMubWFwc0luaXREYXRhID0gW107XHJcblxyXG4gICAgICAgIC8vIHRoaXMgaXMgYSAyZCBhcnJheSBiZWNhdXNlIHRoZSBmaXJzdCBkaW1lbnNpb24gb2YgdGhlIGFycmF5J3MgaW5kZXggcmVwcmVzZW50cyB0aGUgc2l6ZSBvZiB0aGUgbWFwLlxyXG4gICAgICAgIHRoaXMud29ybGRNZXRhRGF0YS5tYXBzLmZvckVhY2goKGFycmF5LCBzaXplc2VxOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChhID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwc0luaXREYXRhLnB1c2goeyAuLi5hLCBzaXplOiBzaXplc2VxIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMud29ybGRNZXRhRGF0YS5tYXBzO1xyXG5cclxuICAgICAgICBpZighZGF0YSkgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgZ2V0dGluZyBtZXRhIGRhdGEgb24gcGF0aCcgKyB0aGlzLmJhc2VQYXRoKTtcclxuICAgICAgICBpZih0aGlzLmZsYWdzLmluZGV4ZWREQikge1xyXG4gICAgICAgICAgICB0aGlzLmluZGV4RGJMb2FkZXIgPSBuZXcgTG9hZGVyKGBfX3R5X18ke2RhdGEud29ybGR9YCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhEYkxvYWRlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuZmxhZ3Mud2ViV29ya2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rV29ya2VyID0gbmV3IENodW5rTG9hZGVyV29ya2VyKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNodW5rV29ya2VyLmluaXRXb3JsZChkYXRhLndvcmxkLCAgYmFzZVBhdGggKyAnL21hcHMnLCBkYXRhLnRpbGVTaXplU2VxTG9va3VwLCB0aGlzLnNlcVRvVGFnLCB0aGlzLnNlcVRvUHJvcCk7XHJcbiAgICAgICAgICAgICAgICBpZihyZXMgIT09IFJlc3VsdENvZGVzLlNVQ0NFU1MpIHRocm93IG5ldyBFcnJvcignZGlkbnQgZ2V0IHN1Y2Nlc3MuJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmludGVyZmFjZU1hbmFnZXIgPSBuZXcgSW50ZXJmYWNlTWFuYWdlcih0aGlzLmludGVyZmFjZVN0YWdlLCB0aGlzLnJlbmRlcmVyLCB0aGlzLmluZGV4RGJMb2FkZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkVGV4dHVyZVRvSW50ZXJmYWNlQXRsYXMgPSB0aGlzLmludGVyZmFjZU1hbmFnZXIuYWRkVGV4dHVyZVRvSW50ZXJmYWNlQXRsYXMuYmluZCh0aGlzLmludGVyZmFjZU1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMubG9hZEludGVyZmFjZVRleHR1cmUgPSB0aGlzLmludGVyZmFjZU1hbmFnZXIubG9hZFRleHR1cmUuYmluZCh0aGlzLmludGVyZmFjZU1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuYWRkSW50ZXJmYWNlSXRlbSA9IHRoaXMuaW50ZXJmYWNlTWFuYWdlci5hZGRJbnRlcmZhY2VJdGVtLmJpbmQodGhpcy5pbnRlcmZhY2VNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUludGVyZmFjZUl0ZW0gPSB0aGlzLmludGVyZmFjZU1hbmFnZXIucmVtb3ZlSW50ZXJmYWNlSXRlbS5iaW5kKHRoaXMuaW50ZXJmYWNlTWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5jbGVhckludGVyZmFjZSA9IHRoaXMuaW50ZXJmYWNlTWFuYWdlci5jbGVhckludGVyZmFjZS5iaW5kKHRoaXMuaW50ZXJmYWNlTWFuYWdlcik7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIuaW5pdCh0aGlzLnJlbmRlcmVyLCB0aGlzLmdhbWVTdGFnZSwgdGhpcy53b3JsZE1ldGFEYXRhLCB0aGlzLmZsYWdzLCB0aGlzLmluZGV4RGJMb2FkZXIpO1xyXG5cclxuICAgICAgICB0aGlzLm9mZlRhZ2dlZEdhbWVPYmplY3RBZGRlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub2ZmVGFnZ2VkR2FtZU9iamVjdEFkZGVkLmJpbmQodGhpcy5nYW1lT2JqZWN0TWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vZmZUYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub2ZmVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQuYmluZCh0aGlzLmdhbWVPYmplY3RNYW5hZ2VyKTtcclxuICAgICAgICB0aGlzLm9mZkdhbWVPYmplY3RBZGRlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub2ZmR2FtZU9iamVjdEFkZGVkLmJpbmQodGhpcy5nYW1lT2JqZWN0TWFuYWdlcik7XHJcbiAgICAgICAgdGhpcy5vZmZHYW1lT2JqZWN0UmVtb3ZlZCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIub2ZmR2FtZU9iamVjdFJlbW92ZWQuYmluZCh0aGlzLmdhbWVPYmplY3RNYW5hZ2VyKTtcclxuXHJcbiAgICAgICAgdGhpcy50aWxlTWFuYWdlciA9IG5ldyBUaWxlTWFuYWdlcih0aGlzLmJhc2VQYXRoICsgJy90aWxlc2V0cycsIGRhdGEudGlsZXNldHMsIGRhdGEudGlsZVNpemVTZXFMb29rdXAsIHRoaXMuZmxhZ3MsIHRoaXMuaW5kZXhEYkxvYWRlcik7XHJcbiAgICAgICAgYXdhaXQgdGhpcy50aWxlTWFuYWdlci5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJDYW1lcmEgPSBuZXcgUGxheWVyQ2FtZXJhKG9wdGlvbnMuY2FtZXJhLCB0aGlzLmdhbWVTdGFnZSwgdGhpcy5mbGFncywgdGhpcy5yZW5kZXJlcik7XHJcbiAgICAgICAgdGhpcy5iaW5kQ2FtZXJhQ2VudGVyID0gdGhpcy5wbGF5ZXJDYW1lcmEuYmluZENhbWVyYUNlbnRlci5iaW5kKHRoaXMucGxheWVyQ2FtZXJhKTtcclxuICAgICAgICB0aGlzLnNjcmVlblRvV29ybGQgPSB0aGlzLnBsYXllckNhbWVyYS5zY3JlZW5Ub1dvcmxkLmJpbmQodGhpcy5wbGF5ZXJDYW1lcmEpO1xyXG4gICAgICAgIHRoaXMud29ybGRUb1NjcmVlbiA9IHRoaXMucGxheWVyQ2FtZXJhLndvcmxkVG9TY3JlZW4uYmluZCh0aGlzLnBsYXllckNhbWVyYSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbk1hbmFnZXIgPSBuZXcgUmVzb2x1dGlvbk1hbmFnZXIodGhpcy5wbGF5ZXJDYW1lcmEsIG9wdGlvbnMucmVzb2x1dGlvblNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLmNodW5rTWFuYWdlciA9IG5ldyBDaHVua01hbmFnZXIodGhpcy5iYXNlUGF0aCwgcmVuZGVyZXIsIGRhdGEsIHRoaXMubWFwc0luaXREYXRhLCB0aGlzLnNlcVRvVGFnLCAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLCB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLCB0aGlzLnRpbGVNYW5hZ2VyLCB0aGlzLnBsYXllckNhbWVyYSwgdGhpcy5pbmRleERiTG9hZGVyLCB0aGlzLmNodW5rV29ya2VyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmNodW5rTWFuYWdlci5pbml0KCk7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRNYXAgPSBuZXcgTWFwKHRoaXMuZ2FtZVN0YWdlLCByZW5kZXJlciwgdGhpcy5mbGFncywgdGhpcy50aWxlTWFuYWdlciwgdGhpcy5jaHVua01hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyID0gdGhpcy5yZW5kZXJlci5yZW5kZXIuYmluZCh0aGlzLnJlbmRlcmVyLCB0aGlzLm1haW5TdGFnZSk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVNYXNzaXZlKGRlbHRhPzogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5lbGFwc2VkKz1kZWx0YTtcclxuICAgICAgICB0aGlzLmVsYXBzZWRDb2wrPWRlbHRhO1xyXG4gICAgICAgIGlmKHRoaXMuZWxhcHNlZCA+IF9DSFVOS19VUERBVEVfSU5URVJWQUwpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGFwc2VkID0gMDtcclxuICAgICAgICAgICAgaWYoISh0aGlzLmNodW5rSXRlcmF0aW9uICUgMikpIHsgLy8gJSAyIHdhcyAwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rTWFuYWdlci51cGRhdGVWaXNpYmxlQ2h1bmtzKGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtJdGVyYXRpb24gPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua01hbmFnZXIudXBkYXRlQWxtb3N0VmlzaWJsZUNodW5rcyhkZWx0YSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rSXRlcmF0aW9uKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIubmV4dEJhdGNoKCk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJDYW1lcmEudXBkYXRlU3RhZ2UoKTtcclxuICAgICAgICAvL3RoaXMucGxheWVyQ2FtZXJhLnVwZGF0ZUxldmVsU3ByaXRlcyhkZWx0YSk7XHJcbiAgICAgICAvLyB0aGlzLmxvYWRlZE1hcC51cGRhdGVTdGFnZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU5vb3AoZGVsdGE/OiBudW1iZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZU1lZGl1bShkZWx0YT86IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucGxheWVyQ2FtZXJhLnVwZGF0ZVN0YWdlKCk7XHJcbiAgICAgICAgLy8gICAgdGhpcy5wbGF5ZXJDYW1lcmEudXBkYXRlTGV2ZWxTcHJpdGVzKGRlbHRhKTtcclxuICAgIC8vICAgIHRoaXMubG9hZGVkTWFwLnVwZGF0ZVN0YWdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlU21hbGwoZGVsdGE/OiBudW1iZXIpe1xyXG4gICAgIC8vICAgdGhpcy5wbGF5ZXJDYW1lcmEudXBkYXRlTGV2ZWxTcHJpdGVzKGRlbHRhKTtcclxuICAgICAgICB0aGlzLnBsYXllckNhbWVyYS51cGRhdGVTdGFnZSgpO1xyXG4gICAgIC8vICAgdGhpcy5sb2FkZWRNYXAudXBkYXRlU3RhZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzTG9hZGluZ01hcCgpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzTG9hZGluZ01hcDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgaXNSZWFkeSgpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLl9pc0xvYWRpbmdNYXAgJiYgISF0aGlzLmN1cnJlbnRNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRNYXAobWFwSWQ6IHN0cmluZywgb3B0cz86IHsgY2FtZXJhUG9zaXRpb24/OiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH19KSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGlmKHRoaXMuX2lzTG9hZGluZ01hcCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgbG9hZCBuZXcgbWFwOiAke21hcElkfSB1bnRpbCBjdXJyZW50IG1hcDogJHt0aGlzLmN1cnJlbnRNYXB9IGlzIGZpbmlzaGVkIGxvYWRpbmdgKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihtYXBJZCA9PSB0aGlzLmN1cnJlbnRNYXApIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmKHRoaXMuY3VycmVudE1hcCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5fb25CZWZvcmVNYXBEZXN0cm95ZWRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uQmVmb3JlTWFwRGVzdHJveWVkTGlzdGVuZXJzW2ldKHRoaXMuY3VycmVudE1hcCwgbWFwSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmdhbWVTdGFnZS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tYXBMb2FkQ291bnQrKztcclxuICAgICAgICB0aGlzLl9pc0xvYWRpbmdNYXAgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudE1hcCA9IG1hcElkO1xyXG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5jaHVua0l0ZXJhdGlvbiA9IDA7XHJcbiAgICAgICAgLy8gIGNvbnN0IG9sZCA9IHRoaXMuYWRkR2FtZU9iamVjdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgdGhpcy5hZGRHYW1lT2JqZWN0ID0gKG9wdHMpID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGFkZCBnYW1lIG9iamVjdHMgd2hpbGUgdGhlIG1hcCBpcyBsb2FkaW5nLmApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZighdGhpcy5pbml0aWFsaXplZCkgdGhyb3cgbmV3IEVycm9yKCdJbml0aWFsaXplIHdvcmxkIGJlZm9yZSBsb2FkaW5nIG1hcHMuJyk7XHJcbiAgICAgICAgLy8gdXNlIGEgbm8tb3AgdXBkYXRlIGluIGNhc2UgZm9yIHNvbWUgcmVhc29uIHdlIHRyeSB0byBjYWxsIHRoZSB1cGRhdGUgYXBpIHdoaWxlIHdlcmUgbG9hZGluZyBhIG5ldyBtYXAuXHJcbiAgICAgICAgdGhpcy51cGRhdGVDaHVua3MgPSB0aGlzLnVwZGF0ZU5vb3AuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFwTWV0YURhdGEgPSB0aGlzLm1hcHNJbml0RGF0YS5maW5kKG0gPT4gbS5pZCA9PT0gbWFwSWQpO1xyXG4gICAgICAgIGlmKCFtYXBNZXRhRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGluaXQgZGF0YSBmb3IgbWFwICR7bWFwSWR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtZXRhRGF0YSA6IERlY29kZWRNYXBNZXRhRGF0YSA9IHRoaXMuY2h1bmtNYW5hZ2VyLmdldE1hcE1ldGFEYXRhKG1hcElkLCBtYXBNZXRhRGF0YS50cyk7XHJcblxyXG4gICAgICAgIGlmKCFtZXRhRGF0YSkge1xyXG4gICAgICAgICAgICBpZighdGhpcy5jYWNoZWRNYXBNZXRhRGF0YVttYXBJZF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkTWFwTWV0YURhdGFbbWFwSWRdID0gYXdhaXQgdGhpcy5jaHVua01hbmFnZXIucmVxdWVzdE1hcE1ldGFEYXRhKG1hcElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZXRhRGF0YSA9IHRoaXMuY2FjaGVkTWFwTWV0YURhdGFbbWFwSWRdO1xyXG4gICAgICAgICAgICBpZihtZXRhRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjb3VsZCBub3QgZmluZCBtYXAgbWV0YSBkYXRhIGZvciAke21hcElkfWApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9UT0RPOiB0aGluayBhYm91dCBob3cgd2Ugd2FudCB0byBoYW5kbGUgaXQgd2hlbiBpbmRleGVkZGIgZG9lc250IHdvcmsuLi4gbWlnaHQgbmVlZCB0byBoYXZlIGEgc2VwZXJhdGUgZW5kcG9pbnQgZm9yIGdldHRpbmcgbW9yZSBkZXRhaWxlZCBtZXRhIGRhdGEgaW5pdGlhbGx5LlxyXG4gICAgICAgICAgICAvL3Rocm93IG5ldyBFcnJvcihgQXQgdGhpcyBwb2ludCB3ZSBzaG91bGQgaGF2ZSBoYWQgdGhlIG1hcCBtZXRhIGRhdGEuIG1ha2Ugc3VyZSBpdHMgcmVzcG9uZGluZyBjb3JyZWN0bHkgd2hlbiBjYWxsaW5nIGNodW5rTWFuYWdlci5pbml0KClgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgd2FzSW5pdGlhbGl6ZWQgPSB0aGlzLmxvYWRlZE1hcC5pbml0aWFsaXplZDtcclxuICAgICAgICB0aGlzLmxvYWRlZE1hcC5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMucGxheWVyQ2FtZXJhLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLnJlc2V0KCk7XHJcblxyXG4gICAgICAgIGlmKHdhc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLl9vbk1hcERlc3Ryb3llZExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25NYXBEZXN0cm95ZWRMaXN0ZW5lcnNbaV0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuaW5pdE1hcChtZXRhRGF0YSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkZWRNYXAuaW5pdGlhbGl6ZShtZXRhRGF0YSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uTWFuYWdlci5zZXRNYXBMZW5ndGhzKG1ldGFEYXRhLm1hcFcsIG1ldGFEYXRhLm1hcEgpO1xyXG4gICAgICAgIHRoaXMucGxheWVyQ2FtZXJhLnVwZGF0ZU1hcFNpemUobWV0YURhdGEubWFwVywgbWV0YURhdGEubWFwSCk7XHJcbiAgICAgICAgaWYob3B0cz8uY2FtZXJhUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXJDYW1lcmEuYm91bmRDYW1lcmFDZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyQ2FtZXJhLmJvdW5kQ2FtZXJhQ2VudGVyLnggPSBvcHRzLmNhbWVyYVBvc2l0aW9uLng7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckNhbWVyYS5ib3VuZENhbWVyYUNlbnRlci55ID0gb3B0cy5jYW1lcmFQb3NpdGlvbi55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ2FtZXJhLnVwZGF0ZVZpZXdSZWN0KG9wdHMuY2FtZXJhUG9zaXRpb24ueCwgb3B0cy5jYW1lcmFQb3NpdGlvbi55KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbWFwU2l6ZSA9IHJlc29sdmVNYXBTaXplKG1ldGFEYXRhLm1hcFcsIG1ldGFEYXRhLm1hcEgpO1xyXG4gICAgICAgIHRoaXMucmViaW5kVXBkYXRlKG1hcFNpemUpO1xyXG4gICAgICAgIC8vIGNvbnN0IHsgeCwgeSB9ID0gY2FtZXJhQ2VudGVyID8gY2FtZXJhQ2VudGVyIDogeyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jaHVua01hbmFnZXIubG9hZE1hcChtYXBNZXRhRGF0YS5pZCwgbWV0YURhdGEsIHRoaXMubWFwTG9hZENvdW50KTtcclxuICAgICAgICAvLyAgdGhpcy5wbGF5ZXJDYW1lcmEudXBkYXRlVmlld1JlY3QoeCwgeSk7XHJcbiAgICAgICAgLy8gIHRoaXMuYWRkR2FtZU9iamVjdCA9IG9sZDtcclxuICAgICAgICB0aGlzLl9pc0xvYWRpbmdNYXAgPSBmYWxzZTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5fb25NYXBDcmVhdGVkTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29uTWFwQ3JlYXRlZExpc3RlbmVyc1tpXShvcHRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhZ2UudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZShkZWx0YT86IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2h1bmtzKGRlbHRhKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbGxpc2lvbnMoZGVsdGEpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZWJpbmRVcGRhdGUobWFwU2l6ZTogTWFwU2l6ZSkge1xyXG4gICAgICAgIHN3aXRjaChtYXBTaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTWFwU2l6ZS5MQVJHRTpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2h1bmtzID0gdGhpcy51cGRhdGVNYXNzaXZlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNYXBTaXplLk1FRElVTTpcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2h1bmtzID0gdGhpcy51cGRhdGVNYXNzaXZlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNYXBTaXplLlNNQUxMOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaHVua3MgPSB0aGlzLnVwZGF0ZVNtYWxsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX29uQ29sbGlzaW9uKGNvbEE6IENvbGxpZGVyRGF0dW08YW55PiwgY29sQjogQ29sbGlkZXJEYXR1bTxhbnk+KSB7fVxyXG4gICAgX29uQ2hhbmdlZE1hcCgpIHt9XHJcbiAgICBfb25BZGRlZENvbGxpZGVycygpIHt9XHJcbiAgICBfb25BZGRlZE9iamVjdCgpIHt9XHJcblxyXG4gICAgX29uUmVtb3ZlZENvbGxpZGVycygpIHt9XHJcbiAgICBfb25SZW1vdmVkT2JqZWN0cygpIHt9XHJcblxyXG4gICAgX29uU2hvd0NodW5rKCkge31cclxuICAgIF9vbkluaXRpYWxpemVkQ2h1bmsoKSB7fVxyXG5cclxuICAgIF9vbkhpZGVDaHVuaygpIHt9XHJcbiAgICBfb25EZXN0cm95Q2h1bmsoKSB7fVxyXG5cclxuICAgIHN0YXRpYyBSYWRpYW5BbmdsZUZyb21Qb3NpdGlvbnMocDE6IFBvaW50LCBwMjogUG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMihwMi55IC0gcDEueSwgcDIueCAtIHAxLngpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIERlZ3JlZUFuZ2xlRnJvbVBvc2l0aW9ucyhwMTogUG9pbnQsIHAyOiBQb2ludCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHAyLnkgLSBwMS55LCBwMi54IC0gcDEueCkgKiAxODAgLyBNYXRoLlBJO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBDb2xsaWRlclNoYXBlcyA9IHtcclxuICAgIFsnUkVDVCddOiBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNULFxyXG4gICAgWydQT0xZR09OJ106IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT04sXHJcbiAgICBbJ1BPSU5UJ106IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5ULFxyXG4gICAgWydDSVJDTEUnXTogUnVudGltZUNvbGxpZGVyU2hhcGUuQ0lSQ0xFLFxyXG4gICAgWydMSU5FJ106IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUsXHJcbiAgICBbJ0VMSVBTRSddOiBSdW50aW1lQ29sbGlkZXJTaGFwZS5FTElQU0UsXHJcbn1cclxuXHJcbmV4cG9ydCB7IENvbGxpZGVyIGFzIE1hcENvbGxpZGVyLCBHYW1lT2JqZWN0LCBDb2xsaWRlclNoYXBlcyB9O1xyXG5cclxuV29ybGRbJ0NvbGxpZGVyU2hhcGVzJ10gPSBDb2xsaWRlclNoYXBlcztcclxuZXhwb3J0IGRlZmF1bHQgV29ybGQ7IiwiaW1wb3J0IHtDb2xsaWRlckRhdHVtLCBQb2ludCwgUG9seWdvbiwgUmVjdCwgU2hhcGVEYXRhfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgTWFwIGZyb20gJy4vTWFwJztcclxuaW1wb3J0IHtHYW1lT2JqZWN0fSBmcm9tIFwiLi9HYW1lT2JqZWN0XCI7XHJcbmltcG9ydCBXb3JsZCBmcm9tIFwiLi9Xb3JsZFwiO1xyXG5cclxudHlwZSBQbHVnaW5Db2xsaWRlclBhcmFtID0gQXJyYXk8QXJyYXk8Q29sbGlkZXJEYXR1bTxSZWN0IHwgUG9seWdvbiB8IFBvaW50Pj4+O1xyXG5cclxuZXhwb3J0IHR5cGUgb25VcGRhdGVIb29rID0gKGN1ck1hcDogTWFwLCBjb2xsaWRlcnM6IFBsdWdpbkNvbGxpZGVyUGFyYW0sIGNodW5rSW5kZXg6IG51bWJlcikgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgb25JbWFnZXNBZGRlZEhvb2sgPSAoY3VyTWFwOiBNYXAsIGltYWdlczogQXJyYXk8QXJyYXk8R2FtZU9iamVjdD4+LCBjaHVua0luZGV4PzogbnVtYmVyKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBvbkltYWdlc1JlbW92ZWRIb29rID0gKGN1ck1hcDogTWFwLCBpbWFnZXM6IEFycmF5PEFycmF5PEdhbWVPYmplY3Q+PiwgY2h1bmtJbmRleD86IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCB0eXBlIG9uQ2h1bmtDb2xsaWRlcnNIb29rID0gKGNvbGxpZGVyczogQXJyYXk8Q29sbGlkZXJEYXR1bTxTaGFwZURhdGE+PikgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyVGFnSG9vayA9IChjb2xsaWRlcjogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+LCB0YWc6IHN0cmluZykgPT4gdm9pZDtcclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJIb29rID0gKGNvbGxpZGVyOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIG9uSW1hZ2VIb29rID0gKGN1ck1hcDogTWFwLCBpbWFnZXM6IFBsdWdpbkNvbGxpZGVyUGFyYW0pID0+IHZvaWQ7XHJcbmV4cG9ydCB0eXBlIEdhbWVPYmplY3RUYWdIb29rID0gKGdhbWVPYmplY3Q6IEdhbWVPYmplY3QsIHRhZzogc3RyaW5nKSA9PiB2b2lkO1xyXG5leHBvcnQgdHlwZSBvbkNodW5rSW5pdGlhbGl6ZWRIb29rID0gKGN1ck1hcDogTWFwLCBjaHVua0luZGV4OiBudW1iZXIpID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgdHlwZSBvbkNvbGxpc2lvbkhvb2sgPSAoY29sQTogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+LCBjb2xCOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgZW51bSBQbHVnaW5UeXBlcyB7XHJcbiAgICBDb2xsaXNpb249J2NvbGxpc2lvbicsXHJcbiAgICBSZW5kZXI9J3JlbmRlcicsXHJcbiAgICBHYW1lT2JqZWN0PSdnYW1lX29iamVjdCcsXHJcbiAgICBNYXA9J21hcCcsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIElQbHVnaW48VD4gPSB7XHJcbiAgICBfZj86ICgpID0+IElQbHVnaW48VD4sXHJcbiAgICBpbml0PzogKHdvcmxkOiBXb3JsZCwgb3B0cz86IGFueSkgPT4gdm9pZFxyXG4gICAgdHlwZTogVCxcclxuICAgIG5hbWU6IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSU1hcEdhbWVPYmplY3RQbHVnaW4gPSBJUGx1Z2luPFBsdWdpblR5cGVzLkdhbWVPYmplY3Q+ICYge1xyXG4gICAgdGFncz86IEFycmF5PHN0cmluZz4sXHJcbiAgICBvbkdhbWVPYmplY3RBZGRlZDogKGltYWdlOiBHYW1lT2JqZWN0KSA9PiB2b2lkLFxyXG4gICAgb25HYW1lT2JqZWN0UmVtb3ZlZDogKGltYWdlOiBHYW1lT2JqZWN0KSA9PiB2b2lkLFxyXG4gICAgb25UYWdnZWRHYW1lT2JqZWN0QWRkZWQ6IHtbdGFnOiBzdHJpbmddOiAoaW1hZ2U6IEdhbWVPYmplY3QpID0+IHZvaWQgfSxcclxuICAgIG9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQ6IHtbdGFnOiBzdHJpbmddOiAoaW1hZ2U6IEdhbWVPYmplY3QpID0+IHZvaWQgfSxcclxuICAgIG9uR2FtZU9iamVjdEFkZGVkVGFnPzoge1t0YWc6IHN0cmluZ106IChpbWFnZTogR2FtZU9iamVjdCkgPT4gdm9pZCB9LFxyXG4gICAgb25HYW1lT2JqZWN0UmVtb3ZlZFRhZz86IHtbdGFnOiBzdHJpbmddOiAoaW1hZ2U6IEdhbWVPYmplY3QpID0+IHZvaWQgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJTWFwUGx1Z2luID0gSVBsdWdpbjxQbHVnaW5UeXBlcy5NYXA+ICYge1xyXG4gICAgb25VcGRhdGU/IDogb25VcGRhdGVIb29rO1xyXG4gICAgb25NYXBJbml0aWFsaXplZD8gOiAoY3VyTWFwOiBNYXApID0+IHZvaWQ7XHJcbiAgICBiZWZvcmVNYXBEZXN0cm95PyA6IChjdXJNYXA6IE1hcCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb2xsaWRlclRhZ3M/OiBBcnJheTxzdHJpbmc+LFxyXG4gICAgb25Db2xsaWRlcnNBZGRlZD8gOiAoY3VyTWFwOiBNYXAsIGNvbGxpZGVyczogUGx1Z2luQ29sbGlkZXJQYXJhbSwgY2h1bmtJbmRleDogbnVtYmVyKSA9PiB2b2lkLFxyXG4gICAgb25Db2xsaWRlcnNSZW1vdmVkPyA6IChjdXJNYXA6IE1hcCwgY29sbGlkZXJzOiBQbHVnaW5Db2xsaWRlclBhcmFtLCBjaHVua0luZGV4OiBudW1iZXIpID0+IHZvaWQsXHJcblxyXG4gICAgdGlsZVRhZ3M/OiBBcnJheTxzdHJpbmc+LFxyXG4gICAgb25DaHVua1RpbGVzTG9hZGVkPyA6IChjdXJNYXA6IE1hcCwgdGlsZXM6IEFycmF5PEFycmF5PG51bWJlcj4+LCBjaHVua0luZGV4OiBudW1iZXIpID0+IHZvaWRcclxuICAgIG9uQ2h1bmtJbWFnZXNMb2FkZWQ/IDogKCkgPT4gdm9pZCxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSU1hcENvbGxpc2lvblBsdWdpbiA9IElQbHVnaW48UGx1Z2luVHlwZXMuQ29sbGlzaW9uPiAmIHtcclxuICAgIG9wdGlvbnM/OiAoKSA9PiBQcm9taXNlPGFueT4gfCBhbnksXHJcbiAgICB0YWdBczogQXJyYXk8c3RyaW5nPixcclxuICAgIHRhZ0JzPzogQXJyYXk8c3RyaW5nPixcclxuIC8vICAgb25Db2xsaWRlclRhZ0FkZGVkPzogKGNvbGxpZGVyQTogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkO1xyXG4gICAgb25Db2xsaXNpb24/IDogKGNvbGxpZGVyQTogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+LCBjb2xsaWRlckI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uQ29sbGlzaW9uRW5kPyA6IChjb2xsaWRlckE6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPiwgY29sbGlkZXJCOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ7XHJcbiAgICBvbkNvbGxpc2lvblN0YXJ0PzogKGNvbGxpZGVyQTogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+LCBjb2xsaWRlckI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uQ29sbGlkZXJBZGRlZFRhZ0E/OiAoY29sbGlkZXI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uQ29sbGlkZXJBZGRlZFRhZ0I/OiAoY29sbGlkZXI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uQ29sbGlkZXJSZW1vdmVkVGFnQT86IChjb2xsaWRlcjogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkO1xyXG4gICAgb25Db2xsaWRlclJlbW92ZWRUYWdCPzogKGNvbGxpZGVyOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQ7XHJcbiAgICBvbkFkZGVkQ29sbGlkZXJXaXRoVGFnQT86IChjb2xsaWRlcjogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkO1xyXG4gICAgb25SZW1vdmVkVGFnQT86IChjb2xsaWRlcjogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkO1xyXG4gICAgb25BZGRlZENvbGxpZGVyV2l0aFRhZ0I/OiAoY29sbGlkZXI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uUmVtb3ZlZFRhZ0I/OiAoY29sbGlkZXI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uQWRkZWQ/OiAoY29sbGlkZXI6IENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPikgPT4gdm9pZDtcclxuICAgIG9uUmVtb3ZlZD86IChjb2xsaWRlcjogQ29sbGlkZXJEYXR1bTxTaGFwZURhdGE+KSA9PiB2b2lkO1xyXG4gICAgb25CZWZvcmVDb2xsaXNpb25zPzogKGxhc3RDb2xsaXNpb25zOiBBcnJheTxDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4+KSA9PiB2b2lkO1xyXG4gICAgb25BZnRlckNvbGxpc2lvbnM/OiAobmV3Q29sbGlzaW9uczogQXJyYXk8Q29sbGlkZXJEYXR1bTxTaGFwZURhdGE+PikgPT4gdm9pZDtcclxuICAgIF9mPzogKCkgPT4gSU1hcENvbGxpc2lvblBsdWdpblxyXG59IiwiaW1wb3J0IHtcclxuICAgIEF2YWlsYWJpbGl0eUZsYWdzLFxyXG4gICAgTGF5ZXJEYXRhLFxyXG4gICAgTGV2ZWxCbG9ja2VyRGF0YSxcclxuICAgIExldmVsTGlua0RhdGEsIExldmVsU3ByaXRlRGF0YSwgV29ybGRNYXBJbml0TWV0YURhdGEsXHJcbiAgICBNYXBNZXRhRGF0YSwgVGlsZVNwcml0ZSwgV29ybGREaXNwbGF5T2JqZWN0LFxyXG4gICAgV29ybGRMZXZlbFNlY3Rpb25EYXRhLFxyXG4gICAgV29ybGRTZWN0aW9uQ29udGFpbmVycywgQ29sbGlkZXJEYXR1bSwgUmVjdCwgUG9seWdvbiwgUG9pbnRcclxufSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQge0NodW5rTWFuYWdlcn0gZnJvbSBcIi4vQ2h1bmtNYW5hZ2VyXCI7XHJcbmltcG9ydCB7VGlsZU1hbmFnZXJ9IGZyb20gXCIuL1RpbGVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IEdhbWVPYmplY3RNYW5hZ2VyIH0gZnJvbSBcIi4vR2FtZU9iamVjdE1hbmFnZXJcIjtcclxuaW1wb3J0IHtQbGF5ZXJDYW1lcmF9IGZyb20gXCIuL1BsYXllckNhbWVyYVwiO1xyXG5pbXBvcnQge0RlY29kZWRNYXBNZXRhRGF0YX0gZnJvbSBcIi4uLy4uLy4uL0VuY29kZXIvc3JjL0RlY29kZXJcIjtcclxuaW1wb3J0IHtSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFfSBmcm9tIFwiLi4vLi4vbGliL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSBcIi4vR2FtZU9iamVjdFwiO1xyXG5pbXBvcnQge0xheWVyQ29udGFpbmVyfSBmcm9tIFwiLi9MYXllckNvbnRhaW5lclwiO1xyXG5pbXBvcnQge0lNYXBDb2xsaXNpb25QbHVnaW59IGZyb20gXCIuL0lQbHVnaW5cIjtcclxuY29uc3QgIEZMSVBQRURfSE9SSVpPTlRBTExZX0ZMQUcgPSAweDgwMDAwMDAwO1xyXG5jb25zdCAgRkxJUFBFRF9WRVJUSUNBTExZX0ZMQUcgICA9IDB4NDAwMDAwMDA7XHJcbmNvbnN0ICBGTElQUEVEX0RJQUdPTkFMTFlfRkxBRyAgID0gMHgyMDAwMDAwMDtcclxuLy9UT0RPIGNhbm5vdCByZWFkIHByb3BldHkub2ZmIG9mIHVuZGVmaW5lZC4uIHNvbWV0aGluZyB3aGVuIGRlbGV0aW5nIGxheWVyIHdpdGggdGlsZXMvaW1hZ2VzIG9uIGl0XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcCB7XHJcblxyXG4gICAgLy8gbWV0aG9kcyB0aGF0IGdldCByZWJpbmRlZCBmb3IgYmFzZWQgb24gdXRpbGl6ZWQgcGx1Z2luIGhvb2tzIGZvciBtaWNybyBvcHRpbWl6YXRpb25cclxuICAgIF9hZGRJbWFnZXNIYW5kbGVyIDogKHNwcml0ZXNCeUxheWVyOiBBcnJheTxBcnJheTxHYW1lT2JqZWN0Pj4pID0+IHZvaWQ7XHJcbiAgICBfcmVtb3ZlSW1hZ2VzSGFuZGxlciA6IChzcHJpdGVzQnlMYXllcjogQXJyYXk8QXJyYXk8R2FtZU9iamVjdD4+KSA9PiB2b2lkO1xyXG5cclxuIC8vICAgcmVhZG9ubHkgcmVtb3ZlSW1hZ2VQbHVnaW5zSG9va3M6IEFycmF5PD5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBtYW5hZ2VkUGx1Z2luczogQXJyYXk8SU1hcENvbGxpc2lvblBsdWdpbj4gPSBbXTtcclxuXHJcbiAgICByZWFkb25seSBjaHVua01hbmFnZXI6IENodW5rTWFuYWdlcjtcclxuICAgIHByaXZhdGUgaW1hZ2VNYW5hZ2VyOiBHYW1lT2JqZWN0TWFuYWdlcjtcclxuICAgIHJlYWRvbmx5IHRpbGVNYW5hZ2VyOiBUaWxlTWFuYWdlcjtcclxuICAgIHJlYWRvbmx5IGZsYWdzOiBBdmFpbGFiaWxpdHlGbGFncztcclxuICAgIHByaXZhdGUgc3RhZ2U6IFBJWEkuQ29udGFpbmVyO1xyXG4gICAgcHJpdmF0ZSBtZXRhRGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhO1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlcjtcclxuICAgIHByaXZhdGUgb25CbG9ja2VyRGF0YUFkZGVkSGFuZGxlcjogKGNodW5rSW5kZXg6IG51bWJlciwgYmxvY2tlckRhdGE6IExldmVsQmxvY2tlckRhdGEpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG9uQmxvY2tlckRhdGFSZW1vdmVkSGFuZGxlcjogKGNodW5rSW5kZXg6IG51bWJlciwgYmxvY2tlckRhdGE6IExldmVsQmxvY2tlckRhdGEpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG9uTGV2ZWxMaW5rc0FkZGVkSGFuZGxlcjogKGNodW5rSW5kZXg6IG51bWJlciwgbGV2ZWxMaW5rRGF0YTogTGV2ZWxMaW5rRGF0YSkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgb25MZXZlbExpbmtzUmVtb3ZlZEhhbmRsZXI6IChjaHVua0luZGV4OiBudW1iZXIsIGxldmVsTGlua0RhdGE6IExldmVsTGlua0RhdGEpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIF9vbkxldmVsU3ByaXRlc0FkZGVkOiAoc3ByaXRlc0RhdGE6IEFycmF5PExldmVsU3ByaXRlRGF0YT4pID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcGFuUmlnaHQgPSB0cnVlO1xyXG4gICAgcmVhZG9ubHkgbGF5ZXJTdGFnZXM6IEFycmF5PExheWVyQ29udGFpbmVyPiA9IFtdO1xyXG4gICAgY29uc3RydWN0b3Ioc3RhZ2U6IFBJWEkuQ29udGFpbmVyLCByZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlciwgZmxhZ3M6IEF2YWlsYWJpbGl0eUZsYWdzLCB0aWxlTWFuYWdlcjogVGlsZU1hbmFnZXIsIGNodW5rTWFuYWdlcjogQ2h1bmtNYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IHN0YWdlO1xyXG4gICAgICAgIHRoaXMudGlsZU1hbmFnZXIgPSB0aWxlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmNodW5rTWFuYWdlciA9IGNodW5rTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XHJcbiAgICAgICAgdGhpcy50aWxlTWFuYWdlciA9IHRpbGVNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuaW5pdFNlY3Rpb25NYW5hZ2VyRXZlbnRIYW5kbGVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICBwcml2YXRlIHJlbW92ZUltYWdlSGFuZGxlcnNXaXRoUGx1Z2lucyhzcHJpdGVzQnlMYXllcjogQXJyYXk8QXJyYXk8R2FtZU9iamVjdD4+KSB7XHJcbi8vICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5yZW1vdmVJbWFnZXMpXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNwcml0ZXNCeUxheWVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKCFzcHJpdGVzQnlMYXllcltpXSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBzcHJpdGVzQnlMYXllcltpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYoIXNwcml0ZXNCeUxheWVyW2ldW2pdKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbaV0ucmVtb3ZlTWFwU3ByaXRlKHNwcml0ZXNCeUxheWVyW2ldW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICAgICovXHJcbiAgICBwcml2YXRlIHJlbW92ZUltYWdlSGFuZGxlcnNOb1BsdWdpbnMoc3ByaXRlc0J5TGF5ZXI6IEFycmF5PEFycmF5PEdhbWVPYmplY3Q+Pikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzcHJpdGVzQnlMYXllci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZighc3ByaXRlc0J5TGF5ZXJbaV0pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc3ByaXRlc0J5TGF5ZXJbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKCFzcHJpdGVzQnlMYXllcltpXVtqXSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyU3RhZ2VzW2ldLnJlbW92ZU1hcFNwcml0ZShzcHJpdGVzQnlMYXllcltpXVtqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZEltYWdlSGFuZGxlcnNOb1BsdWdpbnMoc3ByaXRlc0J5TGF5ZXI6IEFycmF5PEFycmF5PEdhbWVPYmplY3Q+Pikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzcHJpdGVzQnlMYXllci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZighc3ByaXRlc0J5TGF5ZXJbaV0pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc3ByaXRlc0J5TGF5ZXJbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKCFzcHJpdGVzQnlMYXllcltpXVtqXSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBzcHJpdGVzQnlMYXllcltpXVtqXS54ID0gc3ByaXRlc0J5TGF5ZXJbaV1bal0ud29ybGRYO1xyXG4gICAgICAgICAgICAgICAgc3ByaXRlc0J5TGF5ZXJbaV1bal0ueSA9IHNwcml0ZXNCeUxheWVyW2ldW2pdLndvcmxkWTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbaV0uYWRkTWFwU3ByaXRlKHNwcml0ZXNCeUxheWVyW2ldW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qXHJcbiAgICBwcml2YXRlIHJlYmluZEV2ZW50cygpIHtcclxuICAgIH1cclxuXHJcbiAgICAgKi9cclxuXHJcbiAgICAvL3RvZG86ICByZW1vdmUgbGlzdGVuZXJzIGlmIHRoZSBtYXAgd29udCBuZWVkIHRoZW0uXHJcbiAgICBwcml2YXRlIGluaXRTZWN0aW9uTWFuYWdlckV2ZW50SGFuZGxlcnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIub24oJ2FkZC1zdWJjaHVuay1sYXllci1zcHJpdGUnLCAoeyBsYXllckluZGV4LCBzcHJpdGUgfTogeyBsYXllckluZGV4OiBudW1iZXIsIHNwcml0ZTogUElYSS5TcHJpdGUgfSkgPT4ge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdBRERFRCBDSFVOSycsIHNwcml0ZSwgJ3RvIGxheWVyOicsIGxheWVySW5kZXgpXHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbbGF5ZXJJbmRleF0uYWRkU3ViQ2h1bmsoc3ByaXRlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIub24oJ3JlbW92ZS1tYXAtY2h1bmtzJywgKHNwcml0ZXM6IEFycmF5PEFycmF5PFdvcmxkRGlzcGxheU9iamVjdD4+KSA9PiB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzcHJpdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgc3ByaXRlc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNwcml0ZXNbaV1bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXllclN0YWdlc1tpXS5yZW1vdmVDaGlsZChzcHJpdGVzW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIub24oJ2FkZC1tYXAtc3ViLWNodW5rcycsIChzcHJpdGVzOiBBcnJheTxBcnJheTxQSVhJLkNvbnRhaW5lciB8IFBJWEkuU3ByaXRlPj4pID0+IHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNwcml0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcnMgPSBzcHJpdGVzW2ldXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgY29udGFpbmVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5sYXllclN0YWdlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhaW5lciAmJiBjb250YWluZXIucGFyZW50ICE9PSBsYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGxvb2tzIGxpa2Ugc3RhdGljIHNwcml0ZXMgZG8gYmV0dGVyIHdoZW4gd2UgcmVuZGVyIHRvIHRoZSBsYXllciBhbmQgdGhlbiBqdXN0IG1vdmUgdGhlIGxheWVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmFkZFN1YkNodW5rKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIub24oJ2FkZC1tYXAtY2h1bmstbGF5ZXJzJywgKGNvbnRhaW5lcnMgOiBBcnJheTxQSVhJLlNwcml0ZSB8IFBJWEkuQ29udGFpbmVyPikgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGFpbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyc1tpXSAmJiB0aGlzLmxheWVyU3RhZ2VzW2ldLmFkZFN1YkNodW5rKGNvbnRhaW5lcnNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2h1bmtNYW5hZ2VyLm9uKCdhZGQtbWFwLWNodW5rcycsIChzcHJpdGVzOiBBcnJheTxBcnJheTxXb3JsZERpc3BsYXlPYmplY3Q+PikgPT4ge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3ByaXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXllclN0YWdlc1tpXS5hZGRTdWJDaHVua3Moc3ByaXRlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU3RhZ2VzKCkge1xyXG4gICAgICAgIGNvbnN0IHNwZWVkID0gMTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5tZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucGFuUmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbaV0ueCAtPXNwZWVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyU3RhZ2VzW2ldLnkgLT0gc3BlZWRcclxuICAgICAgICAgICAgICAgIGlmKCBpID09PSB0aGlzLm1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMubGF5ZXJTdGFnZXNbaV0ueCA8PSAtMjUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFuUmlnaHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyU3RhZ2VzW2ldLnggKz0gc3BlZWRcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbaV0ueSArPSBzcGVlZFxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gdGhpcy5tZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmxheWVyU3RhZ2VzW2ldLnggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhblJpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUobWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSkgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZih0aGlzLmluaXRpYWxpemVkKSB0aHJvdyBuZXcgRXJyb3IoXCJUaWxlTWFwIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQsIGNhbGwgZWl0aGVyIG1hcC5yZXNldCBvciBtYXAuZGVzdHJveSBiZWZvcmUgaW5pdGlhbGl6aW5nIGEgbmV3IG1hcC5cIik7XHJcbiAgICAgICAgdGhpcy5tZXRhRGF0YSA9IG1ldGFEYXRhO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBtZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXMucHVzaChuZXcgTGF5ZXJDb250YWluZXIoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UuYWRkQ2hpbGQodGhpcy5sYXllclN0YWdlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRQbGF5ZXJWaWV3UmVjdCh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAvLyB0aGlzLnBsYXllckNhbWVyYS5zZXRQbGF5ZXJWaWV3UmVjdCh3aWR0aCwgaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UGxheWVyKHBsYXllcjogUElYSS5TcHJpdGUpIHtcclxuICAgICAgLy8gIHRoaXMucGxheWVyQ2FtZXJhLnNldFBsYXllcihwbGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRTcHJpdGUoc3ByaXRlOiBQSVhJLlNwcml0ZSkge1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVTcHJpdGUoc3ByaXRlOiBQSVhJLlNwcml0ZSkge1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlc2V0KCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmluaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VkUGx1Z2lucy5mb3JFYWNoKChwOiBJTWFwQ29sbGlzaW9uUGx1Z2luKSA9PiB7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIC8vICB0aGlzLnN0YWdlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaHVua01hbmFnZXIucmVzZXQoKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5tZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubGF5ZXJTdGFnZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJTdGFnZXNbaV0uZGVzdHJveUxheWVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXllclN0YWdlcy5sZW5ndGggPSAwO1xyXG4gICAgICAvLyAgdGhpcy5zdGFnZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2xlZXAocmVzZXRUaW1lb3V0PzogbnVtYmVyKXtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29sbGlkZXJUeXBlKGNvbGxpZGVyVHlwZTogc3RyaW5nKSB7fVxyXG4gICAgcHVibGljIGFkZENvbGxpZGVyVHlwZShjb2xsaWRlclR5cGU6IHN0cmluZykge31cclxuICAgIHB1YmxpYyBhZGRDb2xsaWRlclRvU3ByaXRlKGNvbGxpZGVyOiBDb2xsaWRlckRhdHVtPFJlY3QgfCBQb2x5Z29uIHwgUG9pbnQ+LCBzcHJpdGU6IFBJWEkuU3ByaXRlKSB7fVxyXG4gICAgcHVibGljIGFkZENvbGxpZGVyKGNvbGxpZGVyOiBDb2xsaWRlckRhdHVtPFJlY3QgfCBQb2x5Z29uIHwgUG9pbnQ+KSB7fVxyXG5cclxuICAgIHB1YmxpYyBvbkJsb2NrZXJEYXRhQWRkZWQoY2I6IChjaHVua0luZGV4OiBudW1iZXIsIGJsb2NrZXJEYXRhOiBMZXZlbEJsb2NrZXJEYXRhKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5vbkJsb2NrZXJEYXRhQWRkZWRIYW5kbGVyID0gY2I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25CbG9ja2VyRGF0YVJlbW92ZWQoY2I6IChjaHVua0luZGV4OiBudW1iZXIsIGJsb2NrZXJEYXRhOiBMZXZlbEJsb2NrZXJEYXRhKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5vbkJsb2NrZXJEYXRhUmVtb3ZlZEhhbmRsZXIgPSBjYjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgX29uQmxvY2tlckRhdGFBZGRlZChjaHVua0luZGV4OiBudW1iZXIsIGJsb2NrZXJEYXRhOiBMZXZlbEJsb2NrZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5vbkJsb2NrZXJEYXRhQWRkZWRIYW5kbGVyICYmIHRoaXMub25CbG9ja2VyRGF0YUFkZGVkSGFuZGxlcihjaHVua0luZGV4LCBibG9ja2VyRGF0YSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9vbkJsb2NrZXJEYXRhUmVtb3ZlZChjaHVua0luZGV4OiBudW1iZXIsIGJsb2NrZXJEYXRhOiBMZXZlbEJsb2NrZXJEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5vbkJsb2NrZXJEYXRhUmVtb3ZlZEhhbmRsZXIgJiYgdGhpcy5vbkJsb2NrZXJEYXRhQWRkZWRIYW5kbGVyKGNodW5rSW5kZXgsIGJsb2NrZXJEYXRhKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSAnLi9HYW1lT2JqZWN0JztcclxuaW1wb3J0IHtXb3JsZERpc3BsYXlPYmplY3R9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTGF5ZXJDb250YWluZXIgZXh0ZW5kcyBQSVhJLkNvbnRhaW5lciB7XHJcbiAgICBwdWJsaWMgb2JqZWN0Q29udGFpbmVyOiBQSVhJLkNvbnRhaW5lcjtcclxuICAgIHJlYWRvbmx5IHN1YkNodW5rczogQXJyYXk8UElYSS5TcHJpdGU+ID0gW107XHJcbiAgICBwdWJsaWMgdGFncz86IEFycmF5PHN0cmluZz47XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWdzPzogQXJyYXk8c3RyaW5nPikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgaWYodGFncykge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveUxheWVyKCkge1xyXG4gICAgICAgIGlmKHRoaXMub2JqZWN0Q29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbSh0aGlzLm9iamVjdENvbnRhaW5lci5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGNoaWxkcmVuW2ldWydsYXllckluZGV4J107XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY2hpbGRyZW5baV1bJ2xheWVyUGFyZW50J107XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdENvbnRhaW5lci5yZW1vdmVDaGlsZChjaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95T2JqZWN0Q29udGFpbmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYodGhpcy5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHRoaXMuY2hpbGRyZW4pLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjLnBhcmVudC5yZW1vdmVDaGlsZChjKTtcclxuICAgICAgICAgICAgICAgIGMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5wYXJlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcylcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFN1YkNodW5rKGNvbnRhaW5lcjogUElYSS5Db250YWluZXIpIHtcclxuICAgICAgICBpZih0aGlzLm9iamVjdENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLmNoaWxkcmVuLnBvcCgpO1xyXG4gICAgICAgICAgICBpZihvYmohPT10aGlzLm9iamVjdENvbnRhaW5lcikgdGhyb3cgbmV3IEVycm9yKGBMYXN0IGNoaWxkIHNob3VsZCBhbHdheXMgYmUgb2JqZWN0IGNvbnRhaW5lci5gKVxyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5vYmplY3RDb250YWluZXIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoY29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFN1YkNodW5rcyhjb250YWluZXJzOiBBcnJheTxQSVhJLkNvbnRhaW5lciB8IFdvcmxkRGlzcGxheU9iamVjdD4pIHtcclxuICAgICAgICBpZih0aGlzLm9iamVjdENvbnRhaW5lcikge1xyXG4gICAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLmNoaWxkcmVuLnBvcCgpO1xyXG4gICAgICAgICAgICBpZihvYmohPT10aGlzLm9iamVjdENvbnRhaW5lcikgdGhyb3cgbmV3IEVycm9yKGBMYXN0IGNoaWxkIHNob3VsZCBhbHdheXMgYmUgb2JqZWN0IGNvbnRhaW5lci5gKVxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGFpbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChjb250YWluZXJzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMub2JqZWN0Q29udGFpbmVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29udGFpbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChjb250YWluZXJzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlc3Ryb3lPYmplY3RDb250YWluZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLm9iamVjdENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5vYmplY3RDb250YWluZXIuZGVzdHJveSgpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdENvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlTWFwU3ByaXRlKGdhbWVPYmplY3Q6IEdhbWVPYmplY3QsIGlzTGF5ZXJDaGFuZ2U9ZmFsc2UpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3Qgc3ByaXRlVG9SZW1vdmUgPSBnYW1lT2JqZWN0LmRlbGVnYXRlZFNwcml0ZSB8fCBnYW1lT2JqZWN0O1xyXG4gICAgICAgIGlmKHNwcml0ZVRvUmVtb3ZlLnBhcmVudCA9PT0gdGhpcy5vYmplY3RDb250YWluZXIpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGdhbWVPYmplY3RbJ2xheWVyUGFyZW50J107XHJcbiAgICAgICAgICAgIGRlbGV0ZSBnYW1lT2JqZWN0WydsYXllckluZGV4J107XHJcbiAgICAgICAgICAgIC8vIGlmIGl0cyBhIGxheWVyIGNoYW5nZSB3ZSBkbyBub3Qgd2FudCB0byBjYWxsIHRoZSByZW1vdmVGcm9tTWFwIG9uIHRoZSBnYW1lIG9iamVjdCBzaW5jZSB0aGF0XHJcbiAgICAgICAgICAgIC8vIHdvdWxkIHdpbmQgdXAgZGVpbml0aWxpemluZyBsb3RzIG9mIGl0cyBzdGF0ZS4gd2Ugb25seSBjYWxsIHRoYXQgaWYgaXRzIGEgdG90YWwgcHVyZ2UuXHJcbiAgICAgICAgICAgICFpc0xheWVyQ2hhbmdlICYmIGdhbWVPYmplY3QucmVtb3ZlRnJvbU1hcCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gc28gYmVjYXVzZSB3ZSBjYWxsIHJlbW92ZUZyb21NYXAoKSBhZ2FpbiwgaXRzIHBvc3NpYmxlIHRoYXQgdGhlIGNvbGxpZGVycyBnZXR0aW5nXHJcbiAgICAgICAgICAgIC8vIHJlbW92ZWQgZnJvbSB0aGUgbWFwIG9uIHRoZSBnYW1lIG9iamVjdCB3aWxsIGFsc28gd2luZCB1cCB0cmlnZ2VyaW5nIGJlZm9yZSB3ZSBldmVyIGdldCB0byB0aGlzXHJcbiAgICAgICAgICAgIC8vIChzbyB3aGVuIHdlIGNhbGwgZ2FtZU9iamVjdC5yZW1vdmVGcm9tTWFwKCksIHRoaXMgc2FtZSBtZXRob2QgbWlnaHQgYmUgY2FsbGVkIGJlZm9yZSB3ZSBldmVyIGdldCB0byB0aGlzIGxpbmVcclxuICAgICAgICAgICAgLy8gb2YgY29kZSBpbiB0aGUgZ2FtZU9iamVjdCdzIGN1cnJlbnQgY29udGV4dCwgdGhlcmVmb3JlIHRoZSBvYmplY3RDb250YWluZXIgaXMgZGVzdHJveWVkIGFscmVhZHkgc2luY2Ugd2UgcmVtb3ZlZCB0aGUgc3ByaXRlLlxyXG4gICAgICAgICAgICAvLyBpbSBtb3ZpbmcgdGhlIGNvZGUgdG8gcmVtb3ZlIHRoZSBnYW1lT2JqZWN0IHNwcml0ZSBmcm9tIHRoZSBsYXllciBmaXJzdCBob3BpbmcgaXQgZG9lc250IGJyZWFrIGFueXRoaW5nLCBvdGhlcndpc2Ugd2UgbW92ZSBpdCBiYWNrXHJcbiAgICAgICAgICAgIC8vIHRvIGhvdyBpdCB3YXMgYW5kIGRvIGEgbnVsbCBjaGVjayBvbiBvYmplY3QgY29udGFpbmVyLlxyXG4gICAgICAgICAgICB0aGlzLm9iamVjdENvbnRhaW5lci5yZW1vdmVDaGlsZChzcHJpdGVUb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLm9iamVjdENvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveU9iamVjdENvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGdhbWVPYmplY3QpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHJlbW92aW5nIHNwcml0ZSwgaXQgd2FzbnQgYSBjaGlsZCcpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRNYXBTcHJpdGUoZ2FtZU9iamVjdDogR2FtZU9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZVRvQWRkID0gZ2FtZU9iamVjdC5kZWxlZ2F0ZWRTcHJpdGUgfHwgZ2FtZU9iamVjdDtcclxuICAgICAgICBpZighdGhpcy5vYmplY3RDb250YWluZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5vYmplY3RDb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLm9iamVjdENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Q29udGFpbmVyLmFkZENoaWxkKHNwcml0ZVRvQWRkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBRERJTkcgTUFQIFNQUklURScsIHNwcml0ZSk7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYoZ2FtZU9iamVjdC56SW5kZXggPCAoPEdhbWVPYmplY3Q+dGhpcy5vYmplY3RDb250YWluZXIuY2hpbGRyZW5bdGhpcy5vYmplY3RDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMV0pLnpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlVG9BZGQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RDb250YWluZXIuY2hpbGRyZW4uc29ydCgoYTogR2FtZU9iamVjdCwgYjogR2FtZU9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGEuc29ydEJ5WSAmJiBiLnNvcnRCeVkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEueVNvcnRQb2ludCAtIGIueVNvcnRQb2ludDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuc29ydEJ5WSAmJiAhYi5zb3J0QnlZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGIuekluZGV4ID09PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnlTb3J0UG9pbnQgLSBiLnlTb3J0UG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYS5zb3J0QnlZICYmIGIuc29ydEJ5WSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhLnpJbmRleCA9PT0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnlTb3J0UG9pbnQgLSBiLnlTb3J0UG9pbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuekluZGV4IC0gYi56SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlVG9BZGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtCbG9ja2VyRGF0YSwgVGlsZXNldE1ldGFEYXRhLCBBdmFpbGFiaWxpdHlGbGFncywgVGlsZXNldEluaXRNZXRhRGF0YSwgVGlsZVNwcml0ZX0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IHtUaWxlc2V0fSBmcm9tIFwiLi9UaWxlc2V0XCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge0NvbGxpZGVyRGF0YX0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7bWFrZVNpemVUaWxlS2V5fSBmcm9tIFwiLi4vLi4vLi4vRWRpdG9yQ29yZS91dGlsc1wiO1xyXG5leHBvcnQgY2xhc3MgVGlsZU1hbmFnZXIge1xyXG4gICAgcmVhZG9ubHkgbG9hZGVyOiBQSVhJLmxvYWRlcnMuTG9hZGVyO1xyXG4gICAgcmVhZG9ubHkgdGlsZXNldE1ldGFEYXRhOiBBcnJheTxUaWxlc2V0SW5pdE1ldGFEYXRhPjtcclxuICAgIHJlYWRvbmx5IHRpbGVzZXRNZXRhRGF0YVRvTG9hZDoge1t0aWxlc2V0SWQ6IHN0cmluZ106IFRpbGVzZXRNZXRhRGF0YX0gPXt9O1xyXG4gICAgcmVhZG9ubHkgdGlsZXNldHM6IEFycmF5PEFycmF5PFRpbGVzZXQ+PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgYmFzZVVybDogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgaW5kZXhlZERiRW5hYmxlZDogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IGZsYWdzOiBBdmFpbGFiaWxpdHlGbGFncztcclxuICAgIHJlYWRvbmx5IGluZGV4RGJMb2FkZXI6IExvYWRlcjtcclxuICAgIHByaXZhdGUgc3ByaXRlUG9vbDogQXJyYXk8VGlsZVNwcml0ZT4gPSBbXTtcclxuICAgIHByaXZhdGUgY2FjaGVkVGlsZUNvbGxpZGVyczoge1t0aWxlSWQgOiBzdHJpbmddOiBDb2xsaWRlckRhdGEgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSB0aWxlU2l6ZVNlcUxvb2t1cDogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IoYmFzZVBhdGg6IHN0cmluZywgdGlsZXNldHM6IEFycmF5PFRpbGVzZXRJbml0TWV0YURhdGE+LCB0aWxlU2l6ZVNlcUxvb2t1cDogQXJyYXk8bnVtYmVyPiwgZmxhZ3M6IEF2YWlsYWJpbGl0eUZsYWdzLCBpbmRleERiTG9hZGVyPzogTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gYmFzZVBhdGg7XHJcbiAgICAgICAgdGhpcy50aWxlU2l6ZVNlcUxvb2t1cCA9IHRpbGVTaXplU2VxTG9va3VwO1xyXG4gICAgICAgIHRoaXMudGlsZXNldHMgPSBuZXcgQXJyYXkodGlsZVNpemVTZXFMb29rdXAubGVuZ3RoIC8gMikuZmlsbCgxKS5tYXAoKCkgPT4gW10pO1xyXG4gICAgICAgIHRoaXMuaW5kZXhlZERiRW5hYmxlZCA9IGZsYWdzLmluZGV4ZWREQjtcclxuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBuZXcgUElYSS5sb2FkZXJzLkxvYWRlcigpO1xyXG4gICAgICAgIHRoaXMudGlsZXNldE1ldGFEYXRhID0gdGlsZXNldHM7XHJcbiAgICAgICAgdGhpcy5pbmRleERiTG9hZGVyID0gaW5kZXhEYkxvYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdCgpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGlsZXNldE1ldGFEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFEYXRhIDogVGlsZXNldEluaXRNZXRhRGF0YSA9IHRoaXMudGlsZXNldE1ldGFEYXRhW2ldO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRUaWxlc2V0KG1ldGFEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVUaWxlc2V0KHNpemVLZXk6IHN0cmluZywgdGlsZXNldElkOiBzdHJpbmcpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIHRoaXMudGlsZXNldHNbc2l6ZUtleV0uZmluZCh0ID0+IHQudGlsZXNldERhdGEgPT0gdGlsZXNldElkKS5kZXN0cm95KCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNldHNbc2l6ZUtleV1bdGlsZXNldElkXTtcclxuICAgICAgICBpZighT2JqZWN0LmtleXModGhpcy50aWxlc2V0c1tzaXplS2V5XSkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNldHNbc2l6ZUtleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZFRpbGVzZXQodGlsZXNldEluaXRNZXRhRGF0YTogVGlsZXNldEluaXRNZXRhRGF0YSkgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB0aWxlc2V0ID0gbmV3IFRpbGVzZXQodGlsZXNldEluaXRNZXRhRGF0YSwgdGhpcy5sb2FkZXIsIHRoaXMuYmFzZVVybCwgdGhpcy5pbmRleERiTG9hZGVyKTtcclxuICAgICAgICAgICAgYXdhaXQgdGlsZXNldC5sb2FkUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgICAgIC8vVE9ETzogd2UgbmVlZCB0byBkbyBhIGNoZWNrIGV2ZW50dWFsbHkgaW5jYXNlIHRoZXJlcyBkaWZmIHRpbGVzaXplcyB3aXRoIHRoZSBzYW1lIHByb2R1Y3QgaW4gd2lkdGggYW5kIGhlaWdodC4uLiBJLkUuIDEgdGlsZXNldCB3aXRoIDh4OCBhbmQgb25lIHRoYXQncyA0KjE2IGJ1dCBkb2luZyBzaXplIGtleXMgbGlrZSB0aGlzIGlzIG11Y2ggZmFzdGVyIHRoYW4gY29uY2F0b25hdGluZyBzdHJpbmdzLlxyXG4gICAgICAgICAgICBsZXQgZm91bmRTZXEgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRpbGVTaXplU2VxTG9va3VwIGlzIGEgZmxhdCBhcnJheSB3aXRoIFsgd2lkdGgsIGhlaWdodCBdIHZhbHVlcywgc28gaW5jciBieSAyIGFuZCBjaGVjayBbaV0gYW5kIFtpKzFdIGVxdWFsIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IGFjY29yZGluZ2x5XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnRpbGVTaXplU2VxTG9va3VwLmxlbmd0aDsgaSs9Mikge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy50aWxlU2l6ZVNlcUxvb2t1cFtpXSA9PT0gdGlsZXNldC50aWxlc2V0RGF0YS50aWxlV2lkdGggJiYgdGhpcy50aWxlU2l6ZVNlcUxvb2t1cFtpKzFdID09PSB0aWxlc2V0LnRpbGVzZXREYXRhLnRpbGVIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZFNlcSA9IChpLzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGZvdW5kU2VxIDwgMCkgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCB0aGUgY29ycmVjdCBzZXEgZm9yIHRpbGVzZXQ6ICcgKyBKU09OLnN0cmluZ2lmeSh0aWxlc2V0SW5pdE1ldGFEYXRhKSk7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZXNldHNbZm91bmRTZXFdLnB1c2godGlsZXNldCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGlsZSh0aWxlU2l6ZVNlcTogbnVtYmVyLCB0aWxlSW5kZXg6IG51bWJlcikgOiBUaWxlU3ByaXRlIHtcclxuICAgICAgLy8gIGNvbnNvbGUubG9nKCd0cnlpbmcgdG8gZ2V0IHRpbGUnLCB0aWxlSW5kZXgsICdmb3Igc2l6ZUtleScsIHNpemVLZXkpO1xyXG4gICAgICAvLyAgY29uc29sZS5sb2coJ3RpbGVzZXRzIHdhcycsIHRoaXMudGlsZXNldHMpO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlO1xyXG4gICAgICAgIGxldCBjb2xsaWRlcnM7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGlsZXNldHNbdGlsZVNpemVTZXFdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhcnRJbmRleCwgZW5kSW5kZXggfSA9IHRoaXMudGlsZXNldHNbdGlsZVNpemVTZXFdW2ldO1xyXG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTVEFSVCBJTkRFWDonLCBzdGFydEluZGV4LCAnRU5EIElOREVYOycsIGVuZEluZGV4KTtcclxuICAgICAgICAgICAgaWYodGlsZUluZGV4ID49IHN0YXJ0SW5kZXggJiYgdGlsZUluZGV4IDwgZW5kSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUgPSB0aGlzLnRpbGVzZXRzW3RpbGVTaXplU2VxXVtpXS5nZXRUaWxlVGV4dHVyZSh0aWxlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnR09UIFRFWFRVUkUnLCB0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIGNvbGxpZGVycyA9IHRoaXMudGlsZXNldHNbdGlsZVNpemVTZXFdW2ldLmdldENvbGxpZGVycyh0aWxlSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzcHJpdGUgPSB0aGlzLnNwcml0ZVBvb2wucG9wKCk7XHJcbiAgICAgICAgaWYoIXNwcml0ZSkge1xyXG4gICAgICAgICAgICBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUoKSBhcyBUaWxlU3ByaXRlO1xyXG4gICAgICAgICAgICBzcHJpdGUucmVtb3ZlRnJvbU1hcCA9IChvcHRzPykgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHNwcml0ZS5jb2xsaWRlcnM7XHJcbiAgICAgICAgICAgICAgICBzcHJpdGUudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwcml0ZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUucGFyZW50LnJlbW92ZUNoaWxkKHNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcHJpdGUudGV4dHVyZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBzcHJpdGUucm90YXRpb24gPSAwO1xyXG4gICAgICAgICAgICAgICAgc3ByaXRlLnNjYWxlLnNldCgxLCAxKTtcclxuICAgICAgICAgICAgICAgIHNwcml0ZS5hbmNob3Iuc2V0KDAsIDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVQb29sLnB1c2goc3ByaXRlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBzcHJpdGUuY29sbGlkZXJzID0gY29sbGlkZXJzO1xyXG4gICAgICAgIHNwcml0ZS50ZXh0dXJlID0gdGV4dHVyZTtcclxuICAgICAgICBzcHJpdGUudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHNwcml0ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7XHJcbiAgICBCbG9ja2VyRGF0YSxcclxuICAgIFRpbGVzZXREYXRhLFxyXG4gICAgVGlsZXNldEluaXRNZXRhRGF0YSxcclxuICAgIFRpbGVzZXRNZXRhRGF0YSxcclxuICAgIFRpbGVTcHJpdGUsXHJcbiAgICBXb3JsZExldmVsU2VjdGlvbkRhdGFcclxufSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQge2h0dHBHZXRBc3luYywgcmVtb3ZlRmlsZUV4dGVuc2lvbn0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge0NvbGxpZGVyRGF0YSwgVGlsZXNldEluaXREYXRhfSBmcm9tIFwiLi4vLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaWxlc2V0IHtcclxuICAgIHByaXZhdGUgaW1hZ2VIZWlnaHQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaW1hZ2VXaWR0aDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aWxlV2lkdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGlsZUhlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSB0aWxlc2V0Q29sdW1uczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVkVGV4dHVyZXNMb29rdXA6IGFueSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVQb29sOiB7IFt0aWxlSW5kZXg6IHN0cmluZ106IEFycmF5PFRpbGVTcHJpdGU+IH0gPSB7fTtcclxuICAgIHByaXZhdGUgdGlsZXNldFRleHR1cmU6IFBJWEkuVGV4dHVyZTtcclxuICAgIHB1YmxpYyB0aWxlc2V0RGF0YTogVGlsZXNldEluaXREYXRhO1xyXG4gICAgcHJpdmF0ZSB0aWxlQ29sbGlkZXJMb29rdXA6IHtbdGlsZUlkOiBzdHJpbmddIDogQ29sbGlkZXJEYXRhIH0gPSB7fTtcclxuICAgIHJlYWRvbmx5IHRpbGVzZXRJZDogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgbG9hZGVyOiBQSVhJLmxvYWRlcnMuTG9hZGVyO1xyXG4gICAgcmVhZG9ubHkgbGFzdFVwZGF0ZVRzRGF0YTogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbGFzdFVwZGF0ZVRzSW1hZ2U6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IGJhc2VVcmw6IHN0cmluZztcclxuICAgIHByaXZhdGUgbG9hZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHBvb2xNYW55T2ZUaWxlOiB7IFt0aWxlSW5kZXg6IG51bWJlcl06IG51bWJlciB9O1xyXG4gICAgcHJpdmF0ZSBpbmRleGVkRGJMb2FkZXI6IExvYWRlcjtcclxuICAgIHByaXZhdGUgbGFzdENhY2hlZFRzOiBudW1iZXI7XHJcbiAgICByZWFkb25seSBqc29uVXJsOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSBwbmdVcmw6IHN0cmluZztcclxuICAgIHB1YmxpYyBzdGFydEluZGV4OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZW5kSW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0aWxlc2V0TWV0YURhdGE6IFRpbGVzZXRJbml0TWV0YURhdGEsIGxvYWRlcjogUElYSS5sb2FkZXJzLkxvYWRlciwgYmFzZVVybDogc3RyaW5nLCBpbmRleERiTG9hZGVyPzogTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleGVkRGJMb2FkZXIgPSBpbmRleERiTG9hZGVyO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy50aWxlc2V0SWQgPSB0aWxlc2V0TWV0YURhdGEuaWQ7XHJcbiAgICAgICAgdGhpcy5qc29uVXJsID0gdGhpcy5iYXNlVXJsICsgJy8nICsgcmVtb3ZlRmlsZUV4dGVuc2lvbih0aGlzLnRpbGVzZXRJZCkgKyAnLmpzb24nO1xyXG4gICAgICAgIHRoaXMucG5nVXJsID0gdGhpcy5iYXNlVXJsICsgJy8nICsgcmVtb3ZlRmlsZUV4dGVuc2lvbih0aGlzLnRpbGVzZXRJZCkgKyAnLnBuZyc7XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlVHNEYXRhID0gdGlsZXNldE1ldGFEYXRhLmRhdGFUcztcclxuICAgICAgICB0aGlzLmxhc3RVcGRhdGVUc0ltYWdlID0gdGlsZXNldE1ldGFEYXRhLmltYWdlVHM7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBsb2FkZXIgPyBsb2FkZXIgOiBQSVhJLmxvYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGlsZXNldFRleHR1cmVLZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGB0c18ke3RoaXMudGlsZXNldElkfV90ZXh0dXJlYFxyXG4gICAgfVxyXG5cclxuICAgIGdldCB0aWxlc2V0TGFzdFVwZGF0ZUltYWdlS2V5KCkge1xyXG4gICAgICAgIHJldHVybiBgdHNfJHt0aGlzLnRpbGVzZXRJZH1fbGFzdF91cGRhdGVfaW1hZ2VgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRpbGVzZXRMYXN0VXBkYXRlRGF0YUtleSgpIHtcclxuICAgICAgICByZXR1cm4gYHRzXyR7dGhpcy50aWxlc2V0SWR9X2xhc3RfdXBkYXRlX2RhdGFgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtYWtlVGV4dHVyZSh0aWxlSW5kZXgpIHtcclxuICAgICAgICB0aWxlSW5kZXggLT0gdGhpcy5zdGFydEluZGV4O1xyXG4gICAgICAgIGxldCB4ID0gKHRpbGVJbmRleCAlIHRoaXMudGlsZXNldENvbHVtbnMpICogdGhpcy50aWxlV2lkdGg7XHJcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKHRpbGVJbmRleCAvIHRoaXMudGlsZXNldENvbHVtbnMpICogdGhpcy50aWxlSGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiBuZXcgUElYSS5UZXh0dXJlKHRoaXMudGlsZXNldFRleHR1cmUuYmFzZVRleHR1cmUsIG5ldyBQSVhJLlJlY3RhbmdsZSh4LCB5LCB0aGlzLnRpbGVXaWR0aCwgdGhpcy50aWxlSGVpZ2h0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkVGV4dHVyZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5pbmRleGVkRGJMb2FkZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRTYXZlSHR0cCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZGVyLmFkZCh0aGlzLnRpbGVzZXRUZXh0dXJlS2V5LCB0aGlzLnBuZ1VybCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVyLmxvYWQoKGwsIHIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRpbGVzZXRUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVzZXRUZXh0dXJlID0gclt0aGlzLnRpbGVzZXRUZXh0dXJlS2V5XS50ZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhlZERiTG9hZGVyLnNhdmVUZXh0dXJlKHRoaXMucG5nVXJsLCByW3RoaXMudGlsZXNldFRleHR1cmVLZXldLnRleHR1cmUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy50aWxlc2V0TGFzdFVwZGF0ZUltYWdlS2V5LCBgJHt0aGlzLmxhc3RVcGRhdGVUc0ltYWdlICsgMX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsYXN0VXBkYXRlSW1hZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnRpbGVzZXRMYXN0VXBkYXRlSW1hZ2VLZXkpO1xyXG4gICAgICAgICAgICBpZiAobGFzdFVwZGF0ZUltYWdlICYmIHBhcnNlSW50KGxhc3RVcGRhdGVJbWFnZSkgPiB0aGlzLmxhc3RVcGRhdGVUc0ltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzZXRUZXh0dXJlID0gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIubG9hZFRleHR1cmUodGhpcy5wbmdVcmwpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMudGlsZXNldFRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2FkU2F2ZUh0dHAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgbG9hZFNhdmVIdHRwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZXIubG9hZCgobCwgcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlsZXNldFRleHR1cmUgPSByW3RoaXMudGlsZXNldFRleHR1cmVLZXldLnRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZERhdGEoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuaW5kZXhlZERiTG9hZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRTYXZlSHR0cCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNldERhdGEgPSBhd2FpdCBodHRwR2V0QXN5bmModGhpcy5qc29uVXJsKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRpbGVzZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgbG9hZCB0aWxlc2V0IGRhdGFgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIuc2F2ZUpzb24odGhpcy5qc29uVXJsLCB0aGlzLnRpbGVzZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMudGlsZXNldExhc3RVcGRhdGVEYXRhS2V5LCBgJHt0aGlzLmxhc3RVcGRhdGVUc0RhdGEgKyAxfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RVcGRhdGVkVHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnRpbGVzZXRMYXN0VXBkYXRlRGF0YUtleSk7XHJcbiAgICAgICAgICAgIGlmIChsYXN0VXBkYXRlZFRzICYmIHBhcnNlSW50KGxhc3RVcGRhdGVkVHMpID4gdGhpcy5sYXN0VXBkYXRlVHNEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVzZXREYXRhID0gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIubG9hZEpzb24odGhpcy5qc29uVXJsKTtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRpbGVzZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9hZFNhdmVIdHRwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RDYWNoZWRUcyA9IGxhc3RVcGRhdGVkVHMgPyBwYXJzZUludChsYXN0VXBkYXRlZFRzKSA6IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkU2F2ZUh0dHAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGlsZXNldERhdGEgPSBhd2FpdCBodHRwR2V0QXN5bmModGhpcy5qc29uVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnRJbmRleCA9IHRoaXMudGlsZXNldERhdGEuc3RhcnRpbmdJbmRleDtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZFJlc291cmNlcygpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5sb2FkRGF0YSgpLCB0aGlzLmxvYWRUZXh0dXJlKCldKTtcclxuICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy50aWxlV2lkdGggPSB0aGlzLnRpbGVzZXREYXRhLnRpbGVXaWR0aDtcclxuICAgICAgICB0aGlzLnRpbGVIZWlnaHQgPSB0aGlzLnRpbGVzZXREYXRhLnRpbGVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy50aWxlc2V0VGV4dHVyZS53aWR0aDtcclxuICAgICAgICB0aGlzLmltYWdlSGVpZ2h0ID0gIHRoaXMudGlsZXNldFRleHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMudGlsZXNldENvbHVtbnMgPSB0aGlzLmltYWdlV2lkdGggLyB0aGlzLnRpbGVXaWR0aDtcclxuICAgICAgICBjb25zdCB0aWxlQ291bnQgPSBNYXRoLmNlaWwodGhpcy5pbWFnZVdpZHRoL3RoaXMudGlsZVdpZHRoKSAqIE1hdGguY2VpbCh0aGlzLmltYWdlSGVpZ2h0IC8gdGhpcy50aWxlSGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmVuZEluZGV4ID0gdGhpcy50aWxlc2V0RGF0YS5zdGFydGluZ0luZGV4ICsgdGlsZUNvdW50O1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldENvbGxpZGVycyh0aWxlSW5kZXgpIDogQ29sbGlkZXJEYXRhIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy50aWxlc2V0RGF0YS50aWxlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLnRpbGVzZXREYXRhLnRpbGVEYXRhW2ldLmlkID09IHRpbGVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNldERhdGEudGlsZURhdGFbaV07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50aWxlc2V0RGF0YS50aWxlRGF0YVtpXS5pZCA+IHRpbGVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0VGlsZVRleHR1cmUodGlsZUluZGV4KTogUElYSS5UZXh0dXJlIHtcclxuICAgICAgICBsZXQgdGV4dHVyZSA9IHRoaXMuY3JlYXRlZFRleHR1cmVzTG9va3VwW3RpbGVJbmRleF07XHJcbiAgICAgICAgaWYoIXRleHR1cmUpIHtcclxuICAgICAgICAgICAgdGV4dHVyZSA9IHRoaXMubWFrZVRleHR1cmUodGlsZUluZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVkVGV4dHVyZXNMb29rdXBbdGlsZUluZGV4XSA9IHRleHR1cmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtcclxuICAgIEF2YWlsYWJpbGl0eUZsYWdzLFxyXG4gICAgQ2lyY2xlLFxyXG4gICAgQ29sbGlkZXJEYXR1bSxcclxuICAgIEdhbWVPYmplY3RPcHRpb25zLFxyXG4gICAgTGV2ZWxJbWFnZURhdGEsXHJcbiAgICBNYXBJbWFnZVJhd0NvbGxpZGVyRGF0YSxcclxuICAgIE5ld0NvbGxpZGVyUGFyYW1zLFxyXG4gICAgUGFyc2VkTWFwSW1hZ2VDb2xsaWRlckRhdGEsXHJcbiAgICBQb2ludCxcclxuICAgIFBvbHlnb24sXHJcbiAgICBSZWN0LFxyXG4gICAgUnVudGltZUNvbGxpZGVyU2hhcGUsXHJcbiAgICBTaGFwZURhdGEsXHJcbiAgICBUZXh0dXJlTG9hZE9wdHMsXHJcbiAgICBUaWxlU3ByaXRlLFxyXG4gICAgV29ybGRJbml0TWV0YURhdGFcclxufSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBHYW1lT2JqZWN0IH0gZnJvbSBcIi4vR2FtZU9iamVjdFwiO1xyXG5pbXBvcnQge1JlbmRlcmVkQXRsYXN9IGZyb20gXCIuLi8uLi8uLi91dGlscy9EeW5hbWljVGV4dHVyZUF0bGFzXCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge2dldFRleHR1cmVGcm9tQmxvYiwgaHR0cEdldEFzeW5jLCBnZXRUZXh0dXJlRnJvbURhdGFVcmx9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQge0ltYWdlQXRsYXNEYXRhLCBJbWFnZUF0bGFzRXhwb3J0RGF0YX0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7IEF0bGFzRmFjdG9yeSB9IGZyb20gXCIuL1RleHR1cmVBdGxhc3Nlcy9HYW1lT2JqZWN0VGV4dHVyZUF0bGFzXCI7XHJcbmltcG9ydCB7IE1heFJlY3RzUGFja2VyIH0gZnJvbSAnbWF4cmVjdHMtcGFja2VyJztcclxuaW1wb3J0IHtDb2xsaXNpb25NYW5hZ2VyfSBmcm9tIFwiLi4vQ29sbGlzaW9uTWFuYWdlci9Db2xsaXNpb25NYW5hZ2VyXCI7XHJcbmltcG9ydCB7SU1hcEdhbWVPYmplY3RQbHVnaW4sIElQbHVnaW59IGZyb20gXCIuL0lQbHVnaW5cIjtcclxuaW1wb3J0IHtUYWdNYW5hZ2VyfSBmcm9tIFwiLi9NaXhpbnMvVGFnTWl4aW5cIjtcclxuaW1wb3J0IHtCYXNlR2FtZU9iamVjdEF0bGFzfSBmcm9tIFwiLi9UZXh0dXJlQXRsYXNzZXMvR2FtZU9iamVjdFRleHR1cmVBdGxhcy9CYXNlR2FtZU9iamVjdEF0bGFzXCI7XHJcbmltcG9ydCBXb3JsZCBmcm9tIFwiLi4vaW5kZXhcIjtcclxuaW1wb3J0IHtkZWNvZGVSb3RhdGlvbn0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lT2JqZWN0TWFuYWdlciBpbXBsZW1lbnRzIFRhZ01hbmFnZXIge1xyXG4gICAgcmVhZG9ubHkgdGFnZ2VkR2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzOiB7W3RhZzogc3RyaW5nXTogQXJyYXk8KGltYWdlOiBHYW1lT2JqZWN0KSA9PiB2b2lkPiB9ID0ge307XHJcbiAgICByZWFkb25seSB0YWdnZWRHYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVyczoge1t0YWc6IHN0cmluZ106IEFycmF5PChpbWFnZTogR2FtZU9iamVjdCkgPT4gdm9pZD4gfSA9IHt9O1xyXG5cclxuICAgIHByaXZhdGUgZ2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzIDogQXJyYXk8KGltYWdlOiBHYW1lT2JqZWN0KSA9PiB2b2lkPjtcclxuICAgIHB1YmxpYyBnYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVycyA6IEFycmF5PChpbWFnZTogR2FtZU9iamVjdCkgPT4gdm9pZD47XHJcblxyXG4gICAgcmVhZG9ubHkgY29sbGlzaW9uTWFuYWdlcjogQ29sbGlzaW9uTWFuYWdlcjtcclxuICAgIHByaXZhdGUgY2FjaGVkSW1hZ2VEYXRhOiB7W2ltYWdlSWQ6IG51bWJlcl06IHN0cmluZyB9ID0ge307XHJcbiAgICBwcml2YXRlIHBlbmRpbmdMb2Fkczoge1tpbWFnZUlkOiBzdHJpbmddOiBBcnJheTxhbnk+IH0gPSB7fTtcclxuICAgIHByaXZhdGUgd29ybGRNZXRhRGF0YTogV29ybGRJbml0TWV0YURhdGE7XHJcbiAgICBwcml2YXRlIGltYWdlRGF0YToge1sgaW1hZ2VJZDogc3RyaW5nIF0gOiBMZXZlbEltYWdlRGF0YSB9O1xyXG4gICAgcHJpdmF0ZSBsYXN0VG91Y2hlZFRpbWVzdGFtcHM6IHtbaW1hZ2VJZDogc3RyaW5nXSA6IG51bWJlciB9ID0ge307XHJcbiAgICBwcml2YXRlIHVzZXJHYW1lT2JqZWN0QXRsYXNzZXM6QXJyYXk8UElYSS5SZW5kZXJUZXh0dXJlPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsb2FkZXI6IFBJWEkubG9hZGVycy5Mb2FkZXI7XHJcbiAgICBwcml2YXRlIGZsYWdzOiBBdmFpbGFiaWxpdHlGbGFncztcclxuICAgIHByaXZhdGUgaW5kZXhlZERiTG9hZGVyOiBMb2FkZXI7XHJcbiAgICBwcml2YXRlIHBhY2tlcjogTWF4UmVjdHNQYWNrZXI7XHJcbiAgICByZWFkb25seSBiYXNlVXJsOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGNhY2hlZEltYWdlVGV4dHVyZXM6IHtbaW1hZ2VJZDogbnVtYmVyXTogUElYSS5UZXh0dXJlIH0gPSB7fTtcclxuICAgIHB1YmxpYyByZW5kZXJlcjogIFBJWEkuV2ViR0xSZW5kZXJlciB8IFBJWEkuQ2FudmFzUmVuZGVyZXI7XHJcbiAgICBwdWJsaWMgZ2FtZVN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuXHJcbiAgICByZWFkb25seSB1c2VyVGV4dHVyZXM6IEFycmF5PFBJWEkuVGV4dHVyZT4gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIHVzZXJUZXh0dXJlQ2FjaGVUaW1lc3RhbXBMb29rdXA6IHtbaWQ6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgICBwcml2YXRlIGNsZWFyVXNlclRleHR1cmVDYWNoZVRpbWVvdXQ6IGFueTtcclxuICAgIHByaXZhdGUgdXNlclRleHR1cmVDYWNoZU5lZWRzUmVzYXZlOiBib29sZWFuO1xyXG5cclxuICAgIHByaXZhdGUgZ2FtZU9iamVjdEltYWdlQXRsYXM6IEJhc2VHYW1lT2JqZWN0QXRsYXM7XHJcblxyXG4gICAgcmVhZG9ubHkgdGV4dHVyZUF0bGFzc2VzOiBBcnJheTxQSVhJLlJlbmRlclRleHR1cmU+ID0gW107XHJcbiAgICByZWFkb25seSBnYW1lT2JqUG9vbDogQXJyYXk8R2FtZU9iamVjdD4gPSBbXTtcclxuICAgIHJlYWRvbmx5IHRhZ1NlcVRvSWQ6IHtbdGFnU2VxOiBudW1iZXJdOiBzdHJpbmcgfTtcclxuXHJcbiAgICByZWFkb25seSBpbnN0YWxsZWRQbHVnaW5zOiBBcnJheTxJTWFwR2FtZU9iamVjdFBsdWdpbj4gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGNvbGxpc2lvbk1hbmFnZXI6IENvbGxpc2lvbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsICsgJy9pbWFnZXMnO1xyXG4gICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFBJWEkubG9hZGVycy5Mb2FkZXIoKTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIgPSBjb2xsaXNpb25NYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMudGFnU2VxVG9JZCA9IHRoaXMuY29sbGlzaW9uTWFuYWdlci5zZXFUb1RhZztcclxuICAgIH1cclxuXHJcbiAgICBfb25BZGRlZFRhZzogKG9iamVjdDogR2FtZU9iamVjdCwgdGFnOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBfb25SZW1vdmVkVGFnOiAob2JqZWN0OiBHYW1lT2JqZWN0LCB0YWc6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIHB1YmxpYyByZWluaXQoaW1hZ2VEYXRhOiB7W2ltYWdlSWQ6IHN0cmluZ106IExldmVsSW1hZ2VEYXRhfSkge1xyXG4gICAgICAgIHRoaXMuaW1hZ2VEYXRhID0gaW1hZ2VEYXRhO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlVW50b3VjaGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVBsdWdpbihwbHVnaW4gOiBJTWFwR2FtZU9iamVjdFBsdWdpbikge1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuaW5zdGFsbGVkUGx1Z2lucy5pbmRleE9mKHBsdWdpbik7XHJcbiAgICAgICAgaWYoaWR4IDwgMCkgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gcmVtb3ZlIG5vbiBpbnN0YWxsZWQgcGx1Z2luOiAke3BsdWdpbi5uYW1lfWApO1xyXG4gICAgICAgIHBsdWdpbi5vbkdhbWVPYmplY3RBZGRlZCAmJiB0aGlzLm9mZkdhbWVPYmplY3RBZGRlZChwbHVnaW4ub25HYW1lT2JqZWN0QWRkZWQpO1xyXG4gICAgICAgIHBsdWdpbi5vbkdhbWVPYmplY3RSZW1vdmVkICYmIHRoaXMub2ZmR2FtZU9iamVjdFJlbW92ZWQocGx1Z2luLm9uR2FtZU9iamVjdFJlbW92ZWQpO1xyXG4gICAgICAgIGlmKHBsdWdpbi5vblRhZ2dlZEdhbWVPYmplY3RBZGRlZCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGtleSBpbiBwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0QWRkZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmVGFnZ2VkR2FtZU9iamVjdEFkZGVkKGtleSwgcGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdEFkZGVkW2tleV0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gcGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWQoa2V5LCBwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZFtrZXldKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5zdGFsbGVkUGx1Z2lucy5zcGxpY2UoaWR4LCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkUGx1Z2luKHBsdWdpbiA6IElNYXBHYW1lT2JqZWN0UGx1Z2luLCB3b3JsZDogV29ybGQsIG9wdHM/OiBhbnkpIHtcclxuICAgICAgICBpZih0aGlzLmluc3RhbGxlZFBsdWdpbnMuaW5jbHVkZXMocGx1Z2luKSkgdGhyb3cgbmV3IEVycm9yKGBBbHJlYWR5IGluc3RhbGxlZCBwbHVnaW46ICR7cGx1Z2luLm5hbWV9YCk7XHJcbiAgICAgICAgcGx1Z2luLmluaXQgJiYgcGx1Z2luLmluaXQod29ybGQsIG9wdHMpO1xyXG4gICAgICAgIGlmKHBsdWdpbi5vbkdhbWVPYmplY3RBZGRlZCkge1xyXG4gICAgICAgICAgICBwbHVnaW4ub25HYW1lT2JqZWN0QWRkZWQgPSBwbHVnaW4ub25HYW1lT2JqZWN0QWRkZWQuYmluZChwbHVnaW4pO1xyXG4gICAgICAgICAgICB0aGlzLm9uR2FtZU9iamVjdEFkZGVkKHBsdWdpbi5vbkdhbWVPYmplY3RBZGRlZClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmKHBsdWdpbi5vbkdhbWVPYmplY3RSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHBsdWdpbi5vbkdhbWVPYmplY3RSZW1vdmVkID0gcGx1Z2luLm9uR2FtZU9iamVjdFJlbW92ZWQuYmluZChwbHVnaW4pO1xyXG4gICAgICAgICAgICB0aGlzLm9uR2FtZU9iamVjdFJlbW92ZWQocGx1Z2luLm9uR2FtZU9iamVjdFJlbW92ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0QWRkZWQpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gcGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdEFkZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0QWRkZWRba2V5XSA9IHBsdWdpbi5vblRhZ2dlZEdhbWVPYmplY3RBZGRlZFtrZXldLmJpbmQocGx1Z2luKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWdnZWRHYW1lT2JqZWN0QWRkZWQoa2V5LCBwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0QWRkZWRba2V5XSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGtleSBpbiBwbHVnaW4ub25UYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWRba2V5XSA9IHBsdWdpbi5vblRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkW2tleV0uYmluZChwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkKGtleSwgcGx1Z2luLm9uVGFnZ2VkR2FtZU9iamVjdFJlbW92ZWRba2V5XSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzQW5pbWF0aW5nSW1hZ2UoaW1hZ2VJZDogbnVtYmVyKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVGV4dHVyZXModGV4dHVyZXM6IEFycmF5PHN0cmluZyB8IEhUTUxJbWFnZUVsZW1lbnQ+KSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRJbWFnZURhdGEoaW1hZ2VJZDogbnVtYmVyKSA6IFByb21pc2U8R2FtZU9iamVjdE9wdGlvbnM+IHtcclxuICAgICAgICBpZihpbWFnZUlkIGluIHRoaXMuY2FjaGVkSW1hZ2VEYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FjaGVkSW1hZ2VEYXRhW2ltYWdlSWRdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmNhY2hlZEltYWdlRGF0YVtpbWFnZUlkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVycyA9IGF3YWl0IHRoaXMubG9hZEltYWdlQ29sbGlkZXJEYXRhKGltYWdlSWQpO1xyXG4gICAgICAgIGlmKGNvbGxpZGVycykge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEltYWdlRGF0YVtpbWFnZUlkXSA9IEpTT04uc3RyaW5naWZ5KHsgY29sbGlkZXJzIH0pO1xyXG4gICAgICAgICAgICAvLyBkb250IG5lZWQgdG8gcGFyc2UgaW4gdGhpcyBjYXNlIHNpbmNlIHdlIGhhdmUgYSBzdHJpbmdlZCBjb3B5IHNhdmUgaW4gY2FjaGUuXHJcbiAgICAgICAgICAgIHJldHVybiB7IGNvbGxpZGVycyB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRJbWFnZURhdGFbaW1hZ2VJZF0gPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjaGVja0ZvckltYWdlSW5DYWNoZShpbWFnZUtleTogIHN0cmluZykgOiBQSVhJLlRleHR1cmUge1xyXG4gICAvLyAgICAgY29uc29sZS5sb2coJ2NoZWNraW5nIGZvciBpbWFnZSBpbiBjYWNoZS4uJywgaW1hZ2VLZXksICd0aGUgYXRsYXMgd2FzJywgT2JqZWN0LmtleXModGhpcy5nYW1lT2JqZWN0SW1hZ2VBdGxhcy5jYWNoZWRUZXh0dXJlcykpO1xyXG4gICAgICAgIGNvbnN0IGZvdW5kVGV4dHVyZSA9IHRoaXMuZ2FtZU9iamVjdEltYWdlQXRsYXMuZ2V0VGV4dHVyZShpbWFnZUtleSk7XHJcbiAgICAgICAgaWYoZm91bmRUZXh0dXJlKSB7XHJcbiAgICAgICAvLyAgICAgY29uc29sZS5sb2coJzEnKVxyXG4gICAgICAgICAgICByZXR1cm4gZm91bmRUZXh0dXJlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jYWNoZWRJbWFnZVRleHR1cmVzW2ltYWdlS2V5XSkge1xyXG4gICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCcyJylcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkSW1hZ2VUZXh0dXJlc1tpbWFnZUtleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyAgY29uc29sZS5sb2coJzMnKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0TWFwSW1hZ2VUZXh0dXJlKGltYWdlSWQ6IG51bWJlcikgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgICAgIGNvbnN0IGltYWdlS2V5ID0gYCR7dGhpcy5iYXNlVXJsfS9pXyR7aW1hZ2VJZH1gO1xyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygnVFJZTkEgR0VUIFRFWFRVUkUgSU1BR0UgRk9SICcsIGltYWdlSWQpO1xyXG4gICAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5jaGVja0ZvckltYWdlSW5DYWNoZShpbWFnZUtleSk7XHJcbiAgICAgICAgaWYoZm91bmQpIHJldHVybiBmb3VuZDtcclxuICAgICAgICBpZih0aGlzLnBlbmRpbmdMb2Fkc1tpbWFnZUlkXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZUZuID0gKF90OiBQSVhJLlRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZXNvbHZpbmchISEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKF90KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0xvYWRzW2ltYWdlSWRdLnB1c2gocHJvbWlzZUZuKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdMb2Fkc1tpbWFnZUlkXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGxvYWRlZCA9IGF3YWl0IHRoaXMubG9hZEltYWdlVGV4dHVyZShpbWFnZUtleSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ0xvYWRzW2ltYWdlSWRdO1xyXG4gICAgICAgLy8gY29uc3QgY2hlY2tGb3VuZEFmdGVyTG9hZGVkID0gdGhpcy5jaGVja0ZvckltYWdlSW5DYWNoZShpbWFnZUtleSk7XHJcbiAgICAgICAgLy9pZihjaGVja0ZvdW5kQWZ0ZXJMb2FkZWQpIHJldHVybiBjaGVja0ZvdW5kQWZ0ZXJMb2FkZWQ7XHJcblxyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdMT0FERUQ6JywgbG9hZGVkKVxyXG4gICAgICAgIGlmKGxvYWRlZCkge1xyXG4gICAgICAgICAgICBpZihsb2FkZWQud2lkdGggPD0gdGhpcy5mbGFncy5tYXhUZXh0dXJlU2l6ZSAmJiBsb2FkZWQuaGVpZ2h0IDw9IHRoaXMuZmxhZ3MubWF4VGV4dHVyZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5lcnJvcignZmlubmEgYWRkJylcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdhbWVPYmplY3RJbWFnZUF0bGFzLmFkZFRleHR1cmUoaW1hZ2VLZXksIGxvYWRlZCwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IHNwbGl0IGNhdXNlIHdlIGNhbnQgcmVuZGVyIHRoaXMuXHJcbiAgICAgICAgICAgIC8vICAgIGNvbnNvbGUuZXJyb3IoJ2Zpbm5hIGNhY2hlLicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZEltYWdlVGV4dHVyZXNbaW1hZ2VLZXldID0gbG9hZGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEltYWdlVGV4dHVyZXNbaW1hZ2VLZXldO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGVkSW1hZ2VUZXh0dXJlcykuZm9yRWFjaChpbWFnZUlkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRJbWFnZVRleHR1cmVzW2ltYWdlSWRdLmRlc3Ryb3koZmFsc2UpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZWRJbWFnZVRleHR1cmVzW2ltYWdlSWRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2FjaGVkSW1hZ2VEYXRhKS5mb3JFYWNoKGltYWdlSWQgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZWRJbWFnZURhdGFbaW1hZ2VJZF07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGV4dHVyZUF0bGFzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUF0bGFzc2VzW2ldLmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy50ZXh0dXJlQXRsYXNzZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnBhY2tlci5yZXNldCgpO1xyXG5cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZih0aGlzLmdhbWVPYmpQb29sLmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9ialBvb2wubGVuZ3RoID0gMjA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbml0KCByZW5kZXJlcjogUElYSS5XZWJHTFJlbmRlcmVyIHwgUElYSS5DYW52YXNSZW5kZXJlciwgZ2FtZVN0YWdlOiBQSVhJLkNvbnRhaW5lciwgd29ybGRNZXRhRGF0YTogV29ybGRJbml0TWV0YURhdGEsIGZsYWdzOiBBdmFpbGFiaWxpdHlGbGFncywgaW5kZXhlZERiTG9hZGVyPzogTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlID0gZ2FtZVN0YWdlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLndvcmxkTWV0YURhdGEgPSB3b3JsZE1ldGFEYXRhO1xyXG4gICAgICAgIHRoaXMuaW5kZXhlZERiTG9hZGVyID0gaW5kZXhlZERiTG9hZGVyO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdEltYWdlQXRsYXMgPSBBdGxhc0ZhY3RvcnkocmVuZGVyZXIsIGluZGV4ZWREYkxvYWRlcik7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTdG9yYWdlKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VDb2xsaWRlckRhdGEoY29sbGlkZXJEYXRhOiB7W2ltYWdlSWQ6IG51bWJlcl06IEFycmF5PE1hcEltYWdlUmF3Q29sbGlkZXJEYXRhPiB9KSA6ICB7W2ltYWdlSWQ6IG51bWJlcl06IEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPiB9IHtcclxuICAgICAgICBPYmplY3Qua2V5cyhjb2xsaWRlckRhdGEpLmZvckVhY2goaW1hZ2VJZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbGxpZGVyRGF0YVtpbWFnZUlkXS5mb3JFYWNoKGRhdHVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdHVtLnRhZ3MgJiYgZGF0dW0udGFncy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXR1bS50YWdzID0gZGF0dW0udGFncy5tYXAodCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnRhZ1NlcVRvSWRbdF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdGFnICR7dH1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ1NlcVRvSWRbdF07XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQ09MTElERVIgREFUQSBCRUNBTUUnLCBjb2xsaWRlckRhdGEpO1xyXG4gICAgICAgIHJldHVybiBjb2xsaWRlckRhdGEgYXMgdW5rbm93biBhcyB7W2ltYWdlSWQ6IG51bWJlcl06IEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPiB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEltYWdlc0h0dHAoYXRsYXNJbmRleGVzPzogQXJyYXk8bnVtYmVyPikgOiBQcm9taXNlPHsgY29sbGlkZXJEYXRhOiB7W2ltYWdlSWQ6IG51bWJlcl06IEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPiAgfSwgYXRsYXNEYXRhOiBBcnJheTxJbWFnZUF0bGFzRXhwb3J0RGF0YT4sIGF0bGFzSW1hZ2VzOiBBcnJheTx7IGF0bGFzSW5kZXg6IG51bWJlciwgdGV4dHVyZTogUElYSS5UZXh0dXJlIH0+IH0+IHtcclxuICAgICAgICBjb25zdCByZXNEYXRhIDogeyBhdGxhc0RhdGE6IEFycmF5PEltYWdlQXRsYXNFeHBvcnREYXRhPiwgY29sbGlkZXJEYXRhOiB7W2ltYWdlSWQ6IG51bWJlcl06IEFycmF5PE1hcEltYWdlUmF3Q29sbGlkZXJEYXRhPiAgfSAgfSA9IGF3YWl0IGh0dHBHZXRBc3luYyhgJHt0aGlzLmJhc2VVcmx9L2F0bGFzX2RhdGEuanNvbmApIGFzIHsgYXRsYXNEYXRhOiBBcnJheTxJbWFnZUF0bGFzRXhwb3J0RGF0YT4sIGNvbGxpZGVyRGF0YToge1tpbWFnZUlkOiBudW1iZXJdOiBBcnJheTxNYXBJbWFnZVJhd0NvbGxpZGVyRGF0YT4gfSB9O1xyXG5cclxuICAgICAgICBjb25zdCBvYmogPSB7IGF0bGFzRGF0YTogcmVzRGF0YS5hdGxhc0RhdGEsIGNvbGxpZGVyRGF0YTogcmVzRGF0YS5jb2xsaWRlckRhdGEgPyB0aGlzLnBhcnNlQ29sbGlkZXJEYXRhKHJlc0RhdGEuY29sbGlkZXJEYXRhKSA6IHt9LCBhdGxhc0ltYWdlczogW10gfTtcclxuICAgICAgICBpZighYXRsYXNJbmRleGVzKSB7XHJcbiAgICAgICAgICAgIG9iai5hdGxhc0ltYWdlcyA9IGF3YWl0IFByb21pc2UuYWxsKG9iai5hdGxhc0RhdGEubWFwKGFzeW5jIChhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgaHR0cEdldEFzeW5jKGAke3RoaXMuYmFzZVVybH0vYXRsYXNfaW1hZ2VzL2F0bGFzXyR7YS5hSWR4fS5wbmdgLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZ2V0VGV4dHVyZUZyb21CbG9iKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgYXRsYXNJbmRleDogYS5hSWR4LCB0ZXh0dXJlIH07XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmouYXRsYXNJbWFnZXMgID0gYXdhaXQgUHJvbWlzZS5hbGwoYXRsYXNJbmRleGVzLm1hcChhc3luYyAoYUlkeCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGh0dHBHZXRBc3luYyhgJHt0aGlzLmJhc2VVcmx9L2F0bGFzX2ltYWdlcy9hdGxhc18ke2FJZHh9LnBuZ2AsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBhd2FpdCBnZXRUZXh0dXJlRnJvbUJsb2IoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBhdGxhc0luZGV4OiBhSWR4LCB0ZXh0dXJlIH07XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNwbGl0QW5kU2F2ZUltYWdlKGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgdGV4dHVyZTogUElYSS5CYXNlVGV4dHVyZSwgY29sbGlkZXJEYXRhPzogQXJyYXk8TmV3Q29sbGlkZXJQYXJhbXM+KSB7XHJcbiAgICAgICAgY29uc3QgbmV3VGV4dHVyZSA9IG5ldyBQSVhJLlRleHR1cmUodGV4dHVyZSwgbmV3IFBJWEkuUmVjdGFuZ2xlKHgsIHksIHdpZHRoLCBoZWlnaHQpKTtcclxuICAgICAgICBjb25zdCBzID0gbmV3IFBJWEkuU3ByaXRlKG5ld1RleHR1cmUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb25uYSBzYXZlJywgcy53aWR0aCwgcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLnJlbmRlcmVyLmV4dHJhY3QuYmFzZTY0KHMpO1xyXG4gICAgICAgIGlmKGNvbGxpZGVyRGF0YSkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5zYXZlSnNvbihgJHt0aGlzLmJhc2VVcmx9L2lfJHtpZH0uanNvbmAsIGNvbGxpZGVyRGF0YSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5kZWxldGVJdGVtKGAke3RoaXMuYmFzZVVybH0vaV8ke2lkfS5qc29uYClcclxuICAgICAgICB9XHJcbiAgIC8vICAgICBjb25zb2xlLmVycm9yKCdTQVZJTkcgSU1BR0UgVE8gSU5ERVggREIuJywgaWQsICd0byBwYXRoJywgYCR7dGhpcy5iYXNlVXJsfS9pXyR7aWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhlZERiTG9hZGVyLnNhdmVJbWFnZURhdGEoYCR7dGhpcy5iYXNlVXJsfS9pXyR7aWR9YCwgZGF0YVVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkSW1hZ2VDb2xsaWRlckRhdGEoaWQ6IG51bWJlcikgOiBQcm9taXNlPEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPj4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdmaW5uYSBsb2FkIGltYWdlIGlkLi4uJylcclxuICAgICAgICBsZXQgaW1hZ2VEYXRhID0gbnVsbDtcclxuICAgICAgICBjb25zdCBpbWFnZUtleSA9IGAke3RoaXMuYmFzZVVybH0vaV8ke2lkfS5qc29uYDtcclxuICAgICAgICBpZih0aGlzLmZsYWdzLmluZGV4ZWREQikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIubG9hZEpzb24oaW1hZ2VLZXkpO1xyXG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBhd2FpdCBodHRwR2V0QXN5bmMoaW1hZ2VLZXkpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gYXdhaXQgaHR0cEdldEFzeW5jKGltYWdlS2V5KTtcclxuICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnU0hVRCBSVFInKVxyXG4gICAgICAgIHJldHVybiBpbWFnZURhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDYWNoZWRVc2VyVGV4dHVyZVRpbWVzdGFtcCgpIDogUHJvbWlzZTx7IFtpZDogc3RyaW5nXTogbnVtYmVyIH0+IHtcclxuICAgICAgICBjb25zdCBkb1RpbWVvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJVc2VyVGV4dHVyZUNhY2hlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclVzZXJUZXh0dXJlQ2FjaGVUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMudXNlclRleHR1cmVDYWNoZU5lZWRzUmVzYXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VyVGV4dHVyZUNhY2hlTmVlZHNSZXNhdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ZWREYkxvYWRlci5zYXZlSnNvbignX3VzZXJfdGV4dHVyZV9jYWNoZV9kYXRhJywgdGhpcy51c2VyVGV4dHVyZUNhY2hlVGltZXN0YW1wTG9va3VwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudXNlclRleHR1cmVDYWNoZVRpbWVzdGFtcExvb2t1cDtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudXNlclRleHR1cmVDYWNoZVRpbWVzdGFtcExvb2t1cDtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLnVzZXJUZXh0dXJlQ2FjaGVUaW1lc3RhbXBMb29rdXApIHtcclxuICAgICAgICAgICAgaWYodGhpcy5jbGVhclVzZXJUZXh0dXJlQ2FjaGVUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGVhclVzZXJUZXh0dXJlQ2FjaGVUaW1lb3V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkb1RpbWVvdXQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlclRleHR1cmVDYWNoZVRpbWVzdGFtcExvb2t1cFxyXG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmluZGV4ZWREYkxvYWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJUZXh0dXJlQ2FjaGVUaW1lc3RhbXBMb29rdXAgPSBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5sb2FkSnNvbignX3VzZXJfdGV4dHVyZV9jYWNoZV9kYXRhJyk7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnVzZXJUZXh0dXJlQ2FjaGVUaW1lc3RhbXBMb29rdXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlclRleHR1cmVDYWNoZVRpbWVzdGFtcExvb2t1cCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIuc2F2ZUpzb24oJ191c2VyX3RleHR1cmVfY2FjaGVfZGF0YScsIHRoaXMudXNlclRleHR1cmVDYWNoZVRpbWVzdGFtcExvb2t1cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9UaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJUZXh0dXJlQ2FjaGVUaW1lc3RhbXBMb29rdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRUZXh0dXJlKHBhdGg6IHN0cmluZywgb3B0cz86IFRleHR1cmVMb2FkT3B0cykgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgICAgIG9wdHMgPSBvcHRzID8gb3B0cyA6IHsgYWRkVG9BdGxhczogdHJ1ZSB9O1xyXG4gICAgICAgIGNvbnN0IGZvdW5kID0gdGhpcy5jaGVja0ZvckltYWdlSW5DYWNoZShwYXRoKTtcclxuICAgICAgICBpZihmb3VuZCkgcmV0dXJuIGZvdW5kO1xyXG4gICAgICAgIGlmKG9wdHMuY2FjaGVGb3IgJiYgdGhpcy5pbmRleGVkRGJMb2FkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgbG9va3VwID0gYXdhaXQgdGhpcy5nZXRDYWNoZWRVc2VyVGV4dHVyZVRpbWVzdGFtcCgpO1xyXG4gICAgICAgICAgICBpZihsb29rdXBbcGF0aF0gJiYgbG9va3VwW3BhdGhdIDwgRGF0ZS5ub3coKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nTG9hZHNbcGF0aF0gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlZCA9IGF3YWl0IHRoaXMubG9hZEltYWdlVGV4dHVyZShwYXRoKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdMb2Fkc1twYXRoXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBhd2FpdCBodHRwR2V0QXN5bmMocGF0aCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYoIWltYWdlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgaW1hZ2UgdGV4dHVyZSBhdCBwYXRoOiAke3BhdGh9YClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlZERiTG9hZGVyLnNhdmVJbWFnZURhdGEocGF0aCwgaW1hZ2VEYXRhKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmUgPSBhd2FpdCBnZXRUZXh0dXJlRnJvbUJsb2IoaW1hZ2VEYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIGluY2FzZSBpdCBnb3QgZGVsZXRlZCB3aGlsZSB3ZSB3ZXJlIHdhaXRpbmcuLi4gdXNlIHRoZSBtZXRob2QgdG8gZ2V0IHRoZSBsb29rdXAgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb29rdXAyID0gYXdhaXQgdGhpcy5nZXRDYWNoZWRVc2VyVGV4dHVyZVRpbWVzdGFtcCgpO1xyXG4gICAgICAgICAgICAgICAgbG9va3VwMltwYXRoXSA9IERhdGUubm93KCkgKyBvcHRzLmNhY2hlRm9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyVGV4dHVyZUNhY2hlTmVlZHNSZXNhdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG9wdHMuYWRkVG9BdGxhcyAmJiB0ZXh0dXJlLndpZHRoIDwgdGhpcy5mbGFncy5tYXhUZXh0dXJlU2l6ZSAmJiB0ZXh0dXJlLmhlaWdodCA8IHRoaXMuZmxhZ3MubWF4VGV4dHVyZVNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nYW1lT2JqZWN0SW1hZ2VBdGxhcy5hZGRUZXh0dXJlKHBhdGgsIHRleHR1cmUsICdydW50aW1lJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGF3YWl0IGh0dHBHZXRBc3luYyhwYXRoLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmKCFpbWFnZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgaW1hZ2UgdGV4dHVyZSBhdCBwYXRoOiAke3BhdGh9YClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaW1hZ2UgZGF0YSB3YXMnLCBpbWFnZURhdGEpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZ2V0VGV4dHVyZUZyb21CbG9iKGltYWdlRGF0YSkgYXMgUElYSS5UZXh0dXJlO1xyXG4gICAgICAgICAgICBpZihvcHRzLmFkZFRvQXRsYXMgJiYgdGV4dHVyZS53aWR0aCA8IHRoaXMuZmxhZ3MubWF4VGV4dHVyZVNpemUgJiYgdGV4dHVyZS5oZWlnaHQgPCB0aGlzLmZsYWdzLm1heFRleHR1cmVTaXplKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nYW1lT2JqZWN0SW1hZ2VBdGxhcy5hZGRUZXh0dXJlKHBhdGgsIHRleHR1cmUsICdydW50aW1lJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEltYWdlVGV4dHVyZShpbWFnZUtleTogc3RyaW5nKSA6IFByb21pc2U8UElYSS5UZXh0dXJlPiB7XHJcbiAgICAgICAgLy90b2RvIHdlIG5lZWQgdG8gaGFuZGxlIGlmIHRoZSB0ZXh0dXJlIGlzIGJpZ2dlciB0aGFuIHRoZSBtYXggdGV4dHVyZSBzaXplLlxyXG4gICAgICAgIGxldCBpbWFnZURhdGE6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIGlmKHRoaXMuZmxhZ3MuaW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGF3YWl0IHRoaXMuaW5kZXhlZERiTG9hZGVyLmxvYWRJbWFnZURhdGEoaW1hZ2VLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndHJpZWQgbG9hZGluZyBpbWFmZSBkYXRhIGFzJywgaW1hZ2VEYXRhKTtcclxuICAgICAgICBpZighaW1hZ2VEYXRhKXtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdEaWQgbm90IGxvYWQgaW1hZ2UgZGF0YSAnLCBpbWFnZUtleSwgJ2Zyb20gaW5kZXhkZGIsIGdvaW5nIHRvIHNlcnZlci4nKVxyXG4gICAgICAgICAgICBpbWFnZURhdGEgPSBhd2FpdCBodHRwR2V0QXN5bmMoaW1hZ2VLZXksIGZhbHNlKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vdyBpbWFnZSBkYXRhIHdhcycsIGltYWdlRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFpbWFnZURhdGEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgYWxsIG1ldGhvZCBvZiBnZXR0aW5nIGltYWdlICR7aW1hZ2VLZXl9YClcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IGF3YWl0IGdldFRleHR1cmVGcm9tRGF0YVVybChpbWFnZURhdGEpIGFzIFBJWEkuVGV4dHVyZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdMb2Fkc1tpbWFnZUtleV0/LmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgICAgIHAodGV4dHVyZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ0xvYWRzW2ltYWdlS2V5XTtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZVN0b3JhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QgbmVlZGVkQXRsYXNJbmRleGVzID0gW107XHJcbiAgICAgICAgY29uc3QgbmVlZGVkUmVtb3ZlSW5kZXhlcyA9IFtdO1xyXG4gICAgICAgIGlmKHRoaXMuZmxhZ3MubG9jYWxTdG9yYWdlICYmIHRoaXMuZmxhZ3MuaW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIGxldCB0aW1lc3RhbXBzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5iYXNlVXJsfS91cGRhdGVfdGltZXN0YW1wc2ApO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdUaW1lU3RhbXBzID0gW107XHJcbiAgICAgICAgICAgIGlmKHRpbWVzdGFtcHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRpbWVzdGFtcHM6IEFycmF5PG51bWJlcj4gPSBKU09OLnBhcnNlKHRpbWVzdGFtcHMpIGFzIEFycmF5PG51bWJlcj47XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGF0bGFzSW5kZXggPSAwOyBhdGxhc0luZGV4IDwgcGFyc2VkVGltZXN0YW1wcy5sZW5ndGg7IGF0bGFzSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLndvcmxkTWV0YURhdGEuaW1hZ2VzW2F0bGFzSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRlZFJlbW92ZUluZGV4ZXMucHVzaChhdGxhc0luZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyQXRsYXNUcyA9IHRoaXMud29ybGRNZXRhRGF0YS5pbWFnZXNbYXRsYXNJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGltZVN0YW1wcy5wdXNoKGN1ckF0bGFzVHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICYmIHRpbWVzdGFtcHNbYXRsYXNJbmRleF0gPD0gdGhpcy53b3JsZE1ldGFEYXRhLmltYWdlc1thdGxhc0luZGV4XS5kYXRhVHNcclxuICAgICAgICAgICAgICAgICAgLy8gIGlmIChjdXJBdGxhc1RzICYmIHBhcnNlZFRpbWVzdGFtcHNbYXRsYXNJbmRleF0gPCBjdXJBdGxhc1RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZGVkQXRsYXNJbmRleGVzLnB1c2goYXRsYXNJbmRleClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0aW1lc3RhbXBzLmxlbmd0aCAtIHRoaXMud29ybGRNZXRhRGF0YS5pbWFnZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYoZGlmZiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSB0aW1lc3RhbXBzLmxlbmd0aCArIE1hdGguYWJzKGRpZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IHRpbWVzdGFtcHMubGVuZ3RoOyBpIDwgZW5kOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZGVkQXRsYXNJbmRleGVzLnB1c2goZW5kKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGltZVN0YW1wcy5wdXNoKHRoaXMud29ybGRNZXRhRGF0YS5pbWFnZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLndvcmxkTWV0YURhdGEuaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VGltZVN0YW1wcy5wdXNoKHRoaXMud29ybGRNZXRhRGF0YS5pbWFnZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRlZEF0bGFzSW5kZXhlcy5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKG5lZWRlZEF0bGFzSW5kZXhlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke3RoaXMuYmFzZVVybH0vdXBkYXRlX3RpbWVzdGFtcHNgLCBKU09OLnN0cmluZ2lmeShuZXdUaW1lU3RhbXBzKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGF0bGFzRGF0YSwgYXRsYXNJbWFnZXMsIGNvbGxpZGVyRGF0YSB9ID0gYXdhaXQgdGhpcy5sb2FkSW1hZ2VzSHR0cChuZWVkZWRBdGxhc0luZGV4ZXMpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXRsYXNJbWFnZXMubWFwKCh7IGF0bGFzSW5kZXgsIHRleHR1cmUgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgIC8vICAgZG93bmxvYWRTcHJpdGVQbmcodGhpcy5yZW5kZXJlciwgdGV4dHVyZSwgYHRleHR1cmVfYXRsYXMke2F0bGFzSW5kZXh9YClcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJBdGxhc0RhdGEgPSBhdGxhc0RhdGEuZmluZChkID0+IGQuYUlkeCA9PSBhdGxhc0luZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjdXJBdGxhc0RhdGEgJiYgY3VyQXRsYXNEYXRhLmltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VyQXRsYXNEYXRhLmltYWdlcy5tYXAoKHsgaWQsIHgsIHksIHcsIGggfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXRBbmRTYXZlSW1hZ2UoaWQsIHgsIHksIHcsIGgsIHRleHR1cmUuYmFzZVRleHR1cmUsIGNvbGxpZGVyRGF0YVtpZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uR2FtZU9iamVjdEFkZGVkKGNiOiAoZzogR2FtZU9iamVjdCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmKHRoaXMuZ2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzLnB1c2goY2IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzID0gW2NiXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25HYW1lT2JqZWN0UmVtb3ZlZChjYjogKGc6IEdhbWVPYmplY3QpID0+IHZvaWQpIHtcclxuICAgICAgICBpZih0aGlzLmdhbWVPYmplY3RSZW1vdmVkTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnMucHVzaChjYik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVycyA9IFtjYl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZkdhbWVPYmplY3RBZGRlZChjYjogKGc6IEdhbWVPYmplY3QpID0+IHZvaWQpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5nYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnNbaV0gPT09IGNiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPYmplY3RBZGRlZExpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5nYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnMubGVuZ3RoKSBkZWxldGUgdGhpcy5nYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmR2FtZU9iamVjdFJlbW92ZWQoY2I6IChnOiBHYW1lT2JqZWN0KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZ2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5nYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVyc1tpXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuZ2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnMubGVuZ3RoKSBkZWxldGUgdGhpcy5nYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVycztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25UYWdnZWRHYW1lT2JqZWN0QWRkZWQodGFnOiBzdHJpbmcsIGNiOiAoZzogR2FtZU9iamVjdCkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmKCF0aGlzLnRhZ2dlZEdhbWVPYmplY3RBZGRlZExpc3RlbmVyc1t0YWddKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnZ2VkR2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzW3RhZ10gPSBbY2JdXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50YWdnZWRHYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnNbdGFnXS5wdXNoKGNiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9mZlRhZ2dlZEdhbWVPYmplY3RBZGRlZCh0YWc6IHN0cmluZywgY2I6IChnOiBHYW1lT2JqZWN0KSA9PiB2b2lkKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGEgOiBBcnJheTwoZzpHYW1lT2JqZWN0KSA9PiB2b2lkPiA9IHRoaXMudGFnZ2VkR2FtZU9iamVjdEFkZGVkTGlzdGVuZXJzW3RhZ107XHJcbiAgICAgICAgaWYoIWEpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYoYVtpXSA9PT0gY2IpIHtcclxuICAgICAgICAgICAgICAgIGEuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoIWEubGVuZ3RoKSBkZWxldGUgdGhpcy50YWdnZWRHYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnNbdGFnXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkKHRhZzogc3RyaW5nLCBjYjogKGc6IEdhbWVPYmplY3QpID0+IHZvaWQpIHtcclxuICAgICAgICBpZighdGhpcy50YWdnZWRHYW1lT2JqZWN0UmVtb3ZlZExpc3RlbmVyc1t0YWddKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnZ2VkR2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnNbdGFnXSA9IFtjYl1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkTGlzdGVuZXJzW3RhZ10ucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvZmZUYWdnZWRHYW1lT2JqZWN0UmVtb3ZlZCh0YWc6IHN0cmluZywgY2I6IChnOiBHYW1lT2JqZWN0KSA9PiB2b2lkKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGEgOiBBcnJheTwoZzpHYW1lT2JqZWN0KSA9PiB2b2lkPiA9IHRoaXMudGFnZ2VkR2FtZU9iamVjdFJlbW92ZWRMaXN0ZW5lcnNbdGFnXTtcclxuICAgICAgICBpZighYSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZihhW2ldID09PSBjYikge1xyXG4gICAgICAgICAgICAgICAgYS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBpZighYS5sZW5ndGgpIGRlbGV0ZSB0aGlzLnRhZ2dlZEdhbWVPYmplY3RSZW1vdmVkTGlzdGVuZXJzW3RhZ107XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkR2FtZU9iamVjdChvcHRzOiBHYW1lT2JqZWN0T3B0aW9ucykgOiBHYW1lT2JqZWN0IHtcclxuICAgICAgICBsZXQgZ2FtZU9iamVjdCA9IHRoaXMuZ2FtZU9ialBvb2wucG9wKCk7XHJcbiAgICAgICAgaWYoIWdhbWVPYmplY3QpIHtcclxuICAgICAgICAgICAgZ2FtZU9iamVjdCA9IG5ldyBHYW1lT2JqZWN0KHRoaXMuZ2FtZU9ialBvb2wsIHRoaXMuY29sbGlzaW9uTWFuYWdlciwgdGhpcy5nYW1lU3RhZ2UsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVPYmplY3RBZGRlZExpc3RlbmVycz8uZm9yRWFjaChjYiA9PiBjYihnYW1lT2JqZWN0KSk7XHJcbiAgICAgICAgb3B0cz8udGFncz8uZm9yRWFjaCh0YWcgPT4gdGhpcy50YWdnZWRHYW1lT2JqZWN0QWRkZWRMaXN0ZW5lcnNbdGFnXT8uZm9yRWFjaChyID0+IHIoZ2FtZU9iamVjdCkpKTtcclxuICAgICAgICBnYW1lT2JqZWN0LmluaXQob3B0cyk7XHJcbiAgICAgICAgcmV0dXJuIGdhbWVPYmplY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIF9nZXRNYXBJbWFnZShpbWFnZUlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIGxheWVyOiBudW1iZXIpIDogUHJvbWlzZTxHYW1lT2JqZWN0PiB7XHJcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuZ2V0TWFwSW1hZ2VUZXh0dXJlKGltYWdlSWQpO1xyXG4gICAgICAgIGxldCBmbGlwcztcclxuICAgICAgICBpZih6ID4gOTk5OTk5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgaWQsIGZsaXBzOiBkZWNvZGVkRmxpcHMgfSA9IGRlY29kZVJvdGF0aW9uKHopO1xyXG4gICAgICAgICAgICB6ID0gaWQ7XHJcbiAgICAgICAgICAgIGZsaXBzID0gZGVjb2RlZEZsaXBzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAvLyBkb3dubG9hZFNwcml0ZVBuZyh0aGlzLnJlbmRlcmVyLCB0LCd0ZXN0JyArIGltYWdlSWQpO1xyXG4gICAgICAgIGxldCBkID0gYXdhaXQgdGhpcy5nZXRJbWFnZURhdGEoaW1hZ2VJZCk7XHJcbiAgICAgICAgaWYoZCkge1xyXG4gICAgICAgICAgICBkLmxheWVyID0gbGF5ZXI7XHJcbiAgICAgICAgICAgIGQucG9zaXRpb24gPSB7IHgsIHkgfTtcclxuICAgICAgICAgICAgZC56SW5kZXggPSB6O1xyXG4gICAgICAgICAgICBkLmZsaXBzID0gZmxpcHM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZCA9IHsgbGF5ZXIsIHBvc2l0aW9uOiB7IHgsIHkgfSwgekluZGV4OiB6LCBmbGlwcyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGQudGV4dHVyZSA9IHQ7XHJcbiAgICAgICAgbGV0IGdhbWVPYmogPSB0aGlzLmdhbWVPYmpQb29sLnBvcCgpO1xyXG4gICAgICAgIGlmKCFnYW1lT2JqKSB7XHJcbiAgICAgICAgICAgIGdhbWVPYmogPSBuZXcgR2FtZU9iamVjdCh0aGlzLmdhbWVPYmpQb29sLCB0aGlzLmNvbGxpc2lvbk1hbmFnZXIsIHRoaXMuZ2FtZVN0YWdlLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZU9iai5pbml0KGQpO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVPYmplY3RBZGRlZExpc3RlbmVycz8uZm9yRWFjaChjYiA9PiBjYihnYW1lT2JqKSk7XHJcbiAgICAgICAgZC50YWdzPy5mb3JFYWNoKHRhZyA9PiB0aGlzLnRhZ2dlZEdhbWVPYmplY3RBZGRlZExpc3RlbmVyc1t0YWddPy5mb3JFYWNoKHIgPT4gcihnYW1lT2JqKSkpXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0ZJTkFMTFkgTUFERSBTUFJJVEUnLCBzcHJpdGUpO1xyXG4gICAgICAgIHJldHVybiBnYW1lT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlSW1hZ2UoaW1hZ2VJZDogc3RyaW5nKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy90b2RvOiBrZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHRpbWUgd2UgdXNlIGEgdGV4dHVyZSwgYW5kIHdlIGNhbiBiYXRjaCB1bmxvYWQgdGhlbSBmcm9tIG1lbW9yeSBpZiB0aGV5IGhhdmVudCBiZWVuIHVzZWQgaW4gYSBjZXJ0YWluIGFtbW91bnQgb2YgdGltZS5cclxuICAgIHB1YmxpYyByZW1vdmVVbnRvdWNoZWQodGltZVdpdGhvdXRVc2U9MzAwMDApIHsgLy8gZGVmYXVsdHMgdG8gNSBtaW51dGVzXHJcbiAgICAgICAgY29uc3QgaWRzID0gT2JqZWN0LmtleXModGhpcy5sYXN0VG91Y2hlZFRpbWVzdGFtcHMpO1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gbm93IC0gdGhpcy5sYXN0VG91Y2hlZFRpbWVzdGFtcHNbaWRzW2ldXTtcclxuICAgICAgICAgICAgaWYoZGlmZiA+PSB0aW1lV2l0aG91dFVzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJbWFnZShpZHNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vLi4vLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge0Jhc2VHYW1lT2JqZWN0QXRsYXN9IGZyb20gXCIuL0Jhc2VHYW1lT2JqZWN0QXRsYXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJHbEdhbWVPYmplY3RBdGxhcyBleHRlbmRzIEJhc2VHYW1lT2JqZWN0QXRsYXMge1xyXG4gICAgcmVhZG9ubHkgcmVuZGVyZXI6IFBJWEkuV2ViR0xSZW5kZXJlcjtcclxuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBQSVhJLldlYkdMUmVuZGVyZXIsIGluZGV4ZWREYkxvYWRlcj86IExvYWRlcikge1xyXG4gICAgICAgIHN1cGVyKDIwNDgsIHJlbmRlcmVyKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZW1vdmVUZXh0dXJlRnJvbUF0bGFzKGlkOiBzdHJpbmcsIHJlY3Q6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyIH0sIGF0bGFzSW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmKCEoaWQgaW4gdGhpcy5jYWNoZWRUZXh0dXJlcykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBpZCAke2lkfWApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2FjaGVkVGV4dHVyZXNbaWRdLmRlc3Ryb3koZmFsc2UpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZFRleHR1cmVzW2lkXTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmJpbmRSZW5kZXJUZXh0dXJlKHRoaXMuYXRsYXNzZXNbYXRsYXNJbmRleF0sIG51bGwpO1xyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nbDtcclxuICAgICAgICAvLyB0dXJuIG9uIHRoZSBzY2lzc29yIHRlc3QuXHJcbiAgICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBzY2lzc29yIHJlY3RhbmdsZS5cclxuICAgICAgICBnbC5zY2lzc29yKHJlY3QueCwgcmVjdC55LCByZWN0LncsIHJlY3QuaCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmJpbmRSZW5kZXJUZXh0dXJlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1JVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkV9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9FZGl0b3JDb3JlL3NyYy90eXBlc1wiO1xyXG5pbXBvcnQge01heFJlY3RzUGFja2VyfSBmcm9tIFwibWF4cmVjdHMtcGFja2VyXCI7XHJcbmltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vLi4vLi4vbGliL0xvYWRlclwiO1xyXG5pbXBvcnQge2Rvd25sb2FkU3ByaXRlUG5nfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vRWRpdG9yQ29yZS91dGlsc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlR2FtZU9iamVjdEF0bGFzIHtcclxuICAgIHByaXZhdGUgbG9hZGVkU2hlZXROYW1lOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSBtYXhUZXh0dXJlU2l6ZTtcclxuICAgIHJlYWRvbmx5IGxvYWRlcjogTG9hZGVyO1xyXG4gICAgcmVhZG9ubHkgcmVuZGVyZXI6IFBJWEkuV2ViR0xSZW5kZXJlciB8IFBJWEkuQ2FudmFzUmVuZGVyZXI7XHJcbiAgICByZWFkb25seSBuZXh0T3BlblBvc2l0aW9uczogQXJyYXk8QXJyYXk8bnVtYmVyPj4gPVtdO1xyXG4gICAgcmVhZG9ubHkgYXRsYXNzZXM6IEFycmF5PFBJWEkuUmVuZGVyVGV4dHVyZT4gPSBbXTtcclxuICAgIHByaXZhdGUgcGFja2VyOiBNYXhSZWN0c1BhY2tlcjtcclxuICAgIHJlYWRvbmx5IGNhY2hlZFRleHR1cmVzOiB7W25hbWU6IHN0cmluZ106IFBJWEkuVGV4dHVyZSB9ID0ge307XHJcbiAgICBjb25zdHJ1Y3RvcihtYXhUZXh0dXJlU2l6ZTogbnVtYmVyLCByZW5kZXJlcjogUElYSS5XZWJHTFJlbmRlcmVyIHwgUElYSS5DYW52YXNSZW5kZXJlciwgaW5kZXhlZERiTG9hZGVyPzogTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBpbmRleGVkRGJMb2FkZXI7XHJcbiAgICAgICAgaWYobWF4VGV4dHVyZVNpemUgPj0gNDA5Nikge1xyXG4gICAgICAgICAgICB0aGlzLm1heFRleHR1cmVTaXplID0gICBtYXhUZXh0dXJlU2l6ZSAtIChtYXhUZXh0dXJlU2l6ZSU0MDk2KTtcclxuICAgICAgICB9ICBlbHNlIGlmKG1heFRleHR1cmVTaXplID49IDIwNDgpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXhUZXh0dXJlU2l6ZSA9ICAgbWF4VGV4dHVyZVNpemUgLSAobWF4VGV4dHVyZVNpemUlMjA0OCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXhUZXh0dXJlU2l6ZSA+PSAxMDI0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VGV4dHVyZVNpemUgPSAgIG1heFRleHR1cmVTaXplIC0gKG1heFRleHR1cmVTaXplJTEwMjQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF4VGV4dHVyZVNpemUgPj0gNTEyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4VGV4dHVyZVNpemUgPSAgIG1heFRleHR1cmVTaXplIC0gKG1heFRleHR1cmVTaXplJTUxMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tYXhUZXh0dXJlU2l6ZSA9IDI1NjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMucGFja2VyID0gbmV3IE1heFJlY3RzUGFja2VyKHRoaXMubWF4VGV4dHVyZVNpemUsIHRoaXMubWF4VGV4dHVyZVNpemUsIDAsIHtcclxuICAgICAgICAgICAgc21hcnQ6IHRydWUsXHJcbiAgICAgICAgICAgIHBvdDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dSb3RhdGlvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIHRhZzogdHJ1ZSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUZXh0dXJlKHRleHR1cmVJZDogc3RyaW5nKSA6IFBJWEkuVGV4dHVyZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkVGV4dHVyZXNbdGV4dHVyZUlkXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkVGV4dHVyZShpZDogc3RyaW5nLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUsIHRhZz86IHN0cmluZywgZGVzdHJveUFmdGVyPWZhbHNlKSA6IFBJWEkuVGV4dHVyZSB7XHJcbiAgICAgICAgaWYoaWQgaW4gdGhpcy5jYWNoZWRUZXh0dXJlcykgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIHRleHR1cmUgdHdpY2UuYClcclxuICAgICAgICBjb25zdCBvcHRzIDogYW55ID0geyBpZCwgd2lkdGg6IHRleHR1cmUud2lkdGgsIGhlaWdodDogdGV4dHVyZS5oZWlnaHQgfTtcclxuICAgICAgICBpZih0YWcpIHtcclxuICAgICAgICAgICAgb3B0cy50YWcgPSB0YWc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnBhY2tlci5hZGQob3B0cyk7XHJcbiAgICAgICAgbGV0IGFJZHggPSAtMTtcclxuICAgICAgICAvL1RPRE86IGVkaXQgcGFja2VyIGNvZGUgdG8gcmV0dXJuIHRoZSBiaW5kZXg7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucGFja2VyLmJpbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHRoaXMucGFja2VyLmJpbnNbaV0ucmVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMucGFja2VyLmJpbnNbaV0ucmVjdHNbal0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYUlkeCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoYUlkeCA+IC0xKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoYUlkeCA8IDApIHRocm93IG5ldyBFcnJvcihgTm8gYXRsYXMgaW5kZXggZm91bmQgZm9yIGltYWdlIGFmdGVyIGFkZGluZyB0ZXh0dXJlICR7aWR9YCk7XHJcbiAgICAgICAgaWYoIXRoaXMuYXRsYXNzZXNbYUlkeF0pIHtcclxuICAgICAgICAgICAgdGhpcy5hdGxhc3Nlcy5wdXNoKFBJWEkuUmVuZGVyVGV4dHVyZS5jcmVhdGUodGhpcy5tYXhUZXh0dXJlU2l6ZSwgdGhpcy5tYXhUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByVCA9IHRoaXMuYXRsYXNzZXNbYUlkeF07XHJcbiAgICAgICAgaWYoIXJUKSB0aHJvdyBuZXcgRXJyb3IoYFNob3VsZCBoYXZlIHRleHR1cmUgYXRsYXMgYXQgdGhpcyBwb2ludGApO1xyXG4gICAgICAgIGNvbnN0IHNwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICBzcHJpdGUuc2V0VHJhbnNmb3JtKHJlY3QueCwgcmVjdC55KTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcihzcHJpdGUsIHJULCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jYWNoZWRUZXh0dXJlc1tpZF0gPSBuZXcgUElYSS5UZXh0dXJlKHJULmJhc2VUZXh0dXJlLCBuZXcgUElYSS5SZWN0YW5nbGUocmVjdC54LCByZWN0LnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KSk7XHJcblxyXG4gICAgICAgIGlmKGRlc3Ryb3lBZnRlcikge1xyXG4gICAgICAgICAgICBzcHJpdGUuZGVzdHJveSh7IHRleHR1cmU6IHRydWUsIGJhc2VUZXh0dXJlOiB0cnVlIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZFRleHR1cmVzW2lkXTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkU2hlZXQoa2V5OiBzdHJpbmcpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYoIXRoaXMubG9hZGVyKSB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4ZWRkYiBpcyBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlU2hlZXQoa2V5OiBzdHJpbmcpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYoIXRoaXMubG9hZGVyKSB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4ZWRkYiBpcyBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufSIsImNsYXNzIFJlY3RhbmdsZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZWN0YW5nbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoPTBdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtoZWlnaHQ9MF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3g9MF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3k9MF1cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyb3Q9ZmFsc2VdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYWxsb3dSb3RhdGlvbj1mYWxzZV1cbiAgICAgKiBAbWVtYmVyb2YgUmVjdGFuZ2xlXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iod2lkdGggPSAwLCBoZWlnaHQgPSAwLCB4ID0gMCwgeSA9IDAsIHJvdCA9IGZhbHNlLCBhbGxvd1JvdGF0aW9uID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdmVyc2l6ZWQgdGFnIG9uIHJlY3RhbmdsZSB3aGljaCBpcyBiaWdnZXIgdGhhbiBwYWNrZXIgaXRzZWxmLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdmVyc2l6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcm90ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2FsbG93Um90YXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gMDtcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fcm90ID0gcm90O1xuICAgICAgICB0aGlzLl9hbGxvd1JvdGF0aW9uID0gYWxsb3dSb3RhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0d28gZ2l2ZW4gcmVjdGFuZ2xlIGNvbGxpZGUgZWFjaCBvdGhlclxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlY3RhbmdsZX0gZmlyc3RcbiAgICAgKiBAcGFyYW0ge0lSZWN0YW5nbGV9IHNlY29uZFxuICAgICAqIEByZXR1cm5zXG4gICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIHN0YXRpYyBDb2xsaWRlKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0LmNvbGxpZGUoc2Vjb25kKTsgfVxuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGZpcnN0IHJlY3RhbmdsZSBjb250YWlucyB0aGUgc2Vjb25kIG9uZVxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBwYXJhbSB7SVJlY3RhbmdsZX0gZmlyc3RcbiAgICAgKiBAcGFyYW0ge0lSZWN0YW5nbGV9IHNlY29uZFxuICAgICAqIEByZXR1cm5zXG4gICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIHN0YXRpYyBDb250YWluKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0LmNvbnRhaW4oc2Vjb25kKTsgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXJlYSAodyAqIGgpIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIGFyZWEoKSB7IHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7IH1cbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnaXZlbiByZWN0YW5nbGUgY29sbGlkZSB3aXRoIHRoaXMgcmVjdGFuZ2xlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtJUmVjdGFuZ2xlfSByZWN0XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIGNvbGxpZGUocmVjdCkge1xuICAgICAgICByZXR1cm4gKHJlY3QueCA8IHRoaXMueCArIHRoaXMud2lkdGggJiZcbiAgICAgICAgICAgIHJlY3QueCArIHJlY3Qud2lkdGggPiB0aGlzLnggJiZcbiAgICAgICAgICAgIHJlY3QueSA8IHRoaXMueSArIHRoaXMuaGVpZ2h0ICYmXG4gICAgICAgICAgICByZWN0LnkgKyByZWN0LmhlaWdodCA+IHRoaXMueSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhpcyByZWN0YW5nbGUgY29udGFpbnMgdGhlIGdpdmVuIHJlY3RhbmdsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SVJlY3RhbmdsZX0gcmVjdFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJvZiBSZWN0YW5nbGVcbiAgICAgKi9cbiAgICBjb250YWluKHJlY3QpIHtcbiAgICAgICAgcmV0dXJuIChyZWN0LnggPj0gdGhpcy54ICYmIHJlY3QueSA+PSB0aGlzLnkgJiZcbiAgICAgICAgICAgIHJlY3QueCArIHJlY3Qud2lkdGggPD0gdGhpcy54ICsgdGhpcy53aWR0aCAmJiByZWN0LnkgKyByZWN0LmhlaWdodCA8PSB0aGlzLnkgKyB0aGlzLmhlaWdodCk7XG4gICAgfVxuICAgIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuX3dpZHRoOyB9XG4gICAgc2V0IHdpZHRoKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5fd2lkdGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2RpcnR5Kys7XG4gICAgfVxuICAgIGdldCBoZWlnaHQoKSB7IHJldHVybiB0aGlzLl9oZWlnaHQ7IH1cbiAgICBzZXQgaGVpZ2h0KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5faGVpZ2h0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fZGlydHkrKztcbiAgICB9XG4gICAgZ2V0IHgoKSB7IHJldHVybiB0aGlzLl94OyB9XG4gICAgc2V0IHgodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLl94KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLl94ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2RpcnR5Kys7XG4gICAgfVxuICAgIGdldCB5KCkgeyByZXR1cm4gdGhpcy5feTsgfVxuICAgIHNldCB5KHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5feSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5feSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9kaXJ0eSsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcmVjdGFuZ2xlIGlzIHJvdGF0ZWRcbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJvZiBSZWN0YW5nbGVcbiAgICAgKi9cbiAgICBnZXQgcm90KCkgeyByZXR1cm4gdGhpcy5fcm90OyB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByb3RhdGUgdGFnIG9mIHRoZSByZWN0YW5nbGUuXG4gICAgICpcbiAgICAgKiBub3RlOiBhZnRlciBgcm90YCBpcyBzZXQsIGB3aWR0aC9oZWlnaHRgIG9mIHRoaXMgcmVjdGFuZ2xlIGlzIHN3YXBlZC5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBSZWN0YW5nbGVcbiAgICAgKi9cbiAgICBzZXQgcm90KHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbGxvd1JvdGF0aW9uID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuX3JvdCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRtcDtcbiAgICAgICAgICAgIHRoaXMuX3JvdCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcmVjdGFuZ2xlIGFsbG93IHJvdGF0aW9uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyb2YgUmVjdGFuZ2xlXG4gICAgICovXG4gICAgZ2V0IGFsbG93Um90YXRpb24oKSB7IHJldHVybiB0aGlzLl9hbGxvd1JvdGF0aW9uOyB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhbGxvd1JvdGF0aW9uIHRhZyBvZiB0aGUgcmVjdGFuZ2xlLlxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIFJlY3RhbmdsZVxuICAgICAqL1xuICAgIHNldCBhbGxvd1JvdGF0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbGxvd1JvdGF0aW9uICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fYWxsb3dSb3RhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGF0YSgpIHsgcmV0dXJuIHRoaXMuX2RhdGE7IH1cbiAgICBzZXQgZGF0YSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHRoaXMuX2RhdGEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuX2RhdGEgPSB2YWx1ZTtcbiAgICAgICAgLy8gZXh0cmFjdCBhbGxvd1JvdGF0aW9uIHNldHRpbmdzXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUuaGFzT3duUHJvcGVydHkoXCJhbGxvd1JvdGF0aW9uXCIpKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxvd1JvdGF0aW9uID0gdmFsdWUuYWxsb3dSb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eSsrO1xuICAgIH1cbiAgICBnZXQgZGlydHkoKSB7IHJldHVybiB0aGlzLl9kaXJ0eSA+IDA7IH1cbiAgICBzZXREaXJ0eSh2YWx1ZSA9IHRydWUpIHsgdGhpcy5fZGlydHkgPSB2YWx1ZSA/IHRoaXMuX2RpcnR5ICsgMSA6IDA7IH1cbn1cblxuY2xhc3MgQmluIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fZGlydHkgPSAwO1xuICAgIH1cbiAgICBnZXQgZGlydHkoKSB7IHJldHVybiB0aGlzLl9kaXJ0eSA+IDAgfHwgdGhpcy5yZWN0cy5zb21lKHJlY3QgPT4gcmVjdC5kaXJ0eSk7IH1cbiAgICAvKipcbiAgICAgKiBTZXQgYmluIGRpcnR5IHN0YXR1c1xuICAgICAqXG4gICAgICogQG1lbWJlcm9mIEJpblxuICAgICAqL1xuICAgIHNldERpcnR5KHZhbHVlID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHZhbHVlID8gdGhpcy5fZGlydHkgKyAxIDogMDtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcmVjdCBvZiB0aGlzLnJlY3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3Quc2V0RGlydHkpXG4gICAgICAgICAgICAgICAgICAgIHJlY3Quc2V0RGlydHkoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBNYXhSZWN0c0JpbiBleHRlbmRzIEJpbiB7XG4gICAgY29uc3RydWN0b3IobWF4V2lkdGggPSBFREdFX01BWF9WQUxVRSwgbWF4SGVpZ2h0ID0gRURHRV9NQVhfVkFMVUUsIHBhZGRpbmcgPSAwLCBvcHRpb25zID0geyBzbWFydDogdHJ1ZSwgcG90OiB0cnVlLCBzcXVhcmU6IHRydWUsIGFsbG93Um90YXRpb246IGZhbHNlLCB0YWc6IGZhbHNlLCBib3JkZXI6IDAsIGxvZ2ljOiBQQUNLSU5HX0xPR0lDLk1BWF9FREdFIH0pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tYXhXaWR0aCA9IG1heFdpZHRoO1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9IG1heEhlaWdodDtcbiAgICAgICAgdGhpcy5wYWRkaW5nID0gcGFkZGluZztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5mcmVlUmVjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWN0cyA9IFtdO1xuICAgICAgICB0aGlzLnZlcnRpY2FsRXhwYW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLm9wdGlvbnMuc21hcnQgPyAwIDogbWF4V2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5vcHRpb25zLnNtYXJ0ID8gMCA6IG1heEhlaWdodDtcbiAgICAgICAgdGhpcy5ib3JkZXIgPSB0aGlzLm9wdGlvbnMuYm9yZGVyID8gdGhpcy5vcHRpb25zLmJvcmRlciA6IDA7XG4gICAgICAgIHRoaXMuZnJlZVJlY3RzLnB1c2gobmV3IFJlY3RhbmdsZSh0aGlzLm1heFdpZHRoICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIgKiAyLCB0aGlzLm1heEhlaWdodCArIHRoaXMucGFkZGluZyAtIHRoaXMuYm9yZGVyICogMiwgdGhpcy5ib3JkZXIsIHRoaXMuYm9yZGVyKSk7XG4gICAgICAgIHRoaXMuc3RhZ2UgPSBuZXcgUmVjdGFuZ2xlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB9XG4gICAgYWRkKC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0IGRhdGE7XG4gICAgICAgIGxldCByZWN0O1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFjcmVjdHNCaW4uYWRkKCk6IFdyb25nIHBhcmFtZXRlcnNcIik7XG4gICAgICAgICAgICByZWN0ID0gYXJnc1swXTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlY3QudGFnIG1hdGNoIGJpbi50YWcsIGlmIGJpbi50YWcgbm90IGRlZmluZWQsIGl0IHdpbGwgYWNjZXB0IGFueSByZWN0XG4gICAgICAgICAgICBsZXQgdGFnID0gKHJlY3QuZGF0YSAmJiByZWN0LmRhdGEudGFnKSA/IHJlY3QuZGF0YS50YWcgOiByZWN0LnRhZyA/IHJlY3QudGFnIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50YWcgJiYgdGhpcy50YWcgIT09IHRhZylcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IGFyZ3MubGVuZ3RoID4gMiA/IGFyZ3NbMl0gOiBudWxsO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YS50YWcgbWF0Y2ggYmluLnRhZywgaWYgYmluLnRhZyBub3QgZGVmaW5lZCwgaXQgd2lsbCBhY2NlcHQgYW55IHJlY3RcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgdGhpcy50YWcgIT09IGRhdGEudGFnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICghZGF0YSAmJiB0aGlzLnRhZylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY3QgPSBuZXcgUmVjdGFuZ2xlKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgcmVjdC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHJlY3Quc2V0RGlydHkoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGxhY2UocmVjdCk7XG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICB0aGlzLnJlY3RzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmVwYWNrKCkge1xuICAgICAgICBsZXQgdW5wYWNrZWQgPSBbXTtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAvLyByZS1zb3J0IHJlY3RzIGZyb20gYmlnIHRvIHNtYWxsXG4gICAgICAgIHRoaXMucmVjdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gTWF0aC5tYXgoYi53aWR0aCwgYi5oZWlnaHQpIC0gTWF0aC5tYXgoYS53aWR0aCwgYS5oZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gMCAmJiBhLmhhc2ggJiYgYi5oYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuaGFzaCA+IGIuaGFzaCA/IC0xIDogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgcmVjdCBvZiB0aGlzLnJlY3RzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGxhY2UocmVjdCkpIHtcbiAgICAgICAgICAgICAgICB1bnBhY2tlZC5wdXNoKHJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHJlY3Qgb2YgdW5wYWNrZWQpXG4gICAgICAgICAgICB0aGlzLnJlY3RzLnNwbGljZSh0aGlzLnJlY3RzLmluZGV4T2YocmVjdCksIDEpO1xuICAgICAgICByZXR1cm4gdW5wYWNrZWQubGVuZ3RoID4gMCA/IHVucGFja2VkIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXNldChkZWVwUmVzZXQgPSBmYWxzZSwgcmVzZXRPcHRpb24gPSBmYWxzZSkge1xuICAgICAgICBpZiAoZGVlcFJlc2V0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGE7XG4gICAgICAgICAgICBpZiAodGhpcy50YWcpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGFnO1xuICAgICAgICAgICAgdGhpcy5yZWN0cyA9IFtdO1xuICAgICAgICAgICAgaWYgKHJlc2V0T3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBzbWFydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcG90OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzcXVhcmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFsbG93Um90YXRpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YWc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLm9wdGlvbnMuc21hcnQgPyAwIDogdGhpcy5tYXhXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLm9wdGlvbnMuc21hcnQgPyAwIDogdGhpcy5tYXhIZWlnaHQ7XG4gICAgICAgIHRoaXMuYm9yZGVyID0gdGhpcy5vcHRpb25zLmJvcmRlciA/IHRoaXMub3B0aW9ucy5ib3JkZXIgOiAwO1xuICAgICAgICB0aGlzLmZyZWVSZWN0cyA9IFtuZXcgUmVjdGFuZ2xlKHRoaXMubWF4V2lkdGggKyB0aGlzLnBhZGRpbmcgLSB0aGlzLmJvcmRlciAqIDIsIHRoaXMubWF4SGVpZ2h0ICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIgKiAyLCB0aGlzLmJvcmRlciwgdGhpcy5ib3JkZXIpXTtcbiAgICAgICAgdGhpcy5zdGFnZSA9IG5ldyBSZWN0YW5nbGUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IDA7XG4gICAgfVxuICAgIHBsYWNlKHJlY3QpIHtcbiAgICAgICAgLy8gcmVjaGVjayBpZiB0YWcgbWF0Y2hlZFxuICAgICAgICBsZXQgdGFnID0gKHJlY3QuZGF0YSAmJiByZWN0LmRhdGEudGFnKSA/IHJlY3QuZGF0YS50YWcgOiByZWN0LnRhZyA/IHJlY3QudGFnIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRhZyAmJiB0aGlzLnRhZyAhPT0gdGFnKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IG5vZGU7XG4gICAgICAgIGxldCBhbGxvd1JvdGF0aW9uO1xuICAgICAgICAvLyBnZXR0ZXIvc2V0dGVyIGRvIG5vdCBzdXBwb3J0IGhhc093blByb3BlcnR5KClcbiAgICAgICAgaWYgKHJlY3QuaGFzT3duUHJvcGVydHkoXCJfYWxsb3dSb3RhdGlvblwiKSAmJiByZWN0LmFsbG93Um90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYWxsb3dSb3RhdGlvbiA9IHJlY3QuYWxsb3dSb3RhdGlvbjsgLy8gUGVyIFJlY3RhbmdsZSBhbGxvd1JvdGF0aW9uIG92ZXJyaWRlIHBhY2tlciBzZXR0aW5nc1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxsb3dSb3RhdGlvbiA9IHRoaXMub3B0aW9ucy5hbGxvd1JvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSB0aGlzLmZpbmROb2RlKHJlY3Qud2lkdGggKyB0aGlzLnBhZGRpbmcsIHJlY3QuaGVpZ2h0ICsgdGhpcy5wYWRkaW5nLCBhbGxvd1JvdGF0aW9uKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmluU2l6ZShub2RlKTtcbiAgICAgICAgICAgIGxldCBudW1SZWN0VG9Qcm9jZXNzID0gdGhpcy5mcmVlUmVjdHMubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBudW1SZWN0VG9Qcm9jZXNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3BsaXROb2RlKHRoaXMuZnJlZVJlY3RzW2ldLCBub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZWVSZWN0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIG51bVJlY3RUb1Byb2Nlc3MtLTtcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBydW5lRnJlZUxpc3QoKTtcbiAgICAgICAgICAgIHRoaXMudmVydGljYWxFeHBhbmQgPSB0aGlzLndpZHRoID4gdGhpcy5oZWlnaHQgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICByZWN0LnggPSBub2RlLng7XG4gICAgICAgICAgICByZWN0LnkgPSBub2RlLnk7XG4gICAgICAgICAgICBpZiAocmVjdC5yb3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZWN0LnJvdCA9IGZhbHNlO1xuICAgICAgICAgICAgcmVjdC5yb3QgPSBub2RlLnJvdCA/ICFyZWN0LnJvdCA6IHJlY3Qucm90O1xuICAgICAgICAgICAgdGhpcy5fZGlydHkrKztcbiAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLnZlcnRpY2FsRXhwYW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51cGRhdGVCaW5TaXplKG5ldyBSZWN0YW5nbGUocmVjdC53aWR0aCArIHRoaXMucGFkZGluZywgcmVjdC5oZWlnaHQgKyB0aGlzLnBhZGRpbmcsIHRoaXMud2lkdGggKyB0aGlzLnBhZGRpbmcgLSB0aGlzLmJvcmRlciwgdGhpcy5ib3JkZXIpKSB8fCB0aGlzLnVwZGF0ZUJpblNpemUobmV3IFJlY3RhbmdsZShyZWN0LndpZHRoICsgdGhpcy5wYWRkaW5nLCByZWN0LmhlaWdodCArIHRoaXMucGFkZGluZywgdGhpcy5ib3JkZXIsIHRoaXMuaGVpZ2h0ICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYWNlKHJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMudXBkYXRlQmluU2l6ZShuZXcgUmVjdGFuZ2xlKHJlY3Qud2lkdGggKyB0aGlzLnBhZGRpbmcsIHJlY3QuaGVpZ2h0ICsgdGhpcy5wYWRkaW5nLCB0aGlzLmJvcmRlciwgdGhpcy5oZWlnaHQgKyB0aGlzLnBhZGRpbmcgLSB0aGlzLmJvcmRlcikpIHx8IHRoaXMudXBkYXRlQmluU2l6ZShuZXcgUmVjdGFuZ2xlKHJlY3Qud2lkdGggKyB0aGlzLnBhZGRpbmcsIHJlY3QuaGVpZ2h0ICsgdGhpcy5wYWRkaW5nLCB0aGlzLndpZHRoICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIsIHRoaXMuYm9yZGVyKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wbGFjZShyZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmaW5kTm9kZSh3aWR0aCwgaGVpZ2h0LCBhbGxvd1JvdGF0aW9uKSB7XG4gICAgICAgIGxldCBzY29yZSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgIGxldCBhcmVhRml0O1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IGJlc3ROb2RlO1xuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuZnJlZVJlY3RzKSB7XG4gICAgICAgICAgICByID0gdGhpcy5mcmVlUmVjdHNbaV07XG4gICAgICAgICAgICBpZiAoci53aWR0aCA+PSB3aWR0aCAmJiByLmhlaWdodCA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBhcmVhRml0ID0gKHRoaXMub3B0aW9ucy5sb2dpYyA9PT0gUEFDS0lOR19MT0dJQy5NQVhfQVJFQSkgP1xuICAgICAgICAgICAgICAgICAgICByLndpZHRoICogci5oZWlnaHQgLSB3aWR0aCAqIGhlaWdodCA6XG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHIud2lkdGggLSB3aWR0aCwgci5oZWlnaHQgLSBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChhcmVhRml0IDwgc2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdE5vZGUgPSBuZXcgUmVjdGFuZ2xlKHdpZHRoLCBoZWlnaHQsIHIueCwgci55KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcmUgPSBhcmVhRml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYWxsb3dSb3RhdGlvbilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRvIHRlc3QgOTAtZGVncmVlIHJvdGF0ZWQgcmVjdGFuZ2xlXG4gICAgICAgICAgICBpZiAoci53aWR0aCA+PSBoZWlnaHQgJiYgci5oZWlnaHQgPj0gd2lkdGgpIHtcbiAgICAgICAgICAgICAgICBhcmVhRml0ID0gKHRoaXMub3B0aW9ucy5sb2dpYyA9PT0gUEFDS0lOR19MT0dJQy5NQVhfQVJFQSkgP1xuICAgICAgICAgICAgICAgICAgICByLndpZHRoICogci5oZWlnaHQgLSBoZWlnaHQgKiB3aWR0aCA6XG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHIuaGVpZ2h0IC0gd2lkdGgsIHIud2lkdGggLSBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChhcmVhRml0IDwgc2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdE5vZGUgPSBuZXcgUmVjdGFuZ2xlKGhlaWdodCwgd2lkdGgsIHIueCwgci55LCB0cnVlKTsgLy8gUm90YXRlZCBub2RlXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlID0gYXJlYUZpdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJlc3ROb2RlO1xuICAgIH1cbiAgICBzcGxpdE5vZGUoZnJlZVJlY3QsIHVzZWROb2RlKSB7XG4gICAgICAgIC8vIFRlc3QgaWYgdXNlZE5vZGUgaW50ZXJzZWN0IHdpdGggZnJlZVJlY3RcbiAgICAgICAgaWYgKCFmcmVlUmVjdC5jb2xsaWRlKHVzZWROb2RlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gRG8gdmVydGljYWwgc3BsaXRcbiAgICAgICAgaWYgKHVzZWROb2RlLnggPCBmcmVlUmVjdC54ICsgZnJlZVJlY3Qud2lkdGggJiYgdXNlZE5vZGUueCArIHVzZWROb2RlLndpZHRoID4gZnJlZVJlY3QueCkge1xuICAgICAgICAgICAgLy8gTmV3IG5vZGUgYXQgdGhlIHRvcCBzaWRlIG9mIHRoZSB1c2VkIG5vZGVcbiAgICAgICAgICAgIGlmICh1c2VkTm9kZS55ID4gZnJlZVJlY3QueSAmJiB1c2VkTm9kZS55IDwgZnJlZVJlY3QueSArIGZyZWVSZWN0LmhlaWdodCkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdOb2RlID0gbmV3IFJlY3RhbmdsZShmcmVlUmVjdC53aWR0aCwgdXNlZE5vZGUueSAtIGZyZWVSZWN0LnksIGZyZWVSZWN0LngsIGZyZWVSZWN0LnkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZnJlZVJlY3RzLnB1c2gobmV3Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOZXcgbm9kZSBhdCB0aGUgYm90dG9tIHNpZGUgb2YgdGhlIHVzZWQgbm9kZVxuICAgICAgICAgICAgaWYgKHVzZWROb2RlLnkgKyB1c2VkTm9kZS5oZWlnaHQgPCBmcmVlUmVjdC55ICsgZnJlZVJlY3QuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05vZGUgPSBuZXcgUmVjdGFuZ2xlKGZyZWVSZWN0LndpZHRoLCBmcmVlUmVjdC55ICsgZnJlZVJlY3QuaGVpZ2h0IC0gKHVzZWROb2RlLnkgKyB1c2VkTm9kZS5oZWlnaHQpLCBmcmVlUmVjdC54LCB1c2VkTm9kZS55ICsgdXNlZE5vZGUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmZyZWVSZWN0cy5wdXNoKG5ld05vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIERvIEhvcml6b250YWwgc3BsaXRcbiAgICAgICAgaWYgKHVzZWROb2RlLnkgPCBmcmVlUmVjdC55ICsgZnJlZVJlY3QuaGVpZ2h0ICYmXG4gICAgICAgICAgICB1c2VkTm9kZS55ICsgdXNlZE5vZGUuaGVpZ2h0ID4gZnJlZVJlY3QueSkge1xuICAgICAgICAgICAgLy8gTmV3IG5vZGUgYXQgdGhlIGxlZnQgc2lkZSBvZiB0aGUgdXNlZCBub2RlLlxuICAgICAgICAgICAgaWYgKHVzZWROb2RlLnggPiBmcmVlUmVjdC54ICYmIHVzZWROb2RlLnggPCBmcmVlUmVjdC54ICsgZnJlZVJlY3Qud2lkdGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Tm9kZSA9IG5ldyBSZWN0YW5nbGUodXNlZE5vZGUueCAtIGZyZWVSZWN0LngsIGZyZWVSZWN0LmhlaWdodCwgZnJlZVJlY3QueCwgZnJlZVJlY3QueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmVlUmVjdHMucHVzaChuZXdOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5ldyBub2RlIGF0IHRoZSByaWdodCBzaWRlIG9mIHRoZSB1c2VkIG5vZGUuXG4gICAgICAgICAgICBpZiAodXNlZE5vZGUueCArIHVzZWROb2RlLndpZHRoIDwgZnJlZVJlY3QueCArIGZyZWVSZWN0LndpZHRoKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05vZGUgPSBuZXcgUmVjdGFuZ2xlKGZyZWVSZWN0LnggKyBmcmVlUmVjdC53aWR0aCAtICh1c2VkTm9kZS54ICsgdXNlZE5vZGUud2lkdGgpLCBmcmVlUmVjdC5oZWlnaHQsIHVzZWROb2RlLnggKyB1c2VkTm9kZS53aWR0aCwgZnJlZVJlY3QueSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmVlUmVjdHMucHVzaChuZXdOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcHJ1bmVGcmVlTGlzdCgpIHtcbiAgICAgICAgLy8gR28gdGhyb3VnaCBlYWNoIHBhaXIgb2YgZnJlZVJlY3RzIGFuZCByZW1vdmUgYW55IHJlY3RzIHRoYXQgaXMgcmVkdW5kYW50XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICBsZXQgbGVuID0gdGhpcy5mcmVlUmVjdHMubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICAgICAgaiA9IGkgKyAxO1xuICAgICAgICAgICAgbGV0IHRtcFJlY3QxID0gdGhpcy5mcmVlUmVjdHNbaV07XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGxlbikge1xuICAgICAgICAgICAgICAgIGxldCB0bXBSZWN0MiA9IHRoaXMuZnJlZVJlY3RzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0bXBSZWN0Mi5jb250YWluKHRtcFJlY3QxKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZWVSZWN0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgbGVuLS07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG1wUmVjdDEuY29udGFpbih0bXBSZWN0MikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mcmVlUmVjdHMuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQmluU2l6ZShub2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnNtYXJ0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zdGFnZS5jb250YWluKG5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdG1wV2lkdGggPSBNYXRoLm1heCh0aGlzLndpZHRoLCBub2RlLnggKyBub2RlLndpZHRoIC0gdGhpcy5wYWRkaW5nICsgdGhpcy5ib3JkZXIpO1xuICAgICAgICBsZXQgdG1wSGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5oZWlnaHQsIG5vZGUueSArIG5vZGUuaGVpZ2h0IC0gdGhpcy5wYWRkaW5nICsgdGhpcy5ib3JkZXIpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFsbG93Um90YXRpb24pIHtcbiAgICAgICAgICAgIC8vIGRvIGV4dHJhIHRlc3Qgb24gcm90YXRlZCBub2RlIHdoZXRoZXIgaXQncyBhIGJldHRlciBjaG9pY2VcbiAgICAgICAgICAgIGNvbnN0IHJvdFdpZHRoID0gTWF0aC5tYXgodGhpcy53aWR0aCwgbm9kZS54ICsgbm9kZS5oZWlnaHQgLSB0aGlzLnBhZGRpbmcgKyB0aGlzLmJvcmRlcik7XG4gICAgICAgICAgICBjb25zdCByb3RIZWlnaHQgPSBNYXRoLm1heCh0aGlzLmhlaWdodCwgbm9kZS55ICsgbm9kZS53aWR0aCAtIHRoaXMucGFkZGluZyArIHRoaXMuYm9yZGVyKTtcbiAgICAgICAgICAgIGlmIChyb3RXaWR0aCAqIHJvdEhlaWdodCA8IHRtcFdpZHRoICogdG1wSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdG1wV2lkdGggPSByb3RXaWR0aDtcbiAgICAgICAgICAgICAgICB0bXBIZWlnaHQgPSByb3RIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wb3QpIHtcbiAgICAgICAgICAgIHRtcFdpZHRoID0gTWF0aC5wb3coMiwgTWF0aC5jZWlsKE1hdGgubG9nKHRtcFdpZHRoKSAqIE1hdGguTE9HMkUpKTtcbiAgICAgICAgICAgIHRtcEhlaWdodCA9IE1hdGgucG93KDIsIE1hdGguY2VpbChNYXRoLmxvZyh0bXBIZWlnaHQpICogTWF0aC5MT0cyRSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3F1YXJlKSB7XG4gICAgICAgICAgICB0bXBXaWR0aCA9IHRtcEhlaWdodCA9IE1hdGgubWF4KHRtcFdpZHRoLCB0bXBIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0bXBXaWR0aCA+IHRoaXMubWF4V2lkdGggKyB0aGlzLnBhZGRpbmcgfHwgdG1wSGVpZ2h0ID4gdGhpcy5tYXhIZWlnaHQgKyB0aGlzLnBhZGRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4cGFuZEZyZWVSZWN0cyh0bXBXaWR0aCArIHRoaXMucGFkZGluZywgdG1wSGVpZ2h0ICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuc3RhZ2Uud2lkdGggPSB0bXBXaWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnN0YWdlLmhlaWdodCA9IHRtcEhlaWdodDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGV4cGFuZEZyZWVSZWN0cyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuZnJlZVJlY3RzLmZvckVhY2goKGZyZWVSZWN0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZyZWVSZWN0LnggKyBmcmVlUmVjdC53aWR0aCA+PSBNYXRoLm1pbih0aGlzLndpZHRoICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIsIHdpZHRoKSkge1xuICAgICAgICAgICAgICAgIGZyZWVSZWN0LndpZHRoID0gd2lkdGggLSBmcmVlUmVjdC54IC0gdGhpcy5ib3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZnJlZVJlY3QueSArIGZyZWVSZWN0LmhlaWdodCA+PSBNYXRoLm1pbih0aGlzLmhlaWdodCArIHRoaXMucGFkZGluZyAtIHRoaXMuYm9yZGVyLCBoZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgZnJlZVJlY3QuaGVpZ2h0ID0gaGVpZ2h0IC0gZnJlZVJlY3QueSAtIHRoaXMuYm9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgdGhpcy5mcmVlUmVjdHMucHVzaChuZXcgUmVjdGFuZ2xlKHdpZHRoIC0gdGhpcy53aWR0aCAtIHRoaXMucGFkZGluZywgaGVpZ2h0IC0gdGhpcy5ib3JkZXIgKiAyLCB0aGlzLndpZHRoICsgdGhpcy5wYWRkaW5nIC0gdGhpcy5ib3JkZXIsIHRoaXMuYm9yZGVyKSk7XG4gICAgICAgIHRoaXMuZnJlZVJlY3RzLnB1c2gobmV3IFJlY3RhbmdsZSh3aWR0aCAtIHRoaXMuYm9yZGVyICogMiwgaGVpZ2h0IC0gdGhpcy5oZWlnaHQgLSB0aGlzLnBhZGRpbmcsIHRoaXMuYm9yZGVyLCB0aGlzLmhlaWdodCArIHRoaXMucGFkZGluZyAtIHRoaXMuYm9yZGVyKSk7XG4gICAgICAgIHRoaXMuZnJlZVJlY3RzID0gdGhpcy5mcmVlUmVjdHMuZmlsdGVyKGZyZWVSZWN0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhKGZyZWVSZWN0LndpZHRoIDw9IDAgfHwgZnJlZVJlY3QuaGVpZ2h0IDw9IDAgfHwgZnJlZVJlY3QueCA8IHRoaXMuYm9yZGVyIHx8IGZyZWVSZWN0LnkgPCB0aGlzLmJvcmRlcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBydW5lRnJlZUxpc3QoKTtcbiAgICB9XG59XG5cbmNsYXNzIE92ZXJzaXplZEVsZW1lbnRCaW4gZXh0ZW5kcyBCaW4ge1xuICAgIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZWN0cyA9IFtdO1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3ZlcnNpemVkRWxlbWVudEJpbjogV3JvbmcgcGFyYW1ldGVyc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBhcmdzWzBdO1xuICAgICAgICAgICAgdGhpcy5yZWN0cyA9IFtyZWN0XTtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSByZWN0LndpZHRoO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSByZWN0LmhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlY3QuZGF0YTtcbiAgICAgICAgICAgIHJlY3Qub3ZlcnNpemVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBhcmdzWzBdO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBhcmdzWzFdO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gYXJncy5sZW5ndGggPiAyID8gYXJnc1syXSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gbmV3IFJlY3RhbmdsZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgICAgICByZWN0Lm92ZXJzaXplZCA9IHRydWU7XG4gICAgICAgICAgICByZWN0LmRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgICAgICB0aGlzLnJlY3RzLnB1c2gocmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmVlUmVjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5tYXhXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgc21hcnQ6IGZhbHNlLCBwb3Q6IGZhbHNlLCBzcXVhcmU6IGZhbHNlIH07XG4gICAgfVxuICAgIGFkZCgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfVxuICAgIHJlc2V0KGRlZXBSZXNldCA9IGZhbHNlKSB7XG4gICAgICAgIC8vIG5vdGhpbmcgdG8gZG8gaGVyZVxuICAgIH1cbiAgICByZXBhY2soKSB7IHJldHVybiB1bmRlZmluZWQ7IH1cbn1cblxuY29uc3QgRURHRV9NQVhfVkFMVUUgPSA0MDk2O1xudmFyIFBBQ0tJTkdfTE9HSUM7XG4oZnVuY3Rpb24gKFBBQ0tJTkdfTE9HSUMpIHtcbiAgICBQQUNLSU5HX0xPR0lDW1BBQ0tJTkdfTE9HSUNbXCJNQVhfQVJFQVwiXSA9IDBdID0gXCJNQVhfQVJFQVwiO1xuICAgIFBBQ0tJTkdfTE9HSUNbUEFDS0lOR19MT0dJQ1tcIk1BWF9FREdFXCJdID0gMV0gPSBcIk1BWF9FREdFXCI7XG59KShQQUNLSU5HX0xPR0lDIHx8IChQQUNLSU5HX0xPR0lDID0ge30pKTtcbmNsYXNzIE1heFJlY3RzUGFja2VyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE1heFJlY3RzUGFja2VyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBvZiB0aGUgb3V0cHV0IGF0bGFzIChkZWZhdWx0IGlzIDQwOTYpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBvZiB0aGUgb3V0cHV0IGF0bGFzIChkZWZhdWx0IGlzIDQwOTYpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBhZGRpbmcgYmV0d2VlbiBnbHlwaHMvaW1hZ2VzIChkZWZhdWx0IGlzIDApXG4gICAgICogQHBhcmFtIHtJT3B0aW9ufSBbb3B0aW9ucz17fV0gKE9wdGlvbmFsKSBwYWNraW5nIG9wdGlvbnNcbiAgICAgKiBAbWVtYmVyb2YgTWF4UmVjdHNQYWNrZXJcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCA9IEVER0VfTUFYX1ZBTFVFLCBoZWlnaHQgPSBFREdFX01BWF9WQUxVRSwgcGFkZGluZyA9IDAsIG9wdGlvbnMgPSB7IHNtYXJ0OiB0cnVlLCBwb3Q6IHRydWUsIHNxdWFyZTogZmFsc2UsIGFsbG93Um90YXRpb246IGZhbHNlLCB0YWc6IGZhbHNlLCBib3JkZXI6IDAsIGxvZ2ljOiBQQUNLSU5HX0xPR0lDLk1BWF9FREdFIH0pIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5wYWRkaW5nID0gcGFkZGluZztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fY3VycmVudEJpbkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5iaW5zID0gW107XG4gICAgfVxuICAgIGFkZCguLi5hcmdzKSB7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWNyZWN0c1BhY2tlci5hZGQoKTogV3JvbmcgcGFyYW1ldGVyc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBhcmdzWzBdO1xuICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggPiB0aGlzLndpZHRoIHx8IHJlY3QuaGVpZ2h0ID4gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpbnMucHVzaChuZXcgT3ZlcnNpemVkRWxlbWVudEJpbihyZWN0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgYWRkZWQgPSB0aGlzLmJpbnMuc2xpY2UodGhpcy5fY3VycmVudEJpbkluZGV4KS5maW5kKGJpbiA9PiBiaW4uYWRkKHJlY3QpICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGlmICghYWRkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJpbiA9IG5ldyBNYXhSZWN0c0Jpbih0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgdGhpcy5wYWRkaW5nLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFnID0gKHJlY3QuZGF0YSAmJiByZWN0LmRhdGEudGFnKSA/IHJlY3QuZGF0YS50YWcgOiByZWN0LnRhZyA/IHJlY3QudGFnIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRhZyAmJiB0YWcpXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW4udGFnID0gdGFnO1xuICAgICAgICAgICAgICAgICAgICBiaW4uYWRkKHJlY3QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbnMucHVzaChiaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IG5ldyBSZWN0YW5nbGUoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAyKVxuICAgICAgICAgICAgICAgIHJlY3QuZGF0YSA9IGFyZ3NbMl07XG4gICAgICAgICAgICBpZiAocmVjdC53aWR0aCA+IHRoaXMud2lkdGggfHwgcmVjdC5oZWlnaHQgPiB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmlucy5wdXNoKG5ldyBPdmVyc2l6ZWRFbGVtZW50QmluKHJlY3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBhZGRlZCA9IHRoaXMuYmlucy5zbGljZSh0aGlzLl9jdXJyZW50QmluSW5kZXgpLmZpbmQoYmluID0+IGJpbi5hZGQocmVjdCkgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhZGRlZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmluID0gbmV3IE1heFJlY3RzQmluKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnBhZGRpbmcsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFnICYmIHJlY3QuZGF0YS50YWcpXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW4udGFnID0gcmVjdC5kYXRhLnRhZztcbiAgICAgICAgICAgICAgICAgICAgYmluLmFkZChyZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5zLnB1c2goYmluKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVjdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gQXJyYXkgb2YgYmlucy9yZWN0YW5nbGVzIHRvIHRoZSBwYWNrZXIuXG4gICAgICpcbiAgICAgKiBgSmF2YXNjcmlwdGA6IEFueSBvYmplY3QgaGFzIHByb3BlcnR5OiB7IHdpZHRoLCBoZWlnaHQsIC4uLiB9IGlzIGFjY2VwdGVkLlxuICAgICAqXG4gICAgICogYFR5cGVzY3JpcHRgOiBvYmplY3Qgc2hhbGwgZXh0ZW5kcyBgTWF4cmVjdHNQYWNrZXIuSVJlY3RhbmdsZWAuXG4gICAgICpcbiAgICAgKiBub3RlOiBvYmplY3QgaGFzIGBoYXNoYCBwcm9wZXJ0eSB3aWxsIGhhdmUgbW9yZSBzdGFibGUgcGFja2luZyByZXN1bHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SVJlY3RhbmdsZVtdfSByZWN0cyBBcnJheSBvZiBiaW4vcmVjdGFuZ2xlc1xuICAgICAqIEBtZW1iZXJvZiBNYXhSZWN0c1BhY2tlclxuICAgICAqL1xuICAgIGFkZEFycmF5KHJlY3RzKSB7XG4gICAgICAgIHRoaXMuc29ydChyZWN0cywgdGhpcy5vcHRpb25zLmxvZ2ljKS5mb3JFYWNoKHJlY3QgPT4gdGhpcy5hZGQocmVjdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBlbnRpcmUgcGFja2VyIHRvIGluaXRpYWwgc3RhdGVzLCBrZWVwIHNldHRpbmdzXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgTWF4UmVjdHNQYWNrZXJcbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5iaW5zID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRCaW5JbmRleCA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGFjayBhbGwgZWxlbWVudHMgaW5zaWRlIGJpbnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3F1aWNrPXRydWVdIHF1aWNrIHJlcGFjayBvbmx5IGRpcnR5IGJpbnNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAbWVtYmVyb2YgTWF4UmVjdHNQYWNrZXJcbiAgICAgKi9cbiAgICByZXBhY2socXVpY2sgPSB0cnVlKSB7XG4gICAgICAgIGlmIChxdWljaykge1xuICAgICAgICAgICAgbGV0IHVucGFjayA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgYmluIG9mIHRoaXMuYmlucykge1xuICAgICAgICAgICAgICAgIGlmIChiaW4uZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVwID0gYmluLnJlcGFjaygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXApXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2sucHVzaCguLi51cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRBcnJheSh1bnBhY2spO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5kaXJ0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgYWxsUmVjdHMgPSB0aGlzLnJlY3RzO1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuYWRkQXJyYXkoYWxsUmVjdHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIGFkZGluZyBuZXcgZWxlbWVudCB0byB0aGUgY3VycmVudCBiaW4gYW5kIHJldHVybiBhIG5ldyBiaW4uXG4gICAgICpcbiAgICAgKiBub3RlOiBBZnRlciBjYWxsaW5nIGBuZXh0KClgIGFsbCBlbGVtZW50cyB3aWxsIG5vIGxvbmdlciBhZGRlZCB0byBwcmV2aW91cyBiaW5zLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0Jpbn1cbiAgICAgKiBAbWVtYmVyb2YgTWF4UmVjdHNQYWNrZXJcbiAgICAgKi9cbiAgICBuZXh0KCkge1xuICAgICAgICB0aGlzLl9jdXJyZW50QmluSW5kZXggPSB0aGlzLmJpbnMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudEJpbkluZGV4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGJpbnMgdG8gdGhlIHBhY2tlciwgb3ZlcndyaXRlIGV4aXN0IGJpbnNcbiAgICAgKiBAcGFyYW0ge01heFJlY3RzQmluW119IGJpbnMgTWF4UmVjdHNCaW4gb2JqZWN0c1xuICAgICAqIEBtZW1iZXJvZiBNYXhSZWN0c1BhY2tlclxuICAgICAqL1xuICAgIGxvYWQoYmlucykge1xuICAgICAgICBiaW5zLmZvckVhY2goKGJpbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChiaW4ubWF4V2lkdGggPiB0aGlzLndpZHRoIHx8IGJpbi5tYXhIZWlnaHQgPiB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmlucy5wdXNoKG5ldyBPdmVyc2l6ZWRFbGVtZW50QmluKGJpbi53aWR0aCwgYmluLmhlaWdodCwge30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXdCaW4gPSBuZXcgTWF4UmVjdHNCaW4odGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMucGFkZGluZywgYmluLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG5ld0Jpbi5mcmVlUmVjdHMuc3BsaWNlKDApO1xuICAgICAgICAgICAgICAgIGJpbi5mcmVlUmVjdHMuZm9yRWFjaCgociwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXdCaW4uZnJlZVJlY3RzLnB1c2gobmV3IFJlY3RhbmdsZShyLndpZHRoLCByLmhlaWdodCwgci54LCByLnkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXdCaW4ud2lkdGggPSBiaW4ud2lkdGg7XG4gICAgICAgICAgICAgICAgbmV3QmluLmhlaWdodCA9IGJpbi5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKGJpbi50YWcpXG4gICAgICAgICAgICAgICAgICAgIG5ld0Jpbi50YWcgPSBiaW4udGFnO1xuICAgICAgICAgICAgICAgIHRoaXMuYmluc1tpbmRleF0gPSBuZXdCaW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXRwdXQgY3VycmVudCBiaW5zIHRvIHNhdmVcbiAgICAgKiBAbWVtYmVyb2YgTWF4UmVjdHNQYWNrZXJcbiAgICAgKi9cbiAgICBzYXZlKCkge1xuICAgICAgICBsZXQgc2F2ZUJpbnMgPSBbXTtcbiAgICAgICAgdGhpcy5iaW5zLmZvckVhY2goKGJpbiA9PiB7XG4gICAgICAgICAgICBsZXQgc2F2ZUJpbiA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogYmluLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYmluLmhlaWdodCxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogYmluLm1heFdpZHRoLFxuICAgICAgICAgICAgICAgIG1heEhlaWdodDogYmluLm1heEhlaWdodCxcbiAgICAgICAgICAgICAgICBmcmVlUmVjdHM6IFtdLFxuICAgICAgICAgICAgICAgIHJlY3RzOiBbXSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBiaW4ub3B0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChiaW4udGFnKVxuICAgICAgICAgICAgICAgIHNhdmVCaW4gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNhdmVCaW4pLCB7IHRhZzogYmluLnRhZyB9KTtcbiAgICAgICAgICAgIGJpbi5mcmVlUmVjdHMuZm9yRWFjaChyID0+IHtcbiAgICAgICAgICAgICAgICBzYXZlQmluLmZyZWVSZWN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgeDogci54LFxuICAgICAgICAgICAgICAgICAgICB5OiByLnksXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiByLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHIuaGVpZ2h0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNhdmVCaW5zLnB1c2goc2F2ZUJpbik7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHNhdmVCaW5zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTb3J0IHRoZSBnaXZlbiByZWN0cyBiYXNlZCBvbiBsb25nZXN0IGVkZ2Ugb3Igc3VyZmFjZSBhcmVhLlxuICAgICAqXG4gICAgICogSWYgcmVjdHMgaGF2ZSB0aGUgc2FtZSBzb3J0IHZhbHVlLCB3aWxsIHNvcnQgYnkgc2Vjb25kIGtleSBgaGFzaGAgaWYgcHJlc2VudGVkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1RbXX0gcmVjdHNcbiAgICAgKiBAcGFyYW0ge1BBQ0tJTkdfTE9HSUN9IFtsb2dpYz1QQUNLSU5HX0xPR0lDLk1BWF9FREdFXSBzb3J0aW5nIGxvZ2ljLCBcImFyZWFcIiBvciBcImVkZ2VcIlxuICAgICAqIEByZXR1cm5zXG4gICAgICogQG1lbWJlcm9mIE1heFJlY3RzUGFja2VyXG4gICAgICovXG4gICAgc29ydChyZWN0cywgbG9naWMgPSBQQUNLSU5HX0xPR0lDLk1BWF9FREdFKSB7XG4gICAgICAgIHJldHVybiByZWN0cy5zbGljZSgpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChsb2dpYyA9PT0gUEFDS0lOR19MT0dJQy5NQVhfRURHRSkgP1xuICAgICAgICAgICAgICAgIE1hdGgubWF4KGIud2lkdGgsIGIuaGVpZ2h0KSAtIE1hdGgubWF4KGEud2lkdGgsIGEuaGVpZ2h0KSA6XG4gICAgICAgICAgICAgICAgYi53aWR0aCAqIGIuaGVpZ2h0IC0gYS53aWR0aCAqIGEuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gMCAmJiBhLmhhc2ggJiYgYi5oYXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuaGFzaCA+IGIuaGFzaCA/IC0xIDogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGN1cnJlbnQgZnVuY3Rpb25pbmcgYmluIGluZGV4LCBwZXJpb3IgdG8gdGhpcyB3b250IGFjY2VwdCBhbnkgbmV3IGVsZW1lbnRzXG4gICAgICpcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJvZiBNYXhSZWN0c1BhY2tlclxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QmluSW5kZXgoKSB7IHJldHVybiB0aGlzLl9jdXJyZW50QmluSW5kZXg7IH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGRpcnR5IHN0YXR1cyBvZiBhbGwgY2hpbGQgYmluc1xuICAgICAqXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlcm9mIE1heFJlY3RzUGFja2VyXG4gICAgICovXG4gICAgZ2V0IGRpcnR5KCkgeyByZXR1cm4gdGhpcy5iaW5zLnNvbWUoYmluID0+IGJpbi5kaXJ0eSk7IH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYWxsIHJlY3RhbmdsZXMgaW4gdGhpcyBwYWNrZXJcbiAgICAgKlxuICAgICAqIEByZWFkb25seVxuICAgICAqIEB0eXBlIHtUW119XG4gICAgICogQG1lbWJlcm9mIE1heFJlY3RzUGFja2VyXG4gICAgICovXG4gICAgZ2V0IHJlY3RzKCkge1xuICAgICAgICBsZXQgYWxsUmVjdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYmluIG9mIHRoaXMuYmlucykge1xuICAgICAgICAgICAgYWxsUmVjdHMucHVzaCguLi5iaW4ucmVjdHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxSZWN0cztcbiAgICB9XG59XG5cbmV4cG9ydCB7IEJpbiwgTWF4UmVjdHNCaW4sIE1heFJlY3RzUGFja2VyLCBPdmVyc2l6ZWRFbGVtZW50QmluLCBQQUNLSU5HX0xPR0lDLCBSZWN0YW5nbGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1heHJlY3RzLXBhY2tlci5tanMubWFwXG4iLCIvKiBlc2xpbnQgbm8tdXNlbGVzcy1lc2NhcGU6IDAgKi9cclxuXHJcbmltcG9ydCBTQ0FMRV9NT0RFID0gUElYSS5zZXR0aW5ncy5TQ0FMRV9NT0RFO1xyXG5pbXBvcnQge0JvdW5kaW5nQm94LCBGbGlwcywgUG9pbnQsIFJlY3R9IGZyb20gXCIuL3NyYy90eXBlc1wiO1xyXG5cclxuY29uc3QgIEZMSVBQRURfSE9SSVpPTlRBTExZX0ZMQUcgPSAweDQwMDAwMDAwO1xyXG5jb25zdCAgRkxJUFBFRF9WRVJUSUNBTExZX0ZMQUcgICA9IDB4MjAwMDAwMDA7XHJcbmNvbnN0ICBGTElQUEVEX0RJQUdPTkFMTFlfRkxBRyAgID0gMHgxMDAwMDAwMDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhclJlbmRlclRleHR1cmVSZWN0cyAocmVjdHM6IEFycmF5PFJlY3Q+LCByZW5kZXJUZXh0dXJlOiBQSVhJLlJlbmRlclRleHR1cmUsIHJlbmRlcmVyOiBQSVhJLldlYkdMUmVuZGVyZXIgfCBQSVhJLkNhbnZhc1JlbmRlcmVyKXtcclxuICAgIGlmKHJlbmRlcmVyIGluc3RhbmNlb2YgUElYSS5XZWJHTFJlbmRlcmVyKXtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmVuZGVyZXIuYmluZFJlbmRlclRleHR1cmUocmVuZGVyVGV4dHVyZSk7XHJcbiAgICAgICAgY29uc3QgZ2wgPSByZW5kZXJlci5nbDtcclxuICAgICAgICAvLyB0dXJuIG9uIHRoZSBzY2lzc29yIHRlc3QuXHJcbiAgICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBzY2lzc29yIHJlY3RhbmdsZS5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSByZWN0c1tpXTtcclxuICAgICAgICAgICAgZ2wuc2Npc3Nvcih4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgcmVuZGVyZXIuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJlbmRlcmVyLmJpbmRSZW5kZXJUZXh0dXJlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IHJlY3RzW2ldO1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHJlbmRlclRleHR1cmUuYmFzZVRleHR1cmUuX2NhbnZhc1JlbmRlclRhcmdldC5jb250ZXh0LmNsZWFyUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmbGF0dGVuKGFyciwgcmVzdWx0OiBhbnlbXSA9IFtdKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhcnJbaV07XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIGZsYXR0ZW4odmFsdWUsIHJlc3VsdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVUaWxlSWQodGlsZUlkOiBudW1iZXIsIHJvdGF0aW9uOiBudW1iZXIsIGZsaXBIb3I6IGJvb2xlYW4sIGZsaXBWZXI6IGJvb2xlYW4pIDogbnVtYmVyIHtcclxuICAgIGlmKCFyb3RhdGlvbiAmJiAhZmxpcEhvciAmJiAhZmxpcFZlcikge1xyXG4gICAgICAgIHJldHVybiB0aWxlSWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVUaWxlSWQodGlsZUlkOiBudW1iZXIpIDogeyB0aWxlSWQ6IG51bWJlciwgZmxpcEhvcjogYm9vbGVhbiwgZmxpcFZlcjogYm9vbGVhbiwgZmxpcERpYWc6IGJvb2xlYW4gfSB7XHJcbiAgICBsZXQgZmxpcEhvciA9ICEhKHRpbGVJZCAmIDB4NDAwMDAwMDApO1xyXG4gICAgbGV0IGZsaXBWZXIgPSAhISh0aWxlSWQgJiAweDIwMDAwMDAwKTtcclxuICAgIGxldCBmbGlwRGlhZyA9ICEhKHRpbGVJZCAmIDB4MTAwMDAwMDApO1xyXG4gICAgdGlsZUlkICY9IH4oRkxJUFBFRF9IT1JJWk9OVEFMTFlfRkxBRyB8XHJcbiAgICAgICAgRkxJUFBFRF9WRVJUSUNBTExZX0ZMQUcgfFxyXG4gICAgICAgIEZMSVBQRURfRElBR09OQUxMWV9GTEFHKTtcclxuXHJcbiAgICByZXR1cm4geyB0aWxlSWQsIGZsaXBEaWFnLCBmbGlwVmVyLCBmbGlwSG9yIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TWl4aW5zKGRlcml2ZWRDdG9yOiBhbnksIGJhc2VDdG9yczogYW55W10pIHtcclxuICAgIGJhc2VDdG9ycy5mb3JFYWNoKGJhc2VDdG9yID0+IHtcclxuICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlQ3Rvci5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSAnY29uc3RydWN0b3InKSB7XHJcbiAgICAgICAgICAgICAgICBkZXJpdmVkQ3Rvci5wcm90b3R5cGVbbmFtZV0gPSBiYXNlQ3Rvci5wcm90b3R5cGVbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VGbGlwcyhmbGlwMTogRmxpcHMsIGZsaXAyOiBGbGlwcykgOiBGbGlwcyB7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjb25zdCBmbGlwRGlhZ1N1bSA9IGZsaXAxLmZsaXBEaWFnICsgZmxpcDIuZmxpcERpYWc7XHJcbiAgICBpZihmbGlwRGlhZ1N1bSA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZsaXBEaWFnOiBmYWxzZSxcclxuICAgICAgICAgICAgZmxpcEhvcjogZmxpcDEuZmxpcFZlcnQgPT09IGZsaXAyLmZsaXBWZXJ0LFxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGZsaXBWZXJ0OiBmbGlwMS5mbGlwSG9yICsgZmxpcDIuZmxpcEhvclxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZihmbGlwRGlhZ1N1bSA9PT0gMSkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBhcmVIb3IxID0gZmxpcDEuZmxpcERpYWcgPyBmbGlwMS5mbGlwVmVydCA6IGZsaXAxLmZsaXBIb3I7XHJcbiAgICAgICAgY29uc3QgY29tcGFyZVZlcjEgPSBmbGlwMS5mbGlwRGlhZyA/IGZsaXAxLmZsaXBIb3IgOiBmbGlwMS5mbGlwVmVydDtcclxuICAgICAgICBjb25zdCBjb21wYXJlSG9yMiA9IGZsaXAyLmZsaXBEaWFnID8gZmxpcDIuZmxpcFZlcnQgOiBmbGlwMi5mbGlwSG9yO1xyXG4gICAgICAgIGNvbnN0IGNvbXBhcmVWZXIyID0gZmxpcDIuZmxpcERpYWcgPyBmbGlwMi5mbGlwSG9yIDogZmxpcDIuZmxpcFZlcnQ7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZsaXBEaWFnOiB0cnVlLFxyXG4gICAgICAgICAgICBmbGlwSG9yOiBjb21wYXJlVmVyMiAhPT0gY29tcGFyZVZlcjEsXHJcbiAgICAgICAgICAgIGZsaXBWZXJ0OiBjb21wYXJlSG9yMSAhPT0gY29tcGFyZUhvcjJcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGZsaXBEaWFnU3VtID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmxpcERpYWc6IGZhbHNlLFxyXG4gICAgICAgICAgICBmbGlwVmVydDogZmxpcDEuZmxpcFZlcnQgIT09IGZsaXAyLmZsaXBWZXJ0LFxyXG4gICAgICAgICAgICBmbGlwSG9yOiBmbGlwMS5mbGlwSG9yICE9PSBmbGlwMi5mbGlwSG9yXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUm90YXRpb24oaWQ6IG51bWJlcikgOiB7IGZsaXBzOiBGbGlwcywgaWQ6IG51bWJlciB9IHtcclxuICAgIGxldCBmbGlwSG9yID0gISEoaWQgJiAweDQwMDAwMDAwKTtcclxuICAgIGxldCBmbGlwVmVydCA9ICEhKGlkICYgMHgyMDAwMDAwMCk7XHJcbiAgICBsZXQgZmxpcERpYWcgPSAhIShpZCAmIDB4MTAwMDAwMDApO1xyXG4gICAgaWQgJj0gfihGTElQUEVEX0hPUklaT05UQUxMWV9GTEFHIHxcclxuICAgICAgICBGTElQUEVEX1ZFUlRJQ0FMTFlfRkxBRyB8XHJcbiAgICAgICAgRkxJUFBFRF9ESUFHT05BTExZX0ZMQUcpO1xyXG5cclxuICAgIHJldHVybiB7IGlkLCBmbGlwczogeyBmbGlwRGlhZywgZmxpcFZlcnQsIGZsaXBIb3IgIH19XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVTcHJpdGUoc3ByaXRlOiBQSVhJLlNwcml0ZSwgZmxpcERpYWc6IGJvb2xlYW4sIGZsaXBIb3I6IGJvb2xlYW4sIGZsaXBWZXJ0OiBib29sZWFuLCBmbGlwSW5QbGFjZT1mYWxzZSkge1xyXG4gICAgc3ByaXRlLnJvdGF0aW9uID0gMDtcclxuICAgIHNwcml0ZS5zY2FsZS5zZXQoMSwgMSk7XHJcbiAgICBpZighZmxpcERpYWcgJiYgIWZsaXBIb3IgJiYgIWZsaXBWZXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeFNjYWxlID0gZmxpcEhvciA/IC0xIDogMTtcclxuICAgIGNvbnN0IHlTY2FsZSA9IGZsaXBWZXJ0ID8gLTEgOiAxO1xyXG4gICAgY29uc3Qgcm90YXRpb24gPSBmbGlwRGlhZyA/IDkwIDogMDtcclxuICAgIHNwcml0ZS5zY2FsZS5zZXQoeFNjYWxlLCB5U2NhbGUpO1xyXG4gICAgc3ByaXRlLnJvdGF0aW9uID0gcm90YXRpb24gKiAoTWF0aC5QSSAvIDE4MCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZsaXBGbGFncyh0aWxlKSA6IHsgZmxpcERpYWc6IGJvb2xlYW4sIGZsaXBWZXI6IGJvb2xlYW4sIGZsaXBIb3I6IGJvb2xlYW4gfSB7XHJcbiAgICBjb25zdCBvYmogPSB7ZmxpcERpYWc6IGZhbHNlLCBmbGlwVmVyOiBmYWxzZSwgZmxpcEhvcjogZmFsc2V9O1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJvdGF0ZUFuZEFkanVzdFRpbGUoaG9yLCB2ZXJ0LCBkaWFnLCBzcHJpdGUpIHtcclxuICAgIC8vIGFoaGhoaCBJRiBXRSBVU0UgRElBRyBXRSBORUVEIFRPIENIQU5HRSBYIEFORCBZIE9GRlNFVFMgRFVSUlJSUlJSUlJSUlJSUlJSXHJcbiAgICBzcHJpdGUucGl2b3Quc2V0KHNwcml0ZS53aWR0aCAvIDIsIHNwcml0ZS5oZWlnaHQgLyAyKTtcclxuICAgIHNwcml0ZS5mbGlwRmxhZ3MgPSBgJHtob3IgPyAxIDogMH0sJHt2ZXJ0ID8gMSA6IDB9LCR7ZGlhZyA/IDEgOiAwfWA7XHJcbiAgICBpZihkaWFnICYmIHZlcnQgJiYgIWhvcikge1xyXG4gICAgICAgIHNwcml0ZS54ID0gc3ByaXRlLnggKyAoc3ByaXRlLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIHNwcml0ZS55ID0gc3ByaXRlLnkgLSAoc3ByaXRlLndpZHRoIC8gMik7XHJcbiAgICAgICAgc3ByaXRlLnJvdGF0aW9uID0gc3ByaXRlLnJvdGF0aW9uIC0gKDkwICogTWF0aC5QSSAvIDE4MCk7XHJcbiAgICB9IGVsc2UgaWYgKGhvciAmJiBkaWFnICYmICF2ZXJ0KSB7XHJcbiAgICAgICAgc3ByaXRlLnggPSBzcHJpdGUueCArIChzcHJpdGUuaGVpZ2h0IC8gMik7XHJcbiAgICAgICAgc3ByaXRlLnkgPSBzcHJpdGUueSAtIChzcHJpdGUud2lkdGggLyAyKTtcclxuICAgICAgICBzcHJpdGUucm90YXRpb24gPSBzcHJpdGUucm90YXRpb24gKyAoOTAgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgIH0gZWxzZSBpZihob3IgJiYgdmVydCAmJiAhZGlhZykge1xyXG4gICAgICAgIHNwcml0ZS54ID0gc3ByaXRlLnggKyAoc3ByaXRlLndpZHRoIC8gMik7XHJcbiAgICAgICAgc3ByaXRlLnkgPSBzcHJpdGUueSAtIChzcHJpdGUuaGVpZ2h0IC8gMik7XHJcbiAgICAgICAgc3ByaXRlLnJvdGF0aW9uID0gc3ByaXRlLnJvdGF0aW9uICsgKDE4MCAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgfSBlbHNlIGlmIChob3IgJiYgIXZlcnQgJiYgIWRpYWcpIHtcclxuICAgICAgICBzcHJpdGUueCA9IHNwcml0ZS54ICsgKHNwcml0ZS53aWR0aCAvIDIpO1xyXG4gICAgICAgIHNwcml0ZS55ID0gc3ByaXRlLnkgLSAoc3ByaXRlLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIHNwcml0ZS5zY2FsZS54ID0gc3ByaXRlLnNjYWxlLnggKiAtMTtcclxuICAgIH0gZWxzZSBpZih2ZXJ0ICYmICFob3IgJiYgIWRpYWcpIHtcclxuICAgICAgICBzcHJpdGUueCA9IHNwcml0ZS54ICsgKHNwcml0ZS53aWR0aCAvIDIpO1xyXG4gICAgICAgIHNwcml0ZS55ID0gc3ByaXRlLnkgLSAoc3ByaXRlLmhlaWdodCAvIDIpO1xyXG4gICAgICAgIHNwcml0ZS5zY2FsZS55ID0gc3ByaXRlLnNjYWxlLnkgKiAtMTtcclxuICAgIH0gZWxzZSBpZiAoZGlhZyAmJiAhaG9yICYmICF2ZXJ0KSB7XHJcbiAgICAgICAgc3ByaXRlLnNjYWxlLnkgPSBzcHJpdGUuc2NhbGUueSAqIC0xO1xyXG4gICAgICAgIHNwcml0ZS54ID0gc3ByaXRlLnggKyBzcHJpdGUuaGVpZ2h0IC8gMjtcclxuICAgICAgICBzcHJpdGUueSA9IHNwcml0ZS55IC0gc3ByaXRlLndpZHRoIC8gMjtcclxuICAgICAgICBzcHJpdGUucm90YXRpb24gPSBzcHJpdGUucm90YXRpb24gKyAoOTAgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAvLyAgc3ByaXRlLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoZGlhZyAmJiB2ZXJ0ICYmIGhvcikge1xyXG4gICAgICAgIHNwcml0ZS54ID0gc3ByaXRlLnggKyBzcHJpdGUuaGVpZ2h0IC8gMjtcclxuICAgICAgICBzcHJpdGUueSA9IHNwcml0ZS55IC0gc3ByaXRlLndpZHRoIC8gMjtcclxuICAgICAgICBzcHJpdGUucm90YXRpb24gPSBzcHJpdGUucm90YXRpb24gLSAoOTAgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICBzcHJpdGUuc2NhbGUueSA9IHNwcml0ZS5zY2FsZS55ICogLTE7XHJcbiAgICAgICAgc3ByaXRlLnNjYWxlLnggPSBzcHJpdGUuc2NhbGUueCAqIC0xO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdW5kaW5nQm94QXNUZXh0dXJlKGNvbnRhaW5lcjogUElYSS5Db250YWluZXIsIHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyIHwgUElYSS5XZWJHTFJlbmRlcmVyLCByZWN0OiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9KSA6IFBJWEkuVGV4dHVyZSB7XHJcbiAgICBjb25zdCB7eCwgeSwgd2lkdGgsIGhlaWdodH0gPSByZWN0O1xyXG4gICAgY29uc3QgbWF0cml4ID0gY29udGFpbmVyLmxvY2FsVHJhbnNmb3JtLmNsb25lKCk7XHJcbiAgICBjb25zdCBydCA9IFBJWEkuUmVuZGVyVGV4dHVyZS5jcmVhdGUod2lkdGgsIGhlaWdodCk7XHJcbiAgICByZW5kZXJlci5yZW5kZXIoY29udGFpbmVyLCBydCwgdHJ1ZSwgbWF0cml4LnRyYW5zbGF0ZSgteCwgLXkpKTtcclxuICAgIHJldHVybiBydDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvbHlnb25Bc1RleHR1cmUoY29udGFpbmVyOiBQSVhJLkNvbnRhaW5lciwgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXIsIHBvbHlnb246IEFycmF5PHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfT4pIHtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvcHlUZXh0dXJlKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXIpIDogUHJvbWlzZSA8UElYSS5UZXh0dXJlPiB7XHJcbiAgICBjb25zdCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlbmRlcmVyLmV4dHJhY3QuY2FudmFzKHNwcml0ZSkudG9CbG9iKChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgIHNwcml0ZS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAge1VSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7fVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3IFBJWEkuVGV4dHVyZShuZXcgUElYSS5CYXNlVGV4dHVyZShpbWcpKSk7XHJcbiAgICAgICAgICAgIH0pOy8vIG9ubG9hZCByZXZva2UgdGhlIGJsb2IgVVJMIChiZWNhdXNlIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgYW5kIHBhcnNlZCB0aGUgaW1hZ2UgZGF0YSlcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGJsb2JVUkw7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmlkKGNlbGxXLCBjZWxsSCwgdG90YWxXLCB0b3RhbEgsIGNvbG9yPTB4MDAwLCB0aGlja25lc3M9MSwgYWxwaGE9LjUpIDogUElYSS5HcmFwaGljcyB7XHJcbiAgICBjb25zdCBnID0gbmV3IFBJWEkuR3JhcGhpY3MoKTtcclxuICAgIGcubGluZVN0eWxlKHRoaWNrbmVzcywgY29sb3IsIGFscGhhKTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPD0gdG90YWxXOyBpKz1jZWxsVykge1xyXG4gICAgICAgIGlmKGkgPT09IDApIHtcclxuICAgICAgICAgICAgZy5tb3ZlVG8oMSwgMCk7XHJcbiAgICAgICAgICAgIGcubGluZVRvKDEsIHRvdGFsSCk7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnLm1vdmVUbyhpLCAwKTtcclxuICAgICAgICBnLmxpbmVUbyhpLCB0b3RhbEgpO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8PSB0b3RhbEg7IGkrPWNlbGxIKSB7XHJcbiAgICAgICAgZy5tb3ZlVG8oMCwgaSk7XHJcbiAgICAgICAgZy5saW5lVG8odG90YWxXLCBpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzZUVtaXQoY29udGFpbmVyOiBQSVhJLkNvbnRhaW5lciB8IFBJWEkuU3ByaXRlIHwgUElYSS5HcmFwaGljcyB8IFBJWEkuRGlzcGxheU9iamVjdCwgZXZlbnQsIGRhdGE6IGFueSkge1xyXG4gICAgY29udGFpbmVyLmVtaXQoZXZlbnQsIGRhdGEpO1xyXG4gICAgaWYoY29udGFpbmVyIGluc3RhbmNlb2YgUElYSS5Db250YWluZXIpIHtcclxuICAgICAgICBjb250YWluZXIuY2hpbGRyZW4gJiYgY29udGFpbmVyLmNoaWxkcmVuLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgIHJlY3Vyc2VFbWl0KGMsIGV2ZW50LCBkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlUG9pbnRzKHBvaW50cywgcm90YXRpb24pIHtcclxuICAgIHJldHVybiBwb2ludHMubWFwKHBvaW50ID0+IHtcclxuICAgICAgICBjb25zdCBwID0ge3g6cG9pbnQueCwgeTpwb2ludC55fTtcclxuICAgICAgICBjb25zdCBjb3NBbmdsZSA9IE1hdGguY29zKHJvdGF0aW9uKTtcclxuICAgICAgICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKHJvdGF0aW9uKTtcclxuICAgICAgICBjb25zdCBkeCA9IHAueDtcclxuICAgICAgICBjb25zdCBkeSA9IHAueTtcclxuICAgICAgICBwLnggPSAoZHgqY29zQW5nbGUtZHkqc2luQW5nbGUpO1xyXG4gICAgICAgIHAueSA9IChkeCpzaW5BbmdsZStkeSpjb3NBbmdsZSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdCb3hUb1BvbHlnb24oYmI6IHsgbWluWDogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1pblk6IG51bWJlciwgbWF4WTogbnVtYmVyIH0pIDogQXJyYXk8e3g6IG51bWJlciwgeTogbnVtYmVyfT4ge1xyXG4gICAgY29uc3QgeyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH0gPSBiYjtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgeyB4OiBtaW5YLCB5OiBtaW5ZIH0sXHJcbiAgICAgICAgeyB4OiBtYXhYLCB5OiBtaW5ZIH0sXHJcbiAgICAgICAgeyB4OiBtYXhYLCB5OiBtYXhZIH0sXHJcbiAgICAgICAgeyB4OiBtaW5YLCB5OiBtYXhZIH0sXHJcbiAgICAgICAgeyB4OiBtaW5YLCB5OiBtaW5ZIH0sXHJcbiAgICBdO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3RGFzaGVkQm91bmRpbmdCb3goZywgYmI6IHsgbWluWDogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1pblk6IG51bWJlciwgbWF4WTogbnVtYmVyIH0sIHgsIHksIHJvdGF0aW9uLCBkYXNoLCBnYXAsIG9mZnNldFBlcmNlbnRhZ2U9MCkge1xyXG4gICAgcmV0dXJuIGRyYXdEYXNoZWRQb2x5Z29uKGcsIGJvdW5kaW5nQm94VG9Qb2x5Z29uKGJiKSwgeCwgeSwgcm90YXRpb24sIGRhc2gsIGdhcCwgb2Zmc2V0UGVyY2VudGFnZSlcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2VpbFBvaW50KHB0OiBQb2ludCkgOiBQb2ludCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IE1hdGguY2VpbChwdC54KSxcclxuICAgICAgICB5OiBNYXRoLmNlaWwocHQueSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nQm94RnJvbVBvbHlnb24ocG9pbnRzOiBBcnJheTxQb2ludD4pIDogeyBtaW5YOiBudW1iZXIsIG1heFg6IG51bWJlciwgbWluWTogbnVtYmVyLCBtYXhZOiBudW1iZXIgfSB7XHJcbiAgICBpZihwb2ludHMubGVuZ3RoIDw9IDMpIHRocm93IG5ldyBFcnJvcignTm90IGVub3VnaCBwb2ludHMgaW4gcG9seWdvbi4nKVxyXG4gICAgbGV0IG1heFggPSBwb2ludHNbMF0ueDtcclxuICAgIGxldCBtYXhZID0gcG9pbnRzWzBdLnk7XHJcbiAgICBsZXQgbWluWCA9IHBvaW50c1swXS54O1xyXG4gICAgbGV0IG1pblkgPSBwb2ludHNbMF0ueTtcclxuICAgIGZvcihsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHBvaW50c1tpXTtcclxuICAgICAgICBtaW5YID0gTWF0aC5taW4oeCwgbWluWCk7XHJcbiAgICAgICAgbWluWSA9IE1hdGgubWluKHksIG1pblkpO1xyXG4gICAgICAgIG1heFggPSBNYXRoLm1heCh4LCBtYXhYKTtcclxuICAgICAgICBtYXhZID0gTWF0aC5tYXgoeSwgbWF4WSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH07XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjdEZyb21Qb2x5Z29uKHBvaW50czogQXJyYXk8UG9pbnQ+KSA6IFJlY3Qge1xyXG4gICAgcmV0dXJuIHJlY3RGcm9tQm91bmRpbmdCb3goYm91bmRpbmdCb3hGcm9tUG9seWdvbihwb2ludHMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nRnJvbVBvc2l0aW9ucyhwMTogUG9pbnQsIHAyOiBQb2ludCkgOiB7IG1pblg6IG51bWJlciwgbWF4WDogbnVtYmVyLCBtaW5ZOiBudW1iZXIsIG1heFk6IG51bWJlciB9IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWluWDogTWF0aC5taW4ocDEueCwgcDIueCksXHJcbiAgICAgICAgbWF4WDogTWF0aC5tYXgocDEueCwgcDIueCksXHJcbiAgICAgICAgbWluWTogTWF0aC5taW4ocDEueSwgcDIueSksXHJcbiAgICAgICAgbWF4WTogTWF0aC5tYXgocDEueSwgcDIueSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZpbGVFeHRlbnNpb24oZmlsZU5hbWU6IHN0cmluZykgOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGZpbGVOYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCBcIlwiKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9pbnRzRXF1YWwocDE6IFBvaW50LCBwMjogUG9pbnQpIDogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRqdXN0VGlsZURhdGEobGF5ZXJUaWxlRGF0YTogQXJyYXk8bnVtYmVyPiwgc3RhcnRJbmRleCwgb2xkVGlsZUNvdW50LCBuZXdUaWxlQ291bnQpIHtcclxuICAgIGNvbnN0IG9sZEVuZCA9IHN0YXJ0SW5kZXggKyBvbGRUaWxlQ291bnQgLSAxO1xyXG4gICAgY29uc3QgbmV3RW5kID0gc3RhcnRJbmRleCArIG5ld1RpbGVDb3VudCAtIDE7XHJcbiAgICBjb25zdCBkaWZmID0gbmV3VGlsZUNvdW50IC0gb2xkVGlsZUNvdW50O1xyXG4gICAgaWYoIWRpZmYpIHRocm93IG5ldyBFcnJvcignVGlsZSBjb3VudCBkaWZmZXJlbmNlIHNob3VsZCBub3QgYmUgMC4nKTtcclxuXHJcbiAgICBjb25zdCBzaWduID0gTWF0aC5zaWduKGRpZmYpO1xyXG4gICAgaWYoc2lnbiA+IDApIHtcclxuICAgICAgICAvL3dlIGFkZGVkIHRpbGVzLCB3ZSBuZWVkIHRvIGluY3JlbWVudCBhbGwgdGlsZXMgYWZ0ZXIgb2xkRW5kLlxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsYXllclRpbGVEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBsYXllclRpbGVEYXRhW2ldO1xyXG4gICAgICAgICAgICBpZih0ID49IG9sZEVuZCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJUaWxlRGF0YVtpXSs9ZGlmZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIHNpZ24gPCAwKSB7XHJcbiAgICAgICAgLy8gd2UgcmVtb3ZlZCB0aWxlcyB3ZSBuZWVkIHRvIHJlbW92ZSBhbGwgdGlsZXMgaW5iZXR3ZWVuIHRoZSBvbGRFbmQgYW5kIG5ld0VuZCwgdGhlbiBzdWJ0cmFjdCBmcm9tIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIG5ld0VuZC5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGF5ZXJUaWxlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gbGF5ZXJUaWxlRGF0YVtpXTtcclxuICAgICAgICAgICAgaWYodCA+PSBzdGFydEluZGV4ICYmIHQgPD0gb2xkRW5kICYmIHQgPiBuZXdFbmQpIHtcclxuICAgICAgICAgICAgICAgIGxheWVyVGlsZURhdGFbaV0gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHQgPiBuZXdFbmQpIHtcclxuICAgICAgICAgICAgICAgIGxheWVyVGlsZURhdGFbaV0rPWRpZmY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFNpemVLZXkoa2V5OiBzdHJpbmcpIDogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IHtcclxuICAgIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IGtleS5zcGxpdCgnLScpO1xyXG4gICAgaWYod2lkdGggPT09IG51bGwgfHwgd2lkdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNwbGl0IHdpZHRoIG9uIGtleSAke2tleX1gKVxyXG4gICAgfVxyXG4gICAgaWYoaGVpZ2h0ID09PSBudWxsIHx8IGhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc3BsaXQgaGVpZ2h0IG9uIGtleSAke2tleX1gKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHt3aWR0aDogcGFyc2VJbnQod2lkdGgpLCBoZWlnaHQ6IHBhcnNlSW50KGhlaWdodCl9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2l6ZVRpbGVLZXkob2JqZWN0OiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0pIDogc3RyaW5nIHtcclxuICAgIHJldHVybiBgJHtvYmplY3Qud2lkdGh9LSR7b2JqZWN0LmhlaWdodH1gXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RleHR1cmVUcmFuc3BhcmVudCh0ZXh0dXJlOiBQSVhJLlRleHR1cmUpIDogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBzcHJpdGUgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBQSVhJLkNhbnZhc1JlbmRlcmVyKCk7XHJcbiAgICBjb25zdCBwaXhlbHMgPSByZW5kZXJlci5leHRyYWN0LnBpeGVscyhzcHJpdGUpO1xyXG4gICAgZm9yKGxldCBpID0gMzsgaSA8IHBpeGVscy5sZW5ndGg7IGkrPTQpIHtcclxuICAgICAgICBpZihwaXhlbHNbaV0pIHtcclxuICAgICAgICAgICAgc3ByaXRlLmRlc3Ryb3koZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3ByaXRlLmRlc3Ryb3koZmFsc2UpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvcmRlclRpbGVTaXplQ29udGFpbmVycyhjb250YWluZXI6IFBJWEkuQ29udGFpbmVyLCBvcmRlcmVkS2V5cykge1xyXG4gICAgY29udGFpbmVyLmNoaWxkcmVuLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleEEgPSBvcmRlcmVkS2V5cy5pbmRleE9mKGFbJ3NpemVLZXknXSk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4QSA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgaW5kZXggZm9yIHNpemVLZXkgb24gYWApO1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleEIgPSBvcmRlcmVkS2V5cy5pbmRleE9mKGJbJ3NpemVLZXknXSk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4QiA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgaW5kZXggZm9yIHNpemVLZXkgb24gYmApO1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXhBIC0gaW5kZXhCO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLCAnYSB3YXMnLCBhLCAnYiB3YXMnLCBiLCAnb3JkZXJlZCBrZXlzIHdhcycsIG9yZGVyZWRLZXlzKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjdEZyb21Cb3VuZGluZ0JveChiYjp7IG1pblg6IG51bWJlciwgbWF4WDogbnVtYmVyLCBtaW5ZOiBudW1iZXIsIG1heFk6IG51bWJlciB9KSA6IFJlY3Qge1xyXG4gICAgY29uc3QgeyBtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZIH0gPSBiYjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogbWluWCxcclxuICAgICAgICB5OiBtaW5ZLFxyXG4gICAgICAgIHdpZHRoOiBtYXhYIC0gbWluWCxcclxuICAgICAgICBoZWlnaHQ6IG1heFkgLSBtaW5ZXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nQm94RnJvbVJlY3QocmVjdDogUmVjdCkgOiB7IG1pblg6IG51bWJlciwgbWF4WDogbnVtYmVyLCBtaW5ZOiBudW1iZXIsIG1heFk6IG51bWJlciB9IHtcclxuICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gcmVjdDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWluWDogeCxcclxuICAgICAgICBtaW5ZOiB5LFxyXG4gICAgICAgIG1heFg6IHgrd2lkdGgsXHJcbiAgICAgICAgbWF4WTogeStoZWlnaHRcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN3YXBFbGVtZW50cyhhcnJheTogQXJyYXk8YW55PiwgaSwgaikge1xyXG4gICAgY29uc3QgYiA9IGFycmF5W2ldO1xyXG4gICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcclxuICAgIGFycmF5W2pdID0gYjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydFRvQXJyYXkgKGFycmF5OiBBcnJheTxhbnk+LCBpbmRleDogbnVtYmVyLCBuZXdJdGVtOiBhbnkgKSB7XHJcbiAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDAsIG5ld0l0ZW0pXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbW92ZUFycmF5KGE6IEFycmF5PGFueT4sIGZyb206IG51bWJlciwgdG86IG51bWJlcikgOiB2b2lkIHtcclxuICAgIHRoaXMuc3BsaWNlKHRvLCAwLCBhLnNwbGljZShmcm9tLCAxKVswXSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9jYXRpb25PZihlbGVtZW50LCBhcnJheSwgc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgc3RhcnQgPSBzdGFydCB8fCAwO1xyXG4gICAgZW5kID0gZW5kIHx8IGFycmF5Lmxlbmd0aDtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNvbnN0IHBpdm90ID0gcGFyc2VJbnQoc3RhcnQgKyAoZW5kIC0gc3RhcnQpIC8gMiwgMTApO1xyXG4gICAgaWYgKGFycmF5W3Bpdm90XSA9PT0gZWxlbWVudCkgcmV0dXJuIHBpdm90O1xyXG4gICAgaWYgKGVuZCAtIHN0YXJ0IDw9IDEpXHJcbiAgICAgICAgcmV0dXJuIGFycmF5W3Bpdm90XSA+IGVsZW1lbnQgPyBwaXZvdCAtIDEgOiBwaXZvdDtcclxuICAgIGlmIChhcnJheVtwaXZvdF0gPCBlbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uT2YoZWxlbWVudCwgYXJyYXksIHBpdm90LCBlbmQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbG9jYXRpb25PZihlbGVtZW50LCBhcnJheSwgc3RhcnQsIHBpdm90KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydFNvcnRlZChlbGVtZW50LCBhcnJheSkge1xyXG4gICAgYXJyYXkuc3BsaWNlKGxvY2F0aW9uT2YoZWxlbWVudCwgYXJyYXkpICsgMSwgMCwgZWxlbWVudCk7XHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVCb3VuZGluZ0JveChiYjogQm91bmRpbmdCb3gsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBiYi5taW5YID0gTWF0aC5taW4oeCwgYmIubWluWClcclxuICAgIGJiLm1heFggPSBNYXRoLm1pbih4LCBiYi5tYXhYKVxyXG4gICAgYmIubWluWSA9IE1hdGgubWluKHksIGJiLm1pblkpXHJcbiAgICBiYi5tYXhZID0gTWF0aC5taW4oeSwgYmIubWF4WSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeVNlYXJjaEluZGV4IChhcnI6IEFycmF5PG51bWJlcj4sIHg6IG51bWJlciwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgIC8vIEJhc2UgQ29uZGl0aW9uXHJcbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiAtMTtcclxuICAgIC8vIEZpbmQgdGhlIG1pZGRsZSBpbmRleFxyXG4gICAgbGV0IG1pZD1NYXRoLmZsb29yKChzdGFydCArIGVuZCkvMik7XHJcbiAgICAvLyBDb21wYXJlIG1pZCB3aXRoIGdpdmVuIGtleSB4XHJcbiAgICBpZiAoYXJyW21pZF09PT14KSByZXR1cm4gbWlkO1xyXG4gICAgLy8gSWYgZWxlbWVudCBhdCBtaWQgaXMgZ3JlYXRlciB0aGFuIHgsXHJcbiAgICAvLyBzZWFyY2ggaW4gdGhlIGxlZnQgaGFsZiBvZiBtaWRcclxuICAgIGlmKGFyclttaWRdID4geClcclxuICAgICAgICByZXR1cm4gYmluYXJ5U2VhcmNoSW5kZXgoYXJyLCB4LCBzdGFydCwgbWlkLTEpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIC8vIElmIGVsZW1lbnQgYXQgbWlkIGlzIHNtYWxsZXIgdGhhbiB4LFxyXG4gICAgICAgIC8vIHNlYXJjaCBpbiB0aGUgcmlnaHQgaGFsZiBvZiBtaWRcclxuICAgICAgICByZXR1cm4gYmluYXJ5U2VhcmNoSW5kZXgoYXJyLCB4LCBtaWQrMSwgZW5kKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZUZsaXBJZChvbGRJZDogbnVtYmVyLCBmbGlwczogRmxpcHMpIHtcclxuICAgIGlmKG9sZElkID09IDApIHJldHVybiBvbGRJZDtcclxuICAgIGlmKGZsaXBzLmZsaXBIb3IpIHtcclxuICAgICAgICBvbGRJZCArPSBGTElQUEVEX0hPUklaT05UQUxMWV9GTEFHO1xyXG4gICAgfVxyXG4gICAgaWYoZmxpcHMuZmxpcFZlcnQpIHtcclxuICAgICAgICBvbGRJZCArPSBGTElQUEVEX1ZFUlRJQ0FMTFlfRkxBRztcclxuICAgIH1cclxuICAgIGlmKGZsaXBzLmZsaXBEaWFnKSB7XHJcbiAgICAgICAgb2xkSWQgKz0gRkxJUFBFRF9ESUFHT05BTExZX0ZMQUdcclxuICAgIH1cclxuICAgIHJldHVybiBvbGRJZDtcclxufVxyXG5cclxuXHJcbi8qXHJcbiAgICBzYW1lIGFzIGluc2VydCB0byBhcnJheSBidXQgZmFzdGVyIG9uIHNtYWxsZXIgYXJyYXlzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVTbWFsbEFycmF5RmFzdChhOiBBcnJheTxhbnk+LCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAvLyBsb2NhbCB2YXJpYWJsZXNcclxuICAgIGxldCBpLCB0bXA7XHJcbiAgICAvLyBpZiBwb3NpdGlvbnMgYXJlIGRpZmZlcmVudCBhbmQgaW5zaWRlIGFycmF5XHJcbiAgICBpZiAoZnJvbSAhPT0gdG8gJiYgMCA8PSBmcm9tICYmIGZyb20gPD0gYS5sZW5ndGggJiYgMCA8PSB0byAmJiB0byA8PSBhLmxlbmd0aCkge1xyXG4gICAgICAgIC8vIHNhdmUgZWxlbWVudCBmcm9tIHBvc2l0aW9uIDFcclxuICAgICAgICB0bXAgPSBhW2Zyb21dO1xyXG4gICAgICAgIC8vIG1vdmUgZWxlbWVudCBkb3duIGFuZCBzaGlmdCBvdGhlciBlbGVtZW50cyB1cFxyXG4gICAgICAgIGlmIChmcm9tIDwgdG8pIHtcclxuICAgICAgICAgICAgZm9yIChpID0gZnJvbTsgaSA8IHRvOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGFbaV0gPSBhW2kgKyAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBtb3ZlIGVsZW1lbnQgdXAgYW5kIHNoaWZ0IG90aGVyIGVsZW1lbnRzIGRvd25cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChpID0gZnJvbTsgaSA+IHRvOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGFbaV0gPSBhW2kgLSAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwdXQgZWxlbWVudCBmcm9tIHBvc2l0aW9uIDEgdG8gZGVzdGluYXRpb25cclxuICAgICAgICBhW3RvXSA9IHRtcDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hJdGVtQWZ0ZXJJbmRleChpbmRleDogbnVtYmVyLCBhcnJheTogQXJyYXk8YW55PiwgY2I6IChpdGVtOiBhbnksIGN1ckluZGV4OiBudW1iZXIpID0+IHZvaWQpIHtcclxuICAgIGZvcihsZXQgaSA9IGluZGV4KzE7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNiKGFycmF5W2ldLCBpKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludERlbHRhcyhwMSwgcDIpIDogUG9pbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBwMS54IC0gcDIueCxcclxuICAgICAgICB5OiBwMS55IC0gcDIueVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm91bmRQb2ludChwdDogUG9pbnQsIGluUGxhY2U9ZmFsc2UpIDogUG9pbnQge1xyXG4gICAgaWYoaW5QbGFjZSkge1xyXG4gICAgICAgIHB0LnggPSBNYXRoLnJvdW5kKHB0LngpO1xyXG4gICAgICAgIHB0LnkgPSBNYXRoLnJvdW5kKHB0LnkpXHJcbiAgICAgICAgcmV0dXJuIHB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBNYXRoLnJvdW5kKHB0LngpLFxyXG4gICAgICAgIHk6IE1hdGgucm91bmQocHQueSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yUG9pbnQocHQ6IFBvaW50KSA6IFBvaW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogTWF0aC5mbG9vcihwdC54KSxcclxuICAgICAgICB5OiBNYXRoLmZsb29yKHB0LnkpXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVydGV4ZXNGcm9tQm91bmRpbmdCb3goYmI6IHsgbWluWDogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1pblk6IG51bWJlciwgbWF4WTogbnVtYmVyIH0sIG9mZnNldD0wKSB7XHJcbiAgICBsZXQgeyBtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZIH0gPSBiYjtcclxuICAgIGNvbnN0IG1pZFggPSBNYXRoLnJvdW5kKChtaW5YICsgKG1heFggLSBtaW5YKSAvIDIpIC0gKG9mZnNldCAvIDIpKTtcclxuICAgIGNvbnN0IG1pZFkgPSBNYXRoLnJvdW5kKChtaW5ZICsgKG1heFkgLSBtaW5ZKSAvIDIpIC0gKG9mZnNldCAvIDIpKTtcclxuICAgIG1pblggLT0gb2Zmc2V0O1xyXG4gICAgbWluWSAtPSBvZmZzZXQ7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIC8vIHN0YW5kYXJkIHJlY3RcclxuICAgICAgICB7IHg6IG1pblgsIHk6IG1pblkgfSxcclxuICAgICAgICB7IHg6IG1heFgsIHk6IG1pblkgfSxcclxuICAgICAgICB7IHg6IG1heFgsIHk6IG1heFkgfSxcclxuICAgICAgICB7IHg6IG1pblgsIHk6IG1heFkgfSxcclxuICAgICAgICAvLyBtaWQgcG9pbnRzXHJcbiAgICAgICAgeyB4OiBtaW5YLCB5OiBtaWRZIH0sXHJcbiAgICAgICAgeyB4OiBtYXhYLCB5OiBtaWRZIH0sXHJcbiAgICAgICAgeyB4OiBtaWRYLCB5OiBtaW5ZIH0sXHJcbiAgICAgICAgeyB4OiBtaWRYLCB5OiBtYXhZIH0sXHJcbiAgICBdXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3VmVydGV4ZXMoZywgYmI6IHsgbWluWDogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1pblk6IG51bWJlciwgbWF4WTogbnVtYmVyIH0sIHJvdGF0aW9uLCBwb2ludFNpemUsIG91dGxpbmVXaWR0aD0yKSB7XHJcbiAgICBjb25zdCBwb2ludHMgPSByb3RhdGlvbiAhPT0gbnVsbCA/IHJvdGF0ZVBvaW50cyhnZXRWZXJ0ZXhlc0Zyb21Cb3VuZGluZ0JveChiYiwgcG9pbnRTaXplK291dGxpbmVXaWR0aCksIHJvdGF0aW9uKSA6IGdldFZlcnRleGVzRnJvbUJvdW5kaW5nQm94KGJiLCBwb2ludFNpemUrb3V0bGluZVdpZHRoKTtcclxuICAgIGcubGluZVN0eWxlKG91dGxpbmVXaWR0aCwgMHgwMDAsIDEpO1xyXG4gICAgZy5iZWdpbkZpbGwoMHhmZmZmZmYsIDEpO1xyXG4gICAgcG9pbnRzLmZvckVhY2gocCA9PiB7XHJcbiAgICAgICAgZy5kcmF3UmVjdChwLngsIHAueSwgcG9pbnRTaXplLCBwb2ludFNpemUpO1xyXG4gICAgfSlcclxuICAgIGcuZW5kRmlsbCgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVjdENvbnRhaW5zUG9pbnQocmVjdCwgcCwgYnVmZmVyV2lkdGg9MCwgYnVmZmVySGVpZ2h0PTApIHtcclxuICAgIGxldCB7IHgsIHksIHdpZHRoLCBoZWlnaHQgfSA9IHJlY3Q7XHJcbiAgICB4IC09IGJ1ZmZlcldpZHRoIC8gMjtcclxuICAgIHkgLT0gIGJ1ZmZlckhlaWdodCAvIDI7XHJcbiAgICB3aWR0aCArPSBidWZmZXJXaWR0aDtcclxuICAgIGhlaWdodCArPSBidWZmZXJIZWlnaHQ7XHJcbiAgICByZXR1cm4geCA8PSBwLnggJiYgcC54IDw9IHggKyB3aWR0aCAmJlxyXG4gICAgICAgIHkgPD0gcC55ICYmIHAueSA8PSB5ICsgaGVpZ2h0O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiByZWN0c0NvbGxpZGUoYSwgYikge1xyXG4gICAgcmV0dXJuICEoXHJcbiAgICAgICAgKChhLnkgKyBhLmhlaWdodCkgPCAoYi55KSkgfHxcclxuICAgICAgICAoYS55ID4gKGIueSArIGIuaGVpZ2h0KSkgfHxcclxuICAgICAgICAoKGEueCArIGEud2lkdGgpIDwgYi54KSB8fFxyXG4gICAgICAgIChhLnggPiAoYi54ICsgYi53aWR0aCkpXHJcbiAgICApO1xyXG59XHJcblxyXG5cclxuLy9odHRwczovL2NvZGVwZW4uaW8vdW5yZWFsbmwvcGVuL2FZYXhCV1xyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0Rhc2hlZFBvbHlnb24gKGc6IFBJWEkuR3JhcGhpY3MsIHBvaW50czogQXJyYXk8eyB4OiBudW1iZXIsIHk6IG51bWJlciB9PiwgeCwgeSwgcm90YXRpb24sIGRhc2gsIGdhcCwgb2Zmc2V0UGVyY2VudGFnZT0wKXtcclxuICAgIGxldCBwMTtcclxuICAgIGxldCBwMjtcclxuICAgIGxldCBkYXNoTGVmdCA9IDA7XHJcbiAgICBsZXQgZ2FwTGVmdCA9IDA7XHJcbiAgICBpZihvZmZzZXRQZXJjZW50YWdlPjApe1xyXG4gICAgICAgIHZhciBwcm9ncmVzc09mZnNldCA9IChkYXNoK2dhcCkqb2Zmc2V0UGVyY2VudGFnZTtcclxuICAgICAgICBpZihwcm9ncmVzc09mZnNldCA8IGRhc2gpIGRhc2hMZWZ0ID0gZGFzaC1wcm9ncmVzc09mZnNldDtcclxuICAgICAgICBlbHNlIGdhcExlZnQgPSBnYXAtKHByb2dyZXNzT2Zmc2V0LWRhc2gpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgcm90YXRlZFBvaW50cyA9IHJvdGF0aW9uICE9PSBudWxsID8gcm90YXRlUG9pbnRzKHBvaW50cywgcm90YXRpb24pIDogcG9pbnRzO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGk8cm90YXRlZFBvaW50cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgcDEgPSByb3RhdGVkUG9pbnRzW2ldO1xyXG4gICAgICAgIGlmKGkgPT0gcm90YXRlZFBvaW50cy5sZW5ndGgtMSkgcDIgPSByb3RhdGVkUG9pbnRzWzBdO1xyXG4gICAgICAgIGVsc2UgcDIgPSByb3RhdGVkUG9pbnRzW2krMV07XHJcbiAgICAgICAgY29uc3QgZHggPSBwMi54LXAxLng7XHJcbiAgICAgICAgY29uc3QgZHkgPSBwMi55LXAxLnk7XHJcbiAgICAgICAgY29uc3QgbGVuID0gTWF0aC5zcXJ0KGR4KmR4K2R5KmR5KTtcclxuICAgICAgICBjb25zdCBub3JtYWwgPSB7eDpkeC9sZW4sIHk6ZHkvbGVufTtcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NPbkxpbmUgPSAwO1xyXG4gICAgICAgIGcubW92ZVRvKHgrcDEueCtnYXBMZWZ0Km5vcm1hbC54LCB5K3AxLnkrZ2FwTGVmdCpub3JtYWwueSk7XHJcbiAgICAgICAgd2hpbGUocHJvZ3Jlc3NPbkxpbmU8PWxlbil7XHJcbiAgICAgICAgICAgIHByb2dyZXNzT25MaW5lKz1nYXBMZWZ0O1xyXG4gICAgICAgICAgICBpZihkYXNoTGVmdCA+IDApIHByb2dyZXNzT25MaW5lICs9IGRhc2hMZWZ0O1xyXG4gICAgICAgICAgICBlbHNlIHByb2dyZXNzT25MaW5lKz0gZGFzaDtcclxuICAgICAgICAgICAgaWYocHJvZ3Jlc3NPbkxpbmU+bGVuKXtcclxuICAgICAgICAgICAgICAgIGRhc2hMZWZ0ID0gcHJvZ3Jlc3NPbkxpbmUtbGVuO1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NPbkxpbmUgPSBsZW47XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZGFzaExlZnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGcubGluZVRvKHgrcDEueCtwcm9ncmVzc09uTGluZSpub3JtYWwueCwgeStwMS55K3Byb2dyZXNzT25MaW5lKm5vcm1hbC55KTtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NPbkxpbmUrPSBnYXA7XHJcbiAgICAgICAgICAgIGlmKHByb2dyZXNzT25MaW5lPmxlbiAmJiBkYXNoTGVmdCA9PSAwKXtcclxuICAgICAgICAgICAgICAgIGdhcExlZnQgPSBwcm9ncmVzc09uTGluZS1sZW47XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZ2FwTGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyh4K3AxLngrcHJvZ3Jlc3NPbkxpbmUqbm9ybWFsLngsIHkrcDEueStwcm9ncmVzc09uTGluZSpub3JtYWwueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaHVua0FycmF5KGFycjogQXJyYXk8YW55PiwgY2h1bmtTaXplOm51bWJlcikge1xyXG4gICAgY29uc3QgUiA9IFtdO1xyXG4gICAgZm9yIChsZXQgaT0wLGxlbj1hcnIubGVuZ3RoOyBpPGxlbjsgaSs9Y2h1bmtTaXplKVxyXG4gICAgICAgIFIucHVzaChhcnIuc2xpY2UoaSxpK2NodW5rU2l6ZSkpO1xyXG4gICAgcmV0dXJuIFI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTbG9wZShwMSwgcDIpIHtcclxuICAgIHJldHVybiAocDIueSAtIHAxLnkpIC8gKHAyLnggLSBwMS54KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdTZWxlY3Rpb25Cb3goZzogUElYSS5HcmFwaGljcywgeCwgeSwgdG9YLCB0b1ksIGRhc2hlZExlbmd0aD0zKSB7XHJcbiAgICBnLmNsZWFyKCk7XHJcbiAgICBnLm1vdmVUbyh4LCB5KTtcclxuICAgIGxldCBsYXN0WCA9IHg7XHJcbiAgICBmb3IobGV0IGkgPSB4OyBpIDwgdG9YOyBpKz1kYXNoZWRMZW5ndGgpIHtcclxuICAgICAgICBpZihpID49IHRvWCkge1xyXG4gICAgICAgICAgICBnLmxpbmVUb1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpICUgdG9YID09PSAwKSB7XHJcbiAgICAgICAgICAgIGcubGluZVRvKGxhc3RYLCBpKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGV4dHVyZUZyb21CbG9iKGJsb2I6IEJsb2IpIDogUHJvbWlzZTxQSVhJLlRleHR1cmU+IHtcclxuICAgIGNvbnN0IGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGltZy5zcmMgPSBibG9iVVJMO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHtVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO31cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG5ldyBQSVhJLlRleHR1cmUobmV3IFBJWEkuQmFzZVRleHR1cmUoaW1nKSkpO1xyXG4gICAgICAgIH0pOy8vIG9ubG9hZCByZXZva2UgdGhlIGJsb2IgVVJMIChiZWNhdXNlIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgYW5kIHBhcnNlZCB0aGUgaW1hZ2UgZGF0YSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWZmZXJUb0Jhc2U2NCAoYXJyYXlCdWZmZXIpIHtcclxuICAgIHJldHVybiBidG9hKFxyXG4gICAgICAgIG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKVxyXG4gICAgICAgICAgICAucmVkdWNlKChkYXRhLCBieXRlKSA9PiBkYXRhICsgU3RyaW5nLmZyb21DaGFyQ29kZShieXRlKSwgJycpXHJcbiAgICApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGV4dHVyZUZyb21CbG9iMihibG9iOiBCbG9iKSA6IFByb21pc2U8UElYSS5UZXh0dXJlPiB7XHJcbiAgICBjb25zdCBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XHJcbiAgICBsZXQgYmxvYlVSTDtcclxuICAgIGxldCBuZWVkUmV2b2tlID0gdHJ1ZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgIG5lZWRSZXZva2UgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSBidWZmZXJUb0Jhc2U2NChibG9iKTtcclxuICAgICAgICBibG9iVVJMID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0XHJcbiAgICAgICAgLy8gcmV0dXJuIFBJWEkuVGV4dHVyZS5mcm9tKGJhc2U2NCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLnNyYyA9IGJsb2JVUkw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYobmVlZFJldm9rZSkge1xyXG4gICAgICAgICAgICAgICAge1VSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG5ldyBQSVhJLlRleHR1cmUobmV3IFBJWEkuQmFzZVRleHR1cmUoaW1nKSkpO1xyXG4gICAgICAgIH0pOy8vIG9ubG9hZCByZXZva2UgdGhlIGJsb2IgVVJMIChiZWNhdXNlIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgYW5kIHBhcnNlZCB0aGUgaW1hZ2UgZGF0YSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNdWx0aXBsZVRleHR1cmVzRnJvbUJsb2IoYmxvYjogQmxvYiwgY291bnQ9MSkgOiBQcm9taXNlPFBJWEkuVGV4dHVyZSB8IEFycmF5PFBJWEkuVGV4dHVyZT4+IHtcclxuICAgIGNvbnN0IGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICBjb3VudCA9IGNvdW50ID8gY291bnQgOiAxO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBpbWcuc3JjID0gYmxvYlVSTDtcclxuICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHtVUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO31cclxuICAgICAgICAgICAgaWYoY291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG5ldyBQSVhJLlRleHR1cmUobmV3IFBJWEkuQmFzZVRleHR1cmUoaW1nKSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHR1cmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVzLnB1c2gobmV3IFBJWEkuVGV4dHVyZShuZXcgUElYSS5CYXNlVGV4dHVyZShpbWcpKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRleHR1cmVzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7Ly8gb25sb2FkIHJldm9rZSB0aGUgYmxvYiBVUkwgKGJlY2F1c2UgdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCBhbmQgcGFyc2VkIHRoZSBpbWFnZSBkYXRhKVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCbG9iRnJvbVNwcml0ZShyZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlciwgZGlzcGxheU9iamVjdDogUElYSS5TcHJpdGUgfCBQSVhJLkNvbnRhaW5lcikgOiBQcm9taXNlPEJsb2I+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVuZGVyZXIuZXh0cmFjdC5jYW52YXMoZGlzcGxheU9iamVjdCkudG9CbG9iKChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGJsb2IpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJsb2JGcm9tVGV4dHVyZShyZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlciwgdGV4dHVyZTogUElYSS5UZXh0dXJlKSA6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgcmV0dXJuIGdldEJsb2JGcm9tU3ByaXRlKHJlbmRlcmVyLCBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSkpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkYXRhVXJsVG9UZXh0dXJlKGRhdGFVcmwpIHtcclxuICAgIHJldHVybiBnZXRUZXh0dXJlRnJvbUJsb2IoZGF0YVVSTHRvQmxvYihkYXRhVXJsKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkYXRhVVJMdG9CbG9iKGRhdGF1cmwpIHtcclxuICAgIGxldCBhcnIgPSBkYXRhdXJsLnNwbGl0KCcsJyksIG1pbWUgPSBhcnJbMF0ubWF0Y2goLzooLio/KTsvKVsxXSxcclxuICAgICAgICBic3RyID0gYXRvYihhcnJbMV0pLCBuID0gYnN0ci5sZW5ndGgsIHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7XHJcbiAgICB3aGlsZShuLS0pe1xyXG4gICAgICAgIHU4YXJyW25dID0gYnN0ci5jaGFyQ29kZUF0KG4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBCbG9iKFt1OGFycl0sIHt0eXBlOm1pbWV9KTtcclxufVxyXG5cclxuLy8qKmJsb2IgdG8gZGF0YVVSTCoqXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBibG9iVG9EYXRhVVJMKGJsb2IpIHtcclxuICAgIGNvbnN0IGEgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBhLnJlYWRBc0RhdGFVUkwoYmxvYik7XHJcbiAgICAgICAgYS5vbmxvYWQgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZEJsb2JQbmcoYmxvYjogQmxvYiwgZmlsZW5hbWU6IHN0cmluZykgOiBib29sZWFuIHtcclxuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoYSk7XHJcbiAgICBhLmRvd25sb2FkID0gZmlsZW5hbWU7XHJcbiAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgYS5jbGljaygpO1xyXG4gICAgYS5yZW1vdmUoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWRTcHJpdGVQbmcocmVuZGVyZXIsIHNwcml0ZTogUElYSS5TcHJpdGUgfCBQSVhJLlJlbmRlclRleHR1cmUgfCBQSVhJLlRleHR1cmUgfCBQSVhJLkJhc2VSZW5kZXJUZXh0dXJlLCBzYXZlVG9GaWxlUGF0aDogc3RyaW5nKSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgaWYoIShzcHJpdGUgaW5zdGFuY2VvZiBQSVhJLlJlbmRlclRleHR1cmUpICYmICEoc3ByaXRlIGluc3RhbmNlb2YgUElYSS5TcHJpdGUpKSB7XHJcbiAgICAgICAgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKHNwcml0ZSBhcyBQSVhJLlRleHR1cmUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZW5kZXJlci5leHRyYWN0LmNhbnZhcyhzcHJpdGUpLnRvQmxvYigoYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkb3dubG9hZEJsb2JQbmcoYiwgc2F2ZVRvRmlsZVBhdGgpKTtcclxuICAgICAgICB9LCAnaW1hZ2UvcG5nJyk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXN5bmNUaW1lb3V0ICh0aW1lOiBudW1iZXIpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSwgdGltZSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkb3dubG9hZEpzb24oanNvbkRhdGE6IGFueSwgc2F2ZVRvRmlsZVBhdGg6IHN0cmluZykge1xyXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShqc29uRGF0YSldLCB7dHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCJ9KTtcclxuICAgIGNvbnN0IHVybCAgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGEpO1xyXG4gICAgYS5kb3dubG9hZCAgICA9IGAke3NhdmVUb0ZpbGVQYXRofS5qc29uYDtcclxuICAgIGEuaHJlZiAgICAgICAgPSB1cmw7XHJcbiAgICBhLmNsaWNrKCk7XHJcbiAgICBhLnJlbW92ZSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWluTWF4ZXMocDEsIHAyKSA6IHsgbWluWDogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1pblk6IG51bWJlciwgbWF4WTogbnVtYmVyIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtaW5YIDogTWF0aC5taW4ocDEueCwgcDIueCksXHJcbiAgICAgICAgbWF4WCA6IE1hdGgubWF4KHAxLngsIHAyLngpLFxyXG4gICAgICAgIG1pblkgOiBNYXRoLm1pbihwMS55LCBwMi55KSxcclxuICAgICAgICBtYXhZIDogTWF0aC5tYXgocDEueSwgcDIueSksXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYXRhVVJMRnJvbVRleHR1cmUocmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXIsIHRleHR1cmU6IFBJWEkuVGV4dHVyZSkge1xyXG4gICAgY29uc3QgYmxvYiA9IGF3YWl0IGdldEJsb2JGcm9tVGV4dHVyZShyZW5kZXJlciwgdGV4dHVyZSk7XHJcbiAgICByZXR1cm4gYmxvYlRvRGF0YVVSTChibG9iKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhdGFVcmxzQW5kVGV4dHVyZXNGcm9tVGV4dHVyZXMocmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXIsIHRleHR1cmVzOiBBcnJheTxQSVhJLlRleHR1cmU+IHwge1sgdGV4dHVyZUlkOiBzdHJpbmddIDogUElYSS5UZXh0dXJlIH0pIDpcclxuICAgIFByb21pc2U8e1xyXG4gICAgICAgIHRleHR1cmVzOiB7IFt0ZXh0dXJlSWQ6IHN0cmluZ106IFBJWEkuVGV4dHVyZSB9IHwgQXJyYXk8UElYSS5UZXh0dXJlPixcclxuICAgICAgICBkYXRhVXJsczoge1sgdGV4dHVyZUlkOiBzdHJpbmddOiBVUkwgfSB8IEFycmF5PFVSTD4sXHJcbiAgICB9PlxyXG57XHJcbiAgICBsZXQgYmxvYnMgPSBbXTtcclxuICAgIGxldCB0ZXh0dXJlUHJvbWlzZXMgPSBbXTtcclxuICAgIGxldCBkYXRhVXJsUHJvbWlzZXMgPSBbXTtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkodGV4dHVyZXMpKSB7XHJcbiAgICAgICAgYmxvYnMgPSBhd2FpdCBQcm9taXNlLmFsbCh0ZXh0dXJlcy5tYXAodCA9PiBnZXRCbG9iRnJvbVRleHR1cmUocmVuZGVyZXIsIHQpKSk7XHJcbiAgICAgICAgdGV4dHVyZVByb21pc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoYmxvYnMubWFwKGdldFRleHR1cmVGcm9tQmxvYikpO1xyXG4gICAgICAgIGRhdGFVcmxQcm9taXNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGJsb2JzLm1hcChibG9iVG9EYXRhVVJMKSk7XHJcbiAgICAgICAgcmV0dXJuIHsgdGV4dHVyZXM6IHRleHR1cmVQcm9taXNlcywgZGF0YVVybHM6IGRhdGFVcmxQcm9taXNlcyB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBhcnJheSA9IE9iamVjdC5rZXlzKHRleHR1cmVzKS5tYXAodCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlc1t0XSxcclxuICAgICAgICAgICAgICAgIGlkOiB0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBibG9icyA9IGF3YWl0IFByb21pc2UuYWxsKGFycmF5Lm1hcChhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEJsb2JGcm9tVGV4dHVyZShyZW5kZXJlciwgYS50ZXh0dXJlKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGV4dHVyZVByb21pc2VzID0gYXdhaXQgUHJvbWlzZS5hbGwoYmxvYnMubWFwKGdldFRleHR1cmVGcm9tQmxvYikpO1xyXG4gICAgICAgIGRhdGFVcmxQcm9taXNlcyA9IGF3YWl0IFByb21pc2UuYWxsKGJsb2JzLm1hcChibG9iVG9EYXRhVVJMKSk7XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZU9iaiA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGRhdGFVcmxPYmogPSB7fTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYmxvYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGV4dHVyZU9ialthcnJheVtpXS5pZF0gPSB0ZXh0dXJlUHJvbWlzZXNbaV07XHJcbiAgICAgICAgICAgIGRhdGFVcmxPYmpbYXJyYXlbaV0uaWRdID0gZGF0YVVybFByb21pc2VzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygncmV0dXJuaW5nIHRleHR1cmVzJywgdGV4dHVyZU9iailcclxuICAgICAgICByZXR1cm4geyB0ZXh0dXJlczogdGV4dHVyZU9iaiwgZGF0YVVybHM6IGRhdGFVcmxPYmogfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRleHR1cmVGcm9tRGF0YVVybChkYXRhVXJsLCBjb3VudD0xKSA6IFByb21pc2U8UElYSS5UZXh0dXJlIHwgQXJyYXk8UElYSS5UZXh0dXJlPj4ge1xyXG4gICAgY29uc3QgYmxvYiA9IGRhdGFVUkx0b0Jsb2IoZGF0YVVybCk7XHJcbiAgICByZXR1cm4gZ2V0TXVsdGlwbGVUZXh0dXJlc0Zyb21CbG9iKGJsb2IsIGNvdW50KTtcclxufVxyXG5cclxuLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTEwMDgyMS9qYXZhc2NyaXB0LXJlZ2V4LWZvci12YWxpZGF0aW5nLWZpbGVuYW1lc1xyXG5jb25zdCBpc1ZhbGlkID0oZnVuY3Rpb24oKXtcclxuICAgIHZhciByZzE9L15bXlxcXFwvOlxcKlxcP1wiPD5cXHxdKyQvOyAvLyBmb3JiaWRkZW4gY2hhcmFjdGVycyBcXCAvIDogKiA/IFwiIDwgPiB8XHJcbiAgICB2YXIgcmcyPS9eXFwuLzsgLy8gY2Fubm90IHN0YXJ0IHdpdGggZG90ICguKVxyXG4gICAgdmFyIHJnMz0vXihudWx8cHJufGNvbnxscHRbMC05XXxjb21bMC05XSkoXFwufCQpL2k7IC8vIGZvcmJpZGRlbiBmaWxlIG5hbWVzXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gaXNWYWxpZChmbmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHJnMS50ZXN0KGZuYW1lKSYmIXJnMi50ZXN0KGZuYW1lKSYmIXJnMy50ZXN0KGZuYW1lKTtcclxuICAgIH1cclxufSkoKTtcclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRmlsZU5hbWUoZmlsZU5hbWUpIDogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gaXNWYWxpZChmaWxlTmFtZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdmVyYWdlUkdCKGltYWdlRGF0YTogSW1hZ2VEYXRhLCBibG9ja1NpemU9MSkgOiBudW1iZXIge1xyXG4gICAgbGV0IGkgPSAtKGJsb2NrU2l6ZS0xKTtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBsZXQgciA9IDA7XHJcbiAgICBsZXQgZyA9IDA7XHJcbiAgICBsZXQgYiA9IDA7XHJcblxyXG4gICAgY29uc3QgbGVuZ3RoID0gaW1hZ2VEYXRhLmRhdGEubGVuZ3RoO1xyXG4gICAgd2hpbGUgKCAoaSArPSBibG9ja1NpemUgKiA0KSA8IGxlbmd0aCApIHtcclxuICAgICAgICArK2NvdW50O1xyXG4gICAgICAgIGlmKGltYWdlRGF0YS5kYXRhW2krM10gIT09IDApIHtcclxuICAgICAgICAgICAgciArPSBpbWFnZURhdGEuZGF0YVtpXTtcclxuICAgICAgICAgICAgZyArPSBpbWFnZURhdGEuZGF0YVtpKzFdO1xyXG4gICAgICAgICAgICBiICs9IGltYWdlRGF0YS5kYXRhW2krMl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gfn4gdXNlZCB0byBmbG9vciB2YWx1ZXNcclxuICAgIHIgPSB+fihyL2NvdW50KTtcclxuICAgIGcgPSB+fihnL2NvdW50KTtcclxuICAgIGIgPSB+fihiL2NvdW50KTtcclxuICAgIHJldHVybiAociA8PCAxNikgKyAoZyA8PCA4KSArIChiKTtcclxufSIsIi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHtkYXRhVXJsVG9UZXh0dXJlfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuY29uc3QgaW5kZXhlZERCID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyA/XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cuT0luZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREJcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIDogc2VsZi5pbmRleGVkREIgfHwgc2VsZi53ZWJraXRJbmRleGVkRGI7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcblxyXG5jb25zdCAgICAgZGJWZXJzaW9uID0gMS4wO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvYWRlciB7XHJcbiAgICBwcml2YXRlIGRiIDogSURCRGF0YWJhc2U7XHJcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGRiPzogSURCRGF0YWJhc2UpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYodGhpcy5kYikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgZGJWZXJzaW9uKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZy9hY2Nlc3NpbmcgSW5kZXhlZERCIGRhdGFiYXNlXCIsIGV2ZW50KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcvYWNjZXNzaW5nIEluZGV4ZWREQiBkYXRhYmFzZVwiLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChgRXJyb3IgY3JlYXRpbmcvYWNjZXNzaW5nIEluZGV4ZWREQiBkYXRhYmFzZWApXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEludGVyaW0gc29sdXRpb24gZm9yIEdvb2dsZSBDaHJvbWUgdG8gY3JlYXRlIGFuIG9iamVjdFN0b3JlLiBXaWxsIGJlIGRlcHJlY2F0ZWRcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRiLnNldFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYi52ZXJzaW9uICE9IGRiVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNldFZlcnNpb24gPSB0aGlzLmRiLnNldFZlcnNpb24oZGJWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmVyc2lvbi5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRm9yIGZ1dHVyZSB1c2UuIEN1cnJlbnRseSBvbmx5IGluIGxhdGVzdCBGaXJlZm94IHZlcnNpb25zXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZWxldGVJdGVtKG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoYEVycm9yIHNhdmluZyB0ZXh0dXJlIHRvIGluZGV4ZWREQjogJHtuYW1lfWApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVKc29uKG5hbWU6IHN0cmluZywgZGF0YTogYW55KSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChKU09OLnN0cmluZ2lmeShkYXRhKSwgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGBFcnJvciBzYXZpbmcgdGV4dHVyZSB0byBpbmRleGVkREI6ICR7bmFtZX1gKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkSnNvbihuYW1lOiBzdHJpbmcpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkb25seScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmdldChuYW1lKVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgaWYoZXZlbnQudGFyZ2V0LnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShKU09OLnBhcnNlKGV2ZW50LnRhcmdldC5yZXN1bHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgdGV4dHVyZSBmcm9tIGluZGV4ZWREQjogJHtuYW1lfWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlQXJyYXlCdWZmZXIobmFtZTogc3RyaW5nLCBidWZmZXI6IEFycmF5QnVmZmVyKSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChidWZmZXIsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChgRXJyb3Igc2F2aW5nIHRleHR1cmUgdG8gaW5kZXhlZERCOiAke25hbWV9YClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZEFycmF5QnVmZmVyKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLm5hbWVdLCAncmVhZG9ubHknKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5nZXQobmFtZSlcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgdGV4dHVyZSBmcm9tIGluZGV4ZWREQjogJHtuYW1lfWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlVGV4dHVyZShuYW1lOiBzdHJpbmcsIHRleHR1cmU6IFBJWEkuVGV4dHVyZSkgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBsZXQgZGF0YVVybDtcclxuICAgICAgICBpZih0ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gdGV4dHVyZS5iYXNlVGV4dHVyZS53aWR0aDtcclxuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHRleHR1cmUuYmFzZVRleHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoZSBiYXNlIHRleHR1cmUgd2FzJywgdGV4dHVyZS5iYXNlVGV4dHVyZSlcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighZGF0YVVybCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpZCBub3QgZ2V0IGEgZGF0YXNVcmwgZnJvbSB0ZXh0dXJlLicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChkYXRhVXJsLCBuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoYEVycm9yIHNhdmluZyB0ZXh0dXJlIHRvIGluZGV4ZWREQjogJHtuYW1lfWApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVJbWFnZURhdGEobmFtZTogc3RyaW5nLCBkYXRhVXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5wdXQoZGF0YVVybCwgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGBFcnJvciBzYXZpbmcgdGV4dHVyZSB0byBpbmRleGVkREI6ICR7bmFtZX1gKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkSW1hZ2VEYXRhKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuZ2V0KG5hbWUpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdGaWxlID0gZXZlbnQ/LnRhcmdldD8ucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoaW1nRmlsZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIHRleHR1cmUgZnJvbSBpbmRleGVkREI6ICR7bmFtZX1gKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZFRleHR1cmUgKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuZ2V0KG5hbWUpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBhc3luYyAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdGaWxlID0gZXZlbnQ/LnRhcmdldD8ucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYoIWltZ0ZpbGUpIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZGF0YVVybFRvVGV4dHVyZShpbWdGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcicsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIHRleHR1cmUgZnJvbSBpbmRleGVkREI6ICR7bmFtZX1gKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7TWFwU2l6ZSwgUGxheWVyVmlldywgV29ybGRJbml0TWV0YURhdGEsIFdvcmxkTGV2ZWxTZWN0aW9uRGF0YSwgV29ybGRNYXBJbml0TWV0YURhdGF9IGZyb20gXCIuL3R5cGVzXCI7XHJcbi8vaW1wb3J0IHtQbGF5ZXJDYW1lcmF9IGZyb20gXCIuLi9UaWxlZC9QbGF5ZXJDYW1lcmFcIjtcclxuaW1wb3J0IHttYXBGaWxlS2V5LCBtYXBNZXRhUGF0aH0gZnJvbSBcIi4vV29ya2Vycy91dGlsc1wiO1xyXG5pbXBvcnQge2h0dHBHZXRBc3luYywgcmVzb2x2ZU1hcFNpemV9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHtQbGF5ZXJDYW1lcmF9IGZyb20gXCIuL1BsYXllckNhbWVyYVwiO1xyXG5pbXBvcnQge0xvYWRlcn0gZnJvbSBcIi4uL2xpYi9Mb2FkZXJcIjtcclxuaW1wb3J0IHtXb3JsZENodW5rfSBmcm9tIFwiLi9Xb3JsZENodW5rXCI7XHJcbmltcG9ydCB7VGlsZU1hbmFnZXJ9IGZyb20gXCIuL1RpbGVNYW5hZ2VyXCI7XHJcbmltcG9ydCB7UlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRX0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7QWJzdHJhY3RUZXh0dXJlQXRsYXN9IGZyb20gXCIuL1RleHR1cmVBdGxhc3Nlcy9TZWN0aW9uVGV4dHVyZUF0bGFzL0Jhc2VUZXh0dXJlQXRsYXNcIjtcclxuaW1wb3J0IHtDYW52YXNUZXh0dXJlQXRsYXN9IGZyb20gXCIuL1RleHR1cmVBdGxhc3Nlcy9TZWN0aW9uVGV4dHVyZUF0bGFzL0NhbnZhc1RleHR1cmVBdGxhc1wiO1xyXG5pbXBvcnQge1dlYkdMVGV4dHVyZUF0bGFzfSBmcm9tIFwiLi9UZXh0dXJlQXRsYXNzZXMvU2VjdGlvblRleHR1cmVBdGxhcy9XZWJHTFRleHR1cmVBdGxhc1wiO1xyXG5pbXBvcnQge0NodW5rTG9hZGVyV29ya2VyfSBmcm9tIFwiLi9Xb3JrZXJzL0NodW5rTG9hZGVyV29ya2VyXCI7XHJcbmltcG9ydCB7RGVjb2RlZE1hcENodW5rRGF0YSwgRGVjb2RlZE1hcE1ldGFEYXRhLCBEZWNvZGVyfSBmcm9tIFwiLi4vLi4vLi4vRW5jb2Rlci9zcmMvRGVjb2RlclwiO1xyXG5pbXBvcnQge0dhbWVPYmplY3RNYW5hZ2VyfSBmcm9tIFwiLi9HYW1lT2JqZWN0TWFuYWdlclwiO1xyXG5pbXBvcnQge0dhbWVPYmplY3R9IGZyb20gXCIuL0dhbWVPYmplY3RcIjtcclxuaW1wb3J0IHtDb2xsaXNpb25NYW5hZ2VyfSBmcm9tIFwiLi4vQ29sbGlzaW9uTWFuYWdlci9Db2xsaXNpb25NYW5hZ2VyXCI7XHJcbmltcG9ydCB7YXN5bmNUaW1lb3V0LCBkb3dubG9hZFNwcml0ZVBuZ30gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvdXRpbHNcIjtcclxuXHJcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50ZW1pdHRlcjMnKTtcclxuXHJcbmVudW0gU2VjdGlvblJlbmRlck1vZGUge1xyXG4gICAgQkFUQ0hfU1VCX1NFQ1RJT05TX1JFTkRFUl9URVhUVVJFUyxcclxuICAgIEJBVENIX1NVQl9TRUNUSU9OU19DT05UQUlORVJTLFxyXG4gICAgTEFaWV9JTkRFWEVEX0RCX0xPQUQsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFZpc2liaWxpdHlTdGF0ZXMge1xyXG4gICAgZGVzdHJveWVkID0gJ2Rlc3Ryb3llZCcsXHJcbiAgICBhbG1vc3RfdmlzaWJsZSA9ICdhbG1vc3RfdmlzaWJsZScsXHJcbiAgICB2aXNpYmxlID0gJ3Zpc2libGUnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaHVua01hbmFnZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgcHJpdmF0ZSBjdXJCYXRjaEluZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBjdXJCYXRjaENodW5rSW5kZXhlczogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBhbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzOiBBcnJheTxudW1iZXI+ID0gW107XHJcbiAgICBwcml2YXRlIHZpc2libGVDaHVua0luZGV4ZXM6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgIHByaXZhdGUgY2h1bmtzSW5CYXRjaDoge1tjaHVua0luZGV4OiBudW1iZXJdOiBXb3JsZENodW5rIH0gPSB7fTtcclxuICAgIHByaXZhdGUgaW5pdEJhdGNoZXM6IHtbY2h1bmtJbmRleDogbnVtYmVyXTogQXJyYXk8KCkgPT4gdm9pZD4gfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBjdXJNYXBTZXE6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaW5pdGlhaWxpemVkU3ByaXRlczogQXJyYXk8e1t6SW5kZXg6IG51bWJlciBdOiBHYW1lT2JqZWN0IH0+ID0gW107XHJcblxyXG4gICAgLy8gc28gaWYgd2UgbmVlZCB0byBkZWluaXQgYSBjaHVuayBhbmQgaXRzIGluIHRoZSBiYXRjaGVzLCB3ZSBrbm93IHdoaWNoIGluZGV4ZXMgdG8gc3BsaWNlIGZyb21cclxuICAgIHByaXZhdGUgdHJhY2tlZENodW5rQmF0Y2hJbmRleGVzOiB7W2NodW5rSW5kZXg6IG51bWJlcl06IEFycmF5PG51bWJlcj4gfSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgY2h1bmtUZXh0dXJlQXRsYXNGYWN0b3J5IDogKCkgPT4gQWJzdHJhY3RUZXh0dXJlQXRsYXM7XHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVkOiBib29sZWFuO1xyXG4gICAgcmVhZG9ubHkgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXI7XHJcbiAgICByZWFkb25seSBpbmRleGVkRGJMb2FkZXI6IExvYWRlcjtcclxuXHJcbiAgICByZWFkb25seSBjb2xsaXNpb25NYW5hZ2VyOiBDb2xsaXNpb25NYW5hZ2VyO1xyXG4gICAgcmVhZG9ubHkgaW1hZ2VNYW5hZ2VyOiBHYW1lT2JqZWN0TWFuYWdlcjtcclxuICAgIHJlYWRvbmx5IHRpbGVNYW5hZ2VyOiBUaWxlTWFuYWdlcjtcclxuXHJcbiAgICByZWFkb25seSB1c2VMb2NhbFN0b3JhZ2U6IGJvb2xlYW47XHJcbiAgICByZWFkb25seSB1c2VJbmRleGVkRGJXb3JrZXI6IGJvb2xlYW47XHJcblxyXG4gICAgcmVhZG9ubHkgY2h1bmtUZXh0dXJlQXRsYXNzZXM6IEFycmF5PEFic3RyYWN0VGV4dHVyZUF0bGFzPiA9IFtdO1xyXG4gICAgLy8gd2Ugd2lsbCBoYXZlIDEgcGVyIGxheWVyIGdyb3VwIGZvciB3b3JsZC4gc2luY2Ugd2UgdXNlIGEgc2VwZXJhdGUgY29udGFpbmVyIGZvciBlYWNoIGxheWVyIHRvIHJlbmRlcixcclxuICAgIC8vIGl0cyBvcHRpbWFsIHRvIGhhdmUgYSB0ZXh0dXJlIGF0bGFzIHBlci5cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzdWJDaHVua0NvbHM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3ViQ2h1bmtSb3dzOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBzdWJDaHVua1c6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3ViQ2h1bmtIOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBjaHVua1Jvd3M6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY2h1bmtDb2xzOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBtYXBTaXplOiBNYXBTaXplO1xyXG4gICAgcHJpdmF0ZSBwZW5kaW5nQ2h1bmtJbWFnZUxvYWRzOiB7W2NodW5rSW5kZXg6IG51bWJlcl06IGJvb2xlYW59ID0ge307XHJcbiAgICBwcml2YXRlIGludGVydXB0ZWRDaHVua0ltYWdlczoge1tjaHVua0luZGV4OiBudW1iZXJdOiBib29sZWFufSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBpbnRlcnVwdGVkQ2h1bmtEYXRhOiB7W2NodW5rSW5kZXg6IG51bWJlcl06IGJvb2xlYW59ID0ge307XHJcbiAgICBwcml2YXRlIGxvYWRpbmdDaHVua0RhdGE6IHtbY2h1bmtJbmRleDogbnVtYmVyXTogYm9vbGVhbiB9ID0ge307XHJcblxyXG4gICAgLy8gQ1VSUkVOVCBNQVAgREFUQSBTRVQgVVAgSU4gTUVUSE9EIGluaXQobWFwTWV0YURhdGE6IE1hcE1ldGFEYXRhKVxyXG4gICAgcHJpdmF0ZSBjaHVua1dpZHRoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGNodW5rSGVpZ2h0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGhhbGZDaHVua1dpZHRoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGhhbGZDaHVua0hlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBtYXBNZXRhRGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhO1xyXG4gICAgcHJpdmF0ZSBsb2FkaW5nOiB7W2NodW5rSW5kZXg6IHN0cmluZ106IGJvb2xlYW4gfSA9e307XHJcbiAgICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcclxuICAgIHByaXZhdGUgbWFwSWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgY2h1bmtVcGRhdGVUaW1lc3RhbXBzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHJpdmF0ZSBsYXN0VXBkYXRlVHM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGlsZVNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcGxheWVyVmlld1JlY3Q6IFBsYXllclZpZXc7XHJcbiAgICBwcml2YXRlIGxvY2FsU3RvcmFnZURhdGFLZXk6IHN0cmluZztcclxuICAgIHByaXZhdGUgX3JlbmRlck1vZGU6IFNlY3Rpb25SZW5kZXJNb2RlO1xyXG4gICAgcHJpdmF0ZSBsb2FkZWRDaHVua3M6IHtbY2h1bmtJbmRleDogc3RyaW5nXTogV29ybGRDaHVua30gPSB7fTtcclxuICAgIHByaXZhdGUgY2FjaGVkQ2h1bmtUZXh0dXJlczoge1sgY2h1bmtJbmRleDogc3RyaW5nXSA6IEFycmF5PFBJWEkuVGV4dHVyZT4gfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBpbmRleGVzVG9VcGRhdGU6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgIHByaXZhdGUgY2FjaGVkQ2h1bmtEYXRhOiB7W2NodW5rSW5kZXg6IHN0cmluZ106IERlY29kZWRNYXBDaHVua0RhdGEgfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXJQb29sOiBBcnJheTxQSVhJLkNvbnRhaW5lcj4gPSBbXTtcclxuICAgIHByaXZhdGUgd29ybGRJbml0RGF0YTogV29ybGRJbml0TWV0YURhdGE7XHJcbiAgICBwcml2YXRlIG1heENodW5rczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaG93ZWRDaHVua0ltYWdlczoge1tjaHVua0luZGV4OiBudW1iZXJdOiBib29sZWFuIH0gPSB7fTtcclxuICAgIHByaXZhdGUgc2hvd2VkQ2h1bmtDb2xsaWRlcnM6IHtbY2h1bmtJbmRleDogbnVtYmVyXTogYm9vbGVhbiB9ID0ge307XHJcblxyXG4gICAgcHJpdmF0ZSBjYWNoZWRTbWFsbE1hcERhdGE6IHtbbWFwSWQ6IHN0cmluZ106IHtcclxuICAgICAgICAgICAgdHM6IG51bWJlcixcclxuICAgICAgICAgICAgdGV4dHVyZXM6IEFycmF5PFBJWEkuVGV4dHVyZT4sXHJcbiAgICAgICAgICAgIGRhdGE6IERlY29kZWRNYXBDaHVua0RhdGFcclxuICAgIH19ID0ge307XHJcbiAgICBwcml2YXRlIGN1ck1hcFNpemU6IE1hcFNpemU7XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzOiBBcnJheTx7IGNodW5rSW5kZXg6IG51bWJlciwgc3ViQ2h1bmtJbmRleDogbnVtYmVyLCBzcHJpdGU6IFBJWEkuU3ByaXRlLCBsYXllckluZGV4OiBudW1iZXJ9PiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBtYXhTdWJDaHVua3M6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVzZXR0aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICByZWFkb25seSB0aWxlU2l6ZUJ5U2VxTG9va3VwOiBBcnJheTx7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0+ID0gW107XHJcbiAgICByZWFkb25seSBjaHVua0xvYWRlcldvcmtlcjogQ2h1bmtMb2FkZXJXb3JrZXI7XHJcbiAgICByZWFkb25seSBtYXBzSW5pdERhdGE6IEFycmF5PFdvcmxkTWFwSW5pdE1ldGFEYXRhPjtcclxuICAgIHJlYWRvbmx5IHNlcVRvVGFnU3RyaW5nOiB7W3NlcTogbnVtYmVyXTogc3RyaW5nfT17fTtcclxuICAgIHJlYWRvbmx5IGNhY2hlZE1hcENodW5rc0RhdGFzOiB7XHJcbiAgICAgICAgW21hcElkOiBzdHJpbmddOiB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IGFueSxcclxuICAgICAgICAgICAgY2h1bmtzOiB7W2NodW5rSW5kZXg6IHN0cmluZ106IERlY29kZWRNYXBDaHVua0RhdGEgfVxyXG4gICAgICAgIH1cclxuICAgIH0gPSB7fTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyIHwgUElYSS5XZWJHTFJlbmRlcmVyLCB3b3JsZEluaXREYXRhOiBXb3JsZEluaXRNZXRhRGF0YSwgbWFwc0luaXREYXRhOiBBcnJheTxXb3JsZE1hcEluaXRNZXRhRGF0YT4sIHNlcVRvVGFnU3RyaW5nOiB7W3NlcTogbnVtYmVyXTogc3RyaW5nfSwgY29sbGlzaW9uTWFuYWdlcjogQ29sbGlzaW9uTWFuYWdlciwgaW1hZ2VNYW5hZ2VyOiBHYW1lT2JqZWN0TWFuYWdlciwgdGlsZU1hbmFnZXI6IFRpbGVNYW5hZ2VyLCBwbGF5ZXJDYW1lcmE6IFBsYXllckNhbWVyYSwgaW5kZXhlZERiTG9hZGVyPzogTG9hZGVyLCBjaHVua0xvYWRlcldvcmtlcj86IENodW5rTG9hZGVyV29ya2VyLCB1c2VXb3JrZXI9ZmFsc2UpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlciA9IGNvbGxpc2lvbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5jaHVua1dpZHRoID0gMTAyNDtcclxuICAgICAgICB0aGlzLmNodW5rSGVpZ2h0ID0gMTAyNDtcclxuICAgICAgICB0aGlzLmhhbGZDaHVua1dpZHRoID0gdGhpcy5jaHVua1dpZHRoLzI7XHJcbiAgICAgICAgdGhpcy5oYWxmQ2h1bmtIZWlnaHQgPSB0aGlzLmNodW5rSGVpZ2h0LzI7XHJcbiAgICAgICAgdGhpcy5zdWJDaHVua1cgPSBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFO1xyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtIID0gUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRTtcclxuICAgICAgICB0aGlzLmltYWdlTWFuYWdlciA9IGltYWdlTWFuYWdlcjtcclxuXHJcbiAgICAgICAgdGhpcy5zZXFUb1RhZ1N0cmluZyA9IHNlcVRvVGFnU3RyaW5nO1xyXG5cclxuICAgICAgICB0aGlzLndvcmxkSW5pdERhdGEgPSB3b3JsZEluaXREYXRhO1xyXG4gICAgICAgIHRoaXMubWFwc0luaXREYXRhID0gbWFwc0luaXREYXRhO1xyXG5cclxuICAgICAgICAvLyBmb3JtYXQgaXQgYXMgd2lkdGggaGVpZ2h0IG9iamVjdHMuXHJcbiAgICAgICAgdGhpcy50aWxlU2l6ZUJ5U2VxTG9va3VwID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMud29ybGRJbml0RGF0YS50aWxlU2l6ZVNlcUxvb2t1cC5sZW5ndGg7IGkrPTIpIHtcclxuICAgICAgICAgICAgdGhpcy50aWxlU2l6ZUJ5U2VxTG9va3VwLnB1c2goeyB3aWR0aDogdGhpcy53b3JsZEluaXREYXRhLnRpbGVTaXplU2VxTG9va3VwW2ldLCBoZWlnaHQ6IHRoaXMud29ybGRJbml0RGF0YS50aWxlU2l6ZVNlcUxvb2t1cFtpKzFdfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaHVua1RleHR1cmVBdGxhc0ZhY3RvcnkgPSByZW5kZXJlciBpbnN0YW5jZW9mIFBJWEkuV2ViR0xSZW5kZXJlciA/XHJcbiAgICAgICAgICAgIHRoaXMud2ViR2xBdGxhc0ZhY3RvcnkuYmluZCh0aGlzLCByZW5kZXJlciBhcyBQSVhJLldlYkdMUmVuZGVyZXIpIDpcclxuICAgICAgICAgICAgdGhpcy5jYW52YXNBdGxhc0ZhY3RvcnkuYmluZCh0aGlzLCByZW5kZXJlciBhcyBQSVhJLkNhbnZhc1JlbmRlcmVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJWaWV3UmVjdCA9IHBsYXllckNhbWVyYS5wbGF5ZXJWaWV3UmVjdDtcclxuXHJcbiAgICAgICAgdGhpcy5jaHVua0xvYWRlcldvcmtlciA9IGNodW5rTG9hZGVyV29ya2VyO1xyXG5cclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsICsgJy9tYXBzJztcclxuICAgICAgICB0aGlzLnRpbGVNYW5hZ2VyID0gdGlsZU1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgICAgICB0aGlzLnVzZUluZGV4ZWREYldvcmtlciA9IHVzZVdvcmtlcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lclBvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLmluZGV4ZWREYkxvYWRlciA9IGluZGV4ZWREYkxvYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlICBjcmVhdGVXb3JsZENodW5rIChjaHVua0RhdGE6IERlY29kZWRNYXBDaHVua0RhdGEsIG1hcE1ldGFEYXRhPXRoaXMubWFwTWV0YURhdGEsIGNhY2hlZFRleHR1cmVzPzogQXJyYXk8UElYSS5UZXh0dXJlPikgOiBXb3JsZENodW5rIHtcclxuICAgICAgICByZXR1cm4gbmV3IFdvcmxkQ2h1bmsobWFwTWV0YURhdGEsIGNodW5rRGF0YSwgdGhpcy5jaHVua1RleHR1cmVBdGxhc3NlcywgdGhpcy5jb250YWluZXJQb29sLCB0aGlzLnRpbGVNYW5hZ2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIF93ZWJXb3JrZXJJbml0KG1hcERhdGE6IERlY29kZWRNYXBNZXRhRGF0YSkge307XHJcbiAgICBwcml2YXRlIGFzeW5jIF9kZWZhdWx0SW5pdChtYXBEYXRhOiBEZWNvZGVkTWFwTWV0YURhdGEpIHt9O1xyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdFNtYWxsTWFwKG1hcFdvcmxkSW5pdERhdGE6IFdvcmxkTWFwSW5pdE1ldGFEYXRhKSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBEZWNvZGVyKHRoaXMudGlsZVNpemVCeVNlcUxvb2t1cCwgdGhpcy5zZXFUb1RhZ1N0cmluZywgdGhpcy53b3JsZEluaXREYXRhLnByb3BTZXFUb05hbWVMb29rdXApO1xyXG4gICAgICAgIGNvbnN0IG1hcElkID0gbWFwV29ybGRJbml0RGF0YS5pZDtcclxuICAgICAgICBjb25zdCBfbWFwRmlsZUtleSA9IG1hcEZpbGVLZXkodGhpcy5iYXNlVXJsLCBtYXBJZCk7XHJcbiAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKCd3b3JsZCBpbml0IGRhdGEgZm9yIG1hcCB3YXMnLCB0aGlzLndvcmxkSW5pdERhdGEubWFwc1tpXSlcclxuXHJcbiAgICAgICAgY29uc3QgbWV0YURhdGEgPSB0aGlzLmdldE1hcE1ldGFEYXRhKG1hcElkLCBtYXBXb3JsZEluaXREYXRhLnRzKTtcclxuICAgICAgICBsZXQgbWF4ID0gMDtcclxuICAgICAgICBpZih0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vaWYoIW1ldGFEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIGNvdWxkbnQgZ2V0IGN1cnJlbnQgbWFwIG1ldGEgZGF0YSwgbmVlZCB0byByZWJha2UuXHJcbiAgICAgICAgICAgIGNvbnN0IGFsbERhdGEgOiBBcnJheUJ1ZmZlciA9IGF3YWl0IGh0dHBHZXRBc3luYyhfbWFwRmlsZUtleSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVkID0gYXdhaXQgZGVjb2Rlci5kZWNvZGVNYXAoMTAyNCwgMTAyNCwgMTI4LCAxMjgsIGFsbERhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVNYXBNZXRhRGF0YShtYXBJZCwgZGVjb2RlZC5tZXRhRGF0YSk7XHJcbiAgICAgICAgICAgIGlmKGRlY29kZWQuY2h1bmtzLmxlbmd0aCAhPT0gMSkgdGhyb3cgbmV3IEVycm9yKCdTbWFsbCBtYXAgc2hvdWxkIG9ubHkgaGF2ZSAxIGNodW5rLicpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IHRoaXMubWVyZ2VDaHVua0xheWVyc0FzVGV4dHVyZXMoZGVjb2RlZC5jaHVua3NbMF0sIGRlY29kZWQubWV0YURhdGEpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2F2aW5nOicsIHRleHR1cmVzLmxlbmd0aCwgJ3RleHR1cmVzLicpO1xyXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0ZXh0dXJlcy5tYXAoYXN5bmMgKHRleHR1cmUsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKCF0ZXh0dXJlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua0tleSA9IG1hcEZpbGVLZXkodGhpcy5iYXNlVXJsLCBtYXBJZCwgaSk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUudGltZShgdGV4dHVyZV8ke2NodW5rS2V5fWApO1xyXG4gICAgICAgICAgICAgICAgbWF4Kys7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjaHVua0tleSwgYCR7bWFwV29ybGRJbml0RGF0YS50c31gKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gdGhpcy5yZW5kZXJlci5leHRyYWN0LmJhc2U2NChzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIuc2F2ZUltYWdlRGF0YShjaHVua0tleSwgZGF0YVVybCk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUudGltZUVuZChgdGV4dHVyZV8ke2NodW5rS2V5fSBpbmRleCBkYiBsb2FkYCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGV4dHVyZScgKyBjaHVua0tleSArICdzYXZlZDonLCBzYXZlZCk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU21hbGxNYXBJbWFnZUFuZENvbGxpZGVyRGF0YU9ubHkoZGVjb2RlZC5jaHVua3NbMF0sIG1hcElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdGhpcyBiYWNrd2FycyBidXQgd2Ugc2F2ZSBpdCBieSBsYXllciBpbnN0ZWFkIG9mIGJ5IHNlY3Rpb24gYW5kIHRoZW4ganVzdCBzYXkgd2Ugb25seSBoYXZlIDEgbGF5ZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVBbGxDaHVua3NHcmVhdGVyVGhhbiggbWFwSWQsIG1heC0xLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmb3Igbm93IHdlIGp1c3QgZGVsZXRlIHRoZSB0aWxlIGRhdGEgYW5kIHJlc2F2ZS5cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVNtYWxsTWFwSW1hZ2VBbmRDb2xsaWRlckRhdGFPbmx5KGNodW5rRGF0YTogRGVjb2RlZE1hcENodW5rRGF0YSwgbWFwSWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNodW5rRGF0YS5sYXllcnMuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIGwudGlsZUxheWVyc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5kZXhlZERiTG9hZGVyLnNhdmVKc29uKGAke21hcElkfV9pbml0YCwgY2h1bmtEYXRhKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFNtYWxsTWFwSW1hZ2VBbmRDb2xsaWRlckRhdGFPbmx5KG1hcElkKSA6IFByb21pc2U8RGVjb2RlZE1hcENodW5rRGF0YT4ge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuY2FjaGVkU21hbGxNYXBEYXRhW21hcElkXTtcclxuICAgICAgICBpZihjYWNoZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5kYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIubG9hZEpzb24oYCR7bWFwSWR9X2luaXRgKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkU21hbGxNYXBEYXRhVG9DYWNoZShkYXRhOiBEZWNvZGVkTWFwQ2h1bmtEYXRhLCB0ZXh0dXJlcywgbWFwSWQpIHtcclxuICAgICAgICBpZih0aGlzLmNhY2hlZFNtYWxsTWFwRGF0YVttYXBJZF0pIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRTbWFsbE1hcERhdGFbbWFwSWRdLnRzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZFNtYWxsTWFwRGF0YVttYXBJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlcyxcclxuICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICB0czogRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVyZ2VDaHVua0xheWVyc0FzVGV4dHVyZXMoY2h1bmtEYXRhOiBEZWNvZGVkTWFwQ2h1bmtEYXRhLCBtYXBNZXRhRGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhKSA6IEFycmF5PFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgICAgIC8vIGNvbnN0IGF0bGFzID0gdGhpcy5jYW52YXNBdGxhc0ZhY3RvcnkobmV3IFBJWEkuQ2FudmFzUmVuZGVyZXIoeyB0cmFuc3BhcmVudDogdHJ1ZSwgcm91bmRQaXhlbHM6IHRydWUsIGFudGlhbGlhczogZmFsc2UsIH0pKTtcclxuICAgICAgICBjb25zdCBhdGxhcyA9IHRoaXMuY2h1bmtUZXh0dXJlQXRsYXNGYWN0b3J5KCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NodW5rIGRhdGE6JywgY2h1bmtEYXRhKTtcclxuICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuY3JlYXRlV29ybGRDaHVuayhjaHVua0RhdGEsIG1hcE1ldGFEYXRhKTtcclxuICAgICAgICBjb25zdCByZW5kZXJlZCA9IGNodW5rLmluaXRUaWxlTGF5ZXJzKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbmRlcmVkOicsIHJlbmRlcmVkKTtcclxuICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IGF0bGFzLm1lcmdlQWxsTGF5ZXJDaHVua3MocmVuZGVyZWQpO1xyXG4gICAgICAgIGNodW5rLmRlc3Ryb3koKTtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYXZlTWFwTWV0YURhdGEobWFwSWQ6IHN0cmluZywgbWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSwgdHM/KSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obWFwRmlsZUtleSh0aGlzLmJhc2VVcmwsIG1hcElkKSwgSlNPTi5zdHJpbmdpZnkoeyB0czogdHMgPyB0cyA6IERhdGUubm93KCksIGRhdGE6IG1ldGFEYXRhIH0pKVxyXG4gICAgfVxyXG4gICAgcHVibGljIGdldE1hcE1ldGFEYXRhKG1hcElkOiBzdHJpbmcsIGxhc3RUczogbnVtYmVyKSA6IERlY29kZWRNYXBNZXRhRGF0YSB7XHJcbiAgICAgICAgY29uc3QgZm91bmQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShtYXBGaWxlS2V5KHRoaXMuYmFzZVVybCwgbWFwSWQpKTtcclxuICAgICAgICBpZihmb3VuZCkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgOiB7IHRzOiBudW1iZXIsIGRhdGE6IERlY29kZWRNYXBNZXRhRGF0YSB9ID0gSlNPTi5wYXJzZShmb3VuZCk7XHJcbiAgICAgICAgICAgIGlmKHBhcnNlZC50cyA8IGxhc3RUcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVxdWVzdE1hcE1ldGFEYXRhKG1hcElkOiBzdHJpbmcpIDogUHJvbWlzZTxEZWNvZGVkTWFwTWV0YURhdGE+IHtcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IERlY29kZXIodGhpcy50aWxlU2l6ZUJ5U2VxTG9va3VwLHRoaXMuc2VxVG9UYWdTdHJpbmcsIHRoaXMud29ybGRJbml0RGF0YS5wcm9wU2VxVG9OYW1lTG9va3VwKTtcclxuICAgICAgICBjb25zdCBjaHVuayA9IGF3YWl0IGh0dHBHZXRBc3luYyhtYXBNZXRhUGF0aCh0aGlzLmJhc2VVcmwsIG1hcElkKSwgZmFsc2UpO1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZU1ldGFEYXRhKGNodW5rKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgaW5pdE1hc3NpdmVNYXAobWFwV29ybGRJbml0RGF0YTogV29ybGRNYXBJbml0TWV0YURhdGEpIHtcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IERlY29kZXIodGhpcy50aWxlU2l6ZUJ5U2VxTG9va3VwLHRoaXMuc2VxVG9UYWdTdHJpbmcsIHRoaXMud29ybGRJbml0RGF0YS5wcm9wU2VxVG9OYW1lTG9va3VwKTtcclxuICAgICAgICBjb25zdCBtYXBJZCA9IG1hcFdvcmxkSW5pdERhdGEuaWQ7XHJcbiAgICAgICAgY29uc3QgX21hcEZpbGVLZXkgPSBtYXBGaWxlS2V5KHRoaXMuYmFzZVVybCwgbWFwSWQpO1xyXG4gICAgICAgIC8vICAgICAvLyBjb25zb2xlLmxvZygnd29ybGQgaW5pdCBkYXRhIGZvciBtYXAgd2FzJywgdGhpcy5tYXBzSW5pdERhdGFbaV0pXHJcbiAgICAgICAgbGV0IG1hcE1ldGFEYXRhIDogRGVjb2RlZE1hcE1ldGFEYXRhID0gdGhpcy5nZXRNYXBNZXRhRGF0YShtYXBJZCwgbWFwV29ybGRJbml0RGF0YS50cyk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGNvbnN0IGNodW5rVGltZXN0YW1wcyA9IG1hcFdvcmxkSW5pdERhdGEuY2h1bmtzVHM7XHJcblxyXG4gICAgICAgIGlmKHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5lbWl0KCdkb3dubG9hZGluZy1tYXAnLCBtYXBXb3JsZEluaXREYXRhKTtcclxuICAgICAgICAgICAgaWYodGhpcy5jaHVua0xvYWRlcldvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgbWFwTWV0YURhdGEgPSBhd2FpdCB0aGlzLmNodW5rTG9hZGVyV29ya2VyLnJlcXVlc3RBbmRTdG9yZUFsbE1hcENodW5rcyhtYXBXb3JsZEluaXREYXRhLmlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZU1hcE1ldGFEYXRhKG1hcElkLCBtYXBNZXRhRGF0YSwgbWFwV29ybGRJbml0RGF0YS50cysxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbERhdGEgOiBBcnJheUJ1ZmZlciA9IGF3YWl0IGh0dHBHZXRBc3luYyhfbWFwRmlsZUtleSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heENodW5rSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBtZXRhRGF0YSB9ID0gYXdhaXQgZGVjb2Rlci5kZWNvZGVNYXAoMTAyNCwgMTAyNCwgMTI4LCAxMjgsIGFsbERhdGEsIGFzeW5jKGNodW5rRGF0YSwgY2h1bmtJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rS2V5ID0gbWFwRmlsZUtleSh0aGlzLmJhc2VVcmwsIG1hcElkLCBjaHVua0luZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBtYXhDaHVua0luZGV4ID0gY2h1bmtJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5zYXZlSnNvbihjaHVua0tleSwgY2h1bmtEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAvLy8vIGNvbnNvbGUubG9nKCdzYXZpbmcganNvbiBmb3Igc2VjIGtleTonLCBjaHVua0tleSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1hcE1ldGFEYXRhID0gbWV0YURhdGFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNhdmVNYXBNZXRhRGF0YShtYXBJZCwgbWFwTWV0YURhdGEsIG1hcFdvcmxkSW5pdERhdGEudHMrMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYoIW1hcE1ldGFEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0IHRoaXMgcG9pbnQgd2VyZSBvbmx5IHVwZGF0aW5nIGNodW5rcyBhbmQgdGhlIG1ldGEgZGF0YSBzaG91bGQgYmUgZmluZSBhcyBpcy4nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNodW5rTG9hZGVyV29ya2VyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZWVkcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjaHVua1RpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0tleSA9IG1hcEZpbGVLZXkodGhpcy5iYXNlVXJsLCBtYXBJZCwgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVlZHNDaHVua1VwZGF0ZWQgPSAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oY2h1bmtLZXkpIHx8IChwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjaHVua0tleSkpIDwgY2h1bmtUaW1lc3RhbXBzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVlZHNDaHVua1VwZGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHMucHVzaChqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobmVlZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jaHVua0xvYWRlcldvcmtlci5yZXF1ZXN0QW5kU3RvcmVNYXBDaHVua3MobWFwSWQsIG5lZWRzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjaHVua1RpbWVzdGFtcHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0tleSA9IG1hcEZpbGVLZXkodGhpcy5iYXNlVXJsLCBtYXBJZCwgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVlZHNDaHVua1VwZGF0ZWQgPSAhbG9jYWxTdG9yYWdlLmdldEl0ZW0oY2h1bmtLZXkpIHx8IChwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjaHVua0tleSkpIDwgY2h1bmtUaW1lc3RhbXBzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVlZHNDaHVua1VwZGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkb3dubG9hZGluZy1tYXAtY2h1bmsnLCB7bWFwSWQsIGluZGV4OiBqIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0RhdGFCdWZmZXI6IEFycmF5QnVmZmVyID0gYXdhaXQgaHR0cEdldEFzeW5jKGNodW5rS2V5LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRDaHVua0RhdGEgPSBkZWNvZGVyLmRlY29kZUNodW5rKGosIG1hcE1ldGFEYXRhLm1hcFcsIG1hcE1ldGFEYXRhLm1hcEgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFLCBtYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLCBjaHVua0RhdGFCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5zYXZlSnNvbihjaHVua0tleSwgZGVjb2RlZENodW5rRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNodW5rS2V5LCBgJHtjaHVua1RpbWVzdGFtcHNbal0gKyAxfWApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNodW5rVGltZXN0YW1wcykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFsbENodW5rc0dyZWF0ZXJUaGFuKCBtYXBJZCwgY2h1bmtUaW1lc3RhbXBzLmxlbmd0aC0xLCBtYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdubyBjaHVuayB0aW1lc3RhbXBzIHdlcmUgZm91bmQuLiB0aGlzIGlzIGZpbmUgaWYgaW0gbm90IGdldHRpbmcgdGhpcyBlcnJvciBwcm9iYWJseSBhIHdlZWsgYWZ0ZXIgNy8xNC8yMCBjdXogaSBjaGFuZ2VkIHNvbWUgbWV0YSBkYXRhIHN0dWZmcyBpbiBtaWRzdCBvZiBhIHByb2plY3QuLi4gb3RoZXJ3aXNlIGZ1Y2suJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGluaXQoKSB7XHJcbiAgICAgICAgY29uc3QgaW5pdExvb2t1cCA6IEFycmF5PChpbml0RGF0YTogV29ybGRNYXBJbml0TWV0YURhdGEpID0+IFByb21pc2U8dm9pZD4+ID0gW1xyXG4gICAgICAgICAgICB0aGlzLmluaXRTbWFsbE1hcC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICB0aGlzLmluaXRNYXNzaXZlTWFwLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdE1hc3NpdmVNYXAuYmluZCh0aGlzKSxcclxuICAgICAgICBdXHJcbiAgICAgICAgaWYodGhpcy5pbmRleGVkRGJMb2FkZXIgJiYgdHlwZW9mIGxvY2FsU3RvcmFnZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXBzSW5pdERhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcFdvcmxkSW5pdERhdGEgPSB0aGlzLm1hcHNJbml0RGF0YVtpXTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGluaXRMb29rdXBbbWFwV29ybGRJbml0RGF0YS5zaXplXShtYXBXb3JsZEluaXREYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZmluaXNoZWQtZG93bmxvYWRpbmcnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZGVsZXRlQWxsQ2h1bmtzR3JlYXRlclRoYW4obWFwSWQ6IHN0cmluZywgbGFzdEV4aXN0aW5nQ2h1bmtJbmRleDogbnVtYmVyLCBsYXllckNvdW50OiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgY2h1bmtLZXkgPSBtYXBGaWxlS2V5KHRoaXMuYmFzZVVybCwgbWFwSWQsICsrbGFzdEV4aXN0aW5nQ2h1bmtJbmRleCk7XHJcbiAgICAgICAgbGV0IGZvdW5kID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY2h1bmtLZXkpO1xyXG4gICAgICAgIGNvbnN0IGl0ZW1zVG9EZWxldGUgPSBbXTtcclxuICAgICAgICB3aGlsZShmb3VuZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShjaHVua0tleSk7XHJcbiAgICAgICAgICAgIGl0ZW1zVG9EZWxldGUucHVzaCh0aGlzLmluZGV4ZWREYkxvYWRlci5kZWxldGVJdGVtKGNodW5rS2V5KSk7XHJcbiAgICAgICAgICAgIGlmKGxheWVyQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsYXllckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtc1RvRGVsZXRlLnB1c2godGhpcy5pbmRleGVkRGJMb2FkZXIuZGVsZXRlSXRlbShgJHtjaHVua0tleX1fJHtsYXllckNvdW50W2ldfWApKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNodW5rS2V5ID0gbWFwRmlsZUtleSh0aGlzLmJhc2VVcmwsIG1hcElkLCArK2xhc3RFeGlzdGluZ0NodW5rSW5kZXgpO1xyXG4gICAgICAgICAgICBmb3VuZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNodW5rS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXRlbXNUb0RlbGV0ZS5sZW5ndGggJiYgYXdhaXQgUHJvbWlzZS5hbGwoaXRlbXNUb0RlbGV0ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoaWRlQ2h1bmsoY2h1bmtJbmRleDogbnVtYmVyLCBhdFNlcTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5sb2FkaW5nW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ1cHRlZENodW5rRGF0YVtjaHVua0luZGV4XSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIGNodW5rIHdhcyBhbHJlYWR5IGluIHRoZSBpbml0IGJhdGNoIHRvIGJlIG1hZGUuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2h1bmtEYXRhID0gdGhpcy5jYWNoZWRDaHVua0RhdGFbY2h1bmtJbmRleF07XHJcbiAgICAgICAgaWYoIWNodW5rRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZmluZCBpbmRleCAnLCBjaHVua0luZGV4LCAnaW4gY2FjaGVkIGNodW5rIGRhdGEnLCB0aGlzLmNhY2hlZENodW5rRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMubG9hZGVkQ2h1bmtzW2NodW5rSW5kZXhdLmhpZGRlbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3RyeWluZyB0byBoaWRlIGFscmVhZHkgaGlkZGVuIGNodW5rLi4uLiBuZWVkIHRvIGNoZWNrIHRoaXMgb3V0ICcpXHJcbiAgICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBTaG91bGRudCBoYXZlIGFscmVhZHkgYmVlbiBoaWRkZW4uYClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZENodW5rc1tjaHVua0luZGV4XS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc2hvd2VkQ2h1bmtDb2xsaWRlcnNbY2h1bmtJbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTWFuYWdlci5yZW1vdmVDaHVua0NvbGxpZGVycyhjaHVua0RhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNob3dlZENodW5rQ29sbGlkZXJzW2NodW5rSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgb25DaHVua1Zpc2liaWxpdHlTdGF0ZUNoYW5nZShvbGRTdGF0ZTogVmlzaWJpbGl0eVN0YXRlcywgbmV3U3RhdGU6IFZpc2liaWxpdHlTdGF0ZXMsIGNodW5rSW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIC8vLy8gY29uc29sZS5sb2coJ1NFQ1RJT046JywgY2h1bmtJbmRleCwgJ29sZCBzdGF0ZSB3YXMnLCBvbGRTdGF0ZSwgJ25ldyBzdGF0ZSB3YXMnLCBuZXdTdGF0ZSk7XHJcbiAgICAgICAgaWYob2xkU3RhdGUgPT09IG5ld1N0YXRlKSB0aHJvdyBuZXcgRXJyb3IoJ3N0YXRlcyBzaG91bGRudCBiZSB0aGUgc2FtZScpO1xyXG4gICAgICAgIGlmKG9sZFN0YXRlID09PSBWaXNpYmlsaXR5U3RhdGVzLnZpc2libGUpIHtcclxuICAgICAgICAgICAgbmV3U3RhdGUgPT09IFZpc2liaWxpdHlTdGF0ZXMuYWxtb3N0X3Zpc2libGUgPyB0aGlzLmhpZGVDaHVuayhjaHVua0luZGV4LCB0aGlzLmN1ck1hcFNlcSkgOiB0aGlzLmRlc3Ryb3lDaHVuayhjaHVua0luZGV4KTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9sZFN0YXRlID09PSBWaXNpYmlsaXR5U3RhdGVzLmFsbW9zdF92aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlID09PSBWaXNpYmlsaXR5U3RhdGVzLmRlc3Ryb3llZCA/IHRoaXMuZGVzdHJveUNodW5rKGNodW5rSW5kZXgpIDogdGhpcy5zaG93Q2h1bmsoY2h1bmtJbmRleCwgdGhpcy5jdXJNYXBTZXEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAob2xkU3RhdGUgPT09IFZpc2liaWxpdHlTdGF0ZXMuZGVzdHJveWVkKSB7XHJcbiAgICAgICAgICAgIG5ld1N0YXRlID09PSBWaXNpYmlsaXR5U3RhdGVzLmFsbW9zdF92aXNpYmxlID8gdGhpcy5iYXRjaEluaXRDaHVuayhjaHVua0luZGV4LCB0aGlzLmN1ck1hcFNlcSkgOiAgYXdhaXQgdGhpcy5zaG93Q2h1bmsoY2h1bmtJbmRleCwgdGhpcy5jdXJNYXBTZXEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV4dEJhdGNoKCkge1xyXG4gICAgICAgIGlmKHRoaXMuY3VyQmF0Y2hDaHVua0luZGV4ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vLy8gY29uc29sZS5sb2cnZmlubmEgZG8gYmF0Y2ggaW5kZXgnLCB0aGlzLmN1ckJhdGNoSW5kZXgpO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUudGltZSgnYmF0Y2gnKVxyXG4gICAgICAgICAgICB0aGlzLmluaXRCYXRjaGVzW3RoaXMuY3VyQmF0Y2hDaHVua0luZGV4ZXNbdGhpcy5jdXJCYXRjaEluZGV4XV0ucG9wKCkoKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUudGltZUVuZCgnYmF0Y2gnKVxyXG4gICAgICAgICAgICBpZihEYXRlLm5vdygpIC0gc3RhcnQgPiAxMDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZvdW5kIGxvbmcgYmF0Y2gnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCsrdGhpcy5jdXJCYXRjaEluZGV4ID49IHRoaXMuY3VyQmF0Y2hDaHVua0luZGV4ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1ckJhdGNoSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFkZExheWVyU3ByaXRlUGF5bG9hZEJhdGNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5hZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGlmKCFuZXh0LnNwcml0ZS50cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dEJhdGNoKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FkZC1zdWJjaHVuay1sYXllci1zcHJpdGUnLCBuZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgYmF0Y2hJbml0Q2h1bmsoY2h1bmtJbmRleDogbnVtYmVyLCBhdFNlcTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5yZXNldHRpbmcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZih0aGlzLmluaXRCYXRjaGVzW2NodW5rSW5kZXhdKSB0aHJvdyBuZXcgRXJyb3IoJ0FscmVhZHkgZXhpc3RlZCcpO1xyXG4gICAgICAgIGNvbnN0IGJhdGNoQXJyYXkgPSBbXTtcclxuICAgICAgICBsZXQgZGF0YTtcclxuICAgICAgICBsZXQgY2h1bmsgOiBXb3JsZENodW5rO1xyXG4gICAgICAgIGxldCBzdGlsbExvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBvbkFkZGVkTGF5ZXJTcHJpdGUgPSAocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZihhdFNlcSA9PT0gdGhpcy5jdXJNYXBTZXEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGF5ZXJTcHJpdGVQYXlsb2FkQmF0Y2hlcy5wdXNoKHBheWxvYWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBsb2FkRGF0YUNhbGwgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGF0U2VxID09IHRoaXMuY3VyTWFwU2VxKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gYXdhaXQgdGhpcy5sb2FkQ2h1bmtEYXRhKGNodW5rSW5kZXgsIGF0U2VxKTtcclxuICAgICAgICAgICAgICAgIGlmKCFkYXRhKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5pbnRlcnVwdGVkQ2h1bmtEYXRhW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRCYXRjaGVzW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcignV2UgZGVsZXRlZCB0aGUgYmF0Y2ggYmVmb3JlIGNodW5rIGRhdGEgZmluaXNoZWQgbG9hZGluZywgdGhpcyBpc250IGFuIGVycm9yIGJ1dCBmb3IgZGV2IHB1cnBvc2VzIEkgd2FudCB0byBzZWUgaWYgdGhpcyBoYXBwZW5zIGFzIGkgZXhwZWN0JylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnJlc2V0dGluZyAmJiBhdFNlcSA9PT0gdGhpcy5jdXJNYXBTZXEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RpbGxMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gdGhpcy5jcmVhdGVXb3JsZENodW5rKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5vbignYWRkLXN1YmNodW5rLWxheWVyLXNwcml0ZScsIG9uQWRkZWRMYXllclNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtzSW5CYXRjaFtjaHVua0luZGV4XSA9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbml0U3ViQ2h1bmtCYXRjaGVzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZighdGhpcy5yZXNldHRpbmcgJiYgYXRTZXEgPT09IHRoaXMuY3VyTWFwU2VxKSB7XHJcbiAgICAgICAgICAgICAgICAvLy8vIGNvbnNvbGUubG9nJ0JBVENIIEZPUiBTRUNUSU9OOicsIGNodW5rSW5kZXggKyAnOicsICdpbml0aWFsaXppbmcgdGhlIGJhdGNoZXMgZm9yIHRoZSBzdWIgY2h1bmtzLi4uJyk7XHJcbiAgICAgICAgICAgICAgICBpZihzdGlsbExvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLy8vIGNvbnNvbGUubG9nJ1dBUyBTVElMTCBMT0FESU5HIFBVU0ggSVQuJylcclxuICAgICAgICAgICAgICAgICAgICBiYXRjaEFycmF5LnB1c2goaW5pdFN1YkNodW5rQmF0Y2hlcylcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsuaW5pdEJhdGNoUmVuZGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5wbGF5ZXJWaWV3UmVjdC54ICsgdGhpcy5wbGF5ZXJWaWV3UmVjdC53aWR0aCAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMucGxheWVyVmlld1JlY3QueSArIHRoaXMucGxheWVyVmlld1JlY3QuaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBiYXRjaCA9IDA7XHJcbiAgICAgICAgY29uc3QgZG9TdWJDaHVua0JhdGNoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZihzdGlsbExvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaG93IHRoZSBmdWNrIGluIHRoZSBmdWNrIGRpZCB0aGlzIGhhcHBlbi4nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHN0aWxsSGFzQmF0Y2hlcyA9IGNodW5rLm5leHRCYXRjaCgpO1xyXG4gICAgICAgICAgICBpZihzdGlsbEhhc0JhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIC8vLy8gY29uc29sZS5sb2cnQkFUQ0ggRk9SIFNFQ1RJT046JywgY2h1bmtJbmRleCArICc6JywgJ2RpZCBzdWIgY2h1bmsgYmF0Y2gsIHJlY3Vyc2l2ZWx5IGRvaW5nIGFub3RoZXIuJyk7XHJcbiAgICAgICAgICAgICAgICBiYXRjaEFycmF5LnB1c2goZG9TdWJDaHVua0JhdGNoKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY2h1bmsgaXMgbm8gbG9uZ2VyIGluIHRoZSBiYXRjaCBzbyB3ZSBjYW4gZGVsZXRlIHRoZSBzaG93ZWRfaW1hZ2VzIGZsYWdzIGJlY2F1c2Ugd2Uga25vdyB3ZSBpbml0aWFsaXplZCBpbWFnZXMgZm9yIHN1cmUuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY2h1bmtbJ3Nob3dlZF9pbWFnZXMnXTtcclxuICAgICAgICAgICAgICAgIC8vIGl0cyBmaW5pc2hlZCB3ZSBjYW4gcmVtb3ZlIGl0LiBmcm9tIGJhdGNoZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2h1bmtGcm9tQmF0Y2goY2h1bmtJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENodW5rSW1hZ2VzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAvLyBjb25zb2xlLmxvZygnRk9SQ0UgU0hPV0lORyBJTiBCQVRDSCBJTklUJyk7XHJcbiAgICAgICAgICAgIC8vIG1hcmsgdGhlIHNob3dlZF9pbWFnZXMgZmxhZyBhcyB0cnVlIHNvIGlmIHdlIG5lZWQgdG8gZGVzdHJveSBpdCBlYXJseSB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gY2FsbCByZW1vdmUgY2h1bmsgaW1hZ2VzIG9uIGl0LlxyXG4gICAgICAgICAgICBpZihhdFNlcSA9PSB0aGlzLmN1ck1hcFNlcSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mb3JjZVNob3dDaHVua0ltYWdlcyhkYXRhLCBhdFNlcSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoYXRTZXEgPT0gdGhpcy5jdXJNYXBTZXEgJiYgdGhpcy5jaHVua3NJbkJhdGNoW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rc0luQmF0Y2hbY2h1bmtJbmRleF1bJ3Nob3dlZF9pbWFnZXMnXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhdGNoQXJyYXkucHVzaChkb1N1YkNodW5rQmF0Y2gsIGFkZENodW5rSW1hZ2VzLCBpbml0U3ViQ2h1bmtCYXRjaGVzLCBsb2FkRGF0YUNhbGwpO1xyXG4gICAgICAgIHRoaXMuaW5pdEJhdGNoZXNbY2h1bmtJbmRleF0gPSBiYXRjaEFycmF5O1xyXG4gICAgICAgIHRoaXMuY3VyQmF0Y2hDaHVua0luZGV4ZXMucHVzaChjaHVua0luZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlc3Ryb3lDaHVua0luQmF0Y2goY2h1bmtJbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5jaHVua3NJbkJhdGNoW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2h1bmtzSW5CYXRjaFtjaHVua0luZGV4XVsnc2hvd2VkX2ltYWdlcyddKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNodW5rSW1hZ2VzKHRoaXMuY2FjaGVkQ2h1bmtEYXRhW2NodW5rSW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNodW5rRnJvbUJhdGNoKGNodW5rSW5kZXgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZENodW5rc1tjaHVua0luZGV4XS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvYWRlZENodW5rc1tjaHVua0luZGV4XTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGljZUNodW5rQmF0Y2goY2h1bmtJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNob3dlZENodW5rSW1hZ2VzW2NodW5rSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3BsaWNlQ2h1bmtCYXRjaChjaHVua0luZGV4OiBudW1iZXIpIHtcclxuICAvLyAgICAgIGNvbnNvbGUuZXJyb3IoJ3NwbGljaW5nIGNodW5rIGluZGV4JywgY2h1bmtJbmRleCk7XHJcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5jdXJCYXRjaENodW5rSW5kZXhlcy5pbmRleE9mKGNodW5rSW5kZXgpO1xyXG4gICAgICAgIGlmKGlkeCA8IDApIHRocm93IG5ldyBFcnJvcihgY291bGRudCBmaW5kIGluICR7Y2h1bmtJbmRleH1gKTtcclxuICAgICAgICB0aGlzLmN1ckJhdGNoQ2h1bmtJbmRleGVzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmluaXRCYXRjaGVzW2NodW5rSW5kZXhdO1xyXG4gICAgICAgIHRoaXMuY3VyQmF0Y2hJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVDaHVua0Zyb21CYXRjaChjaHVua0luZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBpZighdGhpcy5pbml0QmF0Y2hlc1tjaHVua0luZGV4XSkgdGhyb3cgbmV3IEVycm9yKCdhdCB0aGlzIHBvaW50IGNodW5rIGluZGV4IHNob3VsZCBzdGlsbCBiZSBpbiBpbml0IGJhdGNoZXMnKTtcclxuICAgICAgICBjb25zdCBjaHVuayAgPXRoaXMuY2h1bmtzSW5CYXRjaFtjaHVua0luZGV4XTtcclxuICAgICAgICBjaHVuay5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2FkZC1zdWJjaHVuay1sYXllci1zcHJpdGUnKTtcclxuICAgICAgICAvLyAvLyAvLyBjb25zb2xlLmxvZygnRklOSVNIIEJBVENIIEZPUiBTRUNUSU9OOicsIGNodW5rSW5kZXggKyAnOicsICdGSU5JU0hFRCBzdWIgY2h1bmsgYmF0Y2hlcywgc2hvdWxkIGJlIHJlbW92aW5nIGVudGlyZWx5Li4nKTtcclxuICAgICAgICBpZighdGhpcy5sb2FkZWRDaHVua3NbY2h1bmtJbmRleF0pIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWRDaHVua3NbY2h1bmtJbmRleF0gPSB0aGlzLmNodW5rc0luQmF0Y2hbY2h1bmtJbmRleF07XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGVkQ2h1bmtzW2NodW5rSW5kZXhdLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNodW5rc0luQmF0Y2hbY2h1bmtJbmRleF07XHJcbiAgICAgICAgdGhpcy5zcGxpY2VDaHVua0JhdGNoKGNodW5rSW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWaXNpYmxlU3ViQ2h1bmtzKHJlY3Q6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0pIDogQXJyYXk8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBbXTtcclxuICAgICAgICBjb25zdCBjZWxsQ29sX3N0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyZWN0LngvdGhpcy5zdWJDaHVua1cpKTtcclxuICAgICAgICBjb25zdCBjZWxsUm93X3N0YXJ0ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyZWN0LnkvdGhpcy5zdWJDaHVua0gpKTtcclxuICAgICAgICBjb25zdCBjZWxsQ29sX2VuZCA9ICBNYXRoLm1pbihNYXRoLmNlaWwoKHJlY3QueCArIHJlY3Qud2lkdGgpL3RoaXMuc3ViQ2h1bmtXKSwgdGhpcy5zdWJDaHVua0NvbHMpO1xyXG4gICAgICAgIGNvbnN0IGNlbGxSb3dfZW5kID0gIE1hdGgubWluKE1hdGguY2VpbCgocmVjdC55ICsgcmVjdC5oZWlnaHQpL3RoaXMuc3ViQ2h1bmtIKSwgdGhpcy5zdWJDaHVua1Jvd3MpO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSBjZWxsQ29sX3N0YXJ0OyBpIDwgY2VsbENvbF9lbmQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSBjZWxsUm93X3N0YXJ0OyBqIDwgY2VsbFJvd19lbmQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbiA9IGk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gajtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSByb3cgKiB0aGlzLnN1YkNodW5rQ29scyArIGNvbHVtbjtcclxuICAgICAgICAgICAgICAgIGlmKGNlbGxQb3NpdGlvbiA+IC0xICYmIGNlbGxQb3NpdGlvbiA8IHRoaXMubWF4U3ViQ2h1bmtzKXtcclxuICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VmlzaWJsZUNodW5rcyhyZWN0OiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9KSA6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gW107XHJcbiAgICAgICAgY29uc3QgY2VsbENvbF9zdGFydCA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IocmVjdC54L3RoaXMuY2h1bmtXaWR0aCkpO1xyXG4gICAgICAgIGNvbnN0IGNlbGxSb3dfc3RhcnQgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKHJlY3QueS90aGlzLmNodW5rSGVpZ2h0KSk7XHJcbiAgICAgICAgY29uc3QgY2VsbENvbF9lbmQgPSAgTWF0aC5taW4oTWF0aC5jZWlsKChyZWN0LnggKyByZWN0LndpZHRoKS90aGlzLmNodW5rV2lkdGgpLCB0aGlzLmNodW5rQ29scyk7XHJcbiAgICAgICAgY29uc3QgY2VsbFJvd19lbmQgPSAgTWF0aC5taW4oTWF0aC5jZWlsKChyZWN0LnkgKyByZWN0LmhlaWdodCkvdGhpcy5jaHVua0hlaWdodCksIHRoaXMuY2h1bmtSb3dzKTtcclxuXHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IGNlbGxDb2xfc3RhcnQ7IGkgPCBjZWxsQ29sX2VuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IGNlbGxSb3dfc3RhcnQ7IGogPCBjZWxsUm93X2VuZDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29sdW1uID0gaTtcclxuICAgICAgICAgICAgICAgIGxldCByb3cgPSBqO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxQb3NpdGlvbiA9IHJvdyAqIHRoaXMuY2h1bmtDb2xzICsgY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgaWYoY2VsbFBvc2l0aW9uID4gLTEgJiYgY2VsbFBvc2l0aW9uIDwgdGhpcy5tYXhDaHVua3Mpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5LnB1c2goY2VsbFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICBmb3IobGV0IGkgPSBjZWxsQ29sX3N0YXJ0OyBpIDwgY2VsbENvbF9lbmQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSBjZWxsUm93X3N0YXJ0OyBqIDwgY2VsbFJvd19lbmQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbiA9IGk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gajtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSByb3cgKiB0aGlzLmNodW5rQ29scyArIGNvbHVtbjtcclxuICAgICAgICAgICAgICAgIGlmKGNlbGxQb3NpdGlvbiA+IC0xICYmIGNlbGxQb3NpdGlvbiA8IHRoaXMubWF4Q2h1bmtzKXtcclxuICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlQWxtb3N0VmlzaWJsZUNodW5rcyggZFg9MCwgZFk9IDApIHtcclxuICAgICAgICBjb25zdCBvbGRBbG1vc3RWaXNpYmxlID0gWy4uLnRoaXMuYWxtb3N0VmlzaWJsZUNodW5rSW5kZXhlc107XHJcbiAgICAgICAgY29uc3QgYnVmWCA9ICAodGhpcy5jaHVua1dpZHRoK3RoaXMuc3ViQ2h1bmtXKTtcclxuICAgICAgICBjb25zdCBidWZZID0gICh0aGlzLmNodW5rV2lkdGgrdGhpcy5zdWJDaHVua1cpO1xyXG4gICAgICAgIGNvbnN0IGRpZmZYID0gdGhpcy5wbGF5ZXJWaWV3UmVjdC54IC0gYnVmWDtcclxuICAgICAgICBjb25zdCBkaWZmWSA9IHRoaXMucGxheWVyVmlld1JlY3QueSAtIGJ1Zlk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFggPSB0aGlzLm1hcE1ldGFEYXRhLm1hcFcgLSB0aGlzLnBsYXllclZpZXdSZWN0LndpZHRoK2J1ZlgqMjtcclxuICAgICAgICBjb25zdCBtYXhZID0gdGhpcy5tYXBNZXRhRGF0YS5tYXBIIC0gdGhpcy5wbGF5ZXJWaWV3UmVjdC5oZWlnaHQrIGJ1ZlkqMjtcclxuXHJcbiAgICAgICAgbGV0IHJlY3Q6IGFueSA9IHtcclxuICAgICAgICAgICAgeDogZGlmZlgsXHJcbiAgICAgICAgICAgIHk6IGRpZmZZLFxyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5wbGF5ZXJWaWV3UmVjdC53aWR0aCArIGJ1ZlgqMixcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnBsYXllclZpZXdSZWN0LmhlaWdodCArIGJ1ZlkqMixcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmKGRpZmZYIDwgMCkge1xyXG4gICAgICAgICAgICByZWN0LnggPSAwO1xyXG4gICAgICAgICAgICByZWN0LndpZHRoIC09IGRpZmZYKjI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGRpZmZZIDwgMCkge1xyXG4gICAgICAgICAgICByZWN0LnkgPSAwO1xyXG4gICAgICAgICAgICByZWN0LmhlaWdodCAtPSBkaWZmWSoyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlsdGVyIG91dCBhbnkgY2h1bmtzIHRoYXQgYXJlIGluIHRoZSB2aXNpYmxlIGFycmF5OyB3ZSBkb250IGNhcmUgYWJvdXQgdGhlbS5cclxuICAgICAgICB0aGlzLmFsbW9zdFZpc2libGVDaHVua0luZGV4ZXMgPSB0aGlzLmdldFZpc2libGVDaHVua3MocmVjdCkuZmlsdGVyKGlkeCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy52aXNpYmxlQ2h1bmtJbmRleGVzLmluY2x1ZGVzKGlkeCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gIC8vIGNvbnNvbGUubG9nKCduZXcgYWxtb3N0IHZpc2libGUgd2FzJywgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzLmpvaW4oJywgJykpXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYWxtb3N0VmlzaWJsZUNodW5rSW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzSWR4ID0gdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzW2ldO1xyXG4gICAgICAgICAgICAvLyBubyBvcCwgd2FzIGFscmVhZHkgYWxtb3N0IHZpc2libGUuIENhbiByZW1vdmUgaXQgZnJvbSBvbGRWaXNJZHggYXMgd2VsbC5cclxuICAgICAgICAgICAgY29uc3Qgb2xkVmlzSWR4ID0gb2xkQWxtb3N0VmlzaWJsZS5pbmRleE9mKHNJZHgpO1xyXG4gICAgICAgICAgICBpZihvbGRWaXNJZHggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgb2xkQWxtb3N0VmlzaWJsZS5zcGxpY2Uob2xkVmlzSWR4LCAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIG5ldyBhbG1vc3QgdmlzaWJsZSBpbmRleCB3YXMgZm91bmQhXHJcbiAgICAgICAgICAgIHRoaXMub25DaHVua1Zpc2liaWxpdHlTdGF0ZUNoYW5nZShWaXNpYmlsaXR5U3RhdGVzLmRlc3Ryb3llZCwgVmlzaWJpbGl0eVN0YXRlcy5hbG1vc3RfdmlzaWJsZSwgc0lkeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBhbnl0aGluZyBsZWZ0IGluIG9sZGFsbW9zdFZpc2libGUgaXMgbm93IGVudGlyZWx5IGdvbnpvLlxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBvbGRBbG1vc3RWaXNpYmxlLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIC8vICAgY29uc3Qgc3RpbGxWaXNpYmxlID0gYmluYXJ5U2VhcmNoSW5kZXgodGhpcy52aXNpYmxlQ2h1bmtzLCBvbGRWaXNpYmxlW2pdLCAwLCBvbGRWaXNpYmxlLmxlbmd0aC0xKTtcclxuICAgICAgICAgICAgdGhpcy5vbkNodW5rVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKFZpc2liaWxpdHlTdGF0ZXMuYWxtb3N0X3Zpc2libGUsIFZpc2liaWxpdHlTdGF0ZXMuZGVzdHJveWVkLCBvbGRBbG1vc3RWaXNpYmxlW2pdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8vLyBjb25zb2xlLmxvZygnYWxtb3N0IHZpc2libGUgYmVjYW1lJywgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzLmpvaW4oJywgJykpXHJcbiAgICB9XHJcblxyXG4gICAgLy9UT0RPOiB1c2UgZFggYW5kIGRZIHRvIGJldHRlciBidWZmZXIgdGhlIG5leHQgdmlzaWJsZSBjaHVua3MuXHJcbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlVmlzaWJsZUNodW5rcyhkWD0wLCBkWT0wKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkVmlzaWJsZSA9IFsuLi50aGlzLnZpc2libGVDaHVua0luZGV4ZXNdO1xyXG4gICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKCdvbGQgdmlzaWJsZSB3YXMnLCBvbGRWaXNpYmxlLmpvaW4oJywgJykpXHJcbiAgICAgICAgY29uc3QgYnVmWCA9ICB0aGlzLnN1YkNodW5rVztcclxuICAgICAgICBjb25zdCBidWZZID0gdGhpcy5zdWJDaHVua0g7XHJcbiAgICAgICAgY29uc3QgZGlmZlggPSB0aGlzLnBsYXllclZpZXdSZWN0LnggLSBidWZYO1xyXG4gICAgICAgIGNvbnN0IGRpZmZZID0gdGhpcy5wbGF5ZXJWaWV3UmVjdC55IC0gYnVmWTtcclxuICAgICAgICBsZXQgcmVjdDogYW55ID0ge1xyXG4gICAgICAgICAgICB4OiBkaWZmWCxcclxuICAgICAgICAgICAgeTogZGlmZlksXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnBsYXllclZpZXdSZWN0LndpZHRoICsgYnVmWCoyLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMucGxheWVyVmlld1JlY3QuaGVpZ2h0ICsgYnVmWSoyLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYoZGlmZlggPCAwKSB7XHJcbiAgICAgICAgICAgIHJlY3QueCA9IDA7XHJcbiAgICAgICAgICAgIHJlY3Qud2lkdGggLT0gKGRpZmZYKjIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkaWZmWSA8IDApIHtcclxuICAgICAgICAgICAgcmVjdC55ID0gMDtcclxuICAgICAgICAgICAgcmVjdC5oZWlnaHQgLT0gKGRpZmZZKjIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZpc2libGVDaHVua0luZGV4ZXMgPSB0aGlzLmdldFZpc2libGVDaHVua3MocmVjdCk7XHJcbiAgICAgICAgLy8gICAvLyBjb25zb2xlLmxvZygndGhlIHZpc2FpYmxlIGNodW5rcyB3YXMnLCB0aGlzLnZpc2libGVDaHVua0luZGV4ZXMuam9pbignLCAnKSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudmlzaWJsZUNodW5rSW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzSWR4ID0gdGhpcy52aXNpYmxlQ2h1bmtJbmRleGVzW2ldO1xyXG4gICAgICAgICAgICAvLyBubyBvcCwgd2FzIGFscmVhZHkgdmlzaWJsZS4gQ2FuIHJlbW92ZSBpdCBmcm9tIG9sZFZpc0lkeCBhcyB3ZWxsLlxyXG4gICAgICAgICAgICBjb25zdCBvbGRWaXNJZHggPSBvbGRWaXNpYmxlLmluZGV4T2Yoc0lkeCk7XHJcbiAgICAgICAgICAgIGlmKG9sZFZpc0lkeCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRWaXNpYmxlLnNwbGljZShvbGRWaXNJZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbG1vc3RWaXNJZHggPSB0aGlzLmFsbW9zdFZpc2libGVDaHVua0luZGV4ZXMuaW5kZXhPZih0aGlzLnZpc2libGVDaHVua0luZGV4ZXNbaV0pO1xyXG4gICAgICAgICAgICBpZihhbG1vc3RWaXNJZHggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzLnNwbGljZShhbG1vc3RWaXNJZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgLy8gIC8vIGNvbnNvbGUubG9nKCdJTklUIE9OICBBTE1PU1QgVklTJywgc0lkeClcclxuICAgICAgICAgICAgICAgIHRoaXMub25DaHVua1Zpc2liaWxpdHlTdGF0ZUNoYW5nZShWaXNpYmlsaXR5U3RhdGVzLmFsbW9zdF92aXNpYmxlLCBWaXNpYmlsaXR5U3RhdGVzLnZpc2libGUsIHNJZHgpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gLy8gY29uc29sZS5sb2coJ3RpbWUgdG8gZm9yY2UgdmlzaWJpaWxpdHl5eXkgb20nLCBzSWR4KTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkNodW5rVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKFZpc2liaWxpdHlTdGF0ZXMuZGVzdHJveWVkLCBWaXNpYmlsaXR5U3RhdGVzLnZpc2libGUsIHNJZHgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXQgdGhpcyBwb2ludCB3ZSBzcGxpY2VkIG91dCBhbGwgdGhlIG9sZFZpc2libGUgdGhhdCBhcmUgc3RpbGwgdmlzaWJsZSwgc28gd2UgY2FuIGp1c3QgYXNzdW1lIHRoZSBvbmVzIGxlZnRcclxuICAgICAgICAvLyBhcmUgbm93IGFsbW9zdCB2aXNpYmxlXHJcbiAgICAgICAgLy8gaWYgZm9yIHNvbWUgcmVhc29uIHRoZXkgYWN0dWFsbHkgYXJlbnQgYW5kIHNob3VsZCBiZSBkZWxldGVkLCB3ZSdsbCBoYW5kbGUgdGhhdCB3aGVuIHdlIGNhbGwgdXBkYXRlQWxtb3N0VmlzaWJsZVxyXG4gICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBhbHRlcm5hdGVkIHdpdGggdGhpcyBtZXRob2QgZnJvbSB3aXRoaW4gYW4gb3V0ZXIgdGljayBtZXRob2QuXHJcbiAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IG9sZFZpc2libGUubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgLy8gLy8gY29uc29sZS5sb2coJ2FkZGluZycsIG9sZFZpc2libGVbal0sICd0byAgYWxtb3N0IHZpc2libGUgY2h1bmtzJylcclxuICAgICAgICAgICAgLy8gICBjb25zdCBzdGlsbFZpc2libGUgPSBiaW5hcnlTZWFyY2hJbmRleCh0aGlzLnZpc2libGVDaHVua3MsIG9sZFZpc2libGVbal0sIDAsIG9sZFZpc2libGUubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICB0aGlzLmFsbW9zdFZpc2libGVDaHVua0luZGV4ZXMucHVzaChvbGRWaXNpYmxlW2pdKTtcclxuICAgICAgICAgICAgdGhpcy5vbkNodW5rVmlzaWJpbGl0eVN0YXRlQ2hhbmdlKFZpc2liaWxpdHlTdGF0ZXMudmlzaWJsZSwgVmlzaWJpbGl0eVN0YXRlcy5hbG1vc3RfdmlzaWJsZSwgb2xkVmlzaWJsZVtqXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB2aXNpYmxlU3ViQ2h1bmtzID0gdGhpcy5nZXRWaXNpYmxlU3ViQ2h1bmtzKHtcclxuICAgICAgICAgICAgeDogdGhpcy5wbGF5ZXJWaWV3UmVjdC54IC0gMjU2LFxyXG4gICAgICAgICAgICB5OiB0aGlzLnBsYXllclZpZXdSZWN0LnkgLSAyNTYsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnBsYXllclZpZXdSZWN0LndpZHRoICsgNTEyLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMucGxheWVyVmlld1JlY3QuaGVpZ2h0ICsgNTEyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudmlzaWJsZUNodW5rSW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMubG9hZGVkQ2h1bmtzW3RoaXMudmlzaWJsZUNodW5rSW5kZXhlc1tpXV07XHJcbiAgICAgICAgICAgIGlmKGNodW5rKSB7XHJcbiAgICAgICAgICAgICAgICBjaHVuay51cGRhdGVWaXNpYmxlU3ViQ2h1bmtzKHZpc2libGVTdWJDaHVua3MpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gICAvLyBjb25zb2xlLmxvZygndmlzaWJsZSBiZWNhbWUnLCB0aGlzLnZpc2libGVDaHVua0luZGV4ZXMuc29ydCgpLmpvaW4oJywgJykpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkTGFyZ2VNYXAobWFwSWQ6IHN0cmluZywgbWFwTWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSkge1xyXG4gICAgICAgIGlmKHRoaXMuY2h1bmtMb2FkZXJXb3JrZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaHVua0xvYWRlcldvcmtlci5pbml0TWFwKHsgbWFwSWQsIGRhdGE6IG1hcE1ldGFEYXRhIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vVE9ETzogdGhpcyBzaG91bGQgYmUgbGF5ZXIgZ3JvdXBzIHdoZW4gd2UgaW1wbGVtZW5ldCB0aGF0LlxyXG4gICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzLmxlbmd0aCAtIG1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoO1xyXG4gICAgICAgIGlmKGRpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGljZWQgPSB0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzLnNwbGljZSh0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzLmxlbmd0aCAtIGRpZmYpO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGlmZjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzcGxpY2VkW2ldLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPCAwKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IHRoaXMuY2h1bmtUZXh0dXJlQXRsYXNzZXMubGVuZ3RoOyBpIDwgTWF0aC5hYnMoZGlmZik7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua1RleHR1cmVBdGxhc3Nlcy5wdXNoKHRoaXMuY2h1bmtUZXh0dXJlQXRsYXNGYWN0b3J5KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RvZG86IHJlbW92ZSB0aGlzIGFzc2VydGlvbiB3aGVuIHJlYWR5IGZvciBwcm9kXHJcbiAgICAgICAgaWYodGhpcy5tYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCAhPT0gdGhpcy5jaHVua1RleHR1cmVBdGxhc3Nlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgYmUgdGhlIHNhbWUuJylcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzW2ldLmluaXRGb3JNYXAodGhpcy5zdWJDaHVua1csIHRoaXMuc3ViQ2h1bmtIKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzLnB1c2goW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZpc2libGVDaHVua0luZGV4ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmFsbW9zdFZpc2libGVDaHVua0luZGV4ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmNodW5rQ29scyA9IE1hdGguY2VpbCh0aGlzLm1hcE1ldGFEYXRhLm1hcFcgLyB0aGlzLmNodW5rV2lkdGgpO1xyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtDb2xzID0gIE1hdGguY2VpbCh0aGlzLm1hcE1ldGFEYXRhLm1hcFcgLyB0aGlzLnN1YkNodW5rVyk7XHJcbiAgICAgICAgdGhpcy5jaHVua1Jvd3MgPSAgTWF0aC5jZWlsKHRoaXMubWFwTWV0YURhdGEubWFwSCAvIHRoaXMuY2h1bmtIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtSb3dzID0gIE1hdGguY2VpbCh0aGlzLm1hcE1ldGFEYXRhLm1hcFcgLyB0aGlzLnN1YkNodW5rSCk7XHJcbiAgICAgICAgdGhpcy5tYXhDaHVua3MgPSB0aGlzLmNodW5rQ29scyAqIHRoaXMuY2h1bmtSb3dzO1xyXG4gICAgICAgIHRoaXMubWF4U3ViQ2h1bmtzID0gdGhpcy5zdWJDaHVua0NvbHMgKiAoTWF0aC5jZWlsKHRoaXMubWFwTWV0YURhdGEubWFwSCAvIHRoaXMuc3ViQ2h1bmtIKSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVWaXNpYmxlQ2h1bmtzKDAsIDApO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQWxtb3N0VmlzaWJsZUNodW5rcygwLCAwKTtcclxuICAgICAgICBpZih0aGlzLmluZGV4ZXNUb1VwZGF0ZS5sZW5ndGggJiYgdGhpcy5yZW5kZXJNb2RlID09PSBTZWN0aW9uUmVuZGVyTW9kZS5MQVpZX0lOREVYRURfREJfTE9BRCkge1xyXG4gICAgICAgICAgICAvLyAgICB0aGlzLmJha2VBbmRTYXZlTmVlZGVkU2VjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkU21hbGxNYXBUZXh0dXJlcyhtYXBJZDogc3RyaW5nLCBsYXllclRpbGVMYXllck9yZGVyLCBsb2c9ZmFsc2UpIDogUHJvbWlzZTxBcnJheTxQSVhJLlRleHR1cmU+PiB7XHJcbiAgICAgICAgaWYobWFwSWQgaW4gdGhpcy5jYWNoZWRTbWFsbE1hcERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkU21hbGxNYXBEYXRhW21hcElkXS50ZXh0dXJlc1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobGF5ZXJUaWxlTGF5ZXJPcmRlci5tYXAoIGFzeW5jIChsLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IG1hcEZpbGVLZXkodGhpcy5iYXNlVXJsLCBtYXBJZCwgaSk7XHJcbiAgICAgICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWUoYHRleHR1cmVfJHtrZXl9YCk7XHJcbiAgICAgICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWUoYHRleHR1cmVfJHtrZXl9IGluZGV4IGRiIGxvYWRgKTtcclxuICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gYXdhaXQgdGhpcy5pbmRleGVkRGJMb2FkZXIubG9hZEltYWdlRGF0YShrZXkpO1xyXG4gICAgICAgICAgICBsb2cgJiYgY29uc29sZS50aW1lRW5kKGB0ZXh0dXJlXyR7a2V5fSBpbmRleCBkYiBsb2FkYCk7XHJcbiAgICAgICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWUoYHRleHR1cmVfJHtrZXl9IG1ha2VgKTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IFBJWEkuVGV4dHVyZS5mcm9tKGltYWdlRGF0YSk7XHJcbiAgICAgICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWVFbmQoYHRleHR1cmVfJHtrZXl9IG1ha2VgKTtcclxuICAgICAgICAgICAgbG9nICYmIGNvbnNvbGUudGltZUVuZChgdGV4dHVyZV8ke2tleX1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmVcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTbWFsbE1hcChtYXBJZDogc3RyaW5nLCBtYXBNZXRhRGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzLnB1c2goW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGV4dHVyZXM7XHJcbiAgICAgICAgLy8gdGhpcyBkYXR1bSBzaG91bGQgbm90IGhhdmUgdGlsZSBkYXRhIG9uIGl0IHNpbmNlIHRob3NlIGFyZSBtZXJnZWQgYW5kIGJha2VkIGFzIHRleHR1cmVzLlxyXG4gICAgICAgIGxldCBkYXRhIDogRGVjb2RlZE1hcENodW5rRGF0YTtcclxuICAgICAgICBjb25zdCBsb2cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbG9nICYmIGNvbnNvbGUuZXJyb3IoJ0xPQURJTkcgU01BTEwgTUFQOiAnLCBtYXBJZCwgbWFwTWV0YURhdGEpXHJcbiAgICAgICAgbG9nICYmIGNvbnNvbGUudGltZSgnbG9hZCBzbWFsbCBtYXAnKTtcclxuXHJcbiAgICAgICAgaWYobWFwSWQgaW4gdGhpcy5jYWNoZWRTbWFsbE1hcERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRTbWFsbE1hcERhdGFbbWFwSWRdLnRzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgKHsgZGF0YSwgdGV4dHVyZXMgfSA9IHRoaXMuY2FjaGVkU21hbGxNYXBEYXRhW21hcElkXSlcclxuICAgICAgICAgICAgbG9nICYmIGNvbnNvbGUuZXJyb3IoJ2RhdGEgd2FzIGNhY2hlZCcsIGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmluZGV4ZWREYkxvYWRlcikge1xyXG4gICAgICAgICAgICBsb2cgJiYgY29uc29sZS50aW1lKCd0ZXh0dXJlJyk7XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IGluIGNhc2Ugd2UgaGF2ZSBpbmRleGVkZGIgbG9hZGVyIGJ1dCBkaWRudCBoYXZlIGVub3VnaCBtZW1vcnkgdG8gc2F2ZSBpbiBmaXJzdCBwbGFjZSB3ZSBuZWVkIHRvIGhhbmRsZSBpdFxyXG4gICAgICAgICAgICB0ZXh0dXJlcyA9IGF3YWl0IHRoaXMubG9hZFNtYWxsTWFwVGV4dHVyZXMobWFwSWQsIG1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIpXHJcbiAgICAgICAgICAgIGRhdGEgPSBhd2FpdCB0aGlzLmxvYWRTbWFsbE1hcEltYWdlQW5kQ29sbGlkZXJEYXRhT25seShtYXBJZCk7XHJcbiAgICAgICAgICAgIGxvZyAmJiBjb25zb2xlLmVycm9yKCdkYXRhIHdhcyBsb2FkZWQnLCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTbWFsbE1hcERhdGFUb0NhY2hlKGRhdGEsIHRleHR1cmVzLCBtYXBJZCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb3QnLCB0ZXh0dXJlcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbWFwRGF0YSA9IGF3YWl0IGh0dHBHZXRBc3luYyhtYXBGaWxlS2V5KHRoaXMuYmFzZVVybCwgbWFwSWQpLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgRGVjb2Rlcih0aGlzLnRpbGVTaXplQnlTZXFMb29rdXAsIHRoaXMuc2VxVG9UYWdTdHJpbmcsIHRoaXMud29ybGRJbml0RGF0YS5wcm9wU2VxVG9OYW1lTG9va3VwKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlZCA9IGF3YWl0IGRlY29kZXIuZGVjb2RlTWFwKDEwMjQsIDEwMjQsIDEyOCwgMTI4LCBtYXBEYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlTWFwTWV0YURhdGEobWFwSWQsIGRlY29kZWQubWV0YURhdGEpO1xyXG4gICAgICAgICAgICBpZihkZWNvZGVkLmNodW5rcy5sZW5ndGggIT09IDEpIHRocm93IG5ldyBFcnJvcignU21hbGwgbWFwIHNob3VsZCBvbmx5IGhhdmUgMSBjaHVuay4nKTtcclxuICAgICAgICAgICAgdGV4dHVyZXMgPSB0aGlzLm1lcmdlQ2h1bmtMYXllcnNBc1RleHR1cmVzKGRlY29kZWQuY2h1bmtzWzBdLCBkZWNvZGVkLm1ldGFEYXRhKTtcclxuICAgICAgICAgICAgZGVjb2RlZC5jaHVua3NbMF0ubGF5ZXJzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgbC50aWxlTGF5ZXJzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGF0YSA9IGRlY29kZWQuY2h1bmtzWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNtYWxsTWFwRGF0YVRvQ2FjaGUoZGVjb2RlZC5jaHVua3NbMF0sIHRleHR1cmVzLCBtYXBJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuYWRkQ2h1bmtDb2xsaWRlcnMoZGF0YSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mb3JjZVNob3dDaHVua0ltYWdlcyhkYXRhLCB0aGlzLmN1ck1hcFNlcSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwcml0ZXMgPSB0ZXh0dXJlcy5tYXAodCA9PiB7XHJcbiAgICAgICAgICAgIGlmKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUElYSS5TcHJpdGUodCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdnb3Qgc3ByaXRlcycsIHNwcml0ZXMpXHJcbiAgICAgICAgbG9nICYmIGNvbnNvbGUudGltZSgnYWRkIHRvIG1hcCcpO1xyXG4gICAgICAgIHRoaXMuZW1pdCgnYWRkLW1hcC1jaHVuay1sYXllcnMnLCBzcHJpdGVzKTtcclxuXHJcblxyXG4gICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWVFbmQoJ2FkZCB0byBtYXAnKVxyXG4gICAgICAgIGxvZyAmJiBjb25zb2xlLnRpbWVFbmQoJ2xvYWQgc21hbGwgbWFwJyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZE1hcChtYXBJZDogc3RyaW5nLCBtYXBNZXRhRGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhLCBjdXJNYXBTZXE6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY3VyTWFwU2VxID0gY3VyTWFwU2VxO1xyXG4gICAgICAgIGlmKHRoaXMuY2FjaGVkTWFwQ2h1bmtzRGF0YXNbbWFwSWRdKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW21hcElkXS50aW1lb3V0KTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRDaHVua0RhdGEgPSB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW21hcElkXS5jaHVua3M7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW21hcElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2xvYWRpbmcgbWFwOicsIG1hcE1ldGFEYXRhKTtcclxuICAgICAgICB0aGlzLm1hcE1ldGFEYXRhID0gbWFwTWV0YURhdGE7XHJcbiAgICAgICAgdGhpcy5tYXBJZCA9IG1hcElkO1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSByZXNvbHZlTWFwU2l6ZSh0aGlzLm1hcE1ldGFEYXRhLm1hcFcsIHRoaXMubWFwTWV0YURhdGEubWFwSCk7XHJcbiAgICAgICAgdGhpcy5jdXJNYXBTaXplID0gc2l6ZTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnTUFQIFNJWkU6Jywgc2l6ZSk7XHJcbiAgICAgICAgaWYoc2l6ZSA9PT0gTWFwU2l6ZS5TTUFMTCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTbWFsbE1hcChtYXBJZCwgbWFwTWV0YURhdGEpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkTGFyZ2VNYXAobWFwSWQsIG1hcE1ldGFEYXRhKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2ZpbmlzaGVkIGxvYWRpbmcgbWFwOicsIG1hcElkKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnJlc2V0dGluZyA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgbWFwSWQgPSB0aGlzLm1hcElkO1xyXG4gICAgICAgIGlmKHRoaXMuY3VyTWFwU2l6ZSAhPT0gTWFwU2l6ZS5TTUFMTCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW21hcElkXSA9IHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW21hcElkXVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBjaHVua3M6IHsgLi4udGhpcy5jYWNoZWRDaHVua0RhdGEgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkU21hbGxNYXBEYXRhW21hcElkXS50cyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgIC8vIGNvbnNvbGUubG9nKCdTVEFSVCBSRVNFVCBNQVA6JywgdGhpcy5tYXBJZCk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudmlzaWJsZUNodW5rSW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdkZXN0cm95aW5nIHZpc2libGUgY2h1bms6JywgdGhpcy52aXNpYmxlQ2h1bmtJbmRleGVzW2ldKVxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDaHVuayh0aGlzLnZpc2libGVDaHVua0luZGV4ZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Rlc3Ryb3lpbmcgYXZpc2libGUgY2h1bms6JywgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzW2ldKVxyXG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDaHVuayh0aGlzLmFsbW9zdFZpc2libGVDaHVua0luZGV4ZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihPYmplY3Qua2V5cyh0aGlzLmxvYWRlZENodW5rcykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vICAgIHRocm93IG5ldyBFcnJvcignc3RpbGwgaGFkIGtleXMgaW4gbG9hZGVkIGNodW5rczogJyArIE9iamVjdC5rZXlzKHRoaXMubG9hZGVkQ2h1bmtzKS5qb2luKCcsICcpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihPYmplY3Qua2V5cyh0aGlzLmNodW5rc0luQmF0Y2gpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyAgdGhyb3cgbmV3IEVycm9yKCdzdGlsbCBoYWQga2V5cyBpbiBsb2FkZWQgY2h1bmtzOiAnICsgIE9iamVjdC5rZXlzKHRoaXMuY2h1bmtzSW5CYXRjaCkuam9pbignLCAnKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5sb2FkZWRDaHVua3MpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ2Rlc3Ryb3lpbmcgbG9hZGVkIGNodW5rJywgYyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUNodW5rKHBhcnNlSW50KGMpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNodW5rc0luQmF0Y2gpLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ2Rlc3Ryb3lpbmcgY2h1bmsgaW4gYmF0Y2ggY2h1bmsnLCBjKTtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95Q2h1bmsocGFyc2VJbnQoYykpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVua1RleHR1cmVBdGxhc3Nlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzW2ldLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY3VyQmF0Y2hDaHVua0luZGV4ZXMsIGluaXRCYXRjaGVzLCBhZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzXHJcblxyXG4gICAgICAgIHRoaXMuY3VyQmF0Y2hDaHVua0luZGV4ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmNodW5rVGV4dHVyZUF0bGFzc2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlQ2h1bmtJbmRleGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5hbG1vc3RWaXNpYmxlQ2h1bmtJbmRleGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbml0QmF0Y2hlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2h1bmtzSW5CYXRjaCA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9hZGVkQ2h1bmtzID0ge307XHJcbiAgICAgICAgdGhpcy5jYWNoZWRDaHVua1RleHR1cmVzID0ge307XHJcbiAgICAgICAgdGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5pbWFnZU1hbmFnZXIucmVzZXQoKTtcclxuICAgICAgICB0aGlzLnJlc2V0dGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW50ZXJ1cHRlZENodW5rSW1hZ2VzID0ge307XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2h1bmtJbWFnZUxvYWRzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nQ2h1bmtEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5pbnRlcnVwdGVkQ2h1bmtEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5zaG93ZWRDaHVua0ltYWdlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IHt9O1xyXG4gICAgICAgIHRoaXMuc2hvd2VkQ2h1bmtDb2xsaWRlcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmFkZExheWVyU3ByaXRlUGF5bG9hZEJhdGNoZXMubGVuZ3RoID0gMDtcclxuICAgICAgLy8gIGNvbnNvbGUubG9nKCdmaW5pc2hlZCByZXNldHRpbmcuJywgbWFwSWQpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHJlbmRlck1vZGUoKSA6IFNlY3Rpb25SZW5kZXJNb2RlIHtcclxuICAgICAgICBpZih0aGlzLmluZGV4ZWREYkxvYWRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VjdGlvblJlbmRlck1vZGUuTEFaWV9JTkRFWEVEX0RCX0xPQURcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VjdGlvblJlbmRlck1vZGUuQkFUQ0hfU1VCX1NFQ1RJT05TX0NPTlRBSU5FUlNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQ2h1bmsoaW5kZXgsIGF0U2VxOiBudW1iZXIpIDogUHJvbWlzZTxXb3JsZENodW5rPiB7XHJcbiAgICAgICAgaWYoIXRoaXMuaW5pdGlhbGl6ZWQpIHRocm93IG5ldyBFcnJvcignQ2h1bmsgbWFuYWdlciBub3QgaW5pdGlhbGl6ZWQuJylcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkQ2h1bmtEYXRhKGluZGV4LCBhdFNlcSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJztsb2FkZWQnLCBkYXRhKTtcclxuICAgICAgICBpZighZGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgY2FjaGVkVGV4dHVyZXMgPSB0aGlzLmNhY2hlZENodW5rVGV4dHVyZXNbaW5kZXhdO1xyXG4gICAgICAgIGlmKCF0aGlzLnJlc2V0dGluZyAmJiBhdFNlcSA9PT0gdGhpcy5jdXJNYXBTZXEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlV29ybGRDaHVuayhkYXRhLCB0aGlzLm1hcE1ldGFEYXRhLCBjYWNoZWRUZXh0dXJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmb3JjZUNvbXBsZXRlQmF0Y2hlcyhjaHVua0luZGV4OiBudW1iZXIsIGF0U2VxOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBpZHggPSB0aGlzLmN1ckJhdGNoQ2h1bmtJbmRleGVzLmluZGV4T2YoY2h1bmtJbmRleCk7XHJcbiAgICAgICAgaWYgKGlkeCA8IDApIHRocm93IG5ldyBFcnJvcihgY291bGRudCBmaW5kIGluICR7Y2h1bmtJbmRleH1gKTtcclxuICAgICAgICBjb25zdCBiYXRjaGVzID0gdGhpcy5pbml0QmF0Y2hlc1t0aGlzLmN1ckJhdGNoQ2h1bmtJbmRleGVzW2lkeF1dO1xyXG4gICAgICAgIHdoaWxlKGJhdGNoZXMubGVuZ3RoICYmIGF0U2VxID09PSB0aGlzLmN1ck1hcFNlcSkge1xyXG4gICAgICAgICAgICBhd2FpdCBiYXRjaGVzLnBvcCgpKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuY3VyTWFwU2VxICE9PSBhdFNlcSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGlkeDIgPSB0aGlzLmN1ckJhdGNoQ2h1bmtJbmRleGVzLmluZGV4T2YoY2h1bmtJbmRleCk7XHJcbiAgICAgICAgaWYoaWR4MiA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU2hvdWxkbnQgaGF2ZSBmb3VuZCB0aGUgY2h1bmsgaW5kZXggaW4gdGhlIGJhdGNoZXMgYWZ0ZXIgZm9yY2luZy5gKVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbGVuID0gdGhpcy5hZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzLmxlbmd0aDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy5hZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzW2ldLmNodW5rSW5kZXggPT0gY2h1bmtJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZGQtc3ViY2h1bmstbGF5ZXItc3ByaXRlJywgdGhpcy5hZGRMYXllclNwcml0ZVBheWxvYWRCYXRjaGVzW2ldKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkTGF5ZXJTcHJpdGVQYXlsb2FkQmF0Y2hlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBpLS07XHJcbiAgICAgICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBzaG93Q2h1bmsoaW5kZXgsIGF0U2VxOiBudW1iZXIpIHtcclxuICAgICAgICAvLyBpZiB3ZSBjYWxsIHNob3dDaHVuayB3aGlsZSB3ZSdyZSBzdGlsbCBpbml0aWFsaXppbmcgdGhlIGJhdGNoLCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB3ZSBjbGVhciBpdCBjb3JyZWNjdGx5LlxyXG4gICAgICAgIGxldCBzcHJpdGVzID0gW107XHJcbiAgICAgICAgaWYodGhpcy5yZXNldHRpbmcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZih0aGlzLmNodW5rc0luQmF0Y2hbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5jaHVua3NJbkJhdGNoW2luZGV4XTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5mb3JjZUNvbXBsZXRlQmF0Y2hlcyhpbmRleCwgYXRTZXEpO1xyXG4gICAgICAgICAgICBpZihhdFNlcSAhPT0gdGhpcy5jdXJNYXBTZXEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZENodW5rc1tpbmRleF0gPSBjaHVuaztcclxuICAgICAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLmFkZENodW5rQ29sbGlkZXJzKHRoaXMuY2FjaGVkQ2h1bmtEYXRhW2luZGV4XSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd2VkQ2h1bmtDb2xsaWRlcnNbaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBjaHVuayA6IFdvcmxkQ2h1bms7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRlZCA9IHRoaXMubG9hZGVkQ2h1bmtzW2luZGV4XTtcclxuICAgICAgICAgICAgaWYodGhpcy5sb2FkaW5nW2luZGV4XSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZihsb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgIHNwcml0ZXMgPSBsb2FkZWQuc2hvdygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nW2luZGV4XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua0RhdGEgPSBhd2FpdCB0aGlzLmxvYWRDaHVua0RhdGEoaW5kZXgsIGF0U2VxKTtcclxuICAgICAgICAgICAgICAgIGlmKCFjaHVua0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtYXBzIGNoYW5nZWQgaW5iZXR3ZWVuIGxvYWRzLlxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5pbnRlcnVwdGVkQ2h1bmtEYXRhW2luZGV4XSB8fCB0aGlzLnJlc2V0dGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnJlc2V0dGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5pbnRlcnVwdGVkQ2h1bmtEYXRhW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHR1cmVzID0gdGhpcy5jYWNoZWRDaHVua1RleHR1cmVzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjaHVuayA9IHRoaXMuY3JlYXRlV29ybGRDaHVuayhjaHVua0RhdGEsIHRoaXMubWFwTWV0YURhdGEsIHRleHR1cmVzKTtcclxuICAgICAgICAgICAgICAgICAgICBjaHVuay5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5sb2FkaW5nW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlcyA9IHRoaXMuY2FjaGVkQ2h1bmtUZXh0dXJlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZighdGV4dHVyZXMgJiYgdGhpcy5yZW5kZXJNb2RlID09IFNlY3Rpb25SZW5kZXJNb2RlLkxBWllfSU5ERVhFRF9EQl9MT0FEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICB0ZXh0dXJlcyA9IGF3YWl0IHRoaXMubG9hZFNlY3Rpb25UZXh0dXJlcyhpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIHRoaXMuY2FjaGVkU2VjdGlvblRleHR1cmVzW2luZGV4XSA9IHRleHR1cmVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5yZXNldHRpbmcgfHwgdGhpcy5pbnRlcnVwdGVkQ2h1bmtEYXRhW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNodW5rID0gdGhpcy5jcmVhdGVXb3JsZENodW5rKGNodW5rRGF0YSwgdGhpcy5tYXBNZXRhRGF0YSwgdGV4dHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKCdtYWRlIGNodW5rOicsIGNodW5rKTtcclxuICAgICAgICAgICAgICAgIHNwcml0ZXMgPSBjaHVuay5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZvcmNlU2hvd0NodW5rSW1hZ2VzKGNodW5rRGF0YSwgYXRTZXEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRDaHVua3NbaW5kZXhdID0gY2h1bms7XHJcbiAgICAgICAgICAgICAgICAvLyAgIC8vIGNvbnNvbGUubG9nKCd0b29rJywgRGF0ZS5ub3coKSAtIHN0YXJ0LCAndG8gaW4gaXRpYWxpemUgMSBjaHVuay4nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWRkLW1hcC1zdWItY2h1bmtzJywgc3ByaXRlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hvd2VkQ2h1bmtDb2xsaWRlcnNbaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuYWRkQ2h1bmtDb2xsaWRlcnModGhpcy5jYWNoZWRDaHVua0RhdGFbaW5kZXhdKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVDaHVua0ltYWdlcyhjaHVua0RhdGE6IERlY29kZWRNYXBDaHVua0RhdGEpICB7XHJcbiAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3ZpdW5nIGltYWdlcyBmb3IgY2h1bms6JywgY2h1bmtEYXRhLmluZGV4LCAnbWFwIGlkIHdhcycsIHRoaXMubWFwSWQsICdyZXNldHRpbmcgd2FzJywgdGhpcy5yZXNldHRpbmcsICdpdW50ZXIgdXBlZCBjaHVuayBpbWFnZXMgd2FzJywgdGhpcy5pbnRlcnVwdGVkQ2h1bmtJbWFnZXNbY2h1bmtEYXRhLmluZGV4XSlcclxuICAgICAgICBpZighdGhpcy5zaG93ZWRDaHVua0ltYWdlc1tjaHVua0RhdGEuaW5kZXhdKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjaHVua0RhdGEubGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlcyA9IGNodW5rRGF0YS5sYXllcnNbaV0uaW1hZ2VzO1xyXG4gICAgICAgICAgICBpZiAoIWltYWdlcyB8fCB0aGlzLnJlc2V0dGluZyAmJiAodGhpcy5pbnRlcnVwdGVkQ2h1bmtJbWFnZXNbY2h1bmtEYXRhLmluZGV4XSB8fCB0aGlzLnBlbmRpbmdDaHVua0ltYWdlTG9hZHNbY2h1bmtEYXRhLmluZGV4XSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpbWFnZUlkIGluIGltYWdlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeHl6QXJyYXkgPSBpbWFnZXNbaW1hZ2VJZF07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHh5ekFycmF5Lmxlbmd0aDsgaiArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeiA9IHh5ekFycmF5W2ogKyAyXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzW2ldW3pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKC0tdGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzW2ldW3pdLmNodW5rQ291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWlsaXplZFNwcml0ZXNbaV1bel0ucmVtb3ZlRnJvbU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaW5pdGlhaWxpemVkU3ByaXRlc1tpXVt6XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIXRoaXMucmVzZXR0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKGBXaGVuIGNhbGxpbmcgcmVtb3ZlIGNodW5rIGltYWdlcyBpdCBzaG91bGQgaGF2ZSBiZWVuIGluaXRpbGl6ZWQuICR7en1gKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZm9yY2VTaG93Q2h1bmtJbWFnZXMoY2h1bmtEYXRhOiBEZWNvZGVkTWFwQ2h1bmtEYXRhLCBhdFNlcTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5yZXNldHRpbmcpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2h1bmtEYXRhLmxheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbG9nID0gaSA9PSAyICYmIGNodW5rRGF0YS5pbmRleCA9PSA1O1xyXG4gICAgICAgICAgICBjb25zdCBpbWFnZXMgPSBjaHVua0RhdGEubGF5ZXJzW2ldLmltYWdlcztcclxuICAgICAgICAgICAgaWYoIWltYWdlcykgY29udGludWU7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaW1hZ2VJZCBpbiBpbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgIC8vaWYoIWltYWdlSWQgaW4gdGhpcy53b3JsZEluaXREYXRhLmltYWdlcylcclxuICAgICAgICAgICAgICAgIGNvbnN0IHh5ekFycmF5ID0gaW1hZ2VzW2ltYWdlSWRdO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHh5ekFycmF5Lmxlbmd0aDsgais9Mykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHogPSB4eXpBcnJheVtqICsgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuaW5pdGlhaWxpemVkU3ByaXRlc1tpXSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5pbml0aWFpbGl6ZWRTcHJpdGVzW2ldW3pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhaWxpemVkU3ByaXRlc1tpXVt6XS5jaHVua0NvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0NodW5rSW1hZ2VMb2Fkc1tjaHVua0RhdGEuaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gYXdhaXQgdGhpcy5pbWFnZU1hbmFnZXIuX2dldE1hcEltYWdlKHBhcnNlSW50KGltYWdlSWQpLCB4eXpBcnJheVtqXSwgeHl6QXJyYXlbaisxXSwgeiwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdDaHVua0ltYWdlTG9hZHNbY2h1bmtEYXRhLmluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jdXJNYXBTZXEgIT09IGF0U2VxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5yZXNldHRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ1cHRlZENodW5rSW1hZ2VzW2NodW5rRGF0YS5pbmRleF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuaW5pdGlhaWxpemVkU3ByaXRlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogbWlnaHQgbmVlZCB0byByZW1vdmUgc3ByaXRlIGZyb20gbWFwIGF0IHRoaXMgcG9pbnQuLiBpZiB0aGVyZXMgYSBidWcgd2hlcmUgaW1hZ2VzIGZyb20gb25lIG1hcCBhcmUgc3RpbGwgcHJlc2VudCBvbiB0aGUgY3VycmVudCBtYXAsIHRoaXMgaXMgcHJvYmFibHkgdGhlIHJlYXNvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuY2h1bmtDb3VudCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWlsaXplZFNwcml0ZXNbaV1bel0gPSBzcHJpdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93ZWRDaHVua0ltYWdlc1tjaHVua0RhdGEuaW5kZXhdID0gdHJ1ZTtcclxuICAgICAgICBpZihjaHVua0RhdGEuaW5kZXggPT0gMCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaW1hZ2VzIHBlciBsYXllciBiZWNhbWUnLCBpbWFnZXNQZXJMYXllcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVzdHJveUluaXRpYWxpemVkQ2h1bmsoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IGNodW5rRGF0YSA9IHRoaXMuY2FjaGVkQ2h1bmtEYXRhW2luZGV4XTtcclxuICAgICAgICBpZih0aGlzLnNob3dlZENodW5rQ29sbGlkZXJzW2luZGV4XSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIucmVtb3ZlQ2h1bmtDb2xsaWRlcnMoY2h1bmtEYXRhKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnNob3dlZENodW5rSW1hZ2VzW2luZGV4XSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNodW5rSW1hZ2VzKGNodW5rRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubG9hZGVkQ2h1bmtzW2luZGV4XS5kZXN0cm95KCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubG9hZGVkQ2h1bmtzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlc3Ryb3lDaHVuayAoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygndHJ5aW5nIHRvIHJlbW92ZSB0aGUgY2h1bmsnLCB0aGlzLmNhY2hlZENodW5rRGF0YSwgaW5kZXgpXHJcbiAgICAgICAgY29uc3QgY2h1bmtEYXRhID0gdGhpcy5jYWNoZWRDaHVua0RhdGFbaW5kZXhdO1xyXG4gICAgICAgIGlmKCFjaHVua0RhdGEpIHtcclxuICAgICAgLy8gICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZmluZCBpbmRleCAnLCBpbmRleCwgJ2luIGNhY2hlZCBjaHVuayBkYXRhJywgdGhpcy5jYWNoZWRDaHVua0RhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIC8vICAgIGNvbnNvbGUuZXJyb3IoJ3RoaXMgd2FzJywgdGhpcywgJ3RoZSBpbml0IGJhdGNoZXMgd2FzJywgdGhpcy5pbml0QmF0Y2hlcyk7XHJcbiAgICAgICAgaWYodGhpcy5sb2FkZWRDaHVua3NbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUluaXRpYWxpemVkQ2h1bmsoaW5kZXgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbml0QmF0Y2hlc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95Q2h1bmtJbkJhdGNoKGluZGV4KTtcclxuICAgICAgICB9IGVsc2UgaWYoIXRoaXMuaW50ZXJ1cHRlZENodW5rRGF0YVtpbmRleF0gJiYgIXRoaXMubG9hZGluZ0NodW5rRGF0YVtpbmRleF0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcnlpbmcgdG8gZGVzdHJveSBhIGNodW5rIHRoYXQgd2FzIG5laXRoZXIgbG9hZGVkIG5vciBpbiB0aGUgYmF0Y2ggcXVldWUuIFRoZSBjaHVuayBpbmRleCB3YXMgJyArIGluZGV4KVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5zaG93ZWRDaHVua0NvbGxpZGVyc1tpbmRleF07XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc2hvd2VkQ2h1bmtJbWFnZXNbaW5kZXhdO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZENodW5rRGF0YVtpbmRleF07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYmFrZUFuZFNhdmVOZWVkZWRDaHVua3MoKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kZXhlc1RvVXBkYXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNodW5rSW5kZXggPSB0aGlzLmluZGV4ZXNUb1VwZGF0ZVtpXTtcclxuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBhd2FpdCB0aGlzLmxvYWRDaHVuayhjaHVua0luZGV4LCB0aGlzLmN1ck1hcFNlcSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVzID0gY2h1bmsuYmFrZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVDaHVua1RleHR1cmVzKGNodW5rSW5kZXgsIHRleHR1cmVzKTtcclxuICAgICAgICAgICAgdGV4dHVyZXMuZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHQuZGVzdHJveSh0cnVlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIHByaXZhdGUgZGVzdHJveUNodW5rKGluZGV4KSB7XHJcbiAgICAgICAgaWYodGhpcy5sb2FkZWRDaHVua3NbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lcnMgPSB0aGlzLmxvYWRlZENodW5rc1tpbmRleF0uZGVzdHJveSgpO1xyXG4gICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KGNvbnRhaW5lcnNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZS1zdWItY2h1bmtzJywgY29udGFpbmVycyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZS1jaHVuaycsIGNvbnRhaW5lcnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FjaGVkQ2h1bmtUZXh0dXJlc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkQ2h1bmtUZXh0dXJlc1tpbmRleF0uZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0LmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlZENodW5rVGV4dHVyZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVkQ2h1bmtUZXh0dXJlc1tpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgICovXHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQWxsQ2h1bmtzKCkgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZENodW5rRGF0YShpbmRleDogbnVtYmVyLCBhdFNlcTogbnVtYmVyKSA6IFByb21pc2U8RGVjb2RlZE1hcENodW5rRGF0YT4ge1xyXG4gICAgICAgIGlmKHRoaXMuY2FjaGVkQ2h1bmtEYXRhW2luZGV4XSkgcmV0dXJuIHRoaXMuY2FjaGVkQ2h1bmtEYXRhW2luZGV4XTtcclxuICAgICAgICBpZih0aGlzLnJlc2V0dGluZykgdGhyb3cgbmV3IEVycm9yKCdubyBsb2FkaW5nIGNodW5rIGRhdGEgd2hpbGUgcmVzZXR0aW5nLicpXHJcbiAgICAgICAgY29uc3Qgc3RhcnRNYXBJZCA9IHRoaXMubWFwSWQ7XHJcbiAgICAgICAgbGV0IGRhdGE7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nQ2h1bmtEYXRhW2luZGV4XSA9IHRydWU7XHJcbiAgICAgICAgLy8gLy8gY29uc29sZS5sb2coJ0dFVFRJTkcgU0VDVElPTiBMT0FERVIgREFUQSBGUk9NJywgdGhpcy5jaHVua0xvYWRlcldvcmtlcilcclxuICAgICAgICBpZih0aGlzLmNodW5rTG9hZGVyV29ya2VyKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBhd2FpdCB0aGlzLmNodW5rTG9hZGVyV29ya2VyLmdldENodW5rRGF0YShpbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gbWFwRmlsZUtleSh0aGlzLmJhc2VVcmwsIHRoaXMubWFwSWQsIGluZGV4KTtcclxuICAgICAgICAgICAgaWYodGhpcy5pbmRleGVkRGJMb2FkZXIpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5sb2FkSnNvbihrZXkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IGh0dHBHZXRBc3luYyhrZXksIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmN1ck1hcFNlcSAhPT0gYXRTZXEpIHtcclxuICAgICAgICAgICAgaWYoc3RhcnRNYXBJZCBpbiB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlZE1hcENodW5rc0RhdGFzW3N0YXJ0TWFwSWRdLmNodW5rc1tpbmRleF0gPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5sb2FkaW5nQ2h1bmtEYXRhW2luZGV4XTtcclxuICAgICAgICAvLyAgY29uc29sZS5sb2coJ0ZPUiBJTkRFWCcsIGluZGV4LCAnR09UJywgZGF0YSk7XHJcbiAgICAgICAgZGF0YS5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIGlmKHRoaXMucmVzZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ1cHRlZENodW5rRGF0YVtpbmRleF0gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZihzdGFydE1hcElkIGluIHRoaXMuY2FjaGVkTWFwQ2h1bmtzRGF0YXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVkTWFwQ2h1bmtzRGF0YXNbc3RhcnRNYXBJZF0uY2h1bmtzW2luZGV4XSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZENodW5rRGF0YVtpbmRleF0gPSBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRDaHVua0xvY2FsU3RvcmFnZShjaHVua0luZGV4KSA6IFdvcmxkTGV2ZWxTZWN0aW9uRGF0YSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5sb2NhbFN0b3JhZ2VEYXRhS2V5fV8ke2NodW5rSW5kZXh9YCkpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkQ2h1bmtXZWJXb3JrZXIoY2h1bmtJbmRleCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBtYWtlQ2h1bmtMYXllcktleShjaHVua0luZGV4LCBsYXllckluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubWFwSWR9XyR7Y2h1bmtJbmRleH1fJHtsYXllckluZGV4fWA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWxldGVDaHVua1RleHR1cmVzKCkge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUNodW5rVGV4dHVyZXMoY2h1bmtJbmRleDogbnVtYmVyLCB0ZXh0dXJlczogQXJyYXk8UElYSS5UZXh0dXJlPikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0ZXh0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5zYXZlVGV4dHVyZSh0aGlzLm1ha2VDaHVua0xheWVyS2V5KGNodW5rSW5kZXgsIGkpLCB0ZXh0dXJlc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZENodW5rVGV4dHVyZXMoY2h1bmtJbmRleDogbnVtYmVyKSA6IFByb21pc2U8QXJyYXk8UElYSS5UZXh0dXJlPj4ge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgICAgY29uc3QgY2h1bmtEYXRhID0gdGhpcy5jYWNoZWRDaHVua0RhdGFbY2h1bmtJbmRleF07XHJcbiAgICAgICAgaWYoIWNodW5rRGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGNodW5rIGRhdGEgZm91bmQnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2h1bmtEYXRhLmxheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuaW5kZXhlZERiTG9hZGVyLmxvYWRUZXh0dXJlKHRoaXMubWFrZUNodW5rTGF5ZXJLZXkoY2h1bmtJbmRleCwgaSkpKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNWaXNpYmxlV2l0aEJ1ZmZlcihyZWN0LCBidWZmZXJXaWR0aCwgYnVmZmVySGVpZ2h0KSB7XHJcbiAgICAgICAgbGV0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5wbGF5ZXJWaWV3UmVjdDtcclxuICAgICAgICB4IC09IGJ1ZmZlcldpZHRoIC8gMjtcclxuICAgICAgICB5IC09IGJ1ZmZlckhlaWdodCAvIDI7XHJcbiAgICAgICAgd2lkdGggKz0gYnVmZmVyV2lkdGg7XHJcbiAgICAgICAgaGVpZ2h0ICs9IGJ1ZmZlckhlaWdodDtcclxuICAgICAgICBpZiAocmVjdC54IDwgeCArIHdpZHRoICYmXHJcbiAgICAgICAgICAgIHJlY3QueCArIHJlY3Qud2lkdGggPiB4ICYmXHJcbiAgICAgICAgICAgIHJlY3QueSA8IHkgKyBoZWlnaHQgJiZcclxuICAgICAgICAgICAgcmVjdC5oZWlnaHQgKyByZWN0LnkgPiB5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB3ZWJHbEF0bGFzRmFjdG9yeShyZW5kZXJlcjogUElYSS5XZWJHTFJlbmRlcmVyKSA6IFdlYkdMVGV4dHVyZUF0bGFzIHtcclxuICAgICAgICByZXR1cm4gbmV3IFdlYkdMVGV4dHVyZUF0bGFzKHJlbmRlcmVyIGFzIFBJWEkuV2ViR0xSZW5kZXJlcik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbnZhc0F0bGFzRmFjdG9yeShyZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlcikgOiBDYW52YXNUZXh0dXJlQXRsYXMge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ2FudmFzVGV4dHVyZUF0bGFzKHJlbmRlcmVyIGFzIFBJWEkuQ2FudmFzUmVuZGVyZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuICAgICAgICAgICIsImltcG9ydCB7TG9hZGVyfSBmcm9tIFwiLi4vLi4vbGliL0xvYWRlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcEZpbGVLZXkoYmFzZVVybDogc3RyaW5nLCBtYXBJZDogc3RyaW5nLCBzZWN0aW9uSW5kZXg/OiBudW1iZXIpIHtcclxuICAgIGlmKHNlY3Rpb25JbmRleCAhPT0gdW5kZWZpbmVkICYmIHNlY3Rpb25JbmRleCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS8ke21hcElkfS9zXyR7c2VjdGlvbkluZGV4fWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS8ke21hcElkfS9tYXBgXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBNZXRhUGF0aChiYXNlVXJsOiBzdHJpbmcsIG1hcElkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBgJHtiYXNlVXJsfS8ke21hcElkfS9tZXRhYFxyXG59IiwiaW1wb3J0IHtNYXBNZXRhRGF0YSwgVGlsZVNwcml0ZSwgV29ybGRMZXZlbFNlY3Rpb25EYXRhLCBXb3JsZFNlY3Rpb25Db250YWluZXJzfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQge1RpbGVNYW5hZ2VyfSBmcm9tIFwiLi9UaWxlTWFuYWdlclwiO1xyXG5pbXBvcnQge0NvbGxpZGVyRGF0YSwgUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRX0gZnJvbSBcIi4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmltcG9ydCB7QWJzdHJhY3RUZXh0dXJlQXRsYXN9IGZyb20gXCIuL1RleHR1cmVBdGxhc3Nlcy9TZWN0aW9uVGV4dHVyZUF0bGFzL0Jhc2VUZXh0dXJlQXRsYXNcIjtcclxuaW1wb3J0IHtWaXNpYmlsaXR5U3RhdGVzfSBmcm9tIFwiLi9DaHVua01hbmFnZXJcIjtcclxuaW1wb3J0IHtEZWNvZGVkTWFwQ2h1bmtEYXRhLCBEZWNvZGVkTWFwTWV0YURhdGF9IGZyb20gXCIuLi8uLi8uLi9FbmNvZGVyL3NyYy9EZWNvZGVyXCI7XHJcbmltcG9ydCB7Y2FsY3VsYXRlT2Zmc2V0c30gZnJvbSBcIi4uLy4uLy4uL0VuY29kZXIvc3JjL3V0aWxzXCI7XHJcbmltcG9ydCB7RGlzcGxheU9iamVjdH0gZnJvbSBcInBpeGkuanNcIjtcclxuY29uc3QgIEZMSVBQRURfSE9SSVpPTlRBTExZX0ZMQUcgPSAweDQwMDAwMDAwO1xyXG5jb25zdCAgRkxJUFBFRF9WRVJUSUNBTExZX0ZMQUcgICA9IDB4MjAwMDAwMDA7XHJcbmNvbnN0ICBGTElQUEVEX0RJQUdPTkFMTFlfRkxBRyAgID0gMHgxMDAwMDAwMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JsZENodW5rIGV4dGVuZHMgUElYSS51dGlscy5FdmVudEVtaXR0ZXIge1xyXG4gICAgLy8gMmQgYXJyYXkgW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF1cclxuICAgIHByaXZhdGUgY29sbGlkZXJzOiBBcnJheTxDb2xsaWRlckRhdGE+ID0gW107XHJcbiAgICBwcml2YXRlIHN1YkNodW5rQ29udGFpbmVyczogQXJyYXk8QXJyYXk8UElYSS5Db250YWluZXI+PiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdWJDaHVua1JlbmRlcmVkU3ByaXRlczogQXJyYXk8QXJyYXk8UElYSS5TcHJpdGU+PiA9IFtdO1xyXG4gICAgcHVibGljIGxheWVyUmVuZGVyZWRDb250YWluZXJzOiBBcnJheTxQSVhJLkNvbnRhaW5lcj4gPSBbXTtcclxuICAgIGlzQmF0Y2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdmlzaWJsZUNodW5rczogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlZDogYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IG1hcE1ldGFEYXRhOiBEZWNvZGVkTWFwTWV0YURhdGE7XHJcbiAgICByZWFkb25seSBjaHVua0RhdGE6IERlY29kZWRNYXBDaHVua0RhdGE7XHJcbiAgICByZWFkb25seSB0aWxlTWFuYWdlcjogVGlsZU1hbmFnZXI7XHJcbiAgICByZWFkb25seSBjb250YWluZXJQb29sOiBBcnJheTxQSVhJLkNvbnRhaW5lcj47XHJcbiAgICBwcml2YXRlIHNwcml0ZVBvb2wgOiBBcnJheTxQSVhJLlNwcml0ZT4gPSBbXTtcclxuICAgIHByaXZhdGUgaW5pdEJhdGNoZXM6IEFycmF5PCgpID0+IHZvaWQ+ID0gW107XHJcbiAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZWRTdWJDaHVua3M6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdXNpbmdCYWtlZFJlbmRlclRleHR1cmVzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGJha2luZ09uVGhlR286IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHB1YmxpYyBoaWRkZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHJlYWRvbmx5IHRleHR1cmVBdGxhc3Nlc0J5TGF5ZXJJbmRleDogQXJyYXk8QWJzdHJhY3RUZXh0dXJlQXRsYXM+OyAvLyBhcnJheSBieSBsYXllclxyXG4gICAgcHJpdmF0ZSBsYXllckNvbnRhaW5lcnM6IEFycmF5PFBJWEkuQ29udGFpbmVyPiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgc3ViQ2h1bmtSb3dzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN1YkNodW5rQ29sdW1uczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBtYXhTdWJDaHVua3M6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IHBhcmVudFN0YXJ0aW5nU3ViQ2h1bmtJbmRleDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgcGFyZW50RW5kaW5nU3ViQ2h1bmtJbmRleDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgd29ybGRTdWJDaHVua0luZGV4ZXM6IHtbd29ybGRTdWJJZHg6IG51bWJlcl06IG51bWJlciB9ID0ge307XHJcbiAgICByZWFkb25seSBsb2NhbENodW5rSW5kZXhlc0FycmF5OiBBcnJheTxudW1iZXI+ID0gW107XHJcbiAgICByZWFkb25seSBsb2NhbFRvV29ybGRTdWJDaHVua0luZGV4ZXM6IHtbbG9jYWxTdWJJZHg6IG51bWJlcl06IG51bWJlciB9ID0ge307XHJcblxyXG4gICAgcmVhZG9ubHkgc3ViQ2h1bmtXIDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgc3ViQ2h1bmtIIDogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IobWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSwgY2h1bmtEYXRhOiBEZWNvZGVkTWFwQ2h1bmtEYXRhLCB0ZXh0dXJlQXRsYXNzZXNCeUxheWVySW5kZXg6IEFycmF5PEFic3RyYWN0VGV4dHVyZUF0bGFzPiwgY29udGFpbmVyUG9vbDogQXJyYXk8UElYSS5Db250YWluZXI+LCB0aWxlTWFuYWdlcjogVGlsZU1hbmFnZXIsIHNlY3Rpb25MYXllclRleHR1cmVzPzogQXJyYXk8UElYSS5UZXh0dXJlPikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5tYXBNZXRhRGF0YSA9IG1ldGFEYXRhO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZUF0bGFzc2VzQnlMYXllckluZGV4ID0gdGV4dHVyZUF0bGFzc2VzQnlMYXllckluZGV4O1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCBzdWJDaHVua1cgPSBtZXRhRGF0YS5zdWJDaHVua1cgfHwgUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY29uc3Qgc3ViQ2h1bmtIID0gbWV0YURhdGEuc3ViQ2h1bmtIIHx8IFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkU7XHJcbiAgICAgICAgdGhpcy5zdWJDaHVua1cgPSBzdWJDaHVua1c7XHJcbiAgICAgICAgdGhpcy5zdWJDaHVua0ggPSBzdWJDaHVua0g7XHJcbiAgICAgICAgLy9UT0RPOiBtZXRhZGF0YSBjaHVua1cgaXMgbm90IHBvcHVsYXRlZC4uLlxyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtDb2x1bW5zID0gTWF0aC5jZWlsKGNodW5rRGF0YS53aWR0aC9zdWJDaHVua1cpO1xyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtSb3dzID0gTWF0aC5jZWlsKGNodW5rRGF0YS5oZWlnaHQvc3ViQ2h1bmtIKTtcclxuICAgICAgICB0aGlzLm1heFN1YkNodW5rcyA9IHRoaXMuc3ViQ2h1bmtSb3dzICogdGhpcy5zdWJDaHVua0NvbHVtbnM7XHJcbiAgICAgICAgdGhpcy5jaHVua0RhdGEgPSBjaHVua0RhdGE7XHJcblxyXG4gICAgICAgIGNvbnN0IHdvcmxkU3ViQ2h1bmtDb2xzID0gTWF0aC5jZWlsKHRoaXMubWFwTWV0YURhdGEubWFwVyAvIHN1YkNodW5rVyk7XHJcbiAgICAgICAgY29uc3QgY29sdW1uID0gTWF0aC5mbG9vcih0aGlzLmNodW5rRGF0YS54IC8gc3ViQ2h1bmtXKTtcclxuICAgICAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKHRoaXMuY2h1bmtEYXRhLnkgLyBzdWJDaHVua0gpO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudFN0YXJ0aW5nU3ViQ2h1bmtJbmRleCA9IHJvdyAqIHdvcmxkU3ViQ2h1bmtDb2xzICsgY29sdW1uO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnN1YkNodW5rQ29sdW1uczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB4ID0gKGkgKyBjb2x1bW4pO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5zdWJDaHVua1Jvd3M7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHkgPSAoaiArIHJvdyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JsZEluZGV4ID0geSAqIHdvcmxkU3ViQ2h1bmtDb2xzICsgeDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsID0gIGogKiB0aGlzLnN1YkNodW5rQ29sdW1ucyArIGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmxkU3ViQ2h1bmtJbmRleGVzW3dvcmxkSW5kZXhdID0gbG9jYWw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVG9Xb3JsZFN1YkNodW5rSW5kZXhlc1tsb2NhbF0gPSB3b3JsZEluZGV4XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5ID0gT2JqZWN0LmtleXMoKHRoaXMubG9jYWxUb1dvcmxkU3ViQ2h1bmtJbmRleGVzKSkubWFwKHBhcnNlSW50KS5zb3J0KChhLCBiKSA9PiBhLWIpO1xyXG4gICAgICAgIHRoaXMudGlsZU1hbmFnZXIgPSB0aWxlTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lclBvb2wgPSBjb250YWluZXJQb29sO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiYWtlKHJlbmRlcmVyPykgOiBBcnJheTxQSVhJLlRleHR1cmU+IHtcclxuICAgICAgICAvL3RoaXMuc2V0dXBTdWJDaHVua0NvbnRhaW5lcnMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGF5ZXJUZXh0dXJlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGxheWVyQ29udGFpbmVycyA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGF5ZXJDb250YWluZXJzLnB1c2gobmV3IFBJWEkuQ29udGFpbmVyKCkpO1xyXG4gICAgICAvLyAgICAgIGxheWVyVGV4dHVyZXMucHVzaChQSVhJLlJlbmRlclRleHR1cmUuY3JlYXRlKHRoaXMubWFwTWV0YURhdGEuc2VjdGlvbk1ldGFEYXRhLnNlY3Rpb25XaWR0aCwgdGhpcy5tYXBNZXRhRGF0YS5zZWN0aW9uTWV0YURhdGEuc2VjdGlvbkhlaWdodCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGF5ZXJDb250YWluZXJzLmZvckVhY2goKGMsIGkpID0+IHtcclxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKGMsIGxheWVyVGV4dHVyZXNbaV0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy90aGlzLmNsZWFyVGlsZUNvbnRhaW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gbGF5ZXJUZXh0dXJlcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9yZGVyU3ViQ2h1bmtzQnlEaXN0YW5jZURlc2NlbmRpbmcocDogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSA6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIGNvbnN0IG8gOiBBcnJheTx7IGk6IG51bWJlciwgZDogbnVtYmVyIH0+ID0gbmV3IEFycmF5KHRoaXMubWF4U3ViQ2h1bmtzKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXhTdWJDaHVua3M7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzWCA9IHRoaXMuY2h1bmtEYXRhLnggKyAoKGkgJSB0aGlzLnN1YkNodW5rQ29sdW1ucykgKiBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFKTtcclxuICAgICAgICAgICAgY29uc3Qgc1kgPSB0aGlzLmNodW5rRGF0YS55ICsgKE1hdGguZmxvb3IoaSAvIHRoaXMuc3ViQ2h1bmtDb2x1bW5zKSAqIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUpO1xyXG4gICAgICAgICAgICBvW2ldID0ge1xyXG4gICAgICAgICAgICAgICAgaSxcclxuICAgICAgICAgICAgICAgIGQ6IE1hdGguc3FydChNYXRoLnBvdygoc1ggLXAueCksIDIpICsgTWF0aC5wb3coKHNZIC0gcC55KSwgMikpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG8uc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5kIC0gYi5kXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG8ubWFwKG8gPT4gby5pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW50ZXJ1cHRCYXRjaCgpIDogQXJyYXk8QXJyYXk8UElYSS5TcHJpdGUgfCBQSVhJLkNvbnRhaW5lcj4+IHtcclxuICAgICAgICBjb25zdCBjID0gW107XHJcbiAgICAgICAgdGhpcy5pbml0QmF0Y2hlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuaXNCYXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFN1YkNodW5rczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGNbaV0gPSB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW2ldXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgIGNbaV0gPSB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tpXVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUaWxlc1RvU3ViQ2h1bmtDb250YWluZXIoaSk7XHJcbiAgICAgICAgICAgICAgICBjW2ldID0gdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbaV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdFRpbGVMYXllcnMoKSA6IEFycmF5PEFycmF5PFBJWEkuQ29udGFpbmVyPj4ge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFN1YkNodW5rczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGlsZXNUb1N1YkNodW5rQ29udGFpbmVyKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhcnJheUJ5TGF5ZXJzID0gbmV3IEFycmF5KHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYXJyYXlCeUxheWVyc1tpXSA9IG5ldyBBcnJheSh0aGlzLm1heFN1YkNodW5rcyk7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLm1heFN1YkNodW5rczsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycmF5QnlMYXllcnNbaV1bal0gPSB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tqXVtpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXlCeUxheWVycztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkZXNjZW5kaW5nIG9yZGVyIHNvIHdoZW4gd2UgZG8gcG9wKCkgd2UgZ2V0IHRoZSBuZXh0IGNsb3Nlc3Qgc2VjdGlvblxyXG4gICAgcHVibGljIGluaXRCYXRjaFJlbmRlcihwbGF5ZXJQb3NpdGlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSB7XHJcbiAgICAgICAgY29uc3QgZGVzY0Rpc3RhbmNlT3JkZXJlZCA9IHRoaXMub3JkZXJTdWJDaHVua3NCeURpc3RhbmNlRGVzY2VuZGluZyhwbGF5ZXJQb3NpdGlvbik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNCYXRjaGluZykgdGhyb3cgbmV3IEVycm9yKCdBbHJlYWRpbmcgYmF0Y2hpbmcuLi4nKTtcclxuICAgICAgICB0aGlzLmlzQmF0Y2hpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc2NEaXN0YW5jZU9yZGVyZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY0lkeCA9IGRlc2NEaXN0YW5jZU9yZGVyZWRbaV07XHJcbiAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2NJZHhdID0gbmV3IEFycmF5KHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgcHVibGljIHJlbmRlclN1YkNodW5rTGF5ZXIoc3Vic2VjdGlvbkluZGV4OiBudW1iZXIsIGxheWVySW5kZXg6IG51bWJlciwgeD86IG51bWJlciwgeT86IG51bWJlcikgOiBQSVhJLlNwcml0ZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRCYXRjaGVzLnB1c2godGhpcy5yZW5kZXJTdWJDaHVua0xheWVyLmJpbmQodGhpcywgY0lkeCwgaiwgbnVsbCwgbnVsbCwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuY2h1bmtEYXRhLmxheWVyc1tqXT8udGlsZUxheWVycykgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMuY2h1bmtEYXRhLmxheWVyc1tqXS50aWxlTGF5ZXJzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IGV2ZXJ5IHN1YiBzZWN0aW9uIGxheWVyIGhhcyBhbGwgdGlsZSBsYXllcnMuLiBzb21lIGhhdmUgbm9uZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmNodW5rRGF0YS5sYXllcnNbal0udGlsZUxheWVyc1trXSkgfHwgIXRoaXMuY2h1bmtEYXRhLmxheWVyc1tqXS50aWxlTGF5ZXJzW2tdLnN1YkNodW5rc1tjSWR4XSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgcHVibGljIHNldHVwU3ViQ2h1bmtMYXllclRpbGVMYXllclNwcml0ZXModGlsZUxheWVySW5kZXg6IG51bWJlciwgbGF5ZXJJbmRleDogbnVtYmVyLCBzdWJzZWN0aW9uSW5kZXg6IG51bWJlciwgeD86IG51bWJlciwgeT86IG51bWJlcikgOiBBcnJheTxUaWxlU3ByaXRlPiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0QmF0Y2hlcy5wdXNoKHRoaXMuYWRkU2l6ZWRUaWxlc1RvU3ViQ2h1bmtMYXllckNvbnRhaW5lci5iaW5kKHRoaXMsIGssIGosIGNJZHgsIG51bGwsIG51bGwsIHRydWUpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRCYXRjaGVzLnB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbY0lkeF0gPSBuZXcgQXJyYXkodGhpcy5tYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW2NJZHhdID0gbmV3IEFycmF5KHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tjSWR4XVtqXSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKlxyXG4gICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLm1hcE1ldGFEYXRhLnRvdGFsTGF5ZXJzOyBqKyspIHtcclxuICAgICAgICAgICAgdGhpcy5sYXllclJlbmRlcmVkQ29udGFpbmVyc1tqXSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICB0aGlzLmxheWVyUmVuZGVyZWRDb250YWluZXJzW2pdLnggPSB0aGlzLnNlY3Rpb25EYXRhLng7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJSZW5kZXJlZENvbnRhaW5lcnNbal0ueSA9IHRoaXMuc2VjdGlvbkRhdGEueTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAqL1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmb3JjZUJhdGNoZXMoKSB7XHJcbiAgICAgICAgaWYodGhpcy5pbml0QmF0Y2hlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIC8vICAgY29uc29sZS50aW1lKCdmb3JjZWQnKVxyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSB0aGlzLmluaXRCYXRjaGVzLmxlbmd0aC0xOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0QmF0Y2hlc1tpXSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdmb3JjZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEJhdGNoZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmlzQmF0Y2hpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV4dEJhdGNoKGFjYz0wKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IGIgPSB0aGlzLmluaXRCYXRjaGVzLnBvcCgpO1xyXG4gICAgICAgIGlmKGIpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICAgICAgYigpO1xyXG4gICAgICAgICAgICBpZigoYWNjICs9ICgocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkpKSA8IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRCYXRjaChhY2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQmF0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5pbml0QmF0Y2hlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnN1YkNodW5rQ29udGFpbmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV0mJnRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV1bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVBdGxhc3Nlc0J5TGF5ZXJJbmRleFtqXS5yZW1vdmVDaHVua0Zyb21UZXh0dXJlKHRoaXMubG9jYWxUb1dvcmxkU3ViQ2h1bmtJbmRleGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tpXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihzLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzLnBhcmVudC5yZW1vdmVDaGlsZChzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcy50ZXh0dXJlLmRlc3Ryb3koZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldICYmIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSh0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tpXVtqXS5jaGlsZHJlbikuZm9yRWFjaCgoYzogVGlsZVNwcml0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLnJlbW92ZUZyb21NYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tpXVtqXS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdWJDaHVua0NvbnRhaW5lcnMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFN1YkNodW5rczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldICYmIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbaV1bal0udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV0gJiYgdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tpXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV1bal0udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93KHZpZXdSZWN0PzogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSwgZFg/OiBudW1iZXIsIGRZPzogbnVtYmVyKSA6ICBBcnJheTxBcnJheTxQSVhJLlNwcml0ZT4+IHtcclxuICAgICAgICBpZih0aGlzLmhpZGRlbikge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXhTdWJDaHVua3M7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldICYmIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW2ldW2pdLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tpXSAmJiB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbaV1bal0udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYodGhpcy5pc0JhdGNoaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlQmF0Y2hlcygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubWF4U3ViQ2h1bmtzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN1YkNodW5rKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQmF0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiYWtlU3ViQ2h1bmsoc3Vic2VjdGlvbkluZGV4OiBudW1iZXIpIDogQXJyYXk8UElYSS5SZW5kZXJUZXh0dXJlPiB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVWaXNpYmxlU3ViQ2h1bmtzKHN1YnNlY3Rpb25JbmRleGVzOiBBcnJheTxudW1iZXI+KSB7XHJcbiAgICAgICAgY29uc3QgYWRkZWQgPSB7fTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3Vic2VjdGlvbkluZGV4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYoc3Vic2VjdGlvbkluZGV4ZXNbaV0gaW4gdGhpcy53b3JsZFN1YkNodW5rSW5kZXhlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVsU3ViSWR4ID0gdGhpcy53b3JsZFN1YkNodW5rSW5kZXhlc1tzdWJzZWN0aW9uSW5kZXhlc1tpXV07XHJcbiAgICAgICAgICAgICAgICBhZGRlZFtyZWxTdWJJZHhdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW3JlbFN1YklkeF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5tYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2coJ05PVCBSRU5ERVI6IGdvaW5nIHRvIGF0dGVtcHQgdG8gc2hvdyB0aGUgbGF5ZXIgYXQgcmVsIHN1YiBpZHgnLCByZWxTdWJJZHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tyZWxTdWJJZHhdW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOT1QgUkVOREVSOiBnb2luZyB0byBhdHRlbXB0IHRvIHNob3cgdGhlIGxheWVyIHRpbGUgJywgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tyZWxTdWJJZHhdW2pdLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tyZWxTdWJJZHhdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVI6IGdvaW5nIHRvIGF0dGVtcHQgdG8gc2hvdyB0aGUgbGF5ZXIgYXQgcmVsIHN1YiBpZHgnLCByZWxTdWJJZHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW3JlbFN1YklkeF1bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBjb25zb2xlLmxvZygnUkVOREVSRTogZ29pbmcgdG8gYXR0ZW1wdCB0byBzaG93IHRoZSBsYXllciB0aWxlICcsIHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbcmVsU3ViSWR4XVtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW3JlbFN1YklkeF1bal0udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubG9jYWxDaHVua0luZGV4ZXNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZighYWRkZWRbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXSkge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgIGNvbnNvbGUubG9nKCdOT1QgUkVOREVSOiBnb2luZyB0byBhdHRlbXB0IHRvIHNob3cgdGhlIGxheWVyIGF0IHJlbCBzdWIgaWR4JywgcmVsU3ViSWR4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICBjb25zb2xlLmxvZygnTk9UIFJFTkRFUjogZ29pbmcgdG8gYXR0ZW1wdCB0byBzaG93IHRoZSBsYXllciB0aWxlICcsIGopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXVtqXS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW3RoaXMubG9jYWxDaHVua0luZGV4ZXNBcnJheVtpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5tYXBNZXRhRGF0YS5sYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgY29uc29sZS5sb2coJ1JFTkRFUjogZ29pbmcgdG8gYXR0ZW1wdCB0byBzaG93IHRoZSBsYXllciBhdCByZWwgc3ViIGlkeCcsIHJlbFN1YklkeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIGNvbnNvbGUubG9nKCdSRU5ERVJFOiBnb2luZyB0byBhdHRlbXB0IHRvIHNob3cgdGhlIGxheWVyIHRpbGUgJywgdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tyZWxTdWJJZHhdW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbdGhpcy5sb2NhbENodW5rSW5kZXhlc0FycmF5W2ldXVtqXS52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlclN1YkNodW5rTGF5ZXIoc3Vic2VjdGlvbkluZGV4OiBudW1iZXIsIGxheWVySW5kZXg6IG51bWJlciwgeD86IG51bWJlciwgeT86IG51bWJlciwgaXNCYXRjaD1mYWxzZSwgY2FjaGVUZXh0dXJlcz10cnVlKSA6IFBJWEkuU3ByaXRlIHtcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ3JlbmRlcmluZyBzdWIgc2VjdGlvbicsIHN1YnNlY3Rpb25JbmRleCwgJ2xheWVyJywgbGF5ZXJJbmRleClcclxuICAgICAgICBpZihpc0JhdGNoKSB7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ0dPVCBCQVRDSCBSRU5ERVIgU1VCISEhJywgbGF5ZXJJbmRleCwgc3Vic2VjdGlvbkluZGV4KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF0pIHtcclxuICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tzdWJzZWN0aW9uSW5kZXhdW2xheWVySW5kZXhdO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FkZC1zdWJjaHVuay1sYXllci1zcHJpdGUnLCB7IGNodW5rSW5kZXg6IHRoaXMuY2h1bmtEYXRhLmluZGV4LCBsYXllckluZGV4LCBzcHJpdGUsIHN1YnNlY3Rpb25JbmRleCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNwcml0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXRoaXMuc3ViQ2h1bmtDb250YWluZXJzW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF0pIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRUaWxlc1RvU3ViQ2h1bmtMYXllckNvbnRhaW5lcihsYXllckluZGV4LCBzdWJzZWN0aW9uSW5kZXgsIHgsIHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjID0gdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbc3Vic2VjdGlvbkluZGV4XVtsYXllckluZGV4XTtcclxuICAgICAgICBpZighYyB8fCAhYy5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHg6IG1pblgsIHk6IG1pblkgfSA9IGMuZ2V0TG9jYWxCb3VuZHMoKTtcclxuICAgIC8vICAgIGNvbnNvbGUuZXJyb3IoJ21pbnhtaW55JywgeyBtaW5YLCBtaW5ZIH0pO1xyXG4gICAgICAgIHggPSB0aGlzLmNodW5rRGF0YS54ICsgKChzdWJzZWN0aW9uSW5kZXggJSB0aGlzLnN1YkNodW5rQ29sdW1ucykgKiBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFKTtcclxuICAgICAgICB5ID0gdGhpcy5jaHVua0RhdGEueSArIChNYXRoLmZsb29yKHN1YnNlY3Rpb25JbmRleCAvIHRoaXMuc3ViQ2h1bmtDb2x1bW5zKSAqIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUpO1xyXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSB0aGlzLnRleHR1cmVBdGxhc3Nlc0J5TGF5ZXJJbmRleFtsYXllckluZGV4XS5yZW5kZXJTdWJDaHVua0xheWVyR3JvdXAodGhpcy5sb2NhbFRvV29ybGRTdWJDaHVua0luZGV4ZXNbc3Vic2VjdGlvbkluZGV4XSwgYyk7XHJcbiAgICAgICAgY29uc3Qgc3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKCk7XHJcbiAgICAgICAgc3ByaXRlLnRleHR1cmUgPSB0ZXh0dXJlO1xyXG5cclxuICAgICAgICB0aGlzLnN1YkNodW5rUmVuZGVyZWRTcHJpdGVzW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF0gPSBzcHJpdGU7XHJcbiAgICAgICAgaWYoaXNCYXRjaCkge1xyXG4gICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCcyMjIyMjIyMjIyMjIyMjIyMjIyR09UIEJBVENIIFJFTkRFUiBTVUIhISEnLCBsYXllckluZGV4LCBzdWJzZWN0aW9uSW5kZXgpXHJcbiAgICAgICAgfVxyXG4gICAgLy8gICAgY29uc29sZS50aW1lKCdjbGVhbicpXHJcbiAgICAgICAgLy9UT0RPOiBzbyB0aGlzIGlzIHdoeSBzaGl0IGlzIGludmlzaWJsZS4gaXRzIG5vdCByZW5kZXJpbmcgY29ycmVjdGx5LlxyXG4gICAgICAgIEFycmF5LmZyb20oYy5jaGlsZHJlbikuZm9yRWFjaCgoYzI6IFRpbGVTcHJpdGUsIHRpKSA9PiB7XHJcbiAgICAgICAgICAgIGMyLnJlbW92ZUZyb21NYXAoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjLmRlc3Ryb3koZmFsc2UpO1xyXG5cclxuICAgLy8gICAgIGRlbGV0ZSB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdW2xheWVySW5kZXhdO1xyXG4gICAgICAvLyAgY29uc29sZS50aW1lRW5kKCdjbGVhbicpXHJcblxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnd29ybGQgcG9zaXRpb24gYmVjYW1lJywgeCwgeSk7XHJcbiAgICAvLyAgICBzcHJpdGVbJ3dvcmxkWCddID0geDtcclxuICAgIC8vICAgIHNwcml0ZVsnd29ybGRZJ10gPSB5O1xyXG5cclxuICAgICAgICBzcHJpdGUueCA9IHggKyBtaW5YO1xyXG4gICAgICAgIHNwcml0ZS55ID0geSArIG1pblk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgc3ByaXRlLnZpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVuZGVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gbm93O1xyXG4gICAgICAgIGlmKHJlbmRlclRpbWUgPiAxMCkge1xyXG4gICAgICAgICAvLyAgIGNvbnNvbGUud2FybignTG9uZyByZW5kZXIgc2VjdGlvbiBsYXllciBmb3Igc3Vic2VjdGlvbiBpbmRleCcsIHN1YnNlY3Rpb25JbmRleCwgJ2xheWVyIGluZGV4JywgbGF5ZXJJbmRleCwgJ3RpbWUgd2FzJywgcmVuZGVyVGltZSArICdtcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXQoJ2FkZC1zdWJjaHVuay1sYXllci1zcHJpdGUnLCB7IGNodW5rSW5kZXg6IHRoaXMuY2h1bmtEYXRhLmluZGV4LCBsYXllckluZGV4LCBzcHJpdGUsIHN1YnNlY3Rpb25JbmRleCB9KTtcclxuICAgICAgICByZXR1cm4gc3ByaXRlXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlclN1YkNodW5rKHN1YnNlY3Rpb25JbmRleDogbnVtYmVyLCBjYWNoZVRleHR1cmVzPXRydWUpIDogQXJyYXk8UElYSS5TcHJpdGU+IHtcclxuICAgICAgICAvL1RPRE86IGFjdHVhbGx5IGltcGxlbWVudCBmb3IgbGF5ZXIgZ3JvdXBpbmcuXHJcbiAgICAgICAgY29uc3QgbGF5ZXJHcm91cHMgPSAzO1xyXG4gICAgICAgIHRoaXMuZm9yY2VCYXRjaGVzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLmNodW5rRGF0YS54ICsgKChzdWJzZWN0aW9uSW5kZXggJSB0aGlzLnN1YkNodW5rQ29sdW1ucykgKiBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFKTtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy5jaHVua0RhdGEueSArIChNYXRoLmZsb29yKHN1YnNlY3Rpb25JbmRleCAvIHRoaXMuc3ViQ2h1bmtDb2x1bW5zKSAqIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUpO1xyXG4gICAgIC8vICAgY29uc29sZS5lcnJvcignc3ViIHNlY3Rpb24nLCBzdWJzZWN0aW9uSW5kZXgsICd4JywgeCwgJ3knLCB5KTtcclxuICAgICAgICBpZighdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tzdWJzZWN0aW9uSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbc3Vic2VjdGlvbkluZGV4XSA9IG5ldyBBcnJheSh0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGlsZXNUb1N1YkNodW5rQ29udGFpbmVyKHN1YnNlY3Rpb25JbmRleCk7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcE1ldGFEYXRhLmxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3ViQ2h1bmtMYXllcihzdWJzZWN0aW9uSW5kZXgsIGksIHgsIHksIGNhY2hlVGV4dHVyZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubWFwTWV0YURhdGEubGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgIXRoaXMuc3ViQ2h1bmtSZW5kZXJlZFNwcml0ZXNbc3Vic2VjdGlvbkluZGV4XVtpXSAmJiB0aGlzLnJlbmRlclN1YkNodW5rTGF5ZXIoc3Vic2VjdGlvbkluZGV4LCBpLCB4LCB5LCBjYWNoZVRleHR1cmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zdWJDaHVua1JlbmRlcmVkU3ByaXRlc1tzdWJzZWN0aW9uSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRTaXplZFRpbGVzVG9TdWJDaHVua0xheWVyQ29udGFpbmVyKHRpbGVMYXllckluZGV4OiBudW1iZXIsIGxheWVySW5kZXg6IG51bWJlciwgc3Vic2VjdGlvbkluZGV4OiBudW1iZXIsIHg/OiBudW1iZXIsIHk/OiBudW1iZXIsIGlzQmF0Y2g9ZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBsYXllcnMgPSB0aGlzLmNodW5rRGF0YS5sYXllcnM7XHJcbiAgICAgICAgY29uc3Qge2xheWVySWQsIGNvbGxpZGVycywgdGlsZUxheWVycywgaW1hZ2VzfSA9IGxheWVyc1tsYXllckluZGV4XTtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGNvbnN0IHJhbmRvbXMgPSAgWzMwNzQsIDMwNzUsIDMwNzZdO1xyXG4gICAgICAgIGlmKHRpbGVMYXllcnNbdGlsZUxheWVySW5kZXhdICYmICF0aWxlTGF5ZXJzW3RpbGVMYXllckluZGV4XS5zaXplS2V5LmluY2x1ZGVzKCcxNicpKSB7XHJcbiAgICAgICAgICAgIHRpbGVMYXllcnNbdGlsZUxheWVySW5kZXhdLnN1YkNodW5rcyA9IG5ldyBBcnJheSh0aGlzLm1heFN1YkNodW5rcykuZmlsbChuZXcgQXJyYXkoMTYpLmZpbGwocmFuZG9tc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByYW5kb21zLmxlbmd0aCldKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBpZighdGlsZUxheWVyc1t0aWxlTGF5ZXJJbmRleF0gfHwgIXRpbGVMYXllcnNbdGlsZUxheWVySW5kZXhdLnN1YkNodW5rc1tzdWJzZWN0aW9uSW5kZXhdKSByZXR1cm47XHJcbiAgICAgICAgLy8gaWYgd2Ugd2FudCBjaGlsZHJlbiB0aWxlcyB0byBoYXZlIGNvcnJlY3Qgd29ybGQgcG9zIHdlIHVzZSB0aGlzXHJcbiAgICAgICAgeCA9ICgoc3Vic2VjdGlvbkluZGV4ICUgdGhpcy5zdWJDaHVua0NvbHVtbnMpICogUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRSk7XHJcbiAgICAgICAgeSA9IChNYXRoLmZsb29yKHN1YnNlY3Rpb25JbmRleCAvIHRoaXMuc3ViQ2h1bmtDb2x1bW5zKSAqIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUpO1xyXG4gICAgICAgIGNvbnN0IHN1YkNodW5rVGlsZUNvbnRhaW5lciA9IHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF07XHJcbiAgICAgICAgaWYoIXN1YkNodW5rVGlsZUNvbnRhaW5lcikge1xyXG4gICAgICAgICAgLy8gIGNvbnNvbGUuZXJyb3IoJ3RoZSBzZWN0aW9uIGluZGV4IHdhcycsIHRoaXMuc2VjdGlvbkRhdGEuaW5kZXgsICd0aGUgc3ViIHNlY3Rpb24gaW5kZXggd2FzJywgc3Vic2VjdGlvbkluZGV4LCAndGhlIGxheWVyIGluZGV4IHdhcycsIGxheWVySW5kZXgpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBoYXZlIGNvbnRhaW5lciBhdCB0aGlzIHBvaW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjb25zdCB7dGlsZVdpZHRoLCB0aWxlSGVpZ2h0LCB0aWxlU2l6ZVNlcSwgc3ViQ2h1bmtzLCBtYXhUaWxlSWQsIHN0YXJ0T2Zmc2V0c30gPSB0aWxlTGF5ZXJzW3RpbGVMYXllckluZGV4XTtcclxuICAgICAgICBjb25zdCBzdWJDaHVuayA9IHN1YkNodW5rc1tzdWJzZWN0aW9uSW5kZXhdXHJcbiAgICAgICAgLy8gZmlyc3QgMiBlbGVtZW50cyBvZiBhIHN1YmNodW5rIGFyZSB0aGUgeCBhbmQgeSBvZmZzZXQuXHJcbiAgICAgICAgbGV0IGluY3JYID0gc3ViQ2h1bmtbMF07XHJcbiAgICAgICAgbGV0IGluY3JZID0gc3ViQ2h1bmtbMV07XHJcbiAgICAgICAgZm9yKGxldCBqID0gMjsgaiA8IHN1YkNodW5rc1tzdWJzZWN0aW9uSW5kZXhdLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBlbmNvZGVkSWQgPSBzdWJDaHVua3Nbc3Vic2VjdGlvbkluZGV4XVtqXTtcclxuICAgICAgICAgICAgbGV0IHRpbGVJZCA9IGVuY29kZWRJZDtcclxuICAgICAgICAgICAgaWYoZW5jb2RlZElkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlIDogVGlsZVNwcml0ZTtcclxuICAgICAgICAgICAgICAgIC8vVE9ETyBtYXhUaWxlSWQgaXNudCBzZXQgZnJvbSBlZGl0b3IuXHJcbiAgICAgICAgICAgICAgICBpZihlbmNvZGVkSWQgPiBtYXhUaWxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmxpcEhvciA9ICEhKGVuY29kZWRJZCAmIDB4NDAwMDAwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmbGlwVmVyID0gISEoZW5jb2RlZElkICYgMHgyMDAwMDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZsaXBEaWFnID0gISEoZW5jb2RlZElkICYgMHgxMDAwMDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUlkICY9IH4oRkxJUFBFRF9IT1JJWk9OVEFMTFlfRkxBRyB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZMSVBQRURfVkVSVElDQUxMWV9GTEFHIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRkxJUFBFRF9ESUFHT05BTExZX0ZMQUcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUgPSB0aGlzLnRpbGVNYW5hZ2VyLmdldFRpbGUodGlsZVNpemVTZXEsIHRpbGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpdm90WSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpdm90WCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHhTY2FsZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHlTY2FsZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmxpcFZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5U2NhbGUgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGl2b3RZID0gdGlsZUhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihmbGlwSG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhTY2FsZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaXZvdFggPSB0aWxlV2lkdGhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmxpcERpYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLnJvdGF0aW9uID0gOTAgKiAoTWF0aC5QSSAvIDE4MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFmbGlwSG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXZvdFggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZsaXBWZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpdm90WSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXZvdFkgPSB0aWxlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNwcml0ZS5jb2xsaWRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3ByaXRlLmNvbGxpZGVycyA9IHJvdGF0ZUNvbGxpZGVycyhzcHJpdGUuY29sbGlkZXJzLCApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUgPSB0aGlzLnRpbGVNYW5hZ2VyLmdldFRpbGUodGlsZVNpemVTZXEsIGVuY29kZWRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3ByaXRlLnggPSBpbmNyWDtcclxuICAgICAgICAgICAgICAgIHNwcml0ZS55ID0gaW5jclk7XHJcbiAgICAgICAgICAgICAgICBzdWJDaHVua1RpbGVDb250YWluZXIuYWRkQ2hpbGQoc3ByaXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jaHVua0RhdGEuaW5kZXggPT09IDAgJiYgc3Vic2VjdGlvbkluZGV4ID09PSA2Mykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzcHJpdGUueCB3YXMnLCBzcHJpdGUueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nwcml0ZS55IHdhcycsIHNwcml0ZS55KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGRpbmcgYXQgeCAnLCBpbmNyWClcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkaW5nIGF0IHknLCBpbmNyWSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3ByaXRlLnBhcmVudC54IHdhcycsIHNwcml0ZS5wYXJlbnQueClcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3ByaXRlLnBhcmVudC55IHdhcycsIHNwcml0ZS5wYXJlbnQueSlcclxuICAgICAgICAgICAgICAgICAgICBpZihpbmNyWCA9PT0gMTEyICYmIGluY3JZID09PSAxMTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nwcml0ZTonLCBzcHJpdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgICBzcHJpdGUud29ybGRYID0gIHggKyBpbmNyWCArIHN0YXJ0T2Zmc2V0cy54O1xyXG4gICAgICAgICAgICAgICAgLy8gICAgc3ByaXRlLndvcmxkWSA9IHkgKyBpbmNyWSArIHN0YXJ0T2Zmc2V0cy55O1xyXG4gICAgICAgICAgICAgICAgLy8gICAgc3ViQ2h1bmtUaWxlQXJyYXkucHVzaChzcHJpdGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbmNyWCArPSB0aWxlV2lkdGg7XHJcbiAgICAgICAgICAgIC8vVE9ETyB1c2UgYSBzdWJDaHVua1cgdmFsdWUuXHJcbiAgICAgICAgICAgIGlmKGluY3JYID49IFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUgfHwgaW5jclggPj0gKHRoaXMuY2h1bmtEYXRhLnggKyB0aGlzLmNodW5rRGF0YS53aWR0aCkgLSB4KSB7XHJcbiAgICAgICAgICAgICAgICBpbmNyWCA9IHN1YkNodW5rWzBdO1xyXG4gICAgICAgICAgICAgICAgaW5jclkgKz0gdGlsZUhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAvLyAgIGNvbnNvbGUubG9nKCdzdWIgY2h1bmsgdyBoIGJlY2FtZScsIHN1YkNodW5rVGlsZUNvbnRhaW5lci53aWR0aCwgc3ViQ2h1bmtUaWxlQ29udGFpbmVyLmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFRpbGVzVG9TdWJDaHVua0xheWVyQ29udGFpbmVyKGxheWVySW5kZXggOiBudW1iZXIsIHN1YnNlY3Rpb25JbmRleDogbnVtYmVyLCB4PzogbnVtYmVyLCB5PzogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gdGhpcy5jaHVua0RhdGEubGF5ZXJzO1xyXG4gICAgICAgIGxldCBsb2cgPSBsYXllckluZGV4ID09IDAgJiYgc3Vic2VjdGlvbkluZGV4ID09IDAgJiYgdGhpcy5wYXJlbnRTdGFydGluZ1N1YkNodW5rSW5kZXggPT0gMDtcclxuICAgICAgICAvLyBpZiB3ZSB3YW50IGNoaWxkcmVuIHRpbGVzIHRvIGhhdmUgY29ycmVjdCB3b3JsZCBwb3Mgd2UgdXNlIHRoaXNcclxuICAgICAgICBpZighdGhpcy5zdWJDaHVua0NvbnRhaW5lcnNbc3Vic2VjdGlvbkluZGV4XSkge1xyXG4gICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdID0gW107XHJcbiAgICAgICAgfVxyXG4gLy8gICAgICAgbG9nICYmIGNvbnNvbGUuZXJyb3IoJ3RoZSBsYXllcnNbbGF5ZXJpbmRleCB3YXMnLCBsYXllcnNbbGF5ZXJJbmRleF0sICdhY3R1YWx5IHRoaXMgd2FzJywgdGhpcyk7XHJcbiAgICAgICAgaWYoIWxheWVyc1tsYXllckluZGV4XT8udGlsZUxheWVycykgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHtsYXllcklkLCBjb2xsaWRlcnMsIHRpbGVMYXllcnMsIGltYWdlc30gPSBsYXllcnNbbGF5ZXJJbmRleF07XHJcbiAgICAgICAgLy8gbm90IGV2ZXJ5IHN1YiBzZWN0aW9uIGxheWVyIGhhcyBhbGwgdGlsZSBsYXllcnMuLiBzb21lIGV2ZW4gaGF2ZSBub25lLlxyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW3N1YnNlY3Rpb25JbmRleF1bbGF5ZXJJbmRleF0gPSBuZXcgUElYSS5Db250YWluZXIoKTtcclxuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRpbGVMYXllcnMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgaWYoIXRpbGVMYXllcnNba10gfHwgIXRpbGVMYXllcnNba10uc3ViQ2h1bmtzW3N1YnNlY3Rpb25JbmRleF0pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdW2xheWVySW5kZXhdLnggPSB4O1xyXG4gICAgICAgICAgICB0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdW2xheWVySW5kZXhdLnkgPSB5O1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNpemVkVGlsZXNUb1N1YkNodW5rTGF5ZXJDb250YWluZXIoaywgbGF5ZXJJbmRleCwgc3Vic2VjdGlvbkluZGV4LCB4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFRpbGVzVG9TdWJDaHVua0NvbnRhaW5lcihzdWJzZWN0aW9uSW5kZXgpIDogQXJyYXk8QXJyYXk8VGlsZVNwcml0ZT4+IHtcclxuICAgICAgICBpZih0aGlzLnN1YkNodW5rQ29udGFpbmVyc1tzdWJzZWN0aW9uSW5kZXhdKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gdGhpcy5jaHVua0RhdGEubGF5ZXJzO1xyXG4gICAgICAgIC8vIGlmIHdlIHdhbnQgY2hpbGRyZW4gdGlsZXMgdG8gaGF2ZSBjb3JyZWN0IHdvcmxkIHBvcyB3ZSB1c2UgdGhpc1xyXG4gICAgICAgIGNvbnN0IHggPSB0aGlzLmNodW5rRGF0YS54ICsgKChzdWJzZWN0aW9uSW5kZXggJSB0aGlzLnN1YkNodW5rQ29sdW1ucykgKiBSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFKTtcclxuICAgICAgICBjb25zdCB5ID0gdGhpcy5jaHVua0RhdGEueSArIChNYXRoLmZsb29yKHN1YnNlY3Rpb25JbmRleCAvIHRoaXMuc3ViQ2h1bmtDb2x1bW5zKSAqIFJVTlRJTUVfVElMRV9MQVlFUl9TRUNUSU9OX1NJWkUpO1xyXG4gICAgICAgIHRoaXMuc3ViQ2h1bmtDb250YWluZXJzW3N1YnNlY3Rpb25JbmRleF0gPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGlsZXNUb1N1YkNodW5rTGF5ZXJDb250YWluZXIoaSwgc3Vic2VjdGlvbkluZGV4LCB4LCB5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZFN1YkNodW5rcyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRPZmZzZXQod2lkdGgsIGRpdikge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VmlzaWJsZUluZGV4ZXModmlld3JlY3Q6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0pIDogQXJyYXk8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNodW5rRGF0YTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvd25sb2FkX3Nwcml0ZV9hc19wbmcoX3JlbmRlcmVyLCBfc3ByaXRlLCBfZmlsZU5hbWUpIHtcclxuICAgIF9yZW5kZXJlci5leHRyYWN0LmNhbnZhcyhfc3ByaXRlKS50b0Jsb2IoZnVuY3Rpb24oYil7XHJcbiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoYSk7XHJcbiAgICAgICAgYS5kb3dubG9hZCA9IF9maWxlTmFtZTtcclxuICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGIpO1xyXG4gICAgICAgIGEuY2xpY2soKTtcclxuICAgICAgICBhLnJlbW92ZSgpO1xyXG4gICAgfSwgJ2ltYWdlL3BuZycpO1xyXG59IiwiaW1wb3J0IHtBYnN0cmFjdFRleHR1cmVBdGxhc30gZnJvbSBcIi4vQmFzZVRleHR1cmVBdGxhc1wiO1xyXG5pbXBvcnQge1JlY3R9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9FZGl0b3JDb3JlL3NyYy90eXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbnZhc1RleHR1cmVBdGxhcyBleHRlbmRzIEFic3RyYWN0VGV4dHVyZUF0bGFzIHtcclxuICAgIHJlYWRvbmx5IGxvb2t1cDoge1tzdWJDaHVua0luZGV4OiBzdHJpbmddOiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciwgYUlkeDogbnVtYmVyLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUgfX0gPSB7fTtcclxuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyKSB7XHJcbiAgICAgICAgc3VwZXIoMjA0OCwgcmVuZGVyZXIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZUNodW5rRnJvbVRleHR1cmUoc3ViQ2h1bmtJbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYoIXRoaXMubG9va3VwW3N1YkNodW5rSW5kZXhdKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3LCBoLCBhSWR4LCB0ZXh0dXJlIH0gPSB0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sb29rdXBbc3ViQ2h1bmtJbmRleF07XHJcbiAgICAgICAgdGhpcy5hZGRPcGVuU3BvdChhSWR4LCB4LCB5LCB3LCBoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7QWJzdHJhY3RUZXh0dXJlQXRsYXN9IGZyb20gXCIuL0Jhc2VUZXh0dXJlQXRsYXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJHTFRleHR1cmVBdGxhcyBleHRlbmRzIEFic3RyYWN0VGV4dHVyZUF0bGFzIHtcclxuICAgIHJlYWRvbmx5IHJlbmRlcmVyOiBQSVhJLldlYkdMUmVuZGVyZXI7XHJcbiAgICByZWFkb25seSBsb29rdXA6IHtbc3ViQ2h1bmtJbmRleDogc3RyaW5nXTogeyB3OiBudW1iZXIsIGg6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGFJZHg6IG51bWJlciwgdGV4dHVyZTogUElYSS5UZXh0dXJlIH19ID0ge307XHJcblxyXG4gICAgY29uc3RydWN0b3IocmVuZGVyZXI6IFBJWEkuV2ViR0xSZW5kZXJlcikge1xyXG4gICAgICAgIHN1cGVyKHJlbmRlcmVyLmdsLk1BWF9URVhUVVJFX1NJWkUsIHJlbmRlcmVyKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZW1vdmVDaHVua0Zyb21UZXh0dXJlKHN1YkNodW5rSW5kZXg6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmKCF0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHsgeCwgeSwgdywgaCwgYUlkeCwgdGV4dHVyZSB9ID0gdGhpcy5sb29rdXBbc3ViQ2h1bmtJbmRleF07XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYmluZFJlbmRlclRleHR1cmUodGhpcy5hdGxhc3Nlc1thSWR4XSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nbDtcclxuICAgICAgICAvLyB0dXJuIG9uIHRoZSBzY2lzc29yIHRlc3QuXHJcbiAgICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XHJcbiAgICAgICAgLy8gc2V0IHRoZSBzY2lzc29yIHJlY3RhbmdsZS5cclxuICAgICAgICBnbC5zY2lzc29yKHgsIHksIHcsIGgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuY2xlYXIoKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5iaW5kUmVuZGVyVGV4dHVyZSgpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvb2t1cFtzdWJDaHVua0luZGV4XTtcclxuICAgICAgICB0aGlzLmFkZE9wZW5TcG90KGFJZHgsIHgsIHksIHcsIGgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24gZnJvbSBcIi4uLy4uL3V0aWxzL0Zhc3RDb21wcmVzc2lvblwiO1xyXG5pbXBvcnQge1xyXG4gICAgTGluZSxcclxuICAgIFBvaW50LFxyXG4gICAgUG9seWdvbixcclxuICAgIFJlY3QsXHJcbiAgICBSRVNFUlZFRF9GTEFHUyxcclxufSBmcm9tIFwiLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtjYWxjdWxhdGVFbmRPZkNodW5rLCBjYWxjdWxhdGVTdWJDaHVua3MsIGdldFRvcExlZnRQYWRkaW5nfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQge0NpcmNsZSwgQ29sbGlkZXJEYXR1bSwgUnVudGltZUNvbGxpZGVyU2hhcGV9IGZyb20gXCIuLi8uLi9SdW50aW1lL3NyYy9Xb3JsZFJlbmRlcmVyL3R5cGVzXCI7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgRGVjb2RlZE1hcE1ldGFEYXRhID0ge1xyXG4gICAgbWFwVzogbnVtYmVyLFxyXG4gICAgbWFwSDogbnVtYmVyLFxyXG4gICAgbGF5ZXJUaWxlTGF5ZXJPcmRlcjogQXJyYXk8QXJyYXk8bnVtYmVyPj4sXHJcbiAgICBzdGFydGluZ0NodW5rSW5kZXg6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBEZWNvZGVkTWFwQ2h1bmtEYXRhID0ge1xyXG4gICAgaW5kZXg6IG51bWJlcixcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGxheWVyczogQXJyYXk8RGVjb2RlZE1hcENodW5rTGF5ZXJEYXRhPixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgRGVjb2RlZENvbGxpZGVyRGF0YSA9IHtcclxuICAgIHJlY3RzPzogQXJyYXk8Q29sbGlkZXJEYXR1bTxSZWN0Pj47XHJcbiAgICBwb2x5Z29ucz86IEFycmF5PENvbGxpZGVyRGF0dW08UG9seWdvbj4+O1xyXG4gICAgcG9pbnRzPzogQXJyYXk8Q29sbGlkZXJEYXR1bTxQb2ludD4+O1xyXG4gICAgY2lyY2xlcz86IEFycmF5PENvbGxpZGVyRGF0dW08Q2lyY2xlPj47XHJcbiAgICBsaW5lcz86IEFycmF5PENvbGxpZGVyRGF0dW08TGluZT4+XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIERlY29kZWRNYXBDaHVua0xheWVyRGF0YSA9IHtcclxuICAgIGxheWVySWQ6IG51bWJlcixcclxuICAgIGNvbGxpZGVycz86IERlY29kZWRDb2xsaWRlckRhdGEsXHJcbiAgICB0aWxlTGF5ZXJzPzogQXJyYXk8e1xyXG4gICAgICAgIG1heFRpbGVJZDogbnVtYmVyLFxyXG4gICAgICAgIHRpbGVXaWR0aDogbnVtYmVyLFxyXG4gICAgICAgIHRpbGVIZWlnaHQ6IG51bWJlcixcclxuICAgICAgICB0aWxlU2l6ZVNlcTogbnVtYmVyLFxyXG4gICAgICAgIHN1YkNodW5rczogQXJyYXk8QXJyYXk8bnVtYmVyPj5cclxuICAgIH0+LFxyXG4gICAgLy8geCwgeSwgelxyXG4gICAgaW1hZ2VzPzoge1tpbWFnZUlkOiBzdHJpbmddOiBBcnJheTxudW1iZXI+IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERlY29kZXIge1xyXG4gICAgcHJpdmF0ZSBwcm9wU2VxVG9OYW1lTG9va3VwOiB7W3NlcTogbnVtYmVyXTogc3RyaW5nfSA9IHt9O1xyXG4gICAgcHJpdmF0ZSB0aWxlSWRUb1NpemVMb29rdXA6IEFycmF5PHt3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcn0+ID0gW107XHJcbiAgICBwcml2YXRlIHRhZ1NlcVRvU3RyaW5nTG9va3VwOiB7W3RhZ1NlcTogbnVtYmVyXTogc3RyaW5nfSA9IHt9O1xyXG4gICAgY29uc3RydWN0b3IodGlsZUlkVG9TaXplTG9va3VwOiBBcnJheTx7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0+LCB0YWdTZXFUb1N0cmluZ0xvb2t1cDoge1t0YWdTZXE6IG51bWJlcl06IHN0cmluZ30sIHByb3BTZXFUb05hbWVMb29rdXA/OiB7W3NlcTogbnVtYmVyXTogc3RyaW5nfSkge1xyXG4gICAgICAgIHRoaXMudGlsZUlkVG9TaXplTG9va3VwID0gdGlsZUlkVG9TaXplTG9va3VwO1xyXG4gICAgICAgIHRoaXMudGFnU2VxVG9TdHJpbmdMb29rdXAgPSB0YWdTZXFUb1N0cmluZ0xvb2t1cDtcclxuICAgICAgICB0aGlzLnByb3BTZXFUb05hbWVMb29rdXAgPSBwcm9wU2VxVG9OYW1lTG9va3VwIHx8IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWNvZGVNZXRhRGF0YShjaHVua0FycmF5OiBBcnJheTxudW1iZXI+KSA6IERlY29kZWRNYXBNZXRhRGF0YSB7XHJcbiAgICAgICAgY29uc3QgbWFwVyA9IGNodW5rQXJyYXlbMF07XHJcbiAgICAgICAgY29uc3QgbWFwSCA9IGNodW5rQXJyYXlbMV07XHJcblxyXG4gICAgICAgIGxldCBjdXJDaGVja0luZGV4ID0gMjtcclxuXHJcbiAgICAgICAgbGV0IGN1ckxheWVyID0gMDtcclxuXHJcbiAgICAgICAgY29uc3QgbGF5ZXJUaWxlTGF5ZXJPcmRlcjogQXJyYXk8QXJyYXk8bnVtYmVyPj4gPSBbXTtcclxuXHJcbiAgICAgICAgLy8gc3RhcnQgYXQgMSBzaW5jZSB3ZSBkb250IHB1dCBhIGJsb2Igc2VwZXJhdG9yIGZsYWcgYWZ0ZXIgbWFwVyBhbmQgbWFwSFxyXG4gICAgICAgIGxldCBmb3VuZFNlcGVyYXRvcnMgPSAxO1xyXG4gICAgICAgIGxldCBzdGFydGluZ0NodW5rSW5kZXg7XHJcbiAgICAgICAgd2hpbGUodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZihjaHVua0FycmF5W2N1ckNoZWNrSW5kZXhdID09PSBSRVNFUlZFRF9GTEFHUy5CTE9CX1NFUEFSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgZm91bmRTZXBlcmF0b3JzKys7XHJcbiAgICAgICAgICAgICAgICBpZihmb3VuZFNlcGVyYXRvcnMgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydGluZ0NodW5rSW5kZXggPSBjdXJDaGVja0luZGV4KzE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZihmb3VuZFNlcGVyYXRvcnMgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaHVua0FycmF5W2N1ckNoZWNrSW5kZXhdID09PSBSRVNFUlZFRF9GTEFHUy5FTVBUWV9TRUNUSU9OX0ZMQUcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJUaWxlTGF5ZXJPcmRlci5wdXNoKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyVGlsZUxheWVyT3JkZXIucHVzaChbY2h1bmtBcnJheVtjdXJDaGVja0luZGV4XV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjdXJMYXllciA9IGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZFNlcGVyYXRvcnMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllclRpbGVMYXllck9yZGVyW2N1ckxheWVyXS5wdXNoKGNodW5rQXJyYXlbY3VyQ2hlY2tJbmRleF0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyQ2hlY2tJbmRleCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWFwVyxcclxuICAgICAgICAgICAgbWFwSCxcclxuICAgICAgICAgICAgc3RhcnRpbmdDaHVua0luZGV4LFxyXG4gICAgICAgICAgICBsYXllclRpbGVMYXllck9yZGVyXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRqdXN0TmVnKHBvaW50OiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gJiBhbnkpIDogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9ICYgYW55IHtcclxuICAgICAgICBpZihwb2ludC54ID4gUkVTRVJWRURfRkxBR1MuTkVHQVRJVkVfTlVNQkVSKSB7XHJcbiAgICAgICAgICAgIHBvaW50LnggICY9IH5SRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVI7XHJcbiAgICAgICAgICAgIHBvaW50LnggICo9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwb2ludC55ID4gUkVTRVJWRURfRkxBR1MuTkVHQVRJVkVfTlVNQkVSKSB7XHJcbiAgICAgICAgICAgIHBvaW50LnkgICY9IH5SRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVI7XHJcbiAgICAgICAgICAgIHBvaW50LnkgICo9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9pbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGRlY29kZVN0cmluZyhzdGFydEluZGV4OiBudW1iZXIsIGVuY29kZWRBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGRlY29kZWRTdHJpbmc6IHN0cmluZywgZW5kSW5kZXg6IG51bWJlciB9IHtcclxuICAgICAgICBsZXQgZGVjb2RlZFN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgIGxldCBjdXJJbnQgPSBlbmNvZGVkQXJyYXlbc3RhcnRJbmRleCsrXTtcclxuICAgICAgICB3aGlsZShjdXJJbnQgIT0gUkVTRVJWRURfRkxBR1MuSU1BR0VfQU5EX1NUUklOR19TRVBFUkFUT1IpIHtcclxuICAgICAgICAgICAgZGVjb2RlZFN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGN1ckludCk7XHJcbiAgICAgICAgICAgIGN1ckludCA9IGVuY29kZWRBcnJheVtzdGFydEluZGV4KytdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7ZGVjb2RlZFN0cmluZywgZW5kSW5kZXg6IHN0YXJ0SW5kZXggfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlUHJvcFN0cmluZ3Moc3RhcnRJbmRleDogbnVtYmVyLCBhcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGVuZEluZGV4OiBudW1iZXIsIHByb3BzOiB7W3Byb3BOYW1lOiBzdHJpbmddOiBzdHJpbmcgfSB9IHtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IHt9O1xyXG4gICAgICAgIGxldCBjdXJyZW50UHJvcE5hbWUgPSBudWxsO1xyXG4gICAgICAgIGxldCBjdXIgPSBhcnJheVtzdGFydEluZGV4XVxyXG4gICAgICAgIHdoaWxlKGN1ciAhPSBSRVNFUlZFRF9GTEFHUy5CTE9CX1NFUEFSQVRPUikge1xyXG4gICAgICAgICAgICBpZihjdXIgPT0gUkVTRVJWRURfRkxBR1MuSU1BR0VfQU5EX1NUUklOR19TRVBFUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9wTmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBjdXIgPSBhcnJheVsrK3N0YXJ0SW5kZXhdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQcm9wTmFtZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFByb3BOYW1lID0gdGhpcy5wcm9wU2VxVG9OYW1lTG9va3VwW2N1cl07XHJcbiAgICAgICAgICAgICAgICBpZighY3VycmVudFByb3BOYW1lKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIHByb3BgKVxyXG4gICAgICAgICAgICAgICAgcHJvcHNbY3VycmVudFByb3BOYW1lXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY3VyID0gYXJyYXlbKytzdGFydEluZGV4XVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvcHNbY3VycmVudFByb3BOYW1lXSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGN1cik7XHJcbiAgICAgICAgICAgICAgICBjdXIgPSBhcnJheVsrK3N0YXJ0SW5kZXhdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgrMSwgcHJvcHMgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkZWNvZGVQcm9wTnVtYmVycyhzdGFydEluZGV4OiBudW1iZXIsIGFycmF5OiBBcnJheTxudW1iZXI+KSA6IHsgZW5kSW5kZXg6IG51bWJlciwgcHJvcHM6IHtbcHJvcE5hbWU6IHN0cmluZ106IG51bWJlciB9IH0ge1xyXG4gICAgIC8vICAgY29uc29sZS5sb2coJ3RoZSBwcm9wIHRvIHNlcSB3YXMnLCB0aGlzLnByb3BTZXFUb05hbWVMb29rdXApO1xyXG4gICAgICAgIGNvbnN0IHByb3BzID0ge307XHJcbiAgICAgICAgbGV0IGN1ciA9IGFycmF5W3N0YXJ0SW5kZXhdO1xyXG4gICAgICAgIHdoaWxlKGN1ciAhPSBSRVNFUlZFRF9GTEFHUy5CTE9CX1NFUEFSQVRPUikge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9wTmFtZSA9IHRoaXMucHJvcFNlcVRvTmFtZUxvb2t1cFthcnJheVtzdGFydEluZGV4KytdXTtcclxuICAgICAgICAgICAgIGlmKCFwcm9wTmFtZSkgdGhyb3cgbmV3IEVycm9yKGBEaWQgbm90IGZpbmQgc2VxLmApXHJcbiAgICAgICAgICAgIGxldCBwcm9wVmFsdWUgPSBhcnJheVtzdGFydEluZGV4KytdO1xyXG4gICAgICAgICAgICBpZihwcm9wVmFsdWUgPiBSRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVIpIHtcclxuICAgICAgICAgICAgICAgIHByb3BWYWx1ZSAmPSB+UkVTRVJWRURfRkxBR1MuTkVHQVRJVkVfTlVNQkVSO1xyXG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlICAqPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBwcm9wVmFsdWVcclxuICAgICAgICAgICAgY3VyID0gYXJyYXlbc3RhcnRJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGVuZEluZGV4OiBzdGFydEluZGV4KzEsIHByb3BzIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZGVjb2RlUHJvcEJvb2xlYW5zKHN0YXJ0SW5kZXg6IG51bWJlciwgYXJyYXk6IEFycmF5PG51bWJlcj4pIDogeyBlbmRJbmRleDogbnVtYmVyLCBwcm9wczoge1twcm9wTmFtZTogc3RyaW5nXTogYm9vbGVhbiB9IH17XHJcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7fTtcclxuICAgICAgICBsZXQgY3VyID0gYXJyYXlbc3RhcnRJbmRleF07XHJcbiAgICAgICAgd2hpbGUoY3VyICE9IFJFU0VSVkVEX0ZMQUdTLkJMT0JfU0VQQVJBVE9SKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BOYW1lID0gdGhpcy5wcm9wU2VxVG9OYW1lTG9va3VwW2FycmF5W3N0YXJ0SW5kZXgrK11dO1xyXG4gICAgICAgICAgICBpZighcHJvcE5hbWUpIHRocm93IG5ldyBFcnJvcihgRGlkIG5vdCBmaW5kIHNlcS5gKVxyXG4gICAgICAgICAgICBsZXQgcHJvcFZhbHVlID0gISFhcnJheVtzdGFydEluZGV4KytdO1xyXG4gICAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBwcm9wVmFsdWVcclxuICAgICAgICAgICAgY3VyID0gYXJyYXlbc3RhcnRJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGVuZEluZGV4OiBzdGFydEluZGV4KzEsIHByb3BzIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY29kZVBvbHlnb24oc3RhcnRJbmRleDogbnVtYmVyLCBlbmNvZGVkQXJyYXk6IEFycmF5PG51bWJlcj4pIDogIHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFBvbHlnb24+LCBlbmRJbmRleDogbnVtYmVyIH0ge1xyXG4gICAgICAgIGxldCBjdXJJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgY29uc3QgbWFwU2VxID0gZW5jb2RlZEFycmF5W2N1ckluZGV4KytdO1xyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyVGFnQ291bnQgPSBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK107XHJcbiAgICAgICAgbGV0IGZvdW5kUG9pbnRzID0gW107XHJcbiAgICAgICAgY29uc3QgcG9pbnRDb3VudCA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICB3aGlsZSAoZm91bmRQb2ludHMubGVuZ3RoIDwgcG9pbnRDb3VudCkge1xyXG4gICAgICAgICAgICBmb3VuZFBvaW50cy5wdXNoKHRoaXMuYWRqdXN0TmVnKHt4OiBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK10sIHk6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXX0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZmluYWxPYmo6IHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFBvbHlnb24+LCBlbmRJbmRleDogbnVtYmVyIH0gPSB7XHJcbiAgICAgICAgICAgIGNvbE9iajoge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG1hcFNlcSxcclxuICAgICAgICAgICAgICAgIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTixcclxuICAgICAgICAgICAgICAgIHNoYXBlRGF0YTogZm91bmRQb2ludHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVuZEluZGV4OiBjdXJJbmRleFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlY29kZUNvbGxpZGVyVGFnc0FuZFByb3BzKGZpbmFsT2JqLCBjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIGN1ckluZGV4KVxyXG4gICAgICAgIHJldHVybiBmaW5hbE9iajtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY29kZVByb3BzKHN0YXJ0SW5kZXg6IG51bWJlciwgbnVtYmVyQXJyYXk6IEFycmF5PG51bWJlcj4pIDogeyBwcm9wcz86IHsgW3Byb3A6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfSwgZW5kQXRJbmRleDogbnVtYmVyIH0ge1xyXG4gICAgICAgIGxldCBmaW5hbFByb3BzIDogYW55ID0ge307XHJcbiAgICAgICAgbGV0IHByb3BzOiBhbnk7XHJcbiAgICAgICAgaWYobnVtYmVyQXJyYXlbc3RhcnRJbmRleF0gPT09IFJFU0VSVkVEX0ZMQUdTLkVNUFRZX1NFQ1RJT05fRkxBRykge1xyXG4gICAgICAgICAgICByZXR1cm4geyBlbmRBdEluZGV4OiBzdGFydEluZGV4ICsgMSB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICh7IGVuZEluZGV4OiBzdGFydEluZGV4LCBwcm9wcyB9ID0gdGhpcy5kZWNvZGVQcm9wQm9vbGVhbnMoc3RhcnRJbmRleCwgbnVtYmVyQXJyYXkpKTtcclxuICAgICAgICBmaW5hbFByb3BzID0gey4uLmZpbmFsUHJvcHMsIC4uLnByb3BzIH07XHJcbiAgICAgICAgKHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgsIHByb3BzIH0gPSB0aGlzLmRlY29kZVByb3BOdW1iZXJzKHN0YXJ0SW5kZXgsIG51bWJlckFycmF5KSk7XHJcbiAgICAgICAgZmluYWxQcm9wcyA9IHsgLi4uZmluYWxQcm9wcywgLi4ucHJvcHN9O1xyXG4gICAgICAgICh7IGVuZEluZGV4OiBzdGFydEluZGV4LCBwcm9wcyB9ID0gdGhpcy5kZWNvZGVQcm9wU3RyaW5ncyhzdGFydEluZGV4LCBudW1iZXJBcnJheSkpO1xyXG4gICAgICAgIGZpbmFsUHJvcHMgPSB7IC4uLmZpbmFsUHJvcHMsIC4uLnByb3BzfTtcclxuICAgICAgICByZXR1cm4geyBwcm9wczogZmluYWxQcm9wcywgZW5kQXRJbmRleDogc3RhcnRJbmRleCB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgbWFwVGFncyh0YWdzOiBBcnJheTxudW1iZXI+KSA6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiB0YWdzLm1hcCh0ID0+IHtcclxuICAgICAgICAgICAgaWYoISh0IGluIHRoaXMudGFnU2VxVG9TdHJpbmdMb29rdXApKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHRhZyBzZXEgJHt0fSBpbiBsb29rdXAuYClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWdTZXFUb1N0cmluZ0xvb2t1cFt0XTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlUmVjdChzdGFydEluZGV4OiBudW1iZXIsIGVuY29kZWRBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGNvbE9iajogQ29sbGlkZXJEYXR1bTxSZWN0PiwgZW5kSW5kZXg6IG51bWJlciB9ICAge1xyXG4gICAgICAgIGxldCBjdXJJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgY29uc3QgbWFwU2VxID0gZW5jb2RlZEFycmF5W2N1ckluZGV4KytdO1xyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyVGFnQ291bnQgPSBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK107XHJcbiAgICAgICAgY29uc3QgcmVjdCA6IFJlY3QgPSB0aGlzLmFkanVzdE5lZyh7XHJcbiAgICAgICAgICAgIHg6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSxcclxuICAgICAgICAgICAgeTogZW5jb2RlZEFycmF5W2N1ckluZGV4KytdLFxyXG4gICAgICAgICAgICB3OiBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK10sXHJcbiAgICAgICAgICAgIGg6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBmaW5hbE9iaiA6IHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFJlY3Q+LCBlbmRJbmRleDogbnVtYmVyIH0gPSB7XHJcbiAgICAgICAgICAgIGNvbE9iajoge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG1hcFNlcSxcclxuICAgICAgICAgICAgICAgIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUuUkVDVCxcclxuICAgICAgICAgICAgICAgIHNoYXBlRGF0YTogcmVjdCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW5kSW5kZXg6IGN1ckluZGV4LFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlY29kZUNvbGxpZGVyVGFnc0FuZFByb3BzKGZpbmFsT2JqLCBjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIGN1ckluZGV4KVxyXG4gICAgICAgIHJldHVybiBmaW5hbE9iajtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY29kZUNvbGxpZGVyVGFnc0FuZFByb3BzKGZpbmFsT2JqOiB7IGNvbE9iajogQ29sbGlkZXJEYXR1bTxSZWN0IHwgUG9pbnQgfCBQb2x5Z29uPiwgZW5kSW5kZXg6IG51bWJlciB9LCBjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIHN0YXJ0SW5kZXgpIHtcclxuICAgICAgICBjb25zdCB7IHRhZ3MsIGVuZEF0SW5kZXg6IHRhZ0VuZGVkSW5kZXggfSA9IHRoaXMuZGVjb2RlVGFncyhjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIHN0YXJ0SW5kZXgpO1xyXG4gICAgICAgIGlmKHRhZ3MpIGZpbmFsT2JqLmNvbE9iai50YWdzID0gdGFncztcclxuICAgICAgICBmaW5hbE9iai5lbmRJbmRleCA9IHRhZ0VuZGVkSW5kZXg7XHJcbiAgICAgICAgY29uc3QgeyBlbmRBdEluZGV4LCBwcm9wcyB9ID0gdGhpcy5kZWNvZGVQcm9wcyh0YWdFbmRlZEluZGV4LCBlbmNvZGVkQXJyYXkpXHJcbiAgICAgICAgaWYocHJvcHMpIGZpbmFsT2JqLmNvbE9iai5wcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIGZpbmFsT2JqLmVuZEluZGV4ID0gZW5kQXRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY29kZVRhZ3MoY29sbGlkZXJUYWdDb3VudCwgZW5jb2RlZEFycmF5LCBjdXJJbmRleCkgOiB7IHRhZ3M/OiBBcnJheTxzdHJpbmc+LCBlbmRBdEluZGV4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IHRhZ3M7XHJcbiAgICAgICAgaWYoIWNvbGxpZGVyVGFnQ291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZW5kQXRJbmRleDogY3VySW5kZXggfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YWdzID0gW107XHJcbiAgICAgICAgd2hpbGUodGFncy5sZW5ndGggPCBjb2xsaWRlclRhZ0NvdW50KSB7XHJcbiAgICAgICAgICAgIHRhZ3MucHVzaChlbmNvZGVkQXJyYXlbY3VySW5kZXgrK10pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHRhZ3M6IHRoaXMubWFwVGFncyh0YWdzKSwgZW5kQXRJbmRleDogY3VySW5kZXggfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlUG9pbnQoc3RhcnRJbmRleDogbnVtYmVyLCBlbmNvZGVkQXJyYXk6IEFycmF5PG51bWJlcj4pIDogeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UG9pbnQ+LCBlbmRJbmRleDogbnVtYmVyIH0gICB7XHJcbiAgICAgICAgbGV0IGN1ckluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICBjb25zdCBtYXBTZXEgPSBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK107XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXJUYWdDb3VudCA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICBjb25zdCBwb2ludCA6IFBvaW50ID0gdGhpcy5hZGp1c3ROZWcoe1xyXG4gICAgICAgICAgICB4OiBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK10sXHJcbiAgICAgICAgICAgIHk6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBmaW5hbE9iaiA6IHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFBvaW50PiwgZW5kSW5kZXg6IG51bWJlciB9ID0ge1xyXG4gICAgICAgICAgICBjb2xPYmo6IHtcclxuICAgICAgICAgICAgICAgIGlkOiBtYXBTZXEsXHJcbiAgICAgICAgICAgICAgICBzaGFwZVR5cGU6IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5ULFxyXG4gICAgICAgICAgICAgICAgc2hhcGVEYXRhOiBwb2ludCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW5kSW5kZXg6IGN1ckluZGV4LFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRlY29kZUNvbGxpZGVyVGFnc0FuZFByb3BzKGZpbmFsT2JqLCBjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIGN1ckluZGV4KVxyXG4gICAgICAgIHJldHVybiBmaW5hbE9iajtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY29kZUNvbGxpZGVyKHR5cGU6IHN0cmluZywgc3RhcnRJbmRleDogbnVtYmVyLCBlbmNvZGVkQXJyYXk6IEFycmF5PG51bWJlcj4pIDogeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UmVjdCB8IFBvbHlnb24gfCBQb2ludD4sIGVuZEluZGV4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgc3dpdGNoKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAncG9seWdvbnMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlUG9seWdvbihzdGFydEluZGV4LCBlbmNvZGVkQXJyYXkpO1xyXG4gICAgICAgICAgICBjYXNlICdyZWN0cyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVSZWN0KHN0YXJ0SW5kZXgsIGVuY29kZWRBcnJheSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BvaW50cyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVQb2ludChzdGFydEluZGV4LCBlbmNvZGVkQXJyYXkpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmhhbmRsZWQgdHlwZSAke3R5cGV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyB0YWtlcyB0aGUgY2h1bmsgYXJyYXkgYW5kIGRlY29kZXMgYWxsIHRoZSBjb2xsaXNpb25zIGZvciBlYWNoIGxheWVyXHJcbiAgICAvLyByZXR1cm5zIHdoZXJlIGl0IGZpbmlzaGVkIG9uIHRoZSBhcnJheSwgYXMgd2VsbCBhcyBhbiBhcnJheSBmb3IgdGhlIGxheWVycywgZWFjaCBoYXZpbmcgYSBkZWNvZGVkIGNvbGxpZGVyIG9iamVjdHMuXHJcbiAgICBwdWJsaWMgZGVjb2RlQ29sbGlkZXJzKHN0YXJ0SW5kZXg6IG51bWJlciwgZW5jb2RlZEFycmF5OiBBcnJheTxudW1iZXI+LCBsYXllckNvdW50OiBudW1iZXIpIDogeyBkZWNvZGVkOiBBcnJheTxEZWNvZGVkQ29sbGlkZXJEYXRhPiwgZW5kSW5kZXg6IG51bWJlciB9ICB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IG5ldyBBcnJheShsYXllckNvdW50KTtcclxuICAgICAgICBsZXQgZm91bmRDb2xsaWRlcnMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgY3VyTGF5ZXIgPSAwO1xyXG4gICAgICAgIGNvbnN0IHR5cGVzID0gWydwb2ludHMnLCAncmVjdHMnLCAncG9seWdvbnMnXTtcclxuICAgICAgICBsZXQgY3VySW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIHdoaWxlKGN1ckxheWVyIDwgbGF5ZXJDb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgY3VyVHlwZUlkeCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlKGN1clR5cGVJZHggPCB0eXBlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkZWNvZGVkQ29sbGlkZXJzID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBleHBlY3RlZENvbGxpZGVycyA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICAgICAgICAgIHdoaWxlKGRlY29kZWRDb2xsaWRlcnMgPCBleHBlY3RlZENvbGxpZGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kQ29sbGlkZXJzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZighZGVjb2RlZFtjdXJMYXllcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFtjdXJMYXllcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWRlY29kZWRbY3VyTGF5ZXJdW3R5cGVzW2N1clR5cGVJZHhdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkW2N1ckxheWVyXVt0eXBlc1tjdXJUeXBlSWR4XV0gPSBuZXcgQXJyYXkoZXhwZWN0ZWRDb2xsaWRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGVuZEluZGV4LCBjb2xPYmogfSA9IHRoaXMuZGVjb2RlQ29sbGlkZXIodHlwZXNbY3VyVHlwZUlkeF0sIGN1ckluZGV4LCBlbmNvZGVkQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gZW5kSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFtjdXJMYXllcl1bdHlwZXNbY3VyVHlwZUlkeF1dW2RlY29kZWRDb2xsaWRlcnNdPWNvbE9iajtcclxuICAgICAgICAgICAgICAgICAgICBkZWNvZGVkQ29sbGlkZXJzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJUeXBlSWR4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyTGF5ZXIrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7IGRlY29kZWQ6IGZvdW5kQ29sbGlkZXJzID8gZGVjb2RlZCA6IG51bGwsIGVuZEluZGV4OiBjdXJJbmRleCB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzcGxpdHMgYSBjaHVuayBhcnJheSBpbnRvIHR3byBhcnJheXMgdGhhdCBjb250YWluIHRoZSB0aWxlIGRhdGEgYW5kIGltYWdlIGRhdGEgcGVyIGxheWVyLlxyXG4gICAgICogQHBhcmFtIGNodW5rQXJyYXlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzcGxpdENodW5rQXJyYXlMYXllcnMoY2h1bmtBcnJheTogQXJyYXk8bnVtYmVyPiwgbGF5ZXJUaWxlTGF5ZXJPcmRlcjogQXJyYXk8QXJyYXk8bnVtYmVyPj4pIDogeyB0aWxlQXJyYXlzOiBBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4sIGltYWdlcz86IEFycmF5PEFycmF5PG51bWJlcj4+LCBjb2xsaWRlcnM/OiBBcnJheTxEZWNvZGVkQ29sbGlkZXJEYXRhPiB9IHtcclxuICAgICAgICBjb25zdCB0aWxlQXJyYXlzID0gbmV3IEFycmF5KGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBpbWFnZXMgPSBuZXcgQXJyYXkobGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG4gICAgICAgIGxldCBjdXJFbGVtZW50SW5kZXggPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGltYWdlc1tpXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB0aWxlTGF5ZXJJZHMgPSBsYXllclRpbGVMYXllck9yZGVyW2ldO1xyXG4gICAgICAgICAgICBpZih0aWxlTGF5ZXJJZHMgJiYgdGlsZUxheWVySWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGlsZUFycmF5c1tpXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGlsZUxheWVySWRzLmZvckVhY2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbGVBcnJheXNbaV0ucHVzaChbXSlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kVGlsZUJsb2JTZXBlcmF0b3JzID0gMDtcclxuICAgICAgICAgICAgICAgIHdoaWxlKGZvdW5kVGlsZUJsb2JTZXBlcmF0b3JzIDwgdGlsZUxheWVySWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNodW5rQXJyYXlbY3VyRWxlbWVudEluZGV4XSA9PT0gUkVTRVJWRURfRkxBR1MuQkxPQl9TRVBBUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRUaWxlQmxvYlNlcGVyYXRvcnMrKztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlQXJyYXlzW2ldW2ZvdW5kVGlsZUJsb2JTZXBlcmF0b3JzXS5wdXNoKGNodW5rQXJyYXlbY3VyRWxlbWVudEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckVsZW1lbnRJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGlsZUFycmF5c1tpXSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjdXJMYXllckZvckltYWdlID0gMDtcclxuICAgICAgICBsZXQgZm91bmRJbWFnZXMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgbmV4dFZhbHVlSXNJbWFnZUNvdW50ID0gdHJ1ZTtcclxuICAgICAgICBsZXQgdmFsdWU7XHJcbiAgICAgICAgbGV0IGN1ckltZ0kgPSAwO1xyXG4gICAgICAgIGxldCBvbkltZ1NlcCA9IHRydWU7XHJcbiAgICAgICAgbGV0IGFhYSA9IDA7XHJcbiAgICAgICAgbGV0IGZ1Y2tpbmdBID0gZmFsc2U7XHJcbiAgICAgICAgd2hpbGUoY3VyTGF5ZXJGb3JJbWFnZSA8IGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCBsb2cgPSBjaHVua0FycmF5W2N1ckVsZW1lbnRJbmRleCsxXSA9PSA1ICYmIGNodW5rQXJyYXlbY3VyRWxlbWVudEluZGV4KzJdID09IDE4NTU7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1ckVsbSA9IGNodW5rQXJyYXlbY3VyRWxlbWVudEluZGV4XTtcclxuICAgICAgICAgICAgaWYobmV4dFZhbHVlSXNJbWFnZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGN1ckVsbTtcclxuICAgICAgICAgICAgICAgIGlmKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlc1tjdXJMYXllckZvckltYWdlXT0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5leHRWYWx1ZUlzSW1hZ2VDb3VudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1ckVsbSA9PT0gUkVTRVJWRURfRkxBR1MuQkxPQl9TRVBBUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgIG9uSW1nU2VwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGN1ckxheWVyRm9ySW1hZ2UrKztcclxuICAgICAgICAgICAgICAgIGlmKGN1ckxheWVyRm9ySW1hZ2UgPCBsYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRWYWx1ZUlzSW1hZ2VDb3VudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRWxtID09PSBSRVNFUlZFRF9GTEFHUy5JTUFHRV9BTkRfU1RSSU5HX1NFUEVSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgb25JbWdTZXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VzW2N1ckxheWVyRm9ySW1hZ2VdLnB1c2goY3VyRWxtKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kSW1hZ2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IG9uSW1nU2VwID8gNCA6IDM7XHJcbiAgICAgICAgICAgICAgICBjdXJJbWdJKys7XHJcbiAgICAgICAgICAgICAgICBpZihjdXJJbWdJID09PSByZXEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJJbWdJID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBvbkltZ1NlcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW1hZ2VzW2N1ckxheWVyRm9ySW1hZ2VdLnB1c2goY3VyRWxtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJFbGVtZW50SW5kZXgrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZW5kSW5kZXgsIGRlY29kZWQgfSA9IHRoaXMuZGVjb2RlQ29sbGlkZXJzKGN1ckVsZW1lbnRJbmRleCwgY2h1bmtBcnJheSwgbGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG5cclxuICAgICAgICBjdXJFbGVtZW50SW5kZXggPSBlbmRJbmRleDtcclxuICAgICAgICAvL1RJTEwgVEhFIFRSSUxPR1kgQ09OVElOVUVTLi4uLi4uLi4uLi4uLi5cclxuICAgICAgICBjb25zdCBvYmogOiAgeyB0aWxlQXJyYXlzOiBBcnJheTxBcnJheTxBcnJheTxudW1iZXI+Pj4sIGltYWdlcz86IEFycmF5PEFycmF5PG51bWJlcj4+LCBjb2xsaWRlcnM/OiBBcnJheTxEZWNvZGVkQ29sbGlkZXJEYXRhPiB9ID0geyB0aWxlQXJyYXlzIH07XHJcbiAgICAgICAgaWYoZm91bmRJbWFnZXMpIHtcclxuICAgICAgICAgICAgb2JqLmltYWdlcyA9IGltYWdlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZGVjb2RlZCkge1xyXG4gICAgICAgICAgICBvYmouY29sbGlkZXJzID0gZGVjb2RlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVjb2RlQ2h1bmsoY2h1bmtJbmRleDogbnVtYmVyLCBtYXBXOiBudW1iZXIsIG1hcEg6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBzdWJDaHVua1c6IG51bWJlciwgc3ViQ2h1bmtIOiBudW1iZXIsIGxheWVyVGlsZUxheWVyT3JkZXJEYXRhOiBBcnJheTxBcnJheTxudW1iZXI+PiwgY2h1bmtBcnJheTogQXJyYXk8bnVtYmVyPiB8IEFycmF5QnVmZmVyKSA6IERlY29kZWRNYXBDaHVua0RhdGEge1xyXG4gICAgICAgIGNodW5rQXJyYXkgPSAhKEFycmF5LmlzQXJyYXkoY2h1bmtBcnJheSkpID8gRmFzdEludGVnZXJDb21wcmVzc2lvbi51bmNvbXByZXNzKGNodW5rQXJyYXkpIDogY2h1bmtBcnJheSBhcyBBcnJheTxudW1iZXI+O1xyXG5cclxuICAgICAgICBsZXQgY3VyTGF5ZXJJbmRleCA9IDA7XHJcbiAgICAgICAgY29uc3QgY29scyA9IE1hdGguY2VpbChtYXBXIC8gY2h1bmtXKTtcclxuICAgICAgICBjb25zdCBjaHVua1dvcmxkWCA9IChjaHVua0luZGV4ICUgY29scykgKiBjaHVua1c7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnY2h1bmsgd29ybGQgeCB3YXMnLCBjaHVua1dvcmxkWCwgJ2NodW5rIGluZGV4IHdhcycsIGNodW5rSW5kZXgpO1xyXG4gICAgICAgIGNvbnN0IGNodW5rV29ybGRZID0gTWF0aC5mbG9vcihjaHVua0luZGV4IC8gY29scykgKiBjaHVua0g7XHJcbiAgICAgICAgY29uc3QgeyBlbmRYLCBlbmRZIH0gPSBjYWxjdWxhdGVFbmRPZkNodW5rKG1hcFcsIG1hcEgsIGNodW5rVywgY2h1bmtILCBjaHVua1dvcmxkWCwgY2h1bmtXb3JsZFkpO1xyXG5cclxuICAgICAgICBjb25zdCBvYmogOiBEZWNvZGVkTWFwQ2h1bmtEYXRhID17XHJcbiAgICAgICAgICAgIGluZGV4OiBjaHVua0luZGV4LFxyXG4gICAgICAgICAgICB4OiBjaHVua1dvcmxkWCxcclxuICAgICAgICAgICAgeTogY2h1bmtXb3JsZFksXHJcbiAgICAgICAgICAgIHdpZHRoOiBlbmRYIC0gY2h1bmtXb3JsZFgsXHJcbiAgICAgICAgICAgIGhlaWdodDogZW5kWSAtIGNodW5rV29ybGRZLFxyXG4gICAgICAgICAgICBsYXllcnM6IG5ldyBBcnJheShsYXllclRpbGVMYXllck9yZGVyRGF0YS5sZW5ndGgpLFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzcGxpdCA9IHRoaXMuc3BsaXRDaHVua0FycmF5TGF5ZXJzKGNodW5rQXJyYXksIGxheWVyVGlsZUxheWVyT3JkZXJEYXRhKTtcclxuICAgICAgICBjb25zdCBoYXNJbWFnZXMgPSAhIXNwbGl0LmltYWdlcztcclxuICAgICAgICBjb25zdCBoYXNDb2xsaWRlcnMgPSAhIXNwbGl0LmNvbGxpZGVycztcclxuICAgICAgICAvL1RPRE8gcmVhbCBtaW5vciBtaWNybyBvcHRpbWl6YXRpb24gaGVyZS4uLiBidXQgaWYgc3BsaXQuaW1hZ2VzIGlzIGZhbHNlIHdlIGRvbnQgd2FudCB0byBjaGVjayBpdCBlYWNoIGl0ZXJhdGlvbi5cclxuICAgICAgLy8gIGlmKHNwbGl0LmltYWdlcykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBsb2cgPSBpID09IDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJUaWxlcyA9IGxheWVyVGlsZUxheWVyT3JkZXJEYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllcklkOiBpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGlmKGN1clRpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXS50aWxlTGF5ZXJzID0gY3VyVGlsZXMubWFwKCh0LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy50aWxlSWRUb1NpemVMb29rdXBbdF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbGVzQXJyYXkgPSBzcGxpdC50aWxlQXJyYXlzW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNpemVTZXE6IHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvZG8gdGhpcyBpc250IHJpZ2h0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VGlsZUlkOiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVXaWR0aDogd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlSGVpZ2h0OiBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJDaHVua3M6ICF0aWxlc0FycmF5ID8gbnVsbCA6IHRoaXMudW5tZXJnZVN1YnNlY3Rpb25UaWxlcyh3aWR0aCwgaGVpZ2h0LCBzdWJDaHVua1csIHN1YkNodW5rSCwgY2h1bmtXLCBjaHVua0gsIGNodW5rV29ybGRYLCBjaHVua1dvcmxkWSwgbWFwVywgbWFwSCwgdGlsZXNBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9UT0RPOiBtaWNyb29wdGltaXphdGlvbiBtZWFucyB3ZSBzaG91bGQgbmVlZCB0byBjaGVjayBzcGxpdC5pbWFnZXMgZWFjaCBpdGVyYXRpb24uXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2tzIHRvIHNlZSBpZiB0aGUgc3BsaXQgaW1hZ2VzIGJlY2FtZSBudWxsLlxyXG4gICAgICAgICAgICAgICAgaWYoaGFzSW1hZ2VzICYmIHNwbGl0LmltYWdlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sYXllcnNbaV0uaW1hZ2VzID10aGlzLnVubWVyZ2VMYXllckltYWdlcyhzcGxpdC5pbWFnZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaGFzQ29sbGlkZXJzICYmIHNwbGl0LmNvbGxpZGVyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sYXllcnNbaV0uY29sbGlkZXJzID0gc3BsaXQuY29sbGlkZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAvKiB9XHJcbiAgICAgICBUT0RPOiBzZWNvbmQgY29uZGl0aW9uIGZvciBtaWNybyBvcHRpbWl6YXRpb25cclxuXHJcbiAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRpbGVzID0gbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICBvYmoubGF5ZXJzW2ldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGlkZXJzOiB7cmVjdHM6IFtdLCBwb2ludHM6IFtdLCBwb2x5Z29uczogW119LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHgsIHksIHpcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZihjdXJUaWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sYXllcnNbaV0udGlsZUxheWVycyA9IGN1clRpbGVzLm1hcCgodCwgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMudGlsZUlkVG9TaXplTG9va3VwW3RdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWxlc0FycmF5ID0gc3BsaXQudGlsZUFycmF5c1tpXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG9kbyB0aGlzIGlzbnQgcmlnaHQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhUaWxlSWQ6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVIZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0T2Zmc2V0czogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJDaHVua3M6ICF0aWxlc0FycmF5ID8gbnVsbCA6IHRoaXMudW5tZXJnZVN1YnNlY3Rpb25UaWxlcyh3aWR0aCwgaGVpZ2h0LCBzdWJDaHVua1csIHN1YkNodW5rSCwgY2h1bmtXLCBjaHVua0gsIGNodW5rV29ybGRYLCBjaHVua1dvcmxkWSwgbWFwVywgbWFwSCwgdGlsZXNBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2tzIHRvIHNlZSBpZiB0aGUgc3BsaXQgaW1hZ2VzIGJlY2FtZSBudWxsLlxyXG4gICAgICAgICAgICAgICAgaWYoc3BsaXQuaW1hZ2VzICYmIHNwbGl0LmltYWdlc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iai5sYXllcnNbaV0uaW1hZ2VzID10aGlzLnVubWVyZ2VMYXllckltYWdlcyhzcGxpdC5pbWFnZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSovXHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGdldENvbXByZXNzZWRDaHVua3NGcm9tTWFwKGNodW5rVzogbnVtYmVyLCBjaHVua0g6IG51bWJlciwgY2h1bmtEYXRhOiBBcnJheUJ1ZmZlcikgOiB7IG1ldGFEYXRhOiBEZWNvZGVkTWFwTWV0YURhdGEsIGJ1ZmZlcnM6IEFycmF5PEFycmF5QnVmZmVyPiB9IHtcclxuICAgICAgICBjb25zdCBtYXBOdW1iZXJBcnJheSA9IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24udW5jb21wcmVzcyhjaHVua0RhdGEpO1xyXG4gICAgICAgIGNvbnN0IHsgbWFwVywgbWFwSCwgc3RhcnRpbmdDaHVua0luZGV4LCBsYXllclRpbGVMYXllck9yZGVyIH0gPSB0aGlzLmRlY29kZU1ldGFEYXRhKG1hcE51bWJlckFycmF5KTtcclxuICAgICAgICBjb25zdCBjb2xzID0gTWF0aC5jZWlsKG1hcFcgLyBjaHVua1cpO1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSBNYXRoLmNlaWwobWFwSCAvIGNodW5rSCk7XHJcbiAgICAgICAgY29uc3QgdG90YWwgPSBjb2xzICogcm93cztcclxuICAgICAgICBsZXQgY3VyQ2h1bmsgPSAwO1xyXG4gICAgICAgIGNvbnN0IHNwbGl0Q2h1bmtzID0gbmV3IEFycmF5KHRvdGFsKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNwbGl0Q2h1bmtzW2ldID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IHN0YXJ0aW5nQ2h1bmtJbmRleDsgaSA8IG1hcE51bWJlckFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKG1hcE51bWJlckFycmF5W2ldID09PSBSRVNFUlZFRF9GTEFHUy5DSFVOS19TRVBFUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgICsrY3VyQ2h1bms7XHJcbiAgICAgICAgICAgICAgICBpZihjdXJDaHVuayA9PT0gdG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihpICE9PSBtYXBOdW1iZXJBcnJheS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIGJlIG9uIGxhc3QgZWxlbWVudCBieSB0aGUgdGltZSBpdCBnZXRzIGhlcmUuJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcGxpdENodW5rc1tjdXJDaHVua10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNwbGl0Q2h1bmtzW2N1ckNodW5rXS5wdXNoKG1hcE51bWJlckFycmF5W2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1ldGFEYXRhOiB7bWFwVywgbWFwSCwgc3RhcnRpbmdDaHVua0luZGV4LCBsYXllclRpbGVMYXllck9yZGVyfSxcclxuICAgICAgICAgICAgYnVmZmVyczogc3BsaXRDaHVua3MubWFwKGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHJlc3MoYSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVjb2RlTWFwKGNodW5rVzogbnVtYmVyLCBjaHVua0g6IG51bWJlciwgc3ViQ2h1bmtXOiBudW1iZXIsIHN1YkNodW5rSDogbnVtYmVyLCBtYXBDaHVua0FycmF5OiBBcnJheUJ1ZmZlciB8IEFycmF5PG51bWJlcj4sIGZvckVhY2hDaHVuaz86IChjaHVua0RhdGE6IERlY29kZWRNYXBDaHVua0RhdGEsIGNodW5rSW5kZXg6IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQpIDogUHJvbWlzZTx7IG1ldGFEYXRhOiBEZWNvZGVkTWFwTWV0YURhdGEsIGNodW5rczogQXJyYXk8RGVjb2RlZE1hcENodW5rRGF0YT4gfT4ge1xyXG4gICAgICAgIGNvbnN0IG1hcE51bWJlckFycmF5IDogQXJyYXk8bnVtYmVyPiA9ICEoQXJyYXkuaXNBcnJheShtYXBDaHVua0FycmF5KSkgPyBGYXN0SW50ZWdlckNvbXByZXNzaW9uLnVuY29tcHJlc3MobWFwQ2h1bmtBcnJheSkgOiBtYXBDaHVua0FycmF5IGFzIEFycmF5PG51bWJlcj47XHJcbiAgICAgICAgY29uc3QgeyBtYXBXLCBtYXBILCBzdGFydGluZ0NodW5rSW5kZXgsIGxheWVyVGlsZUxheWVyT3JkZXIgfSA9IHRoaXMuZGVjb2RlTWV0YURhdGEobWFwTnVtYmVyQXJyYXkpO1xyXG4gICAgICAgIGNvbnN0IGxheWVyQ291bnQgPSBsYXllclRpbGVMYXllck9yZGVyLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBjb2xzID0gTWF0aC5jZWlsKG1hcFcgLyBjaHVua1cpO1xyXG4gICAgICAgIGNvbnN0IHJvd3MgPSBNYXRoLmNlaWwobWFwSCAvIGNodW5rSCk7XHJcbiAgICAgICAgY29uc3QgdG90YWwgPSBjb2xzICogcm93cztcclxuICAgICAgICBjb25zdCBzcGxpdENodW5rcyA9IG5ldyBBcnJheSh0b3RhbCk7XHJcbiAgICAgICAgc3BsaXRDaHVua3NbMF0gPSBbXTtcclxuICAgICAgICBsZXQgY3VyQ2h1bmsgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IHN0YXJ0aW5nQ2h1bmtJbmRleDsgaSA8IG1hcE51bWJlckFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKG1hcE51bWJlckFycmF5W2ldID09PSBSRVNFUlZFRF9GTEFHUy5DSFVOS19TRVBFUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgICsrY3VyQ2h1bms7XHJcbiAgICAgICAgICAgICAgICBpZihjdXJDaHVuayA9PT0gdG90YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihpICE9PSBtYXBOdW1iZXJBcnJheS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIGJlIG9uIGxhc3QgZWxlbWVudCBieSB0aGUgdGltZSBpdCBnZXRzIGhlcmUuJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcGxpdENodW5rc1tjdXJDaHVua10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNwbGl0Q2h1bmtzW2N1ckNodW5rXS5wdXNoKG1hcE51bWJlckFycmF5W2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgIHB1YmxpYyBkZWNvZGVDaHVuayhjaHVua0luZGV4OiBudW1iZXIsIG1hcFc6IG51bWJlciwgbWFwSDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIHN1YkNodW5rVzogbnVtYmVyLCBzdWJDaHVua0g6IG51bWJlciwgbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGE6IEFycmF5PEFycmF5PG51bWJlcj4+LCBjaHVua0FycmF5OiBBcnJheTxudW1iZXI+KSA6IE1hcFNlY3Rpb25EYXRhIHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gW107XHJcbiAgICAgICAgaWYoZm9yRWFjaENodW5rKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzcGxpdENodW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmRlY29kZUNodW5rKGksIG1hcFcsIG1hcEgsIGNodW5rVywgY2h1bmtILCBzdWJDaHVua1csIHN1YkNodW5rSCwgbGF5ZXJUaWxlTGF5ZXJPcmRlciwgc3BsaXRDaHVua3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgZGVjb2RlZC5wdXNoKGNodW5rKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGZvckVhY2hDaHVuayhjaHVuaywgaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0Q2h1bmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkZWNvZGVkLnB1c2godGhpcy5kZWNvZGVDaHVuayhpLCBtYXBXLCBtYXBILCBjaHVua1csIGNodW5rSCwgc3ViQ2h1bmtXLCBzdWJDaHVua0gsIGxheWVyVGlsZUxheWVyT3JkZXIsIHNwbGl0Q2h1bmtzW2ldKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgbWV0YURhdGE6IHsgbWFwVywgbWFwSCwgc3RhcnRpbmdDaHVua0luZGV4LCBsYXllclRpbGVMYXllck9yZGVyIH0sIGNodW5rczogZGVjb2RlZCB9O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBub3RlOiB3ZSBkb250IGRlY29kZSB0aGUgekluZGV4IHRvIHNlZSBpZiBpdHMgcm90YXRlZCBoZXJlLCB3ZSBsZWF2ZSB0aGF0IHRvIHRoZSBhcHAuXHJcbiAgICBwdWJsaWMgdW5tZXJnZUxheWVySW1hZ2VzKGltYWdlQXJyYXk6IEFycmF5PG51bWJlcj4pIDoge1tpbWFnZUlkOiBzdHJpbmddOiBBcnJheTxudW1iZXI+IH0ge1xyXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHt9O1xyXG4gICAgICAgIGxldCBuZXh0SXNJbWFnZUlkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgeHl6SW5kZXggPSAwO1xyXG4gICAgICAgIGxldCBjdXJJbWFnZUlkPSBudWxsO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBpbWFnZUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKGltYWdlQXJyYXlbaV0gPT09IFJFU0VSVkVEX0ZMQUdTLklNQUdFX0FORF9TVFJJTkdfU0VQRVJBVE9SKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0SXNJbWFnZUlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKG5leHRJc0ltYWdlSWQpIHtcclxuICAgICAgICAgICAgICAgIGN1ckltYWdlSWQgPSBpbWFnZUFycmF5W2ldO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VzW2N1ckltYWdlSWRdID0gW107XHJcbiAgICAgICAgICAgICAgICBuZXh0SXNJbWFnZUlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBpbWFnZUFycmF5W2ldO1xyXG4gICAgICAgICAgICAgICAgaWYoeHl6SW5kZXggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gUkVTRVJWRURfRkxBR1MuTkVHQVRJVkVfTlVNQkVSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICY9IH5SRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGltYWdlc1tjdXJJbWFnZUlkXS5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHh5ekluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBpZih4eXpJbmRleCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHh5ekluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW1hZ2VzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgdW5tZXJnZVN1YnNlY3Rpb25UaWxlcyh0aWxlV2lkdGg6IG51bWJlciwgdGlsZUhlaWdodDogbnVtYmVyLCBlbmNvZGVkU3ViQ2h1bmtXOiBudW1iZXIsIGVuY29kZWRTdWJDaHVua0g6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLGNodW5rWDogbnVtYmVyLCBjaHVua1k6IG51bWJlciwgbWFwV2lkdGg6IG51bWJlciwgbWFwSGVpZ2h0OiBudW1iZXIsIHRpbGVBcnJheTogQXJyYXk8bnVtYmVyPiwgZW5kUG9zaXRpb24/OiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0pIDogQXJyYXk8QXJyYXk8bnVtYmVyPj4ge1xyXG4gICAgICAgIGxldCBlbmRYLCBlbmRZO1xyXG4gICAgICAgIGlmKGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGVuZFggPSBlbmRQb3NpdGlvbi54O1xyXG4gICAgICAgICAgICBlbmRZID0gZW5kUG9zaXRpb24ueTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAoeyBlbmRYLCBlbmRZIH0gPSBjYWxjdWxhdGVFbmRPZkNodW5rKG1hcFdpZHRoLCBtYXBIZWlnaHQsIGNodW5rVywgY2h1bmtILCBjaHVua1gsIGNodW5rWSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWREZWNvZGVkU3ViQ2h1bmtzID0gY2FsY3VsYXRlU3ViQ2h1bmtzKG1hcFdpZHRoLCBtYXBIZWlnaHQsIGNodW5rVywgY2h1bmtILCBjaHVua1gsIGNodW5rWSwgZW5jb2RlZFN1YkNodW5rVywgZW5jb2RlZFN1YkNodW5rSCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVubWVyZ2VkQXJyYXlzID0gbmV3IEFycmF5KGV4cGVjdGVkRGVjb2RlZFN1YkNodW5rcykuZmlsbCgtMSk7XHJcbiAgICAgICAgbGV0IGN1ckVuY29kZWRTdWJTZWN0aW9uID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGN1ckNodW5rWCA9IGNodW5rWDtcclxuICAgICAgICBsZXQgY3VyQ2h1bmtZID0gY2h1bmtZO1xyXG5cclxuICAgICAgICBsZXQgeyB4OiBwYWRYLCB5OiBwYWRZIH0gPSBnZXRUb3BMZWZ0UGFkZGluZyh0aWxlV2lkdGgsIHRpbGVIZWlnaHQsIG1hcFdpZHRoLCBtYXBIZWlnaHQsIGVuY29kZWRTdWJDaHVua1csIGVuY29kZWRTdWJDaHVua0gsIGN1ckNodW5rWCwgY3VyQ2h1bmtZKTtcclxuICAgICAgICBsZXQgY3VyVGlsZVggPSBwYWRYO1xyXG4gICAgICAgIGxldCBjdXJUaWxlWSA9IHBhZFk7XHJcbiAgICAgICAgY29uc3QgaW5jciA9ICgpID0+IHtcclxuICAgICAgICAgICAgY3VyRW5jb2RlZFN1YlNlY3Rpb24rKztcclxuICAgICAgICAgICAgY3VyVGlsZVggPSAwO1xyXG4gICAgICAgICAgICBjdXJUaWxlWSA9IDA7XHJcbiAgICAgICAgICAgIGN1ckNodW5rWCs9ZW5jb2RlZFN1YkNodW5rVztcclxuICAgICAgICAgICAgaWYoY3VyQ2h1bmtYID49IGVuZFgpIHtcclxuICAgICAgICAgICAgICAgIGN1ckNodW5rWCA9IGNodW5rWDtcclxuICAgICAgICAgICAgICAgIGN1ckNodW5rWSArPSBlbmNvZGVkU3ViQ2h1bmtIO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICh7IHg6IHBhZFgsIHk6IHBhZFkgfSA9IGdldFRvcExlZnRQYWRkaW5nKHRpbGVXaWR0aCwgdGlsZUhlaWdodCwgbWFwV2lkdGgsIG1hcEhlaWdodCwgZW5jb2RlZFN1YkNodW5rVywgZW5jb2RlZFN1YkNodW5rSCwgY3VyQ2h1bmtYLCBjdXJDaHVua1kpKTtcclxuICAgICAgICAgICAgY3VyVGlsZVggPSBwYWRYO1xyXG4gICAgICAgICAgICBjdXJUaWxlWSA9IHBhZFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aWxlQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRpbGVBcnJheVtpXSA9PT0gUkVTRVJWRURfRkxBR1MuRU1QVFlfU0VDVElPTl9GTEFHKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodW5tZXJnZWRBcnJheXNbY3VyRW5jb2RlZFN1YlNlY3Rpb25dICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBzdWIgY2h1bmsgc2hvdWxkIGhhdmUgYmVlbiAtMSBhdCB0aGlzIHRpbWUnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdW5tZXJnZWRBcnJheXNbY3VyRW5jb2RlZFN1YlNlY3Rpb25dID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGluY3IoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh1bm1lcmdlZEFycmF5c1tjdXJFbmNvZGVkU3ViU2VjdGlvbl0gPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBzaG91bGQgb3B0bWl6ZSBieSBjYWxjdWxhdGluZyB0aWxlIGxlbmd0aCBhbmQgZG8gbmV3IEFycmF5KGxlbmd0aCkgdGhlbiBpbmRleCBpbnN0ZWFkIG9mIHB1c2guXHJcbiAgICAgICAgICAgICAgICAgICAgdW5tZXJnZWRBcnJheXNbY3VyRW5jb2RlZFN1YlNlY3Rpb25dID0gW3BhZFgsIHBhZFldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdW5tZXJnZWRBcnJheXNbY3VyRW5jb2RlZFN1YlNlY3Rpb25dLnB1c2godGlsZUFycmF5W2ldKTtcclxuICAgICAgICAgICAgICAgIGN1clRpbGVYICs9IHRpbGVXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRYID0gY3VyQ2h1bmtYICsgY3VyVGlsZVg7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFggPj0gZW5kWCB8fCBjdXJUaWxlWCA+PSBlbmNvZGVkU3ViQ2h1bmtXKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVGlsZVggPSBwYWRYO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRpbGVZICs9IHRpbGVIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFkgPSBjdXJDaHVua1kgKyBjdXJUaWxlWTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFkgPj0gZW5kWSB8fCBjdXJUaWxlWSA+PSBlbmNvZGVkU3ViQ2h1bmtIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY3IoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVubWVyZ2VkQXJyYXlzO1xyXG4gICAgfVxyXG59IiwiXHJcbi8qKlxyXG4gKiBGYXN0SW50ZWdlckNvbXByZXNzaW9uLmpzIDogYSBmYXN0IGludGVnZXIgY29tcHJlc3Npb24gbGlicmFyeSBpbiBKYXZhU2NyaXB0LlxyXG4gKiAoYykgdGhlIGF1dGhvcnNcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMC5cclxuICpcclxuICpGYXN0SW50ZWdlckNvbXByZXNzaW9uXHJcbiAqIFNpbXBsZSB1c2FnZSA6XHJcbiAqICAvLyB2YXIgRmFzdEludGVnZXJDb21wcmVzc2lvbiA9IHJlcXVpcmUoXCJmYXN0aW50Y29tcHJlc3Npb25cIik7Ly8gaWYgeW91IHVzZSBub2RlXHJcbiAqICB2YXIgYXJyYXkgPSBbMTAsMTAwMDAwLDY1OTk5LDEwLDEwLDAsMSwxLDIwMDBdO1xyXG4gKiAgdmFyIGJ1ZiA9IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHJlc3MoYXJyYXkpO1xyXG4gKiAgdmFyIGJhY2sgPSBGYXN0SW50ZWdlckNvbXByZXNzaW9uLnVuY29tcHJlc3MoYnVmKTsgLy8gZ2V0cyBiYWNrIFsxMCwxMDAwMDAsNjU5OTksMTAsMTAsMCwxLDEsMjAwMF1cclxuICpcclxuICpcclxuICogWW91IGNhbiBpbnN0YWxsIHRoZSBsaWJyYXJ5IHVuZGVyIG5vZGUgd2l0aCB0aGUgY29tbWFuZCBsaW5lXHJcbiAqICAgbnBtIGluc3RhbGwgZmFzdGludGNvbXByZXNzaW9uXHJcbiAqL1xyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGYXN0SW50ZWdlckNvbXByZXNzaW9uO1xyXG5cclxuXHJcbi8vIHlvdSBjYW4gcHJvdmlkZSBhbiBpdGVyYWJsZVxyXG5mdW5jdGlvbiBGYXN0SW50ZWdlckNvbXByZXNzaW9uKCkge1xyXG59XHJcblxyXG4vLyBwcml2YXRlIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGJ5dGVsb2codmFsKSB7XHJcbiAgICBpZiAodmFsIDwgKDEgPDwgNykpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMTQpKSB7XHJcbiAgICAgICAgcmV0dXJuIDI7XHJcbiAgICB9IGVsc2UgaWYgKHZhbCA8ICgxIDw8IDIxKSkge1xyXG4gICAgICAgIHJldHVybiAzO1xyXG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyOCkpIHtcclxuICAgICAgICByZXR1cm4gNDtcclxuICAgIH1cclxuICAgIHJldHVybiA1O1xyXG59XHJcblxyXG4vLyBwcml2YXRlIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIHppZ3phZ19lbmNvZGUodmFsKSB7XHJcbiAgICByZXR1cm4gKHZhbCArIHZhbCkgXiAodmFsID4+IDMxKTtcclxufVxyXG5cclxuLy8gcHJpdmF0ZSBmdW5jdGlvblxyXG5mdW5jdGlvbiB6aWd6YWdfZGVjb2RlKHZhbCkge1xyXG4gICAgcmV0dXJuICAodmFsID4+IDEpIF4gKC0gKHZhbCAmIDEpKTtcclxufVxyXG5cclxuXHJcbi8vIGNvbXB1dGUgaG93IG1hbnkgYnl0ZXMgYW4gYXJyYXkgb2YgaW50ZWdlcnMgd291bGQgdXNlIG9uY2UgY29tcHJlc3NlZFxyXG4vLyBpbnB1dCBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheSBvZiBub24tbmVnYXRpdmUgaW50ZWdlcnNcclxuRmFzdEludGVnZXJDb21wcmVzc2lvbi5jb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzID0gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgIHZhciBjID0gaW5wdXQubGVuZ3RoO1xyXG4gICAgdmFyIGFuc3dlciA9IDA7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYzsgaSsrKSB7XHJcbiAgICAgICAgYW5zd2VyICs9IGJ5dGVsb2coaW5wdXRbaV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFuc3dlcjtcclxufVxyXG5cclxuXHJcbi8vIGNvbXB1dGUgaG93IG1hbnkgYnl0ZXMgYW4gYXJyYXkgb2YgaW50ZWdlcnMgd291bGQgdXNlIG9uY2UgY29tcHJlc3NlZFxyXG4vLyBpbnB1dCBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheSBvZiBpbnRlZ2Vycywgc29tZSBvZiB0aGVtIGNhbiBiZSBuZWdhdGl2ZVxyXG5GYXN0SW50ZWdlckNvbXByZXNzaW9uLmNvbXB1dGVDb21wcmVzc2VkU2l6ZUluQnl0ZXNTaWduZWQgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIGMgPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYW5zd2VyID0gMDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjOyBpKyspIHtcclxuICAgICAgICBhbnN3ZXIgKz0gYnl0ZWxvZyh6aWd6YWdfZW5jb2RlKGlucHV0W2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYW5zd2VyO1xyXG59XHJcblxyXG4vLyBDb21wcmVzcyBhbiBhcnJheSBvZiBpbnRlZ2VycywgcmV0dXJuIGEgY29tcHJlc3NlZCBidWZmZXIgKGFzIGFuIEFycmF5QnVmZmVyKS5cclxuLy8gSXQgaXMgZXhwZWN0ZWQgdGhhdCB0aGUgaW50ZWdlcnMgYXJlIG5vbi1uZWdhdGl2ZTogdGhlIGNhbGxlciBpcyByZXNwb25zaWJsZVxyXG4vLyBmb3IgbWFraW5nIHRoaXMgY2hlY2suIEZsb2F0aW5nLXBvaW50IG51bWJlcnMgYXJlIG5vdCBzdXBwb3J0ZWQuXHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHJlc3MgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIGMgPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHV0ZUNvbXByZXNzZWRTaXplSW5CeXRlcyhpbnB1dCkpO1xyXG4gICAgdmFyIHZpZXcgICA9IG5ldyBJbnQ4QXJyYXkoYnVmKTtcclxuICAgIHZhciBwb3MgPSAwO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGM7IGkrKykge1xyXG4gICAgICAgIHZhciB2YWwgPSBpbnB1dFtpXTtcclxuICAgICAgICBpZiAodmFsIDwgKDEgPDwgNykpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMTQpKSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKHZhbCAmIDB4N0YpIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyMSkpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAodmFsICYgMHg3RikgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gNykgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gMTQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyOCkpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAodmFsICYgMHg3RiApIHwgMHg4MCA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiA3KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiAxNCkgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gMjE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoIHZhbCAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiA3KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiAxNCkgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gMjEpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBidWY7XHJcbn1cclxuXHJcblxyXG4vLyBmcm9tIGEgY29tcHJlc3NlZCBhcnJheSBvZiBpbnRlZ2VycyBzdG9yZWQgQXJyYXlCdWZmZXIsIGNvbXB1dGUgdGhlIG51bWJlciBvZiBjb21wcmVzc2VkIGludGVnZXJzIGJ5IHNjYW5uaW5nIHRoZSBpbnB1dFxyXG5GYXN0SW50ZWdlckNvbXByZXNzaW9uLmNvbXB1dGVIb3dNYW55SW50ZWdlcnMgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIHZpZXcgICA9IG5ldyBJbnQ4QXJyYXkoaW5wdXQpO1xyXG4gICAgdmFyIGMgPSB2aWV3Lmxlbmd0aDtcclxuICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYzsgaSsrKSB7XHJcbiAgICAgICAgY291bnQgKz0gKGlucHV0W2ldPj4+Nyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYyAtIGNvdW50O1xyXG59XHJcbi8vIHVuY29tcHJlc3MgYW4gYXJyYXkgb2YgaW50ZWdlciBmcm9tIGFuIEFycmF5QnVmZmVyLCByZXR1cm4gdGhlIGFycmF5XHJcbi8vIGl0IGlzIGFzc3VtZWQgdGhhdCB0aGV5IHdlcmUgY29tcHJlc3NlZCB1c2luZyB0aGUgY29tcHJlc3MgZnVuY3Rpb24sIHRoZSBjYWxsZXJcclxuLy8gaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHRoYXQgaXQgaXMgdGhlIGNhc2UuXHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24udW5jb21wcmVzcyA9IGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICB2YXIgYXJyYXkgPSBbXVxyXG4gICAgdmFyIGluYnl0ZSA9IG5ldyBJbnQ4QXJyYXkoaW5wdXQpO1xyXG4gICAgdmFyIGVuZCA9IGluYnl0ZS5sZW5ndGg7XHJcbiAgICB2YXIgcG9zID0gMDtcclxuICAgIHdoaWxlIChlbmQgPiBwb3MpIHtcclxuICAgICAgICB2YXIgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdmFyIHYgPSBjICYgMHg3RjtcclxuICAgICAgICBpZiAoYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2godilcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHYgfD0gKGMgJiAweDdGKSA8PCA3O1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh2KVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSAoYyAmIDB4N0YpIDw8IDE0O1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh2KVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSAoYyAmIDB4N0YpIDw8IDIxO1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh2KVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSBjIDw8IDI4O1xyXG4gICAgICAgIGFycmF5LnB1c2godilcclxuICAgIH1cclxuICAgIHJldHVybiBhcnJheTtcclxufVxyXG5cclxuXHJcbi8vIENvbXByZXNzIGFuIGFycmF5IG9mIGludGVnZXJzLCByZXR1cm4gYSBjb21wcmVzc2VkIGJ1ZmZlciAoYXMgYW4gQXJyYXlCdWZmZXIpLlxyXG4vLyBUaGUgaW50ZWdlcnMgY2FuIGJlIHNpZ25lZCAobmVnYXRpdmUpLCBidXQgZmxvYXRpbmctcG9pbnQgdmFsdWVzIGFyZSBub3Qgc3VwcG9ydGVkLlxyXG5GYXN0SW50ZWdlckNvbXByZXNzaW9uLmNvbXByZXNzU2lnbmVkID0gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgIHZhciBjID0gaW5wdXQubGVuZ3RoO1xyXG4gICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihGYXN0SW50ZWdlckNvbXByZXNzaW9uLmNvbXB1dGVDb21wcmVzc2VkU2l6ZUluQnl0ZXNTaWduZWQoaW5wdXQpKTtcclxuICAgIHZhciB2aWV3ICAgPSBuZXcgSW50OEFycmF5KGJ1Zik7XHJcbiAgICB2YXIgcG9zID0gMDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjOyBpKyspIHtcclxuICAgICAgICB2YXIgdmFsID0gemlnemFnX2VuY29kZShpbnB1dFtpXSk7XHJcbiAgICAgICAgaWYgKHZhbCA8ICgxIDw8IDcpKSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gdmFsIDtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCA8ICgxIDw8IDE0KSkge1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICh2YWwgJiAweDdGKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gdmFsID4+PiA3O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMjEpKSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKHZhbCAmIDB4N0YpIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDcpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDE0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMjgpKSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKHZhbCAmIDB4N0YgKSB8IDB4ODAgO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gNykgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gMTQpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDIxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCB2YWwgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gNykgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gMTQpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDIxKSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gdmFsID4+PiAyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnVmO1xyXG59XHJcblxyXG4vLyB1bmNvbXByZXNzIGFuIGFycmF5IG9mIGludGVnZXIgZnJvbSBhbiBBcnJheUJ1ZmZlciwgcmV0dXJuIHRoZSBhcnJheVxyXG4vLyBpdCBpcyBhc3N1bWVkIHRoYXQgdGhleSB3ZXJlIGNvbXByZXNzZWQgdXNpbmcgdGhlIGNvbXByZXNzU2lnbmVkIGZ1bmN0aW9uLCB0aGUgY2FsbGVyXHJcbi8vIGlzIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyB0aGF0IGl0IGlzIHRoZSBjYXNlLlxyXG5GYXN0SW50ZWdlckNvbXByZXNzaW9uLnVuY29tcHJlc3NTaWduZWQgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIGFycmF5ID0gW11cclxuICAgIHZhciBpbmJ5dGUgPSBuZXcgSW50OEFycmF5KGlucHV0KTtcclxuICAgIHZhciBlbmQgPSBpbmJ5dGUubGVuZ3RoO1xyXG4gICAgdmFyIHBvcyA9IDA7XHJcbiAgICB3aGlsZSAoZW5kID4gcG9zKSB7XHJcbiAgICAgICAgdmFyIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHZhciB2ID0gYyAmIDB4N0Y7XHJcbiAgICAgICAgaWYgKGMgPj0gMCkge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKHppZ3phZ19kZWNvZGUodikpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjID0gaW5ieXRlW3BvcysrXTtcclxuICAgICAgICB2IHw9IChjICYgMHg3RikgPDwgNztcclxuICAgICAgICBpZiAoYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goemlnemFnX2RlY29kZSh2KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHYgfD0gKGMgJiAweDdGKSA8PCAxNDtcclxuICAgICAgICBpZiAoYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goemlnemFnX2RlY29kZSh2KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHYgfD0gKGMgJiAweDdGKSA8PCAyMTtcclxuICAgICAgICBpZiAoYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goemlnemFnX2RlY29kZSh2KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHYgfD0gYyA8PCAyODtcclxuICAgICAgICBhcnJheS5wdXNoKHppZ3phZ19kZWNvZGUodikpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyYXk7XHJcbn1cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUVuZE9mQ2h1bmsobWFwV2lkdGg6IG51bWJlciwgbWFwSGVpZ2h0OiBudW1iZXIsIGNodW5rVzogbnVtYmVyLCBjaHVua0g6IG51bWJlciwgY2h1bmtYOiBudW1iZXIsIGNodW5rWTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCByZW1haW5pbmdNYXBXaWR0aCA9IG1hcFdpZHRoIC0gY2h1bmtYO1xyXG4gICAgY29uc3QgcmVtYWluaW5nTWFwSGVpZ2h0ID0gbWFwSGVpZ2h0IC0gY2h1bmtZO1xyXG4gICAgY29uc3QgY3VyQ2h1bmtXID0gcmVtYWluaW5nTWFwV2lkdGggPj0gY2h1bmtXID8gY2h1bmtXIDogcmVtYWluaW5nTWFwV2lkdGg7XHJcbiAgICBjb25zdCBjdXJDaHVua0ggPSByZW1haW5pbmdNYXBIZWlnaHQgPj0gY2h1bmtIID8gY2h1bmtIIDogcmVtYWluaW5nTWFwSGVpZ2h0O1xyXG4gICAgcmV0dXJuIHsgZW5kWDogY2h1bmtYICsgY3VyQ2h1bmtXLCBlbmRZOiBjaHVua1kgKyBjdXJDaHVua0ggfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVN1YkNodW5rcyhtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBjaHVua1g6IG51bWJlciwgY2h1bmtZOiBudW1iZXIsIHN1YkNodW5rVywgc3ViQ2h1bmtIKSB7XHJcbiAgICBjb25zdCB7IHJvd3MsIGNvbHVtbnMgfSA9IGNhbGN1bGF0ZVJvd3NBbmRDb2x1bW5zKG1hcFdpZHRoLCBtYXBIZWlnaHQsIGNodW5rVywgY2h1bmtILCBjaHVua1gsIGNodW5rWSwgc3ViQ2h1bmtXLCBzdWJDaHVua0gpO1xyXG4gICAgcmV0dXJuIHJvd3MgKiBjb2x1bW5zO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVJvd3NBbmRDb2x1bW5zKG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIGNodW5rWDogbnVtYmVyLCBjaHVua1k6IG51bWJlciwgc3ViQ2h1bmtXLCBzdWJDaHVua0gpIHtcclxuICAgIGNvbnN0IHJlbWFpbmluZ01hcFdpZHRoID0gbWFwV2lkdGggLSBjaHVua1g7XHJcbiAgICBjb25zdCByZW1haW5pbmdNYXBIZWlnaHQgPSBtYXBIZWlnaHQgLSBjaHVua1k7XHJcbiAgICBjb25zdCBjb2x1bW5zID0gTWF0aC5taW4oTWF0aC5jZWlsKGNodW5rVyAvIHN1YkNodW5rVyksIE1hdGguY2VpbChyZW1haW5pbmdNYXBXaWR0aCAvIHN1YkNodW5rVykpO1xyXG4gICAgY29uc3Qgcm93cyA9IE1hdGgubWluKE1hdGguY2VpbChjaHVua0ggLyBzdWJDaHVua0gpLCBNYXRoLmNlaWwocmVtYWluaW5nTWFwSGVpZ2h0IC8gc3ViQ2h1bmtIKSk7XHJcbiAgICByZXR1cm4ge3Jvd3MsIGNvbHVtbnN9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BMZWZ0UGFkZGluZyh0aWxlV2lkdGg6IG51bWJlciwgdGlsZUhlaWdodDogbnVtYmVyLCBtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBjaHVua1g6IG51bWJlciwgY2h1bmtZOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHRvcExlZnRQYWRkaW5nID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBjb25zdCBjb2x1bW4gPSBNYXRoLmZsb29yKGNodW5rWCAvIGNodW5rVyk7XHJcbiAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKGNodW5rWSAvIGNodW5rSCk7XHJcbiAgICAvLyAgIGNvbnNvbGUubG9nKHsgcm93LCBjb2x1bW4sIHRpbGVXaWR0aCwgdGlsZUhlaWdodCwgbWFwV2lkdGgsIG1hcEhlaWdodCwgY2h1bmtXLCBjaHVua0gsIGNodW5rWCwgY2h1bmtZIH0pXHJcbiAgICBsZXQgYW5zID0gKHRpbGVXaWR0aCAtIChjaHVua1cgJSB0aWxlV2lkdGgpKSAqIGNvbHVtbjtcclxuICAgIGxldCBtID0gTWF0aC5mbG9vcihhbnMgLyB0aWxlV2lkdGgpO1xyXG4gICAgdG9wTGVmdFBhZGRpbmcueCAgPSBhbnMgLSAobSAqIHRpbGVXaWR0aCk7XHJcblxyXG4gICAgYW5zID0gKHRpbGVIZWlnaHQgLSAoY2h1bmtIICUgdGlsZUhlaWdodCkpICogcm93O1xyXG4gICAgbSA9IE1hdGguZmxvb3IoYW5zIC8gdGlsZUhlaWdodCk7XHJcbiAgICB0b3BMZWZ0UGFkZGluZy55ID0gYW5zIC0gKG0gKiB0aWxlSGVpZ2h0KTtcclxuICAgIHJldHVybiB0b3BMZWZ0UGFkZGluZztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlT2Zmc2V0cyh0aWxlV2lkdGg6IG51bWJlciwgdGlsZUhlaWdodDogbnVtYmVyLCBtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBjaHVua1g6IG51bWJlciwgY2h1bmtZOiBudW1iZXIpIDogeyB0b3BMZWZ0UGFkZGluZzogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9LCBib3R0b21SaWdodE92ZXJmbG93OiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH19IHtcclxuICAgIGNvbnN0IGNvbHVtbnMgPSAgTWF0aC5jZWlsKG1hcFdpZHRoL2NodW5rVyk7XHJcbiAgICBjb25zdCByb3dzID0gTWF0aC5jZWlsKG1hcEhlaWdodCAvIGNodW5rSCk7XHJcbiAgICBjb25zdCB0b3BMZWZ0UGFkZGluZyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgY29uc3QgY29sdW1uID0gTWF0aC5mbG9vcihjaHVua1ggLyBjaHVua1cpO1xyXG4gICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihjaHVua1kgLyBjaHVua0gpO1xyXG4gLy8gICBjb25zb2xlLmxvZyh7IHJvdywgY29sdW1uLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsIG1hcFdpZHRoLCBtYXBIZWlnaHQsIGNodW5rVywgY2h1bmtILCBjaHVua1gsIGNodW5rWSB9KVxyXG4gICAgbGV0IGFucyA9ICh0aWxlV2lkdGggLSAoY2h1bmtXICUgdGlsZVdpZHRoKSkgKiBjb2x1bW47XHJcbiAgICBsZXQgbSA9IE1hdGguZmxvb3IoYW5zIC8gdGlsZVdpZHRoKTtcclxuICAgIHRvcExlZnRQYWRkaW5nLnggID0gYW5zIC0gKG0gKiB0aWxlV2lkdGgpO1xyXG5cclxuICAgIGFucyA9ICh0aWxlSGVpZ2h0IC0gKGNodW5rSCAlIHRpbGVIZWlnaHQpKSAqIHJvdztcclxuICAgIG0gPSBNYXRoLmZsb29yKGFucyAvIHRpbGVIZWlnaHQpO1xyXG4gICAgdG9wTGVmdFBhZGRpbmcueSA9IGFucyAtIChtICogdGlsZUhlaWdodCk7XHJcblxyXG4gICAgY29uc3QgYm90dG9tUmlnaHRPdmVyZmxvdyA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgaWYoY29sdW1uIDwgY29sdW1ucy0xKSB7XHJcbiAgICAgICAgYW5zID0gKHRpbGVXaWR0aCAtIChjaHVua1cgJSB0aWxlV2lkdGgpKSAqIChjb2x1bW4rMSk7XHJcbiAgICAgICAgbSA9IE1hdGguZmxvb3IoYW5zIC8gdGlsZVdpZHRoKTtcclxuICAgICAgICBib3R0b21SaWdodE92ZXJmbG93LnggID0gYW5zIC0gKG0gKiB0aWxlV2lkdGgpO1xyXG4gICAgfVxyXG4gICAgaWYocm93IDwgcm93cy0xKSB7XHJcbiAgICAgICAgYW5zID0gKHRpbGVIZWlnaHQgLSAoY2h1bmtIICUgdGlsZUhlaWdodCkpICogKHJvdysxKTtcclxuICAgICAgICBtID0gTWF0aC5mbG9vcihhbnMgLyB0aWxlSGVpZ2h0KTtcclxuICAgICAgICBib3R0b21SaWdodE92ZXJmbG93LnkgPSBhbnMgLSAobSAqIHRpbGVIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYm90dG9tUmlnaHRPdmVyZmxvdyxcclxuICAgICAgICB0b3BMZWZ0UGFkZGluZyxcclxuICAgIH1cclxufVxyXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5XG4gICwgcHJlZml4ID0gJ34nO1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIHRvIGNyZWF0ZSBhIHN0b3JhZ2UgZm9yIG91ciBgRUVgIG9iamVjdHMuXG4gKiBBbiBgRXZlbnRzYCBpbnN0YW5jZSBpcyBhIHBsYWluIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIGFyZSBldmVudCBuYW1lcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEV2ZW50cygpIHt9XG5cbi8vXG4vLyBXZSB0cnkgdG8gbm90IGluaGVyaXQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuIEluIHNvbWUgZW5naW5lcyBjcmVhdGluZyBhblxuLy8gaW5zdGFuY2UgaW4gdGhpcyB3YXkgaXMgZmFzdGVyIHRoYW4gY2FsbGluZyBgT2JqZWN0LmNyZWF0ZShudWxsKWAgZGlyZWN0bHkuXG4vLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxuLy8gY2hhcmFjdGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBidWlsdC1pbiBvYmplY3QgcHJvcGVydGllcyBhcmUgbm90XG4vLyBvdmVycmlkZGVuIG9yIHVzZWQgYXMgYW4gYXR0YWNrIHZlY3Rvci5cbi8vXG5pZiAoT2JqZWN0LmNyZWF0ZSkge1xuICBFdmVudHMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAvL1xuICAvLyBUaGlzIGhhY2sgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIGBfX3Byb3RvX19gIHByb3BlcnR5IGlzIHN0aWxsIGluaGVyaXRlZCBpblxuICAvLyBzb21lIG9sZCBicm93c2VycyBsaWtlIEFuZHJvaWQgNCwgaVBob25lIDUuMSwgT3BlcmEgMTEgYW5kIFNhZmFyaSA1LlxuICAvL1xuICBpZiAoIW5ldyBFdmVudHMoKS5fX3Byb3RvX18pIHByZWZpeCA9IGZhbHNlO1xufVxuXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvbmNlPWZhbHNlXSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuICB0aGlzLmZuID0gZm47XG4gIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVtaXR0ZXIgUmVmZXJlbmNlIHRvIHRoZSBgRXZlbnRFbWl0dGVyYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBsaXN0ZW5lciA9IG5ldyBFRShmbiwgY29udGV4dCB8fCBlbWl0dGVyLCBvbmNlKVxuICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50c1tldnRdKSBlbWl0dGVyLl9ldmVudHNbZXZ0XSA9IGxpc3RlbmVyLCBlbWl0dGVyLl9ldmVudHNDb3VudCsrO1xuICBlbHNlIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0uZm4pIGVtaXR0ZXIuX2V2ZW50c1tldnRdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gW2VtaXR0ZXIuX2V2ZW50c1tldnRdLCBsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIGVtaXR0ZXI7XG59XG5cbi8qKlxuICogQ2xlYXIgZXZlbnQgYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2dCBUaGUgRXZlbnQgbmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNsZWFyRXZlbnQoZW1pdHRlciwgZXZ0KSB7XG4gIGlmICgtLWVtaXR0ZXIuX2V2ZW50c0NvdW50ID09PSAwKSBlbWl0dGVyLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIGVsc2UgZGVsZXRlIGVtaXR0ZXIuX2V2ZW50c1tldnRdO1xufVxuXG4vKipcbiAqIE1pbmltYWwgYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcbiAqIGBFdmVudEVtaXR0ZXJgIGludGVyZmFjZS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gYXJyYXkgbGlzdGluZyB0aGUgZXZlbnRzIGZvciB3aGljaCB0aGUgZW1pdHRlciBoYXMgcmVnaXN0ZXJlZFxuICogbGlzdGVuZXJzLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgdmFyIG5hbWVzID0gW11cbiAgICAsIGV2ZW50c1xuICAgICwgbmFtZTtcblxuICBpZiAodGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHJldHVybiBuYW1lcztcblxuICBmb3IgKG5hbWUgaW4gKGV2ZW50cyA9IHRoaXMuX2V2ZW50cykpIHtcbiAgICBpZiAoaGFzLmNhbGwoZXZlbnRzLCBuYW1lKSkgbmFtZXMucHVzaChwcmVmaXggPyBuYW1lLnNsaWNlKDEpIDogbmFtZSk7XG4gIH1cblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHJldHVybiBuYW1lcy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhldmVudHMpKTtcbiAgfVxuXG4gIHJldHVybiBuYW1lcztcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnMoZXZlbnQpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcbiAgICAsIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFoYW5kbGVycykgcmV0dXJuIFtdO1xuICBpZiAoaGFuZGxlcnMuZm4pIHJldHVybiBbaGFuZGxlcnMuZm5dO1xuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuICAgIGVlW2ldID0gaGFuZGxlcnNbaV0uZm47XG4gIH1cblxuICByZXR1cm4gZWU7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gbGlzdGVuZXJDb3VudChldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiAwO1xuICBpZiAobGlzdGVuZXJzLmZuKSByZXR1cm4gMTtcbiAgcmV0dXJuIGxpc3RlbmVycy5sZW5ndGg7XG59O1xuXG4vKipcbiAqIENhbGxzIGVhY2ggb2YgdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhZCBsaXN0ZW5lcnMsIGVsc2UgYGZhbHNlYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCwgYTEsIGEyLCBhMywgYTQsIGE1KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiBmYWxzZTtcblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF1cbiAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAsIGFyZ3NcbiAgICAsIGk7XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChsaXN0ZW5lcnMub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgc3dpdGNoIChsZW4pIHtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSksIHRydWU7XG4gICAgICBjYXNlIDM6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcbiAgICAgIGNhc2UgNTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCksIHRydWU7XG4gICAgICBjYXNlIDY6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQsIGE1KSwgdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGkgPCBsZW47IGkrKykge1xuICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuXG4gICAgbGlzdGVuZXJzLmZuLmFwcGx5KGxpc3RlbmVycy5jb250ZXh0LCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxuICAgICAgLCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuICAgICAgc3dpdGNoIChsZW4pIHtcbiAgICAgICAgY2FzZSAxOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCk7IGJyZWFrO1xuICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuICAgICAgICBjYXNlIDM6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIpOyBicmVhaztcbiAgICAgICAgY2FzZSA0OiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyLCBhMyk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmICghYXJncykgZm9yIChqID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpc3RlbmVyc1tpXS5mbi5hcHBseShsaXN0ZW5lcnNbaV0uY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbiAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIGZhbHNlKTtcbn07XG5cbi8qKlxuICogQWRkIGEgb25lLXRpbWUgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIG9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KSB7XG4gIHJldHVybiBhZGRMaXN0ZW5lcih0aGlzLCBldmVudCwgZm4sIGNvbnRleHQsIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVycyBvZiBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBtYXRjaCB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBoYXZlIHRoaXMgY29udGV4dC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBPbmx5IHJlbW92ZSBvbmUtdGltZSBsaXN0ZW5lcnMuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihldmVudCwgZm4sIGNvbnRleHQsIG9uY2UpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIHRoaXM7XG4gIGlmICghZm4pIHtcbiAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cbiAgaWYgKGxpc3RlbmVycy5mbikge1xuICAgIGlmIChcbiAgICAgIGxpc3RlbmVycy5mbiA9PT0gZm4gJiZcbiAgICAgICghb25jZSB8fCBsaXN0ZW5lcnMub25jZSkgJiZcbiAgICAgICghY29udGV4dCB8fCBsaXN0ZW5lcnMuY29udGV4dCA9PT0gY29udGV4dClcbiAgICApIHtcbiAgICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGV2ZW50cyA9IFtdLCBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgbGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fFxuICAgICAgICAob25jZSAmJiAhbGlzdGVuZXJzW2ldLm9uY2UpIHx8XG4gICAgICAgIChjb250ZXh0ICYmIGxpc3RlbmVyc1tpXS5jb250ZXh0ICE9PSBjb250ZXh0KVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50cy5wdXNoKGxpc3RlbmVyc1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBSZXNldCB0aGUgYXJyYXksIG9yIHJlbW92ZSBpdCBjb21wbGV0ZWx5IGlmIHdlIGhhdmUgbm8gbW9yZSBsaXN0ZW5lcnMuXG4gICAgLy9cbiAgICBpZiAoZXZlbnRzLmxlbmd0aCkgdGhpcy5fZXZlbnRzW2V2dF0gPSBldmVudHMubGVuZ3RoID09PSAxID8gZXZlbnRzWzBdIDogZXZlbnRzO1xuICAgIGVsc2UgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbGwgbGlzdGVuZXJzLCBvciB0aG9zZSBvZiB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBbZXZlbnRdIFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0O1xuXG4gIGlmIChldmVudCkge1xuICAgIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG4gICAgaWYgKHRoaXMuX2V2ZW50c1tldnRdKSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy9cbi8vIEFsaWFzIG1ldGhvZHMgbmFtZXMgYmVjYXVzZSBwZW9wbGUgcm9sbCBsaWtlIHRoYXQuXG4vL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cbi8vXG4vLyBFeHBvc2UgdGhlIHByZWZpeC5cbi8vXG5FdmVudEVtaXR0ZXIucHJlZml4ZWQgPSBwcmVmaXg7XG5cbi8vXG4vLyBBbGxvdyBgRXZlbnRFbWl0dGVyYCB0byBiZSBpbXBvcnRlZCBhcyBtb2R1bGUgbmFtZXNwYWNlLlxuLy9cbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5pZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBtb2R1bGUpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG59XG4iLCIvL1JFQURNRVxyXG4vLyBnYW1lIHN0YWdlIHBvc2l0aW9uIHNob3VsZCBhbHdheXMgYmUgYmFzZWQgb24gdGhlIHZpZXcgcmVjdCBuZXZlciBhbnl0aGluZyBlbHNlLlxyXG5cclxuaW1wb3J0IHtBdmFpbGFiaWxpdHlGbGFncywgUGxheWVyVmlldywgV29ybGREaXNwbGF5T2JqZWN0fSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQge21lcmdlT3B0aW9uc30gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IFRpbGVTcHJpdGUsIFBvaW50IH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7R2FtZU9iamVjdH0gZnJvbSBcIi4vR2FtZU9iamVjdFwiO1xyXG5pbXBvcnQge1Jlc29sdXRpb25NYW5hZ2VyfSBmcm9tIFwiLi9SZXNvbHV0aW9uTWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGVudW0gTGV2ZWxDYW1lcmFSZW5kZXJNb2RlIHtcclxuICAgIElORklOSVRFX1NJWkUsXHJcbiAgICBGSVhFRF9WSUVXLFxyXG4gICAgTUFYX1NJWkUsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEluZmluaXRlU2l6ZVJlbmRlck9wdGlvbnMgPSB7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGxheWVyQ2FtZXJhT3B0aW9ucyB7XHJcbiAgICByZXNvbHV0aW9uPzogbnVtYmVyLFxyXG4gICAgcmVuZGVyTW9kZT86IExldmVsQ2FtZXJhUmVuZGVyTW9kZSxcclxuICAgIHJlc2l6ZVdpdGhTY3JlZW4/OiBib29sZWFuLFxyXG4gICAgYXNwZWN0UmF0aW8/OiBudW1iZXIsXHJcbiAgICB2aWV3V2lkdGg/OiBudW1iZXIsXHJcbiAgICB2aWV3SGVpZ2h0PzogbnVtYmVyLFxyXG4gICAgd29ybGRYPzogbnVtYmVyLFxyXG4gICAgd29ybGRZPzogbnVtYmVyLFxyXG4gICAgc3RvcENhbWVyYUF0Qm91bmRhcmllcz86IGJvb2xlYW4sXHJcbiAgICBjdWxsR2FtZU9iamVjdHM/OiBib29sZWFuLFxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0UGxheWVyQ2FtZXJhT3B0aW9ucygpIDogUGxheWVyQ2FtZXJhT3B0aW9ucyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlck1vZGU6IExldmVsQ2FtZXJhUmVuZGVyTW9kZS5JTkZJTklURV9TSVpFLFxyXG4gICAgICAgIHJlc29sdXRpb246IDEsXHJcbiAgICAgICAgcmVzaXplV2l0aFNjcmVlbjogdHJ1ZSxcclxuICAgICAgICB2aWV3V2lkdGg6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmlubmVyV2lkdGggOiB0eXBlb2Ygc2NyZWVuICE9PSAndW5kZWZpbmVkJyA/IHNjcmVlbi53aWR0aCA6IG51bGwsXHJcbiAgICAgICAgdmlld0hlaWdodDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiB0eXBlb2Ygc2NyZWVuICE9PSAndW5kZWZpbmVkJyA/IHNjcmVlbi5oZWlnaHQgOiBudWxsLFxyXG4gICAgICAgIHN0b3BDYW1lcmFBdEJvdW5kYXJpZXM6IHRydWUsXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXJDYW1lcmEge1xyXG4gICAgcHJpdmF0ZSBib3VuZFBvc2l0aW9uT2Zmc2V0cz86IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcclxuICAgIHByaXZhdGUgcHJlRm9jdXNCb3VuZFBvaW50OiBQb2ludDtcclxuICAgIHByaXZhdGUgZm9jdXNPZmZzZXRYPzogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmb2N1c09mZnNldFk/OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlbmRlck1vZGU6IExldmVsQ2FtZXJhUmVuZGVyTW9kZTtcclxuICAgIHByaXZhdGUgZm9jdXNlZEdhbWVPYmplY3Q6IEdhbWVPYmplY3Q7XHJcbiAgICBwcml2YXRlIGZvY3VzZWRQb2ludDogUG9pbnQ7XHJcbiAgICBwcml2YXRlIGxldmVsV2lkdGhJblBpeGVsczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBsZXZlbEhlaWdodEluUGl4ZWxzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGxldmVsV2lkdGhSZXNBZGp1c3RlZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBsZXZlbEhlaWdodFJlc0FkanVzdGVkOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdmlld1dpZHRoOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdmlld0hlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBoYWxmV2lkdGg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaGFsZkhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgZm9jdXNlZDogQm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyB2aWV3UmVjdDogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSA9IHsgeDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xyXG4gICAgcHJpdmF0ZSBvZmZzZXRWaWV3UmVjdDogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSA9IHsgeDogMCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xyXG4gICAgcmVhZG9ubHkgY2VudGVyZWRTY3JlZW5Qb3NpdGlvbjogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9ID0geyB4OiAwLCB5OiAwIH07XHJcblxyXG4gICAgcHVibGljIG1hcE9mZnNldFggPSAwO1xyXG4gICAgcHVibGljIG1hcE9mZnNldFkgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBtYXBQYWRkaW5nTGVmdCA9IDA7XHJcbiAgICBwdWJsaWMgbWFwUGFkZGluZ1RvcCA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSByZXNpemVXaXRoU2NyZWVuOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgc3RvcENhbWVyYUF0Qm91bmRhcmllczogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwcml2YXRlIGlzU3RvcHBpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgc3RhdGljU3ByaXRlczogQXJyYXk8V29ybGREaXNwbGF5T2JqZWN0IHwgVGlsZVNwcml0ZSB8IEdhbWVPYmplY3Q+ID0gW107XHJcbiAgICBwcml2YXRlIGR5bmFtaWNTcHJpdGVzOiBBcnJheTxXb3JsZERpc3BsYXlPYmplY3Q+ID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBwbGF5ZXJTcHJpdGU6IFdvcmxkRGlzcGxheU9iamVjdDtcclxuXHJcbiAgICBwcml2YXRlIG1heFZpZXdQaXhlbHNXOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG1heFZpZXdQaXhlbHNIOiBudW1iZXI7XHJcblxyXG4gICAgcHJpdmF0ZSBmbGFnczogQXZhaWxhYmlsaXR5RmxhZ3M7XHJcbiAgICBwcml2YXRlIGxhc3RYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGxhc3RZOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJhdGlvVyA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmF0aW9IIDogbnVtYmVyO1xyXG5cclxuICAgIHJlYWRvbmx5IHBsYXllclZpZXdSZWN0OiBQbGF5ZXJWaWV3ID0geyB4OiAwLCB5OiAwLCB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XHJcbiAgICBwdWJsaWMgYm91bmRDYW1lcmFDZW50ZXI6IFBvaW50O1xyXG4gICAgcHJpdmF0ZSByZXNvbHV0aW9uOiBudW1iZXIgPSAxO1xyXG4gICAgcmVhZG9ubHkgcmVuZGVyZXI6IFBJWEkuQ2FudmFzUmVuZGVyZXIgfCBQSVhJLldlYkdMUmVuZGVyZXI7XHJcbiAgICByZWFkb25seSBnYW1lU3RhZ2U6IFBJWEkuQ29udGFpbmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb21wdXRlZFJlc29sdXRpb24gOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM9e30gYXMgUGxheWVyQ2FtZXJhT3B0aW9ucywgZ2FtZVN0YWdlOiBQSVhJLkNvbnRhaW5lciwgZmxhZ3M6IEF2YWlsYWJpbGl0eUZsYWdzLCByZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlcikge1xyXG4gICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbiA9IHt4OiAwLCB5OiAwfTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhZ2UgPSBnYW1lU3RhZ2U7XHJcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xyXG4gICAgICAgLy8gdGhpcy5vblJlc2l6ZWQgPSBmbGFncy53ZWJHbCA/IHRoaXMucmVzaXplVmlld1dlYkdsLmJpbmQodGhpcykgOiB0aGlzLnJlc2l6ZVZpZXdDYW52YXMuYmluZCh0aGlzKTtcclxuICAgIC8vICAgIHRoaXMub25SZXNvbHV0aW9uVXBkYXRlID0gZmxhZ3Mud2ViR2wgPyB0aGlzLnNldFdlYkdsUmVzb2x1dGlvbi5iaW5kKHRoaXMpIDogdGhpcy5zZXRDYW52YXNSZXNvbHV0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhvcHRpb25zLCBkZWZhdWx0UGxheWVyQ2FtZXJhT3B0aW9ucygpLCBbJ3Jlc29sdXRpb24nLCAndmlld1dpZHRoJywgJ3ZpZXdIZWlnaHQnXSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gb3B0aW9ucy5yZXNvbHV0aW9uO1xyXG4gICAgICAgIHRoaXMucmVuZGVyTW9kZSA9IG9wdGlvbnMucmVuZGVyTW9kZTtcclxuICAgICAgICB0aGlzLnJlc2l6ZVZpZXcob3B0aW9ucy52aWV3V2lkdGgsIG9wdGlvbnMudmlld0hlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVXaXRoU2NyZWVuID0gKG9wdGlvbnMucmVzaXplV2l0aFNjcmVlbiA9PT0gZmFsc2UpID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3RvcENhbWVyYUF0Qm91bmRhcmllcyA9IG9wdGlvbnMuc3RvcENhbWVyYUF0Qm91bmRhcmllcztcclxuICAgICAgICB0aGlzLmhhbmRsZVJlbW92ZWRGb2N1c2VkR2FtZU9iamVjdCA9IHRoaXMuaGFuZGxlUmVtb3ZlZEZvY3VzZWRHYW1lT2JqZWN0LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGljU3ByaXRlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuZHluYW1pY1Nwcml0ZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmdhbWVTdGFnZS54ID0gMDtcclxuICAgICAgICB0aGlzLmdhbWVTdGFnZS55ID0gMDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgaGFuZGxlUmVtb3ZlZEZvY3VzZWRHYW1lT2JqZWN0KCkge1xyXG4gICAgICAgIHRoaXMuZm9jdXNlZEdhbWVPYmplY3Qub2ZmUmVtb3ZlZEZyb21NYXAodGhpcy5oYW5kbGVSZW1vdmVkRm9jdXNlZEdhbWVPYmplY3QpO1xyXG4gICAgICAgIHRoaXMuZm9jdXNlZEdhbWVPYmplY3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZm9jdXNPbih7IHg6IHRoaXMuZm9jdXNlZEdhbWVPYmplY3Qud29ybGRYLCB5OiB0aGlzLmZvY3VzZWRHYW1lT2JqZWN0LndvcmxkWSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZm9jdXNPbihvYmogOiBQb2ludCB8IEdhbWVPYmplY3QsIG9mZnNldFg9MCwgb2Zmc2V0WT0wKSB7XHJcbiAgICAgICAgdGhpcy5wcmVGb2N1c0JvdW5kUG9pbnQgPSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRDYW1lcmFDZW50ZXIob2JqKTtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmKHRoaXMuZm9jdXNlZEdhbWVPYmplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c2VkR2FtZU9iamVjdC5vZmZSZW1vdmVkRnJvbU1hcCh0aGlzLmhhbmRsZVJlbW92ZWRGb2N1c2VkR2FtZU9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZm9jdXNPZmZzZXRYID0gb2Zmc2V0WDtcclxuICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0WSA9IG9mZnNldFk7XHJcbiAgICAgICAgaWYob2JqIGluc3RhbmNlb2YgR2FtZU9iamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRHYW1lT2JqZWN0ID0gb2JqO1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRHYW1lT2JqZWN0Lm9uUmVtb3ZlZEZyb21NYXAodGhpcy5oYW5kbGVSZW1vdmVkRm9jdXNlZEdhbWVPYmplY3QpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdSZWN0KG9iai53b3JsZFggKyBvZmZzZXRYLCBvYmoud29ybGRZICsgb2Zmc2V0WSk7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFBvaW50ID0gdGhpcy5mb2N1c2VkR2FtZU9iamVjdC5wb3NpdGlvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRQb2ludCA9IG9iajtcclxuICAgICAgICAgICAgdGhpcy5mb2N1c2VkR2FtZU9iamVjdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld1JlY3Qob2JqLnggKyBvZmZzZXRYLCBvYmoueSArIG9mZnNldFkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICovXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVNwcml0ZShzcHJpdGU6IFBJWEkuRGlzcGxheU9iamVjdCB8IEFycmF5PFBJWEkuRGlzcGxheU9iamVjdD4pIHtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KHNwcml0ZSkpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNwcml0ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ByaXRlQXJyYXkgPSBzcHJpdGVbaV1bJ2lzU3RhdGljJ10gPyB0aGlzLnN0YXRpY1Nwcml0ZXMgOiB0aGlzLmR5bmFtaWNTcHJpdGVzO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNwcml0ZUFycmF5Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3ByaXRlW2ldID09PSBzcHJpdGVBcnJheVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGVBcnJheS5zcGxpY2UoaiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwcml0ZUFycmF5ID0gc3ByaXRlWydpc1N0YXRpYyddID8gdGhpcy5zdGF0aWNTcHJpdGVzIDogdGhpcy5keW5hbWljU3ByaXRlcztcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHNwcml0ZUFycmF5Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZihzcHJpdGUgPT09IHNwcml0ZUFycmF5W2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlQXJyYXkuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkU2luZ2xlU3RhdGljU3ByaXRlKHNwcml0ZTogVGlsZVNwcml0ZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGljU3ByaXRlcy5wdXNoKHNwcml0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFN0YXRpY1Nwcml0ZXMoc3ByaXRlOiBXb3JsZERpc3BsYXlPYmplY3QgfCBBcnJheTxXb3JsZERpc3BsYXlPYmplY3Q+IHwgR2FtZU9iamVjdCkge1xyXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoc3ByaXRlKSkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3ByaXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdhZGRpbmcgc3ByaXRlJywgc3ByaXRlW2ldKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljU3ByaXRlcy5wdXNoKHNwcml0ZVtpXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGljU3ByaXRlcy5wdXNoKHNwcml0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGREeW5hbWljU3ByaXRlKHNwcml0ZTogV29ybGREaXNwbGF5T2JqZWN0IHwgQXJyYXk8V29ybGREaXNwbGF5T2JqZWN0Pikge1xyXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoc3ByaXRlKSkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgc3ByaXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNTcHJpdGVzLnB1c2goc3ByaXRlW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY1Nwcml0ZXMucHVzaChzcHJpdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25VcGRhdGVDYW1lcmEoY2I6IChkZWZhdWx0Rm46ICgpID0+IHZvaWQpID0+IHZvaWQpIHtcclxuICAgICAgICBjb25zdCBfcCA9IFBsYXllckNhbWVyYS5wcm90b3R5cGU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdGFnZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY2IoX3AudXBkYXRlU3RhZ2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVTdGFnZSgpIHtcclxuICAgICAgICBpZighdGhpcy5ib3VuZENhbWVyYUNlbnRlcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYWxsIHdvcmxkLmJpbmRDYW1lcmFDZW50ZXIgb24gYW4gb2JqZWN0IHdpdGggYW4geCBhbmQgeSB2YXJpYWJsZS4nKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuYm91bmRQb3NpdGlvbk9mZnNldHMpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3UmVjdChNYXRoLnJvdW5kKHRoaXMuYm91bmRDYW1lcmFDZW50ZXIueCkrdGhpcy5ib3VuZFBvc2l0aW9uT2Zmc2V0cy54LCBNYXRoLnJvdW5kKHRoaXMuYm91bmRDYW1lcmFDZW50ZXIueSkrdGhpcy5ib3VuZFBvc2l0aW9uT2Zmc2V0cy55KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdSZWN0KE1hdGgucm91bmQodGhpcy5ib3VuZENhbWVyYUNlbnRlci54KSwgTWF0aC5yb3VuZCh0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLnkpKTtcclxuICAgICAgICB9XHJcbiAgICAgLy8gICBjb25zb2xlLmxvZygndGhlIHBsYXllciB2aWV3IHJlY3QgeSB3YXMnLCB0aGlzLnBsYXllclZpZXdSZWN0LnkpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlLnggPSAtdGhpcy5wbGF5ZXJWaWV3UmVjdC54O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlLnkgPSAtdGhpcy5wbGF5ZXJWaWV3UmVjdC55O1xyXG4gICAgICAvLyAgY29uc29sZS5sb2coJ3g6IGJvdW5kIGNhbWVyYSBjZW50ZXIgd2FzJywgdGhpcy5ib3VuZENhbWVyYUNlbnRlci54LCAncGxheWVyIHggd2FzJywgdGhpcy5wbGF5ZXJWaWV3UmVjdC54LCAnZ2FtZSBzdGFnZSB4JywgdGhpcy5nYW1lU3RhZ2UueClcclxuICAgIC8vICAgIGNvbnNvbGUubG9nKCd5OiBib3VuZCBjYW1lcmEgY2VudGVyIHdhcycsIHRoaXMuYm91bmRDYW1lcmFDZW50ZXIueSwgJ3BsYXllciB5IHdhcycsIHRoaXMucGxheWVyVmlld1JlY3QueSwgJ2dhbWUgc3RhZ2UgeScsIHRoaXMuZ2FtZVN0YWdlLnkpXHJcblxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgbGV0IGRlbHRhWCA9IHRoaXMubGFzdFggLSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLng7XHJcbiAgICAgICAgbGV0IGRlbHRhWSA9IHRoaXMubGFzdFkgLSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLnk7XHJcbiAgLy8gICAgICBjb25zb2xlLmxvZygnZGVsdGFYIHdhcycsIGRlbHRhWCwgJ2RlbHRhWSB3YXMnLCBkZWx0YVkpO1xyXG4gICAgICAgIGlmKGlzTmFOKGRlbHRhWCkgfHwgaXNOYU4oZGVsdGFZKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlbHRhWCBvciBkZWx0YVkgd2VyZSBOYU4gd2hlbiB1cGRhdGluZyB0aGUgY2FtZXJhLicpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihkZWx0YVggfCBkZWx0YVkpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJWaWV3UmVjdC54IC09IGRlbHRhWDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJWaWV3UmVjdC55IC09IGRlbHRhWTtcclxuICAgICAgICAgICAgLy8gYWRqdXN0IGRlbHRhIHggYW5kIHkgYmFzZWQgb24gY2FtZXJhIGJvdW5kcy5cclxuICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXJWaWV3UmVjdC54IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc3VidHJhY3QgdGhlIG5lZyB2YWx1ZSBiYWNrIHRvIGdhbWUgc3RhZ2VcclxuICAgICAgICAgICAgICAgIGRlbHRhWCAtPSB0aGlzLnBsYXllclZpZXdSZWN0Lng7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHRoaXMucGxheWVyVmlld1JlY3QueSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhWSAtPSB0aGlzLnBsYXllclZpZXdSZWN0Lnk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YWdlLnkgKz0gZGVsdGFZO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVTdGFnZS54ICs9IGRlbHRhWDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFggPSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLng7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdFkgPSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBiaW5kQ2FtZXJhQ2VudGVyKHA6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSwgb2Zmc2V0cz86IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSkge1xyXG4gICAgICAgIHRoaXMuYm91bmRQb3NpdGlvbk9mZnNldHMgPSBvZmZzZXRzO1xyXG4gICAgICAgIHRoaXMuYm91bmRDYW1lcmFDZW50ZXIgPSBwO1xyXG4gICAgICAgIC8vIGNsYW1wIHZpZXcgcmVjdFxyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QueCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMucGxheWVyVmlld1JlY3QueCwgdGhpcy5sZXZlbFdpZHRoSW5QaXhlbHMtdGhpcy5wbGF5ZXJWaWV3UmVjdC53aWR0aCkpO1xyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QueSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMucGxheWVyVmlld1JlY3QueSwgdGhpcy5sZXZlbEhlaWdodEluUGl4ZWxzLXRoaXMucGxheWVyVmlld1JlY3QuaGVpZ2h0KSk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlLnggPSAtdGhpcy5wbGF5ZXJWaWV3UmVjdC54O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YWdlLnkgPSAtdGhpcy5wbGF5ZXJWaWV3UmVjdC55O1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RYID0gdGhpcy5ib3VuZENhbWVyYUNlbnRlci54O1xyXG4gICAgICAgIHRoaXMubGFzdFkgPSB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyLnk7XHJcblxyXG4gICAvLyAgICAgY29uc29sZS5sb2coJ2dhbWUgc3RhZ2UgeCBiZWNhbWUnLCB0aGlzLmdhbWVTdGFnZS54LCAncGxheWVyIHZpd2UgcmVjdCBiZWNhbWUnLCB0aGlzLnBsYXllclZpZXdSZWN0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlTWFwU2l6ZSh3LCBoKSB7XHJcbiAgICAgICAgdGhpcy5tYXBPZmZzZXRYID0gMDtcclxuICAgICAgICB0aGlzLm1hcE9mZnNldFkgPSAwO1xyXG4gICAgICAgIHRoaXMubGV2ZWxXaWR0aEluUGl4ZWxzID0gdztcclxuICAgICAgICB0aGlzLmxldmVsSGVpZ2h0SW5QaXhlbHMgPSBoO1xyXG4gICAgICAgIHRoaXMubGV2ZWxIZWlnaHRSZXNBZGp1c3RlZCA9IGggKiB0aGlzLnJlc29sdXRpb247XHJcbiAgICAgICAgdGhpcy5sZXZlbFdpZHRoUmVzQWRqdXN0ZWQgPSB3ICogdGhpcy5yZXNvbHV0aW9uO1xyXG5cclxuICAgICAgICBpZih0aGlzLnZpZXdXaWR0aCAqIHRoaXMucmVzb2x1dGlvbiA+IHRoaXMubGV2ZWxXaWR0aFJlc0FkanVzdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwT2Zmc2V0WCA9IE1hdGguZmxvb3IoKCh0aGlzLnZpZXdXaWR0aCAqIHRoaXMucmVzb2x1dGlvbikgLSB0aGlzLmxldmVsV2lkdGhSZXNBZGp1c3RlZCkgLyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy52aWV3SGVpZ2h0ICogdGhpcy5yZXNvbHV0aW9uID4gdGhpcy5sZXZlbEhlaWdodFJlc0FkanVzdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwT2Zmc2V0WSA9IE1hdGguZmxvb3IoKCh0aGlzLnZpZXdIZWlnaHQgKiB0aGlzLnJlc29sdXRpb24pIC0gdGhpcy5sZXZlbEhlaWdodFJlc0FkanVzdGVkKSAvIDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNPdXRPZk1hcChyZWN0KSB7XHJcbiAgICAgICAvLyByZXR1cm4gcmVjdC54IC0gcmVjdC53aWR0aCA8IHRoaXMubWFwT2Zmc2V0WCB8fCByZWN0LnggPiAodGhpcy5sZXZlbFdpZHRoSW5QaXhlbHMgKyB0aGlzLm1hcE9mZnNldFgpIHx8IHJlY3QueSAtIHJlY3QuaGVpZ2h0ID4gKHRoaXMubGV2ZWxIZWlnaHRJblBpeGVscyArIHRoaXMubWFwT2Zmc2V0WSkgfHwgcmVjdC55IDwgdGhpcy5tYXBPZmZzZXRZO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1Zpc2libGVXaXRoQnVmZmVyKHJlY3QsIGJ1ZmZlcldpZHRoLCBidWZmZXJIZWlnaHQpIHtcclxuICAgICAgICBsZXQgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnBsYXllclZpZXdSZWN0O1xyXG4gICAgICAgIGNvbnN0IGhhbGZXID0gYnVmZmVyV2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IGhhbGZIID0gYnVmZmVySGVpZ2h0IC8gMjtcclxuICAgICAgICB4IC09IGhhbGZXO1xyXG4gICAgICAgIHkgLT0gaGFsZkg7XHJcbiAgICAgICAgd2lkdGggKz0gaGFsZlc7XHJcbiAgICAgICAgaGVpZ2h0ICs9IGhhbGZIO1xyXG4gICAgICAgIGlmIChyZWN0LnggPCB4ICsgd2lkdGggJiZcclxuICAgICAgICAgICAgcmVjdC54ICsgcmVjdC53aWR0aCA+IHggJiZcclxuICAgICAgICAgICAgcmVjdC55IDwgeSArIGhlaWdodCAmJlxyXG4gICAgICAgICAgICByZWN0LmhlaWdodCArIHJlY3QueSA+IHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzVmlzaWJsZShyZWN0KSB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnBsYXllclZpZXdSZWN0O1xyXG4gICAgICAgIGlmIChyZWN0LnggPCB4ICsgd2lkdGggJiZcclxuICAgICAgICAgICAgcmVjdC54ICsgcmVjdC53aWR0aCA+IHggJiZcclxuICAgICAgICAgICAgcmVjdC55IDwgeSArIGhlaWdodCAmJlxyXG4gICAgICAgICAgICByZWN0LmhlaWdodCArIHJlY3QueSA+IHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdGFrZXMgYSB3b3JsZCBwb3NpdGlvbiBhbmQgd2lsbCBvdXRwdXQgc2NyZWVuIGNvb3JkaW5hdGVzIGJhc2VkIG9uIHRoZSBwbGF5ZXJzIGN1cnJlbnQgdmlldyByZWN0LlxyXG4gICAgICogQHBhcmFtIHdvcmxkUG9zaXRpb25cclxuICAgICAqIEByZXR1cm5zIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9fVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd29ybGRUb1NjcmVlbih3b3JsZFgsIHdvcmxkWSkgOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0ge1xyXG4gICAgICAgIC8vIHJlZ3VsYXIgd29ybGQgZW50aXR5IGp1c3QgcmVwb3NpdGlvbiBiYXNlZCBvbiB2aWV3IHJlY3QuXHJcbiAgICAgICAgd29ybGRYIC09IHRoaXMucGxheWVyVmlld1JlY3QueDtcclxuICAgICAgICB3b3JsZFkgLT0gdGhpcy5wbGF5ZXJWaWV3UmVjdC55O1xyXG4gICAgICAgIHdvcmxkWCA9IHdvcmxkWCAvIHRoaXMucmF0aW9XO1xyXG4gICAgICAgIHdvcmxkWSA9IHdvcmxkWSAvIHRoaXMucmF0aW9IO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6ICh3b3JsZFggKyB0aGlzLm1hcFBhZGRpbmdMZWZ0KSxcclxuICAgICAgICAgICAgeTogKHdvcmxkWSArIHRoaXMubWFwUGFkZGluZ1RvcClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2NyZWVuVG9Xb3JsZChzY3JlZW5YLCBzY3JlZW5ZKSA6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogKChzY3JlZW5YIC0gdGhpcy5tYXBQYWRkaW5nTGVmdCkgKiB0aGlzLnJhdGlvVykgKyB0aGlzLnBsYXllclZpZXdSZWN0LngsXHJcbiAgICAgICAgICAgIHk6ICgoc2NyZWVuWSAtIHRoaXMubWFwUGFkZGluZ1RvcCkgKiB0aGlzLnJhdGlvSCkgKyB0aGlzLnBsYXllclZpZXdSZWN0LnksXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmb2N1c2VkQ2FtZXJhVXBkYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHdvcmxkWCA9IHRoaXMuZm9jdXNlZFBvaW50LnggKyB0aGlzLmZvY3VzT2Zmc2V0WDtcclxuICAgICAgICBjb25zdCB3b3JsZFkgPSB0aGlzLmZvY3VzZWRQb2ludC55ICsgdGhpcy5mb2N1c09mZnNldFk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3UmVjdCh3b3JsZFgsIHdvcmxkWSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVZpZXdSZWN0KHdvcmxkWDogbnVtYmVyLCB3b3JsZFk6IG51bWJlcikge1xyXG4gICAgICAgIC8vZmlyc3QgdXBkYXRlIHRoZSB2aWV3IHJlY3RcclxuICAgICAgICAvLyBpZiB3ZXJlIGluIGZvY3VzIHRoaXMgYmxvY2sgaXNudCBuZWVkZWQsIHNvIHNraXBzIHBhc3NlZCBpdCBhbmQganVzdCB1cGRhdGVzIHRoZSBwbGF5ZXIgc3ByaXRlIHBvc2l0aW9uLlxyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QueCA9IHdvcmxkWCAtIHRoaXMuaGFsZldpZHRoO1xyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QueSA9IHdvcmxkWSAtIHRoaXMuaGFsZkhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5vZmZzZXRWaWV3UmVjdC54ID0gdGhpcy5wbGF5ZXJWaWV3UmVjdC54ICsgdGhpcy5tYXBPZmZzZXRYO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0Vmlld1JlY3QueSA9IHRoaXMucGxheWVyVmlld1JlY3QueSArIHRoaXMubWFwT2Zmc2V0WTtcclxuXHJcbiAgICAgICAgdGhpcy5jZW50ZXJlZFNjcmVlblBvc2l0aW9uLnggPSB3b3JsZFggKyB0aGlzLm1hcE9mZnNldFg7XHJcbiAgICAgICAgdGhpcy5jZW50ZXJlZFNjcmVlblBvc2l0aW9uLnkgPSAgd29ybGRZICsgdGhpcy5tYXBPZmZzZXRZO1xyXG5cclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbjtcclxuXHJcbiAgICAgICAgaWYodGhpcy5zdG9wQ2FtZXJhQXRCb3VuZGFyaWVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pblggPSBNYXRoLmZsb29yKHggLSB0aGlzLmhhbGZXaWR0aCAgKTtcclxuICAgICAgICAgICAgY29uc3QgbWF4WCA9IG1pblggKyB0aGlzLnZpZXdXaWR0aDtcclxuICAgICAgICAgICAgY29uc3QgbWluWSA9IE1hdGguZmxvb3IoeSAtIHRoaXMuaGFsZkhlaWdodCApO1xyXG4gICAgICAgICAgICBjb25zdCBtYXhZID0gbWluWSArIHRoaXMudmlld0hlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5pc1N0b3BwaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIHBsYXllciBhbGwgdGhlIHdheSB0byBsZWZ0XHJcbiAgICAgICAgICAgIGlmKG1pblggPD0gdGhpcy5tYXBPZmZzZXRYKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRWaWV3UmVjdC54ID0gdGhpcy5tYXBPZmZzZXRYO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1N0b3BwaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi54ID0gdGhpcy5oYWxmV2lkdGggKyB0aGlzLm1hcE9mZnNldFg7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihtYXhYID49IHRoaXMubGV2ZWxXaWR0aEluUGl4ZWxzICsgdGhpcy5tYXBPZmZzZXRYKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnggPSBNYXRoLm1heCh0aGlzLmxldmVsV2lkdGhJblBpeGVscyAtIHRoaXMudmlld1dpZHRoLCAwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0Vmlld1JlY3QueCA9IHRoaXMucGxheWVyVmlld1JlY3QueCArIHRoaXMubWFwT2Zmc2V0WDtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTdG9wcGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcmVkU2NyZWVuUG9zaXRpb24ueCA9IE1hdGguZmxvb3IoKHRoaXMubGV2ZWxXaWR0aEluUGl4ZWxzICsgdGhpcy5tYXBPZmZzZXRYKSAtIHRoaXMuaGFsZldpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihtaW5ZIDw9IHRoaXMubWFwT2Zmc2V0WSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJWaWV3UmVjdC55ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0Vmlld1JlY3QueSA9IHRoaXMubWFwT2Zmc2V0WTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTdG9wcGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlcmVkU2NyZWVuUG9zaXRpb24ueSA9IHRoaXMuaGFsZkhlaWdodCArIHRoaXMubWFwT2Zmc2V0WTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXhZID4gdGhpcy5sZXZlbEhlaWdodEluUGl4ZWxzICsgdGhpcy5tYXBPZmZzZXRZKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnkgPSBNYXRoLm1heCh0aGlzLmxldmVsSGVpZ2h0SW5QaXhlbHMgLSB0aGlzLnZpZXdIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRWaWV3UmVjdC55ID0gdGhpcy5wbGF5ZXJWaWV3UmVjdC55ICsgdGhpcy5tYXBPZmZzZXRZO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1N0b3BwaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi55ID0gTWF0aC5mbG9vcigodGhpcy5sZXZlbEhlaWdodEluUGl4ZWxzICsgdGhpcy5tYXBPZmZzZXRZKSAtIHRoaXMuaGFsZkhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZVBsYXllclNwcml0ZSh3b3JsZFgsIHdvcmxkWSkge1xyXG4gICAgICAgIGlmKHRoaXMuaXNTdG9wcGluZyB8fCB0aGlzLmZvY3VzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTcHJpdGUueCA9ICh3b3JsZFggLSB0aGlzLnBsYXllclZpZXdSZWN0LngpICsgdGhpcy5tYXBPZmZzZXRYO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclNwcml0ZS55ID0gKHdvcmxkWSAtIHRoaXMucGxheWVyVmlld1JlY3QueSkgKyB0aGlzLm1hcE9mZnNldFk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2NyZWVuIGlzbnQgc3RvcHBlZCBzbyBwbGF5ZXJzIHBvc2l0aW9uIGlzIGNlbnRlcmVkLlxyXG4gICAgICAgICAgICB0aGlzLnBsYXllclNwcml0ZS54ID0gKHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi54IC0gdGhpcy5wbGF5ZXJWaWV3UmVjdC54KSArIHRoaXMubWFwT2Zmc2V0WDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTcHJpdGUueSA9ICh0aGlzLmNlbnRlcmVkU2NyZWVuUG9zaXRpb24ueSAtIHRoaXMucGxheWVyVmlld1JlY3QueSkgKyB0aGlzLm1hcE9mZnNldFk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVMZXZlbFNwcml0ZXMoZGVsdGE/OiBudW1iZXIpIHsgLy9UT0RPOiAgd2UgY2FuIG9wdGltaXplIHN0YXRpYyB2cyBkeW5hbWljIGJ5IG5vdCByZWNhbGN1bGF0aW5nIHRoZSBzcHJpdGUgcG9zaXRpb24gaWYgdGhlIGNhbWVyYSBpcyBmb2N1c2VkIG9uIGEgcG9zaXRpb24uICh0aGlzLmZvY3VzZWQpXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGljU3ByaXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcHJpdGUgPSB0aGlzLnN0YXRpY1Nwcml0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmKHNwcml0ZS52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgaWYoIXNwcml0ZVsndHgnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZVsndHgnXSA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcHJpdGVbJ3R4J10gKz0gLjE7XHJcblxyXG4gICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnc3ByaXRlIHdvcmxkIHggd2FzJywgc3ByaXRlLndvcmxkWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3ByaXRlLnggPSAoc3ByaXRlLndvcmxkWCAtIHRoaXMucGxheWVyVmlld1JlY3QueCkgKyB0aGlzLm1hcE9mZnNldFg7XHJcbiAgICAgICAgICAgICAgICBzcHJpdGUueSA9IChzcHJpdGUud29ybGRZIC0gdGhpcy5wbGF5ZXJWaWV3UmVjdC55KSArIHRoaXMubWFwT2Zmc2V0WTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIGNvbnNvbGUubG9nKCdzcHJpdGUgeCB3YXMnLCBzcHJpdGUueCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICBwdWJsaWMgZm9jdXNPbih3b3JsZFBvc2l0aW9uPzogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSB7XHJcbiAgICAgICAgaWYod29ybGRQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAvLyBjZW50ZXIgaXQgYnV0IHdlcmUgZm9jdXNlZCBzbyB3ZSBzZXQgc3RvcCBjYW1lcmEgYXQgYm91bmRhcmllcyB0byBmYWxzZSBhbmQgdGhlbiBzZXQgaXQgYmFjayBhZnRlciB0byB3aGF0IGl0IHdhc1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclZpZXdSZWN0KHdvcmxkUG9zaXRpb24ueCwgd29ybGRQb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJTcHJpdGUueCA9ICh0aGlzLmNlbnRlcmVkU2NyZWVuUG9zaXRpb24ueCAtIHRoaXMucGxheWVyVmlld1JlY3QueCkgKyB0aGlzLm1hcE9mZnNldFg7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyU3ByaXRlLnkgPSAodGhpcy5jZW50ZXJlZFNjcmVlblBvc2l0aW9uLnkgLSB0aGlzLnBsYXllclZpZXdSZWN0LnkpICsgdGhpcy5tYXBPZmZzZXRZO1xyXG4gICAgICAgICAgICB0aGlzLmZvY3VzZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgKi9cclxuXHJcbiAgICBwdWJsaWMgZm9jdXNPZmYoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMucHJlRm9jdXNCb3VuZFBvaW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcG9pbnQgdG8gZm9jdXMgb2ZmIG9udG8uYClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5iaW5kQ2FtZXJhQ2VudGVyKHRoaXMucHJlRm9jdXNCb3VuZFBvaW50KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5wcmVGb2N1c0JvdW5kUG9pbnQ7XHJcbiAgIC8vICAgICB0aGlzLmJvdW5kQ2FtZXJhQ2VudGVyID0gdGhpcy5wcmVGb2N1c0JvdW5kUG9pbnQ7XHJcbiAvLyAgICAgICB0aGlzLmZvY3VzT24obnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNlbnRlclZpZXdSZWN0KHdvcmxkWDogbnVtYmVyLCB3b3JsZFk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi54ID0gd29ybGRYICsgdGhpcy5tYXBPZmZzZXRYO1xyXG4gICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi55ID0gd29ybGRZICsgdGhpcy5tYXBPZmZzZXRZO1xyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QueCA9IE1hdGguZmxvb3Iod29ybGRYIC0gKHRoaXMudmlld1dpZHRoICAvIDIpKTtcclxuICAgICAgICB0aGlzLnBsYXllclZpZXdSZWN0LnkgPSBNYXRoLmZsb29yKHdvcmxkWSAtICh0aGlzLnZpZXdIZWlnaHQgIC8gMikpO1xyXG5cclxuICAgICAgICB0aGlzLm9mZnNldFZpZXdSZWN0LnggPSB0aGlzLnBsYXllclZpZXdSZWN0LnggKyB0aGlzLm1hcE9mZnNldFg7XHJcbiAgICAgICAgdGhpcy5vZmZzZXRWaWV3UmVjdC55ID0gdGhpcy5wbGF5ZXJWaWV3UmVjdC55ICsgdGhpcy5tYXBPZmZzZXRZO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0aWNTcHJpdGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gdGhpcy53b3JsZFRvU2NyZWVuKHRoaXMuc3RhdGljU3ByaXRlc1tpXS53b3JsZFgsIHRoaXMuc3RhdGljU3ByaXRlc1tpXS53b3JsZFkpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRpY1Nwcml0ZXNbaV0ueCA9IG5ld1Bvc2l0aW9uLng7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGljU3ByaXRlc1tpXS55ID0gbmV3UG9zaXRpb24ueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uUmVzb2x1dGlvblVwZGF0ZSh2OiB7IHJlc29sdXRpb246IG51bWJlciwgdmlld1dpZHRoOiBudW1iZXIsIGNhbnZhc1dpZHRoOiBudW1iZXIsIGNhbnZhc0hlaWdodDogbnVtYmVyLCB2aWV3SGVpZ2h0OiBudW1iZXIsIG9mZnNldFdpZHRoOiBudW1iZXIsIG9mZnNldEhlaWdodDogbnVtYmVyLCBmaXhlZFJlc29sdXRpb24/OiBib29sZWFuIH0pIHtcclxuICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXN1bHQ6Jywgdik7XHJcbiAgICAgICAgY29uc3QgeyByZXNvbHV0aW9uLCB2aWV3V2lkdGgsIHZpZXdIZWlnaHQsIG9mZnNldFdpZHRoLCBvZmZzZXRIZWlnaHQsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIGZpeGVkUmVzb2x1dGlvbiB9ID0gdjtcclxuICAgICAvLyAgIGNvbnNvbGUubG9nKCd2aWV3IHdpZHRoOicsIHZpZXdXaWR0aCwgJ3ZpZXdIZWlnaHQ6ICcsIHZpZXdIZWlnaHQpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYXV0b1Jlc2l6ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZWRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICBpZih0aGlzLmZsYWdzLndlYkdsKSB7XHJcbiAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7dmlld1dpZHRoICogcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHQgKiByZXNvbHV0aW9ufXB4YFxyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGlmIChyZXNvbHV0aW9uID49IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcmVlbi53aWR0aCA9IHZpZXdXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2NyZWVuLmhlaWdodCA9IHZpZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUud2lkdGggPSBgJHt2aWV3V2lkdGggKiByZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS5oZWlnaHQgPSBgJHt2aWV3SGVpZ2h0ICogcmVzb2x1dGlvbn1weGA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50V2lkdGggPSB0aGlzLnJlbmRlcmVyLnZpZXcucGFyZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudEhlaWdodCA9IHRoaXMucmVuZGVyZXIudmlldy5wYXJlbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRMZWZ0ID0gcmVzb2x1dGlvbiA9PT0gMSA/IG9mZnNldFdpZHRoIDogKHBhcmVudFdpZHRoIC0gKHZpZXdXaWR0aCAqIHJlc29sdXRpb24pKSAvIDI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRUb3AgPSByZXNvbHV0aW9uID09PSAxID8gb2Zmc2V0SGVpZ2h0IDogKHBhcmVudEhlaWdodCAtICh2aWV3SGVpZ2h0ICogcmVzb2x1dGlvbikpIC8gMjtcclxuICAgICAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ29mZnNldCBsZWZ0OicsIG9mZnNldExlZnQpO1xyXG4gICAgICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnb2Zmc2V0IHcgJywgb2Zmc2V0V2lkdGgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUubWFyZ2luTGVmdCA9IGAke29mZnNldExlZnR9cHhgO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpblRvcCA9IGAke29mZnNldFRvcH1weGA7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBQYWRkaW5nTGVmdCA9IG9mZnNldExlZnRcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwUGFkZGluZ1RvcCA9IG9mZnNldFRvcFxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9IHZpZXdXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB2aWV3SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVWaWV3KHZpZXdXaWR0aCwgdmlld0hlaWdodClcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RSZW5kZXJlciA6IFBJWEkuUmVuZGVyVGFyZ2V0ID0gdGhpcy5yZW5kZXJlci5yb290UmVuZGVyVGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgaWYocm9vdFJlbmRlcmVyICkge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgcm9vdFJlbmRlcmVyLnJlc29sdWp0aW9uID0gMS9yZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RSZW5kZXJlci5yZXNpemUodmlld1dpZHRoLCB2aWV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgLy8gIHJvb3RSZW5kZXJlci5yZXNpemUoMSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIHJvb3RSZW5kZXJlci5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgICAvLyAgIHJvb3RSZW5kZXJlci5yZXNpemUodmlld1dpZHRoLCB2aWV3SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnBsdWdpbnMuaW50ZXJhY3Rpb24ucmVzb2x1dGlvbiA9IDEvcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2NyZWVuLndpZHRoID0gdmlld1dpZHRoIC8gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2NyZWVuLmhlaWdodCA9IHZpZXdIZWlnaHQgIC8gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aH1weGA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7dmlld0hlaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPSBNYXRoLnJvdW5kKHZpZXdXaWR0aCAvIHJlc29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IE1hdGgucm91bmQodmlld0hlaWdodCAvIHJlc29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHsoY2FudmFzV2lkdGggLSB2aWV3V2lkdGgpIC8gMn1weGA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUubWFyZ2luVG9wID0gYCR7KGNhbnZhc0hlaWdodCAtIHZpZXdIZWlnaHQpIC8gMn1weGA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFBhZGRpbmdMZWZ0PShjYW52YXNXaWR0aCAtIHZpZXdXaWR0aCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBQYWRkaW5nVG9wID0gKGNhbnZhc0hlaWdodCAtIHZpZXdIZWlnaHQpIC8gMjtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplVmlldyh2aWV3V2lkdGgsIHZpZXdIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCByb290UmVuZGVyZXIgOiBQSVhJLlJlbmRlclRhcmdldCA9IHRoaXMucmVuZGVyZXIucm9vdFJlbmRlclRhcmdldDtcclxuICAgICAgICAgICAgICAgIGlmKHJvb3RSZW5kZXJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcm9vdFJlbmRlcmVyLnJlc2l6ZSgxLCAxKTtcclxuICAgICAgICAgICAgICAgICAvLyAgIHJvb3RSZW5kZXJlci5yZXNvbHV0aW9uID0gMS9yZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RSZW5kZXJlci5yZXNpemUodmlld1dpZHRoL3Jlc29sdXRpb24sIHZpZXdIZWlnaHQvcmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZXIuX2FjdGl2ZVJlbmRlclRhcmdldCAmJiB0aGlzLnJlbmRlcmVyLl9hY3RpdmVSZW5kZXJUYXJnZXQgPT09IHRoaXMucmVuZGVyZXIucm9vdFJlbmRlclRhcmdldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yb290UmVuZGVyVGFyZ2V0LmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlci5fYWN0aXZlU2hhZGVyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLl9hY3RpdmVTaGFkZXIudW5pZm9ybXMucHJvamVjdGlvbk1hdHJpeCA9IHRoaXMucmVuZGVyZXIucm9vdFJlbmRlclRhcmdldC5wcm9qZWN0aW9uTWF0cml4LnRvQXJyYXkodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yYXRpb1cgPSB0aGlzLnJlbmRlcmVyLnNjcmVlbi53aWR0aCAvIHRoaXMucmVuZGVyZXIudmlldy5jbGllbnRXaWR0aFxyXG4gICAgICAgICAgICB0aGlzLnJhdGlvSCA9ICB0aGlzLnJlbmRlcmVyLnNjcmVlbi5oZWlnaHQgLyB0aGlzLnJlbmRlcmVyLnZpZXcuY2xpZW50SGVpZ2h0XHJcbiAgICAgICAgICAgIHRoaXMubWFwUGFkZGluZ0xlZnQgKj0gdGhpcy5yYXRpb1c7XHJcbiAgICAgICAgICAgIHRoaXMubWFwUGFkZGluZ1RvcCAqPSB0aGlzLnJhdGlvSDtcclxuICAgICAgICB9XHJcbiAvLyAgICAgICBjb25zb2xlLmxvZygndmlldyB3aWR0aDpcIicsICB0aGlzLnBsYXllclZpZXdSZWN0LndpZHRoLCdoZWlnaHQ6JywgdGhpcy5wbGF5ZXJWaWV3UmVjdC5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemVWaWV3KHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICBpZighd2lkdGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZGV0ZXJtaW5lIHNjcmVlbiB3aWR0aCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGRldGVybWluZSBzY3JlZW4gd2lkdGgnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNpemVWaWV3SGVpZ2h0KGhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVWaWV3V2lkdGgod2lkdGgpO1xyXG4gICAgICAgIC8vIHJlY2VudGVyIGFmdGVyIHdlIHJlc2l6ZVxyXG4gICAvLyAgICAgY29uc29sZS5sb2coJ3BsYXllciB2aWV3IHJld2N0IGJlY2FtZScsIHRoaXMucGxheWVyVmlld1JlY3QpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlc2l6ZVZpZXdXaWR0aCh3aWR0aCkge1xyXG4gICAgICAgIHRoaXMudmlld1dpZHRoID0gTWF0aC5mbG9vcih3aWR0aCAvIHRoaXMucmVzb2x1dGlvbik7XHJcbiAgICAgICAgdGhpcy5oYWxmV2lkdGggPSBNYXRoLmZsb29yKHRoaXMudmlld1dpZHRoIC8gMik7XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3Qud2lkdGggPSB0aGlzLnZpZXdXaWR0aDtcclxuXHJcbiAgICAgLy8gICBjb25zb2xlLmxvZygncGxheWVyIHZpZXcgcmV3Y3QgYmVjYW1lJywgdGhpcy5wbGF5ZXJWaWV3UmVjdClcclxuICAgICAgICBpZih0aGlzLnZpZXdXaWR0aCA+IE1hdGguY2VpbCh0aGlzLmxldmVsV2lkdGhSZXNBZGp1c3RlZCAvIHRoaXMucmVzb2x1dGlvbikpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBPZmZzZXRYID0gTWF0aC5mbG9vcigoKHRoaXMudmlld1dpZHRoIC0gdGhpcy5sZXZlbFdpZHRoUmVzQWRqdXN0ZWQpIC8gMikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwT2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2VudGVyZWRTY3JlZW5Qb3NpdGlvbi54ID0gdGhpcy52aWV3V2lkdGggLyAyICsgdGhpcy5tYXBPZmZzZXRYO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemVWaWV3SGVpZ2h0KGhlaWdodCkge1xyXG4gICAgICAgIHRoaXMudmlld0hlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0IC8gdGhpcy5yZXNvbHV0aW9uKTtcclxuICAgICAgICB0aGlzLmhhbGZIZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMudmlld0hlaWdodCAvIDIpO1xyXG4gICAgICAgIHRoaXMucGxheWVyVmlld1JlY3QuaGVpZ2h0ID0gdGhpcy52aWV3SGVpZ2h0O1xyXG4gICAgICAgIGlmKHRoaXMudmlld0hlaWdodCA+IHRoaXMubGV2ZWxIZWlnaHRSZXNBZGp1c3RlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hcE9mZnNldFkgPSBNYXRoLmZsb29yKCgodGhpcy52aWV3SGVpZ2h0IC0gdGhpcy5sZXZlbEhlaWdodFJlc0FkanVzdGVkKSAvIDIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1hcE9mZnNldFkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNlbnRlcmVkU2NyZWVuUG9zaXRpb24ueSA9IE1hdGguZmxvb3IodGhpcy52aWV3SGVpZ2h0IC8gMiArIHRoaXMubWFwT2Zmc2V0WSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKlxyXG5cclxuICAgIHByaXZhdGUgcmVzaXplXzEodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aH1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHR9cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coJzEnKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfMih2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7dmlld1dpZHRofXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7dmlld0hlaWdodH1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gdmlld1dpZHRoO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB2aWV3SGVpZ2h0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCcyJylcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzaXplXzModmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3dpbmRvdy5pbm5lcldpZHRofXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID1gJHt3aW5kb3cuaW5uZXJIZWlnaHR9cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coJzMnKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfNCh2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7d2luZG93LmlubmVyV2lkdGh9cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS5oZWlnaHQgPWAke3dpbmRvdy5pbm5lckhlaWdodH1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gdmlld1dpZHRoO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB2aWV3SGVpZ2h0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCc0JylcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzaXplXzUodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzaXplKHZpZXdXaWR0aCwgdmlld0hlaWdodCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJzUnKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzaXplXzYodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzaXplKHZpZXdXaWR0aCwgdmlld0hlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnNicpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc2l6ZV83KHZpZXdXaWR0aDogbnVtYmVyLCB2aWV3SGVpZ2h0OiBudW1iZXIsIG9mZnNldFc6IG51bWJlciwgb2Zmc2V0SDogbnVtYmVyLCByZXNvbHV0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzaXplKHZpZXdXaWR0aCwgdmlld0hlaWdodCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJzcnKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfOCh2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUud2lkdGggPSBgJHt3aW5kb3cuaW5uZXJXaWR0aH1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9YCR7d2luZG93LmlubmVySGVpZ2h0fXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlc2l6ZSh2aWV3V2lkdGgsIHZpZXdIZWlnaHQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCc4JylcclxuICAgIH1cclxuXHJcbiAgICAvLyB0aGlzIGlzIHdvcmtpbmcgd2VsbCBmb3Igd2ViZ2wgb24gdW5saW1pdHRlZCBzaXplLlxyXG4gICAgcHJpdmF0ZSByZXNpemVfOSh2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnOScpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc2l6ZV8xMCh2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnMTAnKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfMTEodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3dpbmRvdy5pbm5lcldpZHRofXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID1gJHt3aW5kb3cuaW5uZXJIZWlnaHR9cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9IHZpZXdXaWR0aCAqIHJlc29sdXRpb247XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHZpZXdIZWlnaHQgKiByZXNvbHV0aW9uO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCcxMScpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc2l6ZV8xMih2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7d2luZG93LmlubmVyV2lkdGh9cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS5oZWlnaHQgPWAke3dpbmRvdy5pbm5lckhlaWdodH1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gdmlld1dpZHRoIC8gcmVzb2x1dGlvbjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuaGVpZ2h0ID0gdmlld0hlaWdodCAvIHJlc29sdXRpb247XHJcbiAgICAgICAgY29uc29sZS5sb2coJzEyJylcclxuICAgIH1cclxuXHJcbiAgICAvL1RPRE8gVEhJUyBTRUVNUyBUTyBBTE1PUyBXT1JLIEZPUiBXRUIgR0wsIEdPT0dMRSBDSFJPTUUsIHVwIHVudGlsIHlvdSBncm93IGxhcmdlciBpbiB3aWR0aCBvZiBpdCBzdHJldGNoZXMgb3IgdG9vIGxvdyBidXQgaXRzIGNsb3NlIHRvIHdoYXQgaSB3YW50LlxyXG4gICAgcHJpdmF0ZSByZXNpemVfMTModmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aCpyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7dmlld0hlaWdodCpyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgIC8vICAgY29uc29sZS5sb2coJzEzJylcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzaXplXzE0KHZpZXdXaWR0aDogbnVtYmVyLCB2aWV3SGVpZ2h0OiBudW1iZXIsIG9mZnNldFc6IG51bWJlciwgb2Zmc2V0SDogbnVtYmVyLCByZXNvbHV0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUud2lkdGggPSBgJHt2aWV3V2lkdGgvcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHQvcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICBjb25zb2xlLmxvZygnMTQnKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfMTUodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aCpyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7dmlld0hlaWdodCpyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCcxNScpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc2l6ZV8xNih2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7dmlld1dpZHRoL3Jlc29sdXRpb259cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS5oZWlnaHQgPSBgJHt2aWV3SGVpZ2h0L3Jlc29sdXRpb259cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogcmVzb2x1dGlvbjtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogcmVzb2x1dGlvbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnMTYgJylcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzaXplXzE3KHZpZXdXaWR0aDogbnVtYmVyLCB2aWV3SGVpZ2h0OiBudW1iZXIsIG9mZnNldFc6IG51bWJlciwgb2Zmc2V0SDogbnVtYmVyLCByZXNvbHV0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUud2lkdGggPSBgJHt2aWV3V2lkdGgvcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHQvcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gd2luZG93LmlubmVyV2lkdGggLyByZXNvbHV0aW9uO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLyByZXNvbHV0aW9uO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCcxNycpXHJcbiAgICB9XHJcblxyXG4gICAgLy9UT0RPIFRISVMgV0FTIEFMU08gV09SS0lORyBDTE9TRSBUTyBFWFBFQ1RFRCBPTiBXRUIgR0wgR09PR0xFIENIUk9NRSAtIHNlZW1zIHRvIGJlIHdvcmtpbmcgZm9yIHN1cmUgbm93LlxyXG4gICAgcHJpdmF0ZSByZXNpemVfMTgodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzb2x1dGlvbiA9IDE7XHJcbiAgICAgICAgaWYocmVzb2x1dGlvbiA+PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aCpyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHQqcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgICAgLy8gdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtvZmZzZXRXLzIvcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgIC8vICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpblRvcCA9IGAke29mZnNldEgvMi9yZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LndpZHRoID0gdmlld1dpZHRoIDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHZpZXdIZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7dmlld1dpZHRofXB4YDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLmhlaWdodCA9IGAke3ZpZXdIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPXZpZXdXaWR0aC9yZXNvbHV0aW9uIDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHZpZXdIZWlnaHQvcmVzb2x1dGlvbiA7XHJcbiAgICAgICAgIC8vICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtvZmZzZXRXLzIqcmVzb2x1dGlvbn1weGA7XHJcbiAgICAgICAgIC8vICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLm1hcmdpblRvcCA9IGAke29mZnNldEgvMipyZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPXZpZXdXaWR0aC9yZXNvbHV0aW9uO1xyXG4gICAgICAgLy8gdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHZpZXdIZWlnaHQvcmVzb2x1dGlvbjtcclxuXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCcxOCcpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc2l6ZV8xOSh2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXOiBudW1iZXIsIG9mZnNldEg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LnN0eWxlLndpZHRoID0gYCR7dmlld1dpZHRoL3Jlc29sdXRpb259cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS5oZWlnaHQgPSBgJHt2aWV3SGVpZ2h0L3Jlc29sdXRpb259cHhgO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy53aWR0aCA9dmlld1dpZHRoL3Jlc29sdXRpb247XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci52aWV3LmhlaWdodCA9IHZpZXdIZWlnaHQvcmVzb2x1dGlvbjtcclxuICAgICAgICBjb25zb2xlLmxvZygnMTknKVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNpemVfMjAodmlld1dpZHRoOiBudW1iZXIsIHZpZXdIZWlnaHQ6IG51bWJlciwgb2Zmc2V0VzogbnVtYmVyLCBvZmZzZXRIOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5zdHlsZS53aWR0aCA9IGAke3ZpZXdXaWR0aC9yZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcuc3R5bGUuaGVpZ2h0ID0gYCR7dmlld0hlaWdodC9yZXNvbHV0aW9ufXB4YDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpZXcud2lkdGggPXZpZXdXaWR0aCpyZXNvbHV0aW9uO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIudmlldy5oZWlnaHQgPSB2aWV3SGVpZ2h0KnJlc29sdXRpb247XHJcbiAgICAgICAgY29uc29sZS5sb2coJzIwJyk7XHJcbiAgICB9XHJcbiAqLyIsImltcG9ydCB7TWVzc2FnZXMsIFJlc3VsdENvZGVzfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xyXG5pbXBvcnQge01hcEluaXREYXRhfSBmcm9tIFwiLi4vLi4vLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtTZWN0aW9uTGF5ZXJJbml0RGF0YX0gZnJvbSBcIi4uLy4uLy4uL2xpYi9FZGl0b3JDb3JlL3NyYy90eXBlc1wiO1xyXG5pbXBvcnQge0RlY29kZWRNYXBDaHVua0RhdGEsIERlY29kZWRNYXBNZXRhRGF0YX0gZnJvbSBcIi4uLy4uLy4uLy4uL0VuY29kZXIvc3JjL0RlY29kZXJcIjtcclxuY29uc3QgQ2h1bmtXb3JrZXIgID0gcmVxdWlyZSgnLi9DaHVua0xvYWRlci53b3JrZXInKTtcclxuLy8gaW1wb3J0ICogYXMgd29ya2VyUGF0aCBmcm9tIFwiZmlsZS1sb2FkZXI/bmFtZT1bbmFtZV0uanMhLi90ZXN0LndvcmtlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENodW5rTG9hZGVyV29ya2VyIHtcclxuICAgIHByaXZhdGUgbmV4dFJlcTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcGVuZGluZ1JlcXVlc3RzOiBhbnkgPSB7fTtcclxuICAgIHByaXZhdGUgd29ya2VyOiBXb3JrZXI7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLndvcmtlciA9IG5ldyBDaHVua1dvcmtlcigpO1xyXG4gICAgICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vcmVzcG9uc2Ugd2lsbCBhbHdheXMgYmUgW3Jlc3BvbnNlUGF5bG9hZCwgc2VxdWVuY2VdXHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzW2UuZGF0YVsxXV0oZS5kYXRhWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdFdvcmxkKHdvcmxkSWQ6IHN0cmluZywgYmFzZVVybDogc3RyaW5nLCB0aWxlU2l6ZVNlcUxvb2t1cDogQXJyYXk8bnVtYmVyPiwgc2VxVG9UYWc6IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9LCBwcm9wU2VxVG9OYW1lOiB7W3NlcTogbnVtYmVyXTogc3RyaW5nIH0pIDogUHJvbWlzZTxSZXN1bHRDb2Rlcz4ge1xyXG4gICAgICAgIGlmKHRpbGVTaXplU2VxTG9va3VwLmxlbmd0aCAmJiB0aWxlU2l6ZVNlcUxvb2t1cC5sZW5ndGggJSAyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdGhlIHRpbGUgc2l6ZSBzZXEgbG9va3VwIHNob3VsZCBoYXZlIGFuIGV2ZW4gYW1vdW50IG9mIGVsZW1lbnRzIHNpbmNlIGl0cyBhIHdpZHRoLCBoZWlnaHQgZmxhdCBhcnJheS5gKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hd2FpdFJlc3BvbnNlKE1lc3NhZ2VzLklOSVRfTE9BREVSLCBKU09OLnN0cmluZ2lmeShbd29ybGRJZCwgYmFzZVVybCwgdGlsZVNpemVTZXFMb29rdXAsIHNlcVRvVGFnLCBwcm9wU2VxVG9OYW1lXSkpXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdE1hcChtYXBJbml0RGF0YTogeyBtYXBJZDogc3RyaW5nLCBkYXRhOiBEZWNvZGVkTWFwTWV0YURhdGEgfSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF3YWl0UmVzcG9uc2UoTWVzc2FnZXMuSU5JVF9NQVAsIEpTT04uc3RyaW5naWZ5KG1hcEluaXREYXRhKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2h1bmtEYXRhKGNodW5rSW5kZXg6IG51bWJlcikgOiBQcm9taXNlPERlY29kZWRNYXBDaHVua0RhdGE+IHtcclxuICAgICAgLy8gIGNvbnNvbGUubG9nKCdnZXR0aW5nIGNodW5rIGRhdGEnLCBjaHVua0luZGV4KTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmF3YWl0UmVzcG9uc2UoTWVzc2FnZXMuR0VUX1NFQ1RJT05fREFUQSwgY2h1bmtJbmRleCk7XHJcbiAgICAgLy8gICBjb25zb2xlLnRpbWUoJ3BhcnNlIHNlYycpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmVzKTtcclxuICAgICAgLy8gIGNvbnNvbGUudGltZUVuZCgncGFyc2Ugc2VjJyk7XHJcbiAgICAgLy8gICBjb25zb2xlLmxvZygncGFyc2VkIGFzJywgcGFyc2VkKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3RBbmRTdG9yZUFsbE1hcENodW5rcyhtYXBJZDogc3RyaW5nKSA6IFByb21pc2U8RGVjb2RlZE1hcE1ldGFEYXRhPiB7XHJcbiAgIC8vICAgICBjb25zb2xlLmxvZygncmVxdWVzdGluZyBhbGwgbWFwIGNodW5rcyBmb3IgbWFwLi4uJywgbWFwSW5pdERhdGEpO1xyXG5cclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmF3YWl0UmVzcG9uc2UoTWVzc2FnZXMuUkVRVUVTVF9BTkRfU0FWRV9BTExfTUFQX0NIVU5LUywgbWFwSWQpXHJcbiAgICAgICAgaWYocmVzID09PSBSZXN1bHRDb2Rlcy5FUlJPUikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGRlY29kaW5nIG1hcCBjaHVuayBpbiB0aGUgd29ya2VyIGZvciBtYXAgaWQgJHttYXBJZH1gKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3RBbmRTdG9yZVNpbmdsZU1hcENodW5rKG1hcElkOiBzdHJpbmcsIGNodW5rSW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF3YWl0UmVzcG9uc2UoTWVzc2FnZXMuUkVRVUVTVF9BTkRfU0FWRV9TSU5HTEVfTUFQX0NIVU5LLCBbbWFwSWQsIGNodW5rSW5kZXhdKVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHJlcXVlc3RBbmRTdG9yZU1hcENodW5rcyhtYXBJZDogc3RyaW5nLCBjaHVua3M6IEFycmF5PG51bWJlcj4pIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmF3YWl0UmVzcG9uc2UoTWVzc2FnZXMuUkVRVUVTVF9BTkRfU0FWRV9NQVBfQ0hVTktTLCBbbWFwSWQsIGNodW5rc10pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBhd2FpdFJlc3BvbnNlKG1lc3NhZ2U6IE1lc3NhZ2VzLCBwYXlsb2FkOiBhbnkpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAvLyBub3QgcmVhbGx5IHN1cmUgaWYgaXRzIGFueSBvcHRpbWl6YXRpb24gYnV0IHVzaW5nIGdyZWF0ZXN0IDE2IGJpdCBpbnRlZ2VyIHRvIHRyaWdnZXIgcmVzZXQgc2VxXHJcbiAgICAgICAgY29uc3QgbmV4dFNlcSA9ICsrdGhpcy5uZXh0UmVxID4gNjU1MzUgPyAwIDogdGhpcy5uZXh0UmVxO1xyXG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKFtwYXlsb2FkLCBtZXNzYWdlLCBuZXh0U2VxXSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzW25leHRTZXFdID0gKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1tuZXh0U2VxXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFdvcmtlcihfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiODI2MDhmOGEyZTRkY2ZjN2EyOWIud29ya2VyLmpzXCIpO1xufTsiLCJpbXBvcnQge1xyXG4gICAgQ2lyY2xlLFxyXG4gICAgQ29sbGlkZXJEYXR1bSxcclxuICAgIExpbmUsXHJcbiAgICBNYXBTaXplLFxyXG4gICAgUG9pbnQsXHJcbiAgICBQb2x5Z29uLFxyXG4gICAgUmVjdCxcclxuICAgIFJ1bnRpbWVDb2xsaWRlclNoYXBlLFxyXG4gICAgU2hhcGVEYXRhLCBUYWdcclxufSBmcm9tIFwiLi4vLi4vV29ybGRSZW5kZXJlci90eXBlc1wiO1xyXG5pbXBvcnQge0lDb2xsaXNpb25TeXN0ZW19IGZyb20gXCIuL0lDb2xsaXNpb25TeXN0ZW1cIjtcclxuaW1wb3J0IHtDb2xsaWRlcn0gZnJvbSBcIi4uLy4uL0NvbGxpc2lvbk1hbmFnZXIvQ29sbGlkZXJcIjtcclxuaW1wb3J0IHtyZXNvbHZlTWFwU2l6ZX0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XHJcbmltcG9ydCB7UG9seWdvbkNvbGxpZGVyfSBmcm9tIFwiLi4vLi4vQ29sbGlzaW9uTWFuYWdlci9Qb2x5Z29uQ29sbGlkZXJcIjtcclxuaW1wb3J0IHsgZ2V0Q29sbGlkZXJzV2l0aFRhZ3MgfSBmcm9tICcuLi8uLi8uLi8uLi9TaGFyZWRSdW50aW1lL0NvbGxpZGVyUXVlcmllcyc7XHJcbmltcG9ydCB7UG9seWdvbkNvbGxpZGVyRGF0YSwgUmVjdENvbGxpZGVyRGF0YX0gZnJvbSBcIi4uLy4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcbmV4cG9ydCB0eXBlIENvbGxpZGVyTWFwID0ge1xyXG4gICAgcmVjdHM/OiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PixcclxuICAgIHBvbHlnb25zPzogQXJyYXk8UG9seWdvbkNvbGxpZGVyPixcclxuICAgIGNpcmNsZXM/OiBBcnJheTxDb2xsaWRlcjxDaXJjbGU+PixcclxuICAgIHBvaW50cz86IEFycmF5PENvbGxpZGVyPFBvaW50Pj4sXHJcbiAgICBsaW5lcz86IEFycmF5PENvbGxpZGVyPExpbmU+PlxyXG59XHJcblxyXG5jb25zdCBTaGFwZUVudW1Ub1Byb3BlcnR5ID0ge1xyXG4gICAgW1J1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1RdIDogJ3JlY3RzJyxcclxuICAgIFtSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVF06ICdwb2ludHMnLFxyXG4gICAgW1J1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT05dOiAncG9seWdvbnMnLFxyXG4gICAgW1J1bnRpbWVDb2xsaWRlclNoYXBlLkNJUkNMRV06ICdjaXJjbGVzJyxcclxuICAgIFtSdW50aW1lQ29sbGlkZXJTaGFwZS5MSU5FXTogJ2xpbmVzJyxcclxufVxyXG5cclxuY29uc3QgU2hhcGVUeXBlQWRqdXN0bWVudHMgOiBBcnJheTwoc2hhcGVEYXRhOiBTaGFwZURhdGEsIHdwOiBQb2ludCkgPT4gU2hhcGVEYXRhPj0gbmV3IEFycmF5KDQpO1xyXG5TaGFwZVR5cGVBZGp1c3RtZW50c1tSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVF0gPSAoc2hhcGVEYXRhOiBQb2ludCwgd29ybGRQb3NpdGlvbjogUG9pbnQpID0+IHtcclxuICAgIHJldHVybiB3b3JsZFBvc2l0aW9uO1xyXG59XHJcblNoYXBlVHlwZUFkanVzdG1lbnRzW1J1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1RdID0gKHNoYXBlRGF0YTogUmVjdCwgd3A6IFBvaW50KSA6IFJlY3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB3OiBzaGFwZURhdGEudyxcclxuICAgICAgICBoOiBzaGFwZURhdGEuaCxcclxuICAgICAgICB4OiB3cC54LFxyXG4gICAgICAgIHk6IHdwLnksXHJcbiAgICB9XHJcbn1cclxuU2hhcGVUeXBlQWRqdXN0bWVudHNbUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTl0gPSAoc2hhcGVEYXRhOiBQb2x5Z29uLCB3cDogUG9pbnQpIDogUG9seWdvbiA9PiB7XHJcbiAgICBjb25zdCBkaWZmWCA9IHdwLnggLSBzaGFwZURhdGFbMF0ueDtcclxuICAgIGNvbnN0IGRpZmZZID0gd3AueSAtIHNoYXBlRGF0YVswXS55O1xyXG4gICAgcmV0dXJuIHNoYXBlRGF0YS5tYXAocCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogcC54ICs9IGRpZmZYLCB5OiBwLnkgKz0gZGlmZlkgfVxyXG4gICAgfSlcclxufVxyXG5TaGFwZVR5cGVBZGp1c3RtZW50c1tSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEVdID0gKHNoYXBlRGF0YTogQ2lyY2xlLCB3cDogUG9pbnQpIDogQ2lyY2xlID0+IHtcclxuICAgIHJldHVybiB7IHg6IHdwLngsIHk6IHdwLnksIHI6IHNoYXBlRGF0YS5yIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwYXRpYWxHcmlkIGltcGxlbWVudHMgSUNvbGxpc2lvblN5c3RlbSB7XHJcbiAgICBwcml2YXRlIHVpZElkeCA6IG51bWJlciA9IDE7XHJcbiAgICByZWFkb25seSBkeW5hbWljQ29sbGlkZXJzOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiA9IFtdO1xyXG4gICAgcmVhZG9ubHkgc3RhdGljQ29sbGlkZXJzOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBjZWxsU2l6ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2xzOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJvd3M6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaXRlcmF0aW9uID0gMDtcclxuICAgIHJlYWRvbmx5IGNvbGxpZGVyc0J5VGFnIDoge1t0eXBlOiBzdHJpbmddIDogQ29sbGlkZXJNYXAgfSA9IHt9O1xyXG4gICAgcmVhZG9ubHkgY29sbGlkZXJUYWdzOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICByZWFkb25seSB0YWdDb3VwbGVzOiBBcnJheTxBcnJheTxzdHJpbmc+PiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWNCdWNrZXRzOiB7W2J1Y2tldElkOiBudW1iZXJdOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiB9ID0ge307XHJcbiAgICByZWFkb25seSBnZXRCdWNrZXRzTG9va3VwIDogQXJyYXk8KHNoYXBlRGF0YTogU2hhcGVEYXRhKSA9PiBBcnJheTxudW1iZXI+PjtcclxuICAgIHByaXZhdGUgdWlkQ2hlY2tlZENvbGxpZGVkTWFwOiB7W3VpZDogIG51bWJlcl06IHtbdWlkOiBudW1iZXJdOiBib29sZWFuIH19ID0ge307XHJcbiAgICBwcml2YXRlIHVpZEFycmF5OiBBcnJheTxudW1iZXI+ID0gW107XHJcbiAgICBwcml2YXRlIGNoZWNrZWRNYXAgOiAgeyBbdWlkOiBudW1iZXJdOiB7IFt1aWQ6IG51bWJlcl06IG51bWJlciB9IH0gPSB7fTtcclxuICAgIHByaXZhdGUgY3VyU2VxOiBudW1iZXIgPSAxO1xyXG4gICAgcmVhZG9ubHkgZ2V0Q29sbGlkZXJzV2l0aFRhZ3M6ICh0YWdzOiBBcnJheTxTdHJpbmc+KSA9PiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PlxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRDb2xsaWRlcnNXaXRoVGFncyA9IGdldENvbGxpZGVyc1dpdGhUYWdzLmJpbmQodGhpcywgdGhpcy5jb2xsaWRlcnNCeVRhZyk7XHJcbiAgICAgICAgdGhpcy5nZXRCdWNrZXRzTG9va3VwID0gbmV3IEFycmF5KDUpO1xyXG4gICAgICAgIHRoaXMuZ2V0QnVja2V0c0xvb2t1cFtSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNUXSA9IHRoaXMuZ2V0QnVja2V0c0ZvclJlY3QuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdldEJ1Y2tldHNMb29rdXBbUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTl0gPSB0aGlzLmdldEJ1Y2tldHNGb3JQb2x5Z29uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5nZXRCdWNrZXRzTG9va3VwW1J1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5UXSA9IHRoaXMuZ2V0QnVja2V0c0ZvclBvaW50LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5nZXRCdWNrZXRzTG9va3VwW1J1bnRpbWVDb2xsaWRlclNoYXBlLkNJUkNMRV0gPSB0aGlzLmdldEJ1Y2tldHNGb3JDaXJjbGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdldEJ1Y2tldHNMb29rdXBbUnVudGltZUNvbGxpZGVyU2hhcGUuTElORV0gPSB0aGlzLmdldEJ1Y2tldHNGb3JMaW5lLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Jbml0KG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbWFwU2l6ZSA6IE1hcFNpemUgPSByZXNvbHZlTWFwU2l6ZShtYXBXaWR0aCwgbWFwSGVpZ2h0KTtcclxuICAgICAgICBzd2l0Y2gobWFwU2l6ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE1hcFNpemUuTEFSR0U6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxTaXplID0gMjU2O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTWFwU2l6ZS5NRURJVU06XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxTaXplID0gMTI4O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTWFwU2l6ZS5TTUFMTDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbFNpemUgPSA2NDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1hcCBzaXplLiAke21hcFNpemV9YClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yb3dzICA9IE1hdGguY2VpbChtYXBIZWlnaHQgLyB0aGlzLmNlbGxTaXplKTtcclxuICAgICAgICB0aGlzLmNvbHMgPSBNYXRoLmNlaWwobWFwV2lkdGggLyB0aGlzLmNlbGxTaXplKTtcclxuICAgIH1cclxuICAgIG9uQ2xlYXIoKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICBjb25zdCBvbGRDaGVja01hcCA9IHRoaXMuY2hlY2tNYXA7XHJcbiAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhvbGRDaGVja01hcCk7XHJcbiAgICAgICAgaWYoa2V5cy5sZW5ndGggPiAxMDApIHtcclxuICAgICAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IGk7IGogIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja2VkTWFwID0ge307XHJcbiAgICAgICAgdGhpcy5jdXJTZXEgPSAxO1xyXG4gICAgICAgIHRoaXMudWlkSWR4ID0gMTtcclxuICAgICAgICB0aGlzLmR5bmFtaWNDb2xsaWRlcnMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnN0YXRpY0NvbGxpZGVycy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhdGljQnVja2V0cyA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2VsbFNpemUgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBbGxDb2xsaWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmR5bmFtaWNDb2xsaWRlcnMsIC4uLnRoaXMuc3RhdGljQ29sbGlkZXJzXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BZGRlZFRhZ1RvQ29sbGlkZXIoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4sIHQ6IFRhZykge1xyXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ0ExIE9OIENPTExJREVSIEFEREVEIFRBRycpXHJcbiAgICAgICAgdGhpcy5hZGRDb2xsaWRlclRvVHlwZShjb2xsaWRlciwgW3RdLCBTaGFwZUVudW1Ub1Byb3BlcnR5W2NvbGxpZGVyLnNoYXBlVHlwZV0pO1xyXG4gICAgICAgIGlmKGNvbGxpZGVyLmlzUG9seWdvbikge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUFkZGVkVGFnVG9Qb2x5Z29uKGNvbGxpZGVyIGFzIFBvbHlnb25Db2xsaWRlciwgdClcclxuICAgICAgICAgICAgaWYoIWNvbGxpZGVyLmR5bmFtaWMpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldHNUb0FkZFRvID0gY29sbGlkZXJbJ19iY2FjaGUnXSB8fCB0aGlzLmdldEJ1Y2tldHNMb29rdXBbY29sbGlkZXIuc2hhcGVUeXBlXShjb2xsaWRlci5zaGFwZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYoYnVja2V0c1RvQWRkVG8ubGVuZ3RoID4gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyWydfYmNhY2hlJ10gPSBidWNrZXRzVG9BZGRUbztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBidWNrZXRzVG9BZGRUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnN0YXRpY0J1Y2tldHNbYnVja2V0c1RvQWRkVG9baV1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzVG9BZGRUb1tpXV0gPSBbY29sbGlkZXJdXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNCdWNrZXRzW2J1Y2tldHNUb0FkZFRvW2ldXS5wdXNoKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgY29sbGlkZXIubGluZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUJ1Y2tldHMgPSB0aGlzLmdldEJ1Y2tldHNGb3JMaW5lKGNvbGxpZGVyLmxpbmVzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGluZUJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNCdWNrZXRzW2xpbmVCdWNrZXRzW2ldXS5wdXNoKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25BZGQoY29sbGlkZXJbJ191aWQnXSwgY29sbGlkZXIsIHQpO1xyXG4gICAgICAgICAgICBpZighY29sbGlkZXIuZHluYW1pYykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0c1RvQWRkVG8gPSB0aGlzLmdldEJ1Y2tldHNMb29rdXBbY29sbGlkZXIuc2hhcGVUeXBlXShjb2xsaWRlci5zaGFwZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGJ1Y2tldHNUb0FkZFRvLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzVG9BZGRUb1tpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNCdWNrZXRzW2J1Y2tldHNUb0FkZFRvW2ldXSA9IFtjb2xsaWRlcl1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY0J1Y2tldHNbYnVja2V0c1RvQWRkVG9baV1dLnB1c2goY29sbGlkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZW1vdmVkVGFnRnJvbUNvbGxpZGVyKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+LCB0YWc6IFRhZykge1xyXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ0EyIE9OIENPTExJREVSIFJFTU9WRUQgVEFHJylcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdBMyBjaGVjayBtYXAgV0FTJywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNoZWNrZWRNYXApKSk7XHJcbiAgICAgICAgaWYoY29sbGlkZXIuaXNQb2x5Z29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sbGlkZXJGcm9tVHlwZShjb2xsaWRlciwgW3RhZ10sICdwb2x5Z29ucycpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25Qb2x5Z29uUmVtb3ZlKGNvbGxpZGVyWydfdWlkJ10sIGNvbGxpZGVyIGFzIFBvbHlnb25Db2xsaWRlciwgdGFnKTtcclxuICAgICAgICAgICAgLy8gaWYgdGhlIGNvbGxpZGVyIG5vIGxvbmdlciBoYXMgYW55IHRhZ3Mgd2UgYXJlIGdvaW5nIHRvIGRlbGV0ZSBpdCBmcm9tIHRoZSBidWNrZXQgY29tcGxldGVseS5cclxuICAgICAgICAgICAgaWYoIWNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RhdGljQ29sbGlkZXJGcm9tQnVja2V0KGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCAoPFBvbHlnb25Db2xsaWRlcj5jb2xsaWRlcikubGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0YXRpY0NvbGxpZGVyRnJvbUJ1Y2tldCgoPFBvbHlnb25Db2xsaWRlcj5jb2xsaWRlcikubGluZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcignQTQgTk9OIFBPTFlHT04nKVxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyRnJvbVR5cGUoY29sbGlkZXIsIFt0YWddLCBTaGFwZUVudW1Ub1Byb3BlcnR5W2NvbGxpZGVyLnNoYXBlVHlwZV0pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25SZW1vdmUoY29sbGlkZXJbJ191aWQnXSwgY29sbGlkZXIsIHRhZyk7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBjb2xsaWRlciBubyBsb25nZXIgaGFzIGFueSB0YWdzIHdlIGFyZSBnb2luZyB0byBkZWxldGUgaXQgZnJvbSB0aGUgYnVja2V0IGNvbXBsZXRlbHkuXHJcbiAgICAgICAgICAgIGlmKCFjb2xsaWRlci50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0YXRpY0NvbGxpZGVyRnJvbUJ1Y2tldChjb2xsaWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ0E1IGNoZWNrIG1hcCBiZWNhbWUnLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuY2hlY2tlZE1hcCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFRhZ0NvdXBsZUFycmF5Rm9yVGFnKHRhZzogVGFnKSA6IEFycmF5PFRhZz4gfCBudW1iZXIge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnRhZ0NvdXBsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ldWzBdID09PSB0YWcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ0NvdXBsZXNbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkFkZGVkQ29sbGlkZXJDb3VwbGUodGFnQSwgdGFnQikgOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgZm91bmRBcnJheUE7XHJcbiAgICAgICAgbGV0IGZvdW5kQXJyYXlCO1xyXG4gICAgICAgIGlmKHRhZ0EgPT09IHRhZ0IpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudGFnQ291cGxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ldWzBdID09PSB0YWdBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRBcnJheUEgPSB0aGlzLnRhZ0NvdXBsZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGZvdW5kQXJyYXlBLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kQXJyYXlBW2pdID09PSB0YWdCKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGFkZCB0aGUgY29sbGlzaW9uIGNvdXBsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIGR1cGxpY2F0ZSB0YWcgY291cGxlICR7dGFnQX0gYW5kICR7dGFnQn1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ldWzBdID09PSB0YWdCKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRBcnJheUIgPSB0aGlzLnRhZ0NvdXBsZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGZvdW5kQXJyYXlCLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kQXJyYXlCW2pdID09PSB0YWdBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGFkZCB0aGUgY29sbGlzaW9uIGNvdXBsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIGR1cGxpY2F0ZSB0YWcgY291cGxlICR7dGFnQX0gYW5kICR7dGFnQn1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGNoZWNrZWQgPSAwO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy50YWdDb3VwbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnRhZ0NvdXBsZXNbaV1bMF0gPT09IHRhZ0EpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRBcnJheUEgPSB0aGlzLnRhZ0NvdXBsZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGZvdW5kQXJyYXlBLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kQXJyYXlBW2pdID09PSB0YWdCKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGFkZCB0aGUgY29sbGlzaW9uIGNvdXBsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIGR1cGxpY2F0ZSB0YWcgY291cGxlICR7dGFnQX0gYW5kICR7dGFnQn1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoZWNrZWQgPT09IDIpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhZ0NvdXBsZXNbaV1bMF0gPT09IHRhZ0IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRBcnJheUIgPSB0aGlzLnRhZ0NvdXBsZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGZvdW5kQXJyYXlCLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kQXJyYXlCW2pdID09PSB0YWdBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGFkZCB0aGUgY29sbGlzaW9uIGNvdXBsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcnlpbmcgdG8gYWRkIGR1cGxpY2F0ZSB0YWcgY291cGxlICR7dGFnQX0gYW5kICR7dGFnQn1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoZWNrZWQgPT09IDIpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihmb3VuZEFycmF5QSkge1xyXG4gICAgICAgICAgICBmb3VuZEFycmF5QS5wdXNoKHRhZ0IpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm91bmRBcnJheUEgPSBbdGFnQSwgdGFnQl07XHJcbiAgICAgICAgICAgIHRoaXMudGFnQ291cGxlcy5wdXNoKGZvdW5kQXJyYXlBKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZm91bmRBcnJheUIpIHtcclxuICAgICAgICAgICAgZm91bmRBcnJheUIucHVzaCh0YWdBKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvdW5kQXJyYXlCID0gW3RhZ0IsIHRhZ0FdO1xyXG4gICAgICAgICAgICB0aGlzLnRhZ0NvdXBsZXMucHVzaChmb3VuZEFycmF5QilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyc0EgPSB0aGlzLmNvbGxpZGVyc0J5VGFnW3RhZ0FdO1xyXG4gICAgICAgIGNvbnN0IGNvbGxpZGVyc0IgPSB0aGlzLmNvbGxpZGVyc0J5VGFnW3RhZ0JdO1xyXG5cclxuICAgICAgICAvLyBuZWVkIHRvIGFkZCB0byBjaGVjayBtYXAgc2luY2Ugd2hlbiB3ZSBpbml0aWFsaXplZCBjb2xsaWRlcnMgdGhlIGNvdXBsZSB3YXMgbm90IGluIHRoZSBhcnJheS5cclxuXHJcbiAgICAgICAgaWYoY29sbGlkZXJzQSAmJiBjb2xsaWRlcnNCKSB7XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyc0EucmVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlcnNBLnJlY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja01hcE9uQWRkKGNvbGxpZGVyc0EucmVjdHNbaV1bYF91aWRgXSwgY29sbGlkZXJzQS5yZWN0c1tpXSwgdGFnQSwgZm91bmRBcnJheUIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyc0EucG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgY29sbGlkZXJzQS5wb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25BZGQoY29sbGlkZXJzQS5wb2ludHNbaV1bYF91aWRgXSwgY29sbGlkZXJzQS5wb2ludHNbaV0sIHRhZ0EsIGZvdW5kQXJyYXlCKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjb2xsaWRlcnNBLmNpcmNsZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlcnNBLmNpcmNsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25BZGQoY29sbGlkZXJzQS5jaXJjbGVzW2ldW2BfdWlkYF0sIGNvbGxpZGVyc0EuY2lyY2xlc1tpXSwgdGFnQSwgZm91bmRBcnJheUIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyc0EucG9seWdvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlcnNBLnBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyUG9seWdvbiA9IGNvbGxpZGVyc0EucG9seWdvbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tNYXBPblBvbHlnb25BZGQoY3VyUG9seWdvbltgX3VpZGBdLCBjdXJQb2x5Z29uLCB0YWdBLCBmb3VuZEFycmF5QiwgY2FjaGVBcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FjaGVBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGN1clBvbHlnb24ubGluZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ckxpbmVVaWQgPSBjdXJQb2x5Z29uLmxpbmVzW2pdWyd1aWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCBjYWNoZUFycmF5Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1ckxpbmVVaWRdW2NhY2hlQXJyYXlba11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY2FjaGVBcnJheVtrXV1bY3VyTGluZVVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyc0EubGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlcnNBLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY29sbGlkZXJzQS5saW5lc1tpXS5wYXJlbnQpIGNvbnRpbnVlOyAvLyB0aGUgbGluZSBoYXMgYSBwYXJlbnQgd2hpY2ggbWVhbnMgd2UgYWxyZWFkeSBhZGRlZCBpdCBjYW4gc2tpcC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrTWFwT25BZGQoY29sbGlkZXJzQS5jaXJjbGVzW2ldW2BfdWlkYF0sIGNvbGxpZGVyc0EucmVjdHNbaV0sIHRhZ0EpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sbGlkZXJzU2hhcmVJbml0aWFsaXplZENvdXBsZShjMTogQ29sbGlkZXI8YW55PiwgYzI6IENvbGxpZGVyPGFueT4sIGNhY2hlKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjMS50YWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZ0EgPSBjMS50YWdzW2ldO1xyXG4gICAgICAgICAgICBsZXQgY291cGxlZFRhZ3MgPSBjYWNoZVt0YWdBXTtcclxuICAgICAgICAgICAgaWYoIWNvdXBsZWRUYWdzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIGZpbmQgaXQuXHJcbiAgICAgICAgICAgICAgICBjb3VwbGVkVGFncyA9IHRoaXMuZ2V0VGFnQ291cGxlQXJyYXlGb3JUYWcodGFnQSk7XHJcbiAgICAgICAgICAgICAgICBjYWNoZVt0YWdBXSA9IGNvdXBsZWRUYWdzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvdXBsZWRUYWdzICE9PSAxKSB7IC8vIHdlIGNhbiBhc3N1bWUgaXRzIGFuIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGNvdXBsZWRUYWdzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGMyLnRhZ3MubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291cGxlZFRhZ3Nbal0gPT09IGMyLnRhZ3Nba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYzIudGFncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YWdBID0gYzIudGFnc1tpXTtcclxuICAgICAgICAgICAgbGV0IGNvdXBsZWRUYWdzID0gY2FjaGVbdGFnQV07XHJcbiAgICAgICAgICAgIGlmKCFjb3VwbGVkVGFncykge1xyXG4gICAgICAgICAgICAgICAgLy8gbmVlZCB0byBmaW5kIGl0LlxyXG4gICAgICAgICAgICAgICAgY291cGxlZFRhZ3MgPSB0aGlzLmdldFRhZ0NvdXBsZUFycmF5Rm9yVGFnKHRhZ0EpXHJcbiAgICAgICAgICAgICAgICBjYWNoZVt0YWdBXSA9IGNvdXBsZWRUYWdzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvdXBsZWRUYWdzICE9PSAxKSB7IC8vIHdlIGNhbiBhc3N1bWUgaXRzIGFuIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IGNvdXBsZWRUYWdzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrID0gMDsgayA8IGMxLnRhZ3MubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291cGxlZFRhZ3Nbal0gPT09IGMxLnRhZ3Nba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmKGNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbGxpZGVyLnRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBjaGVja0NvbC50YWdzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY29sbGlkZXIudGFnc1tpXSA9PT0gY2hlY2tDb2wudGFnc1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgICAgICAqL1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblJlbW92ZWRDb2xsaWRlckNvdXBsZSh0YWdBLCB0YWdCKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kQXJyYXlBdCA9IC0xO1xyXG4gICAgICAgIGxldCBmb3VuZEJBdCA9IC0xO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnRhZ0NvdXBsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ldWzBdID09PSB0YWdBKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEFycmF5QXQgPSBpO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMTsgaiA8IHRoaXMudGFnQ291cGxlc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGFnQ291cGxlc1tpXVtqXSA9PT0gdGFnQikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZEJBdCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGZvdW5kQXJyYXlBdCA+IC0xICYmIGZvdW5kQkF0ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy50YWdDb3VwbGVzW2ZvdW5kQXJyYXlBdF0uc3BsaWNlKGZvdW5kQkF0LCAxKTtcclxuICAgICAgICAgICAgLy8gaWYgdGhlcnRlcyBubyBtb3JlIGNvdXBsZXMgbGVmZ3QgaW4gdGhlIGFycmF5IHJlbW92ZSBpdC5cclxuICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ZvdW5kQXJyYXlBdF0ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ0NvdXBsZXMuc3BsaWNlKGZvdW5kQXJyYXlBdCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmb3VuZEFycmF5QXQyID0gLTE7XHJcbiAgICAgICAgbGV0IGZvdW5kQkF0MiA9IC0xO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnRhZ0NvdXBsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ldWzBdID09PSB0YWdCKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEFycmF5QXQyID0gaTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDE7IGogPCB0aGlzLnRhZ0NvdXBsZXNbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRhZ0NvdXBsZXNbaV1bal0gPT09IHRhZ0EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRCQXQyID0gajtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZm91bmRBcnJheUF0MiA+IC0xICYmIGZvdW5kQkF0MiA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFnQ291cGxlc1tmb3VuZEFycmF5QXQyXS5zcGxpY2UoZm91bmRCQXQyLCAxKTtcclxuICAgICAgICAgICAgLy8gaWYgdGhlcnRlcyBubyBtb3JlIGNvdXBsZXMgbGVmZ3QgaW4gdGhlIGFycmF5IHJlbW92ZSBpdC5cclxuICAgICAgICAgICAgaWYodGhpcy50YWdDb3VwbGVzW2ZvdW5kQXJyYXlBdDJdLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YWdDb3VwbGVzLnNwbGljZShmb3VuZEFycmF5QXQyLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gbm93IHJlbW92ZSBmcm9tIHRoZSBjaGVja2VkTWFwIGNvbGxpZGVycyB0aGF0IG5vIGxvbmdlciBoYXZlIGFueSBpbml0aWFsaXplZCB0YWcgY291cGxlcy5cclxuICAgICAgICBjb25zdCBjb3VwbGVJbmRleExvb2t1cENhY2hlID0ge307XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoQ29sbGlkZXJXaXRoVGFnKHRhZ0EsIChjb2xsaWRlckE6IENvbGxpZGVyPFNoYXBlRGF0YT4pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JFYWNoQ29sbGlkZXJXaXRoVGFnKHRhZ0IsIChjb2xsaWRlckI6IENvbGxpZGVyPFNoYXBlRGF0YT4pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vVE9ETzogb3B0aW1pemUgbGluZXMgd2l0aCBwYXJlbnQuXHJcbiAgICAgICAgICAgICAgICBpZihjb2xsaWRlckIgPT09IGNvbGxpZGVyQSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuY29sbGlkZXJzU2hhcmVJbml0aWFsaXplZENvdXBsZShjb2xsaWRlckEsIGNvbGxpZGVyQiwgY291cGxlSW5kZXhMb29rdXBDYWNoZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCBnZXRzIGhlcmUgdGhhdCBtZWFucyBjb2xsaWRlckEgYW5kIGNvbGxpZGVyQiBsb3N0IHRoZWlyIHJlbGF0aW9uc2hpcC5cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2NvbGxpZGVyQVsnX3VpZCddXVtjb2xsaWRlckJbJ191aWQnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjb2xsaWRlckJbJ191aWQnXV1bY29sbGlkZXJBWydfdWlkJ11dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BZGRlZFN0YXRpY0NvbGxpZGVyKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+KSB7XHJcbiAgICAgICAgY29sbGlkZXJbYF91aWRgXSA9IHRoaXMudWlkSWR4Kys7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNDb2xsaWRlcnMucHVzaChjb2xsaWRlcik7XHJcbiAgICAgICAgaWYoY29sbGlkZXIudGFncykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbGxpZGVyVG9UeXBlKGNvbGxpZGVyLCBjb2xsaWRlci50YWdzLCBTaGFwZUVudW1Ub1Byb3BlcnR5W2NvbGxpZGVyLnNoYXBlVHlwZV0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzIHdpbGwgYWRkIHRoZSBjb2xsaWRlciB0byB0aGUgY291cGxlTWFwIGxvb2t1cCBhbmQgY2FjaGUgdGhlbSBpZiBpdHMgYSBwb2x5Z29uLlxyXG4gICAgICAgICAgICB0aGlzLl9vbkFkZGVkQ29sbGlkZXJXaXRoVGFncyhjb2xsaWRlcik7XHJcblxyXG4gICAgICAgICAgICBpZihjb2xsaWRlci5pc1BvbHlnb24pIHtcclxuICAgICAgICAgICAgICAgICg8UG9seWdvbkNvbGxpZGVyPmNvbGxpZGVyKS5saW5lcy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BZGRlZFN0YXRpY0NvbGxpZGVyKGwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgY29sbGlkZXJbYF9jYWNoZWRfdWlkc2BdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0c1RvQWRkVG8gPSB0aGlzLmdldEJ1Y2tldHNMb29rdXBbY29sbGlkZXIuc2hhcGVUeXBlXShjb2xsaWRlci5zaGFwZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYoYnVja2V0c1RvQWRkVG8ubGVuZ3RoID4gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyWydfYmNhY2hlJ10gPSBidWNrZXRzVG9BZGRUbztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBidWNrZXRzVG9BZGRUby5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnN0YXRpY0J1Y2tldHNbYnVja2V0c1RvQWRkVG9baV1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzVG9BZGRUb1tpXV0gPSBbY29sbGlkZXJdXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNCdWNrZXRzW2J1Y2tldHNUb0FkZFRvW2ldXS5wdXNoKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXRzVG9BZGRUbyA9IHRoaXMuZ2V0QnVja2V0c0xvb2t1cFtjb2xsaWRlci5zaGFwZVR5cGVdKGNvbGxpZGVyLnNoYXBlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYnVja2V0c1RvQWRkVG8ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5zdGF0aWNCdWNrZXRzW2J1Y2tldHNUb0FkZFRvW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRpY0J1Y2tldHNbYnVja2V0c1RvQWRkVG9baV1dID0gW2NvbGxpZGVyXVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzVG9BZGRUb1tpXV0ucHVzaChjb2xsaWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBwdWJsaWMgb25BZGRlZER5bmFtaWNDb2xsaWRlcihjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPikge1xyXG4gICAgICAgIGNvbGxpZGVyW2BfdWlkYF0gPSB0aGlzLnVpZElkeCsrO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdhZGRlZCBjb2xsaWRlcjonLCBjb2xsaWRlcik7XHJcbiAgICAgICAgdGhpcy5keW5hbWljQ29sbGlkZXJzLnB1c2goY29sbGlkZXIpO1xyXG4gICAgICAgLy8gY29uc29sZS5lcnJvcignYWRkaW5nIGR5bmFtaWMgY29sbGlkZXInLCBjb2xsaWRlcik7XHJcbiAgICAgICAgaWYoY29sbGlkZXIudGFncykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbGxpZGVyVG9UeXBlKGNvbGxpZGVyLCBjb2xsaWRlci50YWdzLCBTaGFwZUVudW1Ub1Byb3BlcnR5W2NvbGxpZGVyLnNoYXBlVHlwZV0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzIHdpbGwgYWRkIHRoZSBjb2xsaWRlciB0byB0aGUgY291cGxlTWFwIGxvb2t1cCBhbmQgY2FjaGUgdGhlbSBpZiBpdHMgYSBwb2x5Z29uLlxyXG4gICAgICAgICAgICB0aGlzLl9vbkFkZGVkQ29sbGlkZXJXaXRoVGFncyhjb2xsaWRlcilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29sbGlkZXIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygndGhlIGNhaGNlZCB1aWRzIGJlY2FtZScsIFsuLi5jb2xsaWRlcltgX2NhY2hlZF91aWRzYF1dKTtcclxuICAgICAgICAgICAgKDxQb2x5Z29uQ29sbGlkZXI+Y29sbGlkZXIpLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ2FkZGluZyBsaW5lIGZyb20gcG9seWdvbicsIGwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFkZGVkRHluYW1pY0NvbGxpZGVyKGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVsZXRlIGNvbGxpZGVyW2BfY2FjaGVkX3VpZHNgXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfb25BZGRlZENvbGxpZGVyV2l0aFRhZ3MoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4pIHtcclxuICAgICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIGNvbnN0IGN1clVpZCA9IGNvbGxpZGVyWydfdWlkJ107XHJcbiAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF0gPSB7fTtcclxuICAgICAgICBpZihjb2xsaWRlci5wYXJlbnQpIHtcclxuICAgICAgICAgICAgLy8gd2Uga25vdyB0aGUgcGFyZW50IGhhcyBjYWNoZWQgdWlkcyBhdCB0aGlzIHBvaW50LlxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hpbGQgZmlubmEgZ2V0IHRoZSBjaGlsZCBrZXlzOicsIFsuLi5jb2xsaWRlci5wYXJlbnRbJ19jYWNoZWRfdWlkcyddXSk7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlci5wYXJlbnRbJ19jYWNoZWRfdWlkcyddLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBjb2xsaWRlci5wYXJlbnRbJ19jYWNoZWRfdWlkcyddW2ldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1ba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBba2V5XVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhlIGNoaWxkIGxvb2sgdXAgYmVjYW1lJywgdGhpcy5jaGVja2VkTWFwW2N1clVpZF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyLmlzUG9seWdvbikge1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXJbJ19jYWNoZWRfdWlkcyddID0gW107XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3RhcnRpbmcgY29sbGlkZXIgY2FjaGUgaXBkYXRlIGNoZWNrIGZvciBwb2x5Z29uIHdoYWVycm9kZ2tqbiByZycpXHJcbiAgICAgICAgICAgICAgICBjb2xsaWRlci50YWdzLmZvckVhY2godCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGVja01hcE9uUG9seWdvbkFkZChjdXJVaWQsIGNvbGxpZGVyIGFzIFBvbHlnb25Db2xsaWRlciwgdCwgY29sbGlkZXJbJ19jYWNoZWRfdWlkcyddKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29sbGlkZXIudGFncy5mb3JFYWNoKHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hlY2tNYXBPbkFkZChjdXJVaWQsIGNvbGxpZGVyLCB0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIHdhbnQgdG8gaXRlcmF0ZSBhbGwgdGhlIGNvbGxpZGVyJ3MgdGFncyBhbmQgaXQgdG8gYWxsIGNvbGxpZGVycyB3aW4gdGhlIGNvdXBsZS5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvbiBhZGRlZCBjcmVhdGUgbWFwIHRvb2snLCBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblJlbW92ZWREeW5hbWljQ29sbGlkZXIoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4pIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5keW5hbWljQ29sbGlkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuZHluYW1pY0NvbGxpZGVyc1tpXSA9PT0gY29sbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY0NvbGxpZGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb2xsaWRlci50YWdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29sbGlkZXJGcm9tVHlwZShjb2xsaWRlciwgY29sbGlkZXIudGFncywgU2hhcGVFbnVtVG9Qcm9wZXJ0eVtjb2xsaWRlci5zaGFwZVR5cGVdKTtcclxuICAgICAgICAgICAgaWYoIWNvbGxpZGVyLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZG9udCBtYWtlIHRoaXMgY2FsbCBmb3IgY29sbGlkZXJzIHdpdGggYSBwYXJlbnQgc2luY2UgdGhlIGNoaWxkcmVuIHdpbGwgYmUgdGFrZW4gY2FyZSBvZiB3aGVuIGl0cyBjYWxsZWQgd2l0aCB0aGUgcGFyZW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vblJlbW92ZWRDb2xsaWRlcldpdGhUYWdzKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9vblJlbW92ZWRDb2xsaWRlcldpdGhUYWdzKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+KSB7XHJcbiAgICAgICAgaWYoY29sbGlkZXIuaXNQb2x5Z29uKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbGxpZGVyLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2NvbGxpZGVyLmxpbmVzW2ldXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY2hlY2tlZE1hcFtjb2xsaWRlcltgX3VpZGBdXSkuZm9yRWFjaChrID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlci5saW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2tdW2NvbGxpZGVyLmxpbmVzW2ldW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtrXVtjb2xsaWRlcltgX3VpZGBdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jaGVja2VkTWFwW2NvbGxpZGVyW2BfdWlkYF1dKS5mb3JFYWNoKGsgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtrXVtjb2xsaWRlcltgX3VpZGBdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY29sbGlkZXJbYF91aWRgXV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVBZGRlZFRhZ1RvUG9seWdvbihjb2xsaWRlcjogUG9seWdvbkNvbGxpZGVyLCB0OiBUYWcpIHtcclxuICAgICAgICAvLyBhIHBvbHlnb24gaGFzIGNoaWxkcmVuIGFuZCB0aGV5IHNoYXJlIHRhZ3Mgc28gdGhlIGxvb2t1cCBtYXAgbmVlZHMgdG8gYmUgYWRqdXN0ZWQgYWNjb3JkaW5nbHkgYXMgd2VsbCB3ZSBjYWNoZSB0aGUgdWlkcyBuZWVkZWQgaW4gdXBkYXRlQ2hlY2tNYXBPbkFkZCB0aGVuIHV0aWxpemUgdGhlbSB0byBpdGVyYXRlXHJcbiAgICAgICAgLy8gYW5kIGFkZCB0aGUgbmVlZGVkIHJlbGF0aW9uc2hpcHMgdG8gdGhlIGNoaWxkcmVuIHF1aWNrZXJcclxuICAgICAgICBjb25zdCBjYWNoZUFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja01hcE9uUG9seWdvbkFkZChjb2xsaWRlclsnX3VpZCddLCBjb2xsaWRlciwgdCwgY2FjaGVBcnJheSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcignQTIgQURESU4gR0NIRUNLIE1BUCBBREQgVEhFIENBQ0hFRCBCRUNBTUUnLCBjYWNoZUFycmF5LmpvaW4oJywgJykpXHJcbiAgICAgICAgLy8gd2Uga25vdyB0eXBlIGV4aXN0cyBiZWNhdXNlIHRoZSBwb2x5Z29uIHBhcmVudCB3b3VsZCBoYXZlIG1hZGUgaXQuXHJcbiAgICAgICAgaWYoIXRoaXMuY29sbGlkZXJzQnlUYWdbdF0ubGluZXMpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGVyc0J5VGFnW3RdLmxpbmVzID0gWy4uLmNvbGxpZGVyLmxpbmVzXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzQnlUYWdbdF0ubGluZXMucHVzaCguLi5jb2xsaWRlci5saW5lcylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNhY2hlQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGFkZGVkIG5ldyBjaGVjayByZWxhdGlvbnNoaXBzIHRvIHBhcmVudCwgbmVlZCB0byBhZGQgdG8gbGluZXMuXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlci5saW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNhY2hlQXJyYXkubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY29sbGlkZXIubGluZXNbaV1bJ191aWQnXV1bY2FjaGVBcnJheVtqXV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjYWNoZUFycmF5W2pdXVtjb2xsaWRlci5saW5lc1tpXVsnX3VpZCddXSA9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb3JFYWNoQ29sbGlkZXJXaXRoVGFnKHRhZzogc3RyaW5nLCBjYjogKGNvbGxpZGVyOiBDb2xsaWRlcjxhbnk+KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuY29sbGlkZXJzQnlUYWdbdGFnXSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGxvb2t1cCA9IHRoaXMuY29sbGlkZXJzQnlUYWdbdGFnXTtcclxuICAgICAgICBpZihsb29rdXAucmVjdHMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxvb2t1cC5yZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY2IobG9va3VwLnJlY3RzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihsb29rdXAucG9seWdvbnMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxvb2t1cC5wb2x5Z29ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY2IobG9va3VwLnBvbHlnb25zW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihsb29rdXAubGluZXMpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxvb2t1cC5saW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY2IobG9va3VwLmxpbmVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihsb29rdXAuY2lyY2xlcykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbG9va3VwLmNpcmNsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNiKGxvb2t1cC5jaXJjbGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihsb29rdXAucG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsb29rdXAucG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjYihsb29rdXAucG9pbnRzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlQ2hlY2tNYXBPblBvbHlnb25SZW1vdmUoY3VyVWlkOiBudW1iZXIsIGNvbGxpZGVyOiBQb2x5Z29uQ29sbGlkZXIsIHQ6IFRhZykge1xyXG4gICAgICAgIGNvbnN0IHN0aWxsQ291cGxlZCA9IChjaGVja0NvbCA6IENvbGxpZGVyPFNoYXBlRGF0YT4pIDogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjb2xsaWRlci50YWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGNoZWNrQ29sLnRhZ3MubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sbGlkZXIudGFnc1tpXSA9PT0gY2hlY2tDb2wudGFnc1tqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29sbGlkZXJzQnlUYWdbdF0pIHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2xsaWRlcnNCeVRhZ1t0XTtcclxuICAgICAgICAgICAgaWYgKGNvbC5yZWN0cykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wucmVjdHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLnJlY3RzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgY29sbGlkZXIgbm93IHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZG9udCBzaGFyZSBhbnkgb3RoZXIgdGFnc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RpbGxDb3VwbGVkKGMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2NbJ191aWQnXV1bY3VyVWlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIubGluZXMuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbbFsnX3VpZCddXVtjW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjWydfdWlkJ11dW2xbJ191aWQnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wucG9seWdvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLnBvbHlnb25zLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5wb2x5Z29uc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIGNvbGxpZGVyIG5vdyB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGRvbnQgc2hhcmUgYW55IG90aGVyIHRhZ3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0aWxsQ291cGxlZChjKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1tgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjWydfdWlkJ11dW2N1clVpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2xbJ191aWQnXV1bY1tgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtsWydfdWlkJ11dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bbFtgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbbFsnX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIubGluZXMuZm9yRWFjaChsMiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtsWydfdWlkJ11dW2wyW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbbDJbJ191aWQnXV1bbFsnX3VpZCddXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wuY2lyY2xlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wuY2lyY2xlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wuY2lyY2xlc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIGNvbGxpZGVyIG5vdyB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGRvbnQgc2hhcmUgYW55IG90aGVyIHRhZ3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0aWxsQ291cGxlZChjKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmlubmEgcmVtb3ZlIHRoZSBjb2xsaWRlcicsIGMsICd0aGUgY2hlY2tlIGRtYXAga2V5cyB3YXMnLCBPYmplY3Qua2V5cyh0aGlzLmNoZWNrZWRNYXApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoZSBjaGVja2VkIG1hcCBmb3IgY3VyVWlkIHdhcycsIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsaWRlci5saW5lcy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtsWydfdWlkJ11dW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2NbJ191aWQnXV1bbFsnX3VpZCddXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbC5saW5lcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wubGluZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLmxpbmVzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgY29sbGlkZXIgbm93IHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZG9udCBzaGFyZSBhbnkgb3RoZXIgdGFnc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RpbGxDb3VwbGVkKGMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2NbJ191aWQnXV1bY3VyVWlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlkZXIubGluZXMuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbbFsnX3VpZCddXVtjW2BfdWlkYF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjWydfdWlkJ11dW2xbJ191aWQnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wucG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5wb2ludHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLnBvaW50c1trXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIGNvbGxpZGVyIG5vdyB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGRvbnQgc2hhcmUgYW55IG90aGVyIHRhZ3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0aWxsQ291cGxlZChjKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1tgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjWydfdWlkJ11dW2N1clVpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpZGVyLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2xbJ191aWQnXV1bY1tgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtsWydfdWlkJ11dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZW1vdmVzIGNvdXBsZWQgbG9va3VwICh0aGlzLmNoZWNrZWRNYXApIGlmIHRoZXJlcyBubyBtb3JlIHNoYXJlZCB0YWdzIGxlZnQgYWZ0ZXIgdGhlIHRhZyB3YXMgcmVtb3ZlZFxyXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja01hcE9uUmVtb3ZlKGN1clVpZDogbnVtYmVyLCBjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPiwgdDogVGFnKSB7XHJcbiAgICAgICAgY29uc3Qgc3RpbGxDb3VwbGVkID0gKGNoZWNrQ29sIDogQ29sbGlkZXI8U2hhcGVEYXRhPikgOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgaWYoY29sbGlkZXIudGFncykge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbGxpZGVyLnRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgY2hlY2tDb2wudGFncy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjb2xsaWRlci50YWdzW2ldID09PSBjaGVja0NvbC50YWdzW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5jb2xsaWRlcnNCeVRhZ1t0XSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmNvbGxpZGVyc0J5VGFnW3RdO1xyXG4gICAgICAgICAgICBpZiAoY29sLnJlY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5yZWN0cy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wucmVjdHNba107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBjb2xsaWRlciBub3cgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBkb250IHNoYXJlIGFueSBvdGhlciB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbENvdXBsZWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLnBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5wb2x5Z29ucy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wucG9seWdvbnNba107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBjb2xsaWRlciBub3cgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBkb250IHNoYXJlIGFueSBvdGhlciB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbENvdXBsZWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjLmxpbmVzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bbFtgX3VpZGBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbbFsnX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLmNpcmNsZXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLmNpcmNsZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLmNpcmNsZXNba107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBjb2xsaWRlciBub3cgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBkb250IHNoYXJlIGFueSBvdGhlciB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbENvdXBsZWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLmxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5saW5lcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wubGluZXNba107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBjb2xsaWRlciBub3cgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBkb250IHNoYXJlIGFueSBvdGhlciB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbENvdXBsZWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLnBvaW50cykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wucG9pbnRzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5wb2ludHNba107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgYSBjb2xsaWRlciBub3cgd2UgbmVlZCB0byBjaGVjayBpZiB3ZSBkb250IHNoYXJlIGFueSBvdGhlciB0YWdzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGlsbENvdXBsZWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbYF91aWRgXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNoZWNrZWRNYXBbY1snX3VpZCddXVtjdXJVaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBzYW1lIHRoaW5nLi4uIGFkZHMgdGhlIG5lZWRlZCBjb3VwbGVkIGNvbGxpZGVycyB0byB0aGVpciBtaXJyb3Ivc2libGluZy93LmUgdSB3YW5uYSBjYWxsIGl0IHRhZy5cclxuICAgIHByaXZhdGUgdXBkYXRlQ2hlY2tNYXBPblBvbHlnb25BZGQoY3VyVWlkOiBudW1iZXIsIGNvbGxpZGVyOiBQb2x5Z29uQ29sbGlkZXIsIHQ6IFRhZywgY2FjaGVBcnJheTogQXJyYXk8bnVtYmVyPiwgY291cGxlQXJyYXk/OiBBcnJheTxUYWc+IHwgbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY291cGxlQXJyYXkgPSBjb3VwbGVBcnJheSA/IGNvdXBsZUFycmF5IDogdGhpcy5nZXRUYWdDb3VwbGVBcnJheUZvclRhZyh0KSBhcyBBcnJheTxUYWc+O1xyXG4gICAgICAgIGlmKGNvdXBsZUFycmF5ID09IDEpIHsgLy8gbm90IGZvdW5kLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgKDxBcnJheTxUYWc+PmNvdXBsZUFycmF5KS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmNvbGxpZGVyc0J5VGFnW2NvdXBsZUFycmF5W2pdXTtcclxuICAgICAgICAgICAgaWYoIWNvbCkgY29udGludWU7XHJcbiAgICAgICAgICAgIC8vY29uc3Qgc2hhcGVQcm9wcyA9IFsncmVjdHMnLCAncG9pbnRzJywgJ3BvbHlnb25zJywgJ2NpcmNsZXMnLCAnbGluZXMnXTtcclxuICAgICAgICAgICAgLy8gcHJldHR5IHNvbGlkIG1pY3JvcHRpbWl6YXRpb24gdXNlZCB0byBpdGVyYXRlIGFuIGFycmF5IG9mIFtyZWN0cywgcG9pbnRzLCBldGNdIHRoaXMgaXMgZmFzdGVyIGVub3VnaCB0aGF0IHRpcyB3b3J0aCBpdCBpIGtub3cgaXRzIHNvIGRhbW4gdWdseSB0aG91Z2ggLi0uXHJcbiAgICAgICAgICAgIGlmIChjb2wucmVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLnJlY3RzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5yZWN0c1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbJ191aWQnXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVBcnJheS5wdXNoKGNbJ191aWQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbJ191aWQnXV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY1tgX3VpZGBdXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbC5wb2ludHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLnBvaW50cy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wucG9pbnRzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUFycmF5LnB1c2goY1snX3VpZCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLnBvbHlnb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5wb2x5Z29ucy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wucG9seWdvbnNba107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1clVpZCAhPT0gY1tgX3VpZGBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVBcnJheS5wdXNoKGNbJ191aWQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSB3YW50IHRvIGNoZWNrIGZvciBsaW5lcyBoZXJlLi4uXHJcbiAgICAgICAgICAgICAgICAgIGlmIChjdXJVaWQgIT09IGNbYF91aWRgXSAmJiAhdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY1tgX3VpZGBdXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gYy5saW5lcyBhcyBBcnJheTxDb2xsaWRlcjxMaW5lPj47XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IG0gPSAwOyBtIDwgbGluZXMubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUFycmF5LnB1c2gobGluZXNbbV1bJ191aWQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bbGluZXNbbV1bJ191aWQnXV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtsaW5lc1ttXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbC5jaXJjbGVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5jaXJjbGVzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5jaXJjbGVzW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUFycmF5LnB1c2goY1snX3VpZCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29sLmxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5saW5lcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wubGluZXNba10gYXMgQ29sbGlkZXI8TGluZT47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCghYy5wYXJlbnQgfHwgYy5wYXJlbnQgIT09IGNvbGxpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbJ191aWQnXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQXJyYXkucHVzaChjWydfdWlkJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW2N1clVpZF1bY1snX3VpZCddXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY1tgX3VpZGBdXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZUNoZWNrTWFwT25BZGQoY3VyVWlkOiBudW1iZXIsIGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+LCB0OiBUYWcsIGNvdXBsZUFycmF5PzogQXJyYXk8VGFnPiB8IG51bWJlcikgIHtcclxuICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0NVUiBVSUQgV0FTJywgY3VyVWlkLCAnVEhFIFRBRyBXQVMnLCB0LCAndGhlIGNvdXBsZSBhcnRyYXkgd2FzJywgY291cGxlQXJyYXkpO1xyXG4gICAgICAgIGNvdXBsZUFycmF5ID0gY291cGxlQXJyYXkgPyBjb3VwbGVBcnJheSA6IHRoaXMuZ2V0VGFnQ291cGxlQXJyYXlGb3JUYWcodCk7XHJcbiAgLy8gICAgICBjb25zb2xlLmxvZygnY291cGxlIGFycmF5IGZvciB1aWQnLCBjdXJVaWQsICd0YWcnLCB0LCAnd2FzJywgY291cGxlQXJyYXkpO1xyXG4gICAgICAgIGlmKGNvdXBsZUFycmF5ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gbm8gY291cGxlIGFycmF5IGZvdW5kLi4gY2FuIHJldHVybiBlYXJseSwgd2UgZGVmaW5pdGVseSB3b250IGFkZCBhbnkgbmV3IGNoZWNrZWRNYXBzLlxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8ICg8QXJyYXk8VGFnPj5jb3VwbGVBcnJheSkubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29sID0gdGhpcy5jb2xsaWRlcnNCeVRhZ1tjb3VwbGVBcnJheVtqXV07XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5lcnJvcignVEhFIENPTExJREVSIEJZIFRBRyBXQVMnLCBjb2wpO1xyXG4gICAgICAgICAgICBpZighY29sKSBjb250aW51ZTtcclxuICAgICAgICAgICAgLy9jb25zdCBzaGFwZVByb3BzID0gWydyZWN0cycsICdwb2ludHMnLCAncG9seWdvbnMnLCAnY2lyY2xlcycsICdsaW5lcyddO1xyXG4gICAgICAgICAgICAvLyBwcmV0dHkgc29saWQgbWljcm9wdGltaXphdGlvbiB1c2VkIHRvIGl0ZXJhdGUgYW4gYXJyYXkgb2YgW3JlY3RzLCBwb2ludHMsIGV0Y10gdGhpcyBpcyBmYXN0ZXIgZW5vdWdoIHRoYXQgdGlzIHdvcnRoIGl0XHJcbiAgICAgICAgICAgIGlmIChjb2wucmVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLnJlY3RzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5yZWN0c1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyVWlkICE9PSBjW2BfdWlkYF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wucG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5wb2ludHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLnBvaW50c1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyVWlkICE9PSBjW2BfdWlkYF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wucG9seWdvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY29sLnBvbHlnb25zLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5wb2x5Z29uc1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyVWlkICE9PSBjW2BfdWlkYF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wuY2lyY2xlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wuY2lyY2xlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBjb2wuY2lyY2xlc1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyVWlkICE9PSBjW2BfdWlkYF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFtjW2BfdWlkYF1dW2N1clVpZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2wubGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb2xsaWRlci5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvbC5saW5lcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjID0gY29sLmxpbmVzW2tdIGFzIENvbGxpZGVyPExpbmU+O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyVWlkICE9PSBjW2BfdWlkYF0gJiYgKCFjLnBhcmVudCB8fCBjb2xsaWRlci5wYXJlbnQgIT09IGMucGFyZW50KSAmJiBjb2xsaWRlci5wYXJlbnQgIT09IGMucGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbJ191aWQnXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY1tgX3VpZGBdXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2wubGluZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGNvbC5saW5lc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1clVpZCAhPT0gY1tgX3VpZGBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZE1hcFtjdXJVaWRdW2NbJ191aWQnXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY3VyVWlkXVtjWydfdWlkJ11dID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbY1tgX3VpZGBdXVtjdXJVaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlbW92ZWRTdGF0aWNDb2xsaWRlcihjb2xsaWRlcjogQ29sbGlkZXI8U2hhcGVEYXRhPikge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRpY0NvbGxpZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLnN0YXRpY0NvbGxpZGVyc1tpXSA9PT0gY29sbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGljQ29sbGlkZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbGxpZGVyLnRhZ3MpIHtcclxuICAgICAgICAgICAgaWYoIWNvbGxpZGVyLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25SZW1vdmVkQ29sbGlkZXJXaXRoVGFncyhjb2xsaWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDb2xsaWRlckZyb21UeXBlKGNvbGxpZGVyLCBjb2xsaWRlci50YWdzLCBTaGFwZUVudW1Ub1Byb3BlcnR5W2NvbGxpZGVyLnNoYXBlVHlwZV0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0YXRpY0NvbGxpZGVyRnJvbUJ1Y2tldChjb2xsaWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVtb3ZlU3RhdGljQ29sbGlkZXJGcm9tQnVja2V0KGNvbGxpZGVyOiBDb2xsaWRlcjxhbnk+KSB7XHJcbiAgICAgICAgY29uc3QgYnVja2V0c1RvUmVtb3ZlRnJvbSA9IGNvbGxpZGVyWydfYmNhY2hlJ10gPyBjb2xsaWRlclsnX2JjYWNoZSddIDogdGhpcy5nZXRCdWNrZXRzTG9va3VwW2NvbGxpZGVyLnNoYXBlVHlwZV0oY29sbGlkZXIuc2hhcGVEYXRhKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYnVja2V0c1RvUmVtb3ZlRnJvbS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5zdGF0aWNCdWNrZXRzW2J1Y2tldHNUb1JlbW92ZUZyb21baV1dLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJCdWNrZXQgPSBidWNrZXRzVG9SZW1vdmVGcm9tW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0aWNCdWNrZXRzW2N1ckJ1Y2tldF1bal0gPT09IGNvbGxpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0aWNCdWNrZXRzW2N1ckJ1Y2tldF0uc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLnN0YXRpY0J1Y2tldHNbY3VyQnVja2V0XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3RhdGljQnVja2V0c1tjdXJCdWNrZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZENvbGxpZGVyVG9UeXBlKGNvbGxpZGVyOiBDb2xsaWRlcjxTaGFwZURhdGE+LCB0YWdzOiBBcnJheTxUYWc+LCBzaGFwZVR5cGVQcm9wZXJ0eTogc3RyaW5nKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY3VyVGFnID0gdGFnc1tpXTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvbGxpZGVyIGFkZGluZzonLCBjdXJUYWcsICd0byA6Jywgc2hhcGVUeXBlUHJvcGVydHkpO1xyXG4gICAgICAgICAgICBpZighKHRoaXMuY29sbGlkZXJzQnlUYWdbY3VyVGFnXSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzQnlUYWdbY3VyVGFnXSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCEodGhpcy5jb2xsaWRlcnNCeVRhZ1tjdXJUYWddW3NoYXBlVHlwZVByb3BlcnR5XSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlkZXJzQnlUYWdbY3VyVGFnXVtzaGFwZVR5cGVQcm9wZXJ0eV0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNvbGxpZGVyc0J5VGFnW2N1clRhZ11bc2hhcGVUeXBlUHJvcGVydHldLnB1c2goY29sbGlkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbW92ZUNvbGxpZGVyRnJvbVR5cGUoY29sbGlkZXI6IENvbGxpZGVyPFNoYXBlRGF0YT4sIHRhZ3M6IEFycmF5PFRhZz4sIHNoYXBlVHlwZVByb3BlcnR5OiBzdHJpbmcpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJUYWcgPSB0YWdzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBhcnJheSA9IHRoaXMuY29sbGlkZXJzQnlUYWdbY3VyVGFnXVtzaGFwZVR5cGVQcm9wZXJ0eV07XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPGFycmF5Lmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyYXlbal0gPT09IGNvbGxpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbGxpZGVyc0J5VGFnW2N1clRhZ11bc2hhcGVUeXBlUHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShPYmplY3Qua2V5cyh0aGlzLmNvbGxpZGVyc0J5VGFnW2N1clRhZ10pLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY29sbGlkZXJzQnlUYWdbY3VyVGFnXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29sbGlkZXIuaXNQb2x5Z29uKSB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGNvbGxpZGVyLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbGxpZGVyRnJvbVR5cGUoY29sbGlkZXIubGluZXNbaV0sIHRhZ3MsICdsaW5lcycpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRBY3RpdmVCdWNrZXRzKCkgOiB7W2J1Y2tldElkOiBudW1iZXJdOiBBcnJheTxDb2xsaWRlcjxTaGFwZURhdGE+PiB9IHtcclxuICAgICAgICBjb25zdCBhY3RpdmVCdWNrZXRzID0ge307XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuZHluYW1pY0NvbGxpZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xsaWRlciA9IHRoaXMuZHluYW1pY0NvbGxpZGVyc1tpXTtcclxuICAgICAgICAgICAgaWYoIWNvbGxpZGVyLnRhZ3MpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAvLyBpIHJlYWxseSBob3BlIHRoaXMgbWFrZXMgdGhlIHNhbWUgbWljcm9wdGltaXphdGlvbiB0aGF0IGkgdGhpbmsgaXQgc2hvdWxkLi4uIG90aGVyd2lzZSB0aHNpIGNvZGUgaXMgc28gdWdseSBhbmQgc29ycnkgZm9yIGFueW9uZSByZWFkaW5nIHRoaXMuXHJcbiAgICAgICAgICAgIC8vIGhvcGluZyB0byB1c2UgdGhlIGVudW0gZnJvbSB0aGUgY29sbGlkZXIgZm9yIGEgcXVpY2sgbG9va3VwLlxyXG4gICAgICAgICAgICAvL1RPRE86IHNob3VsZCBiZSB1c2luZyB0aGUgdHJhbnNmb3JtZWRTaGFwZURhdGEgZXZlbnR1YWxseS5cclxuICAgICAgICAgICAgY29uc3QgYnVja2V0cyA9IHRoaXMuZ2V0QnVja2V0c0xvb2t1cFtjb2xsaWRlci5zaGFwZVR5cGVdKGNvbGxpZGVyLnNoYXBlRGF0YSk7XHJcbiAgICAgICAgICAgIGlmKGNvbGxpZGVyLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ2J1Y2tldHMgZm9yIHRoZSBsaW5lIHdhcycsIGNvbGxpZGVyLCAnd2FzJywgYnVja2V0cylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0aGlzLml0ZXJhdGlvbiA9PT0gMTUwMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICBjb25zb2xlLmxvZygnR09UIEJVQ0tFVFM6JywgYnVja2V0cywgJ0ZPUiBDT0xMSURFUjonLCBgJHtjb2xsaWRlclsnX3VpZCddfS0ke2NvbGxpZGVyLnRhZ3Muam9pbignLCAnKX1gKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnc2hhcGUgZGF0YSB3YXMnLCBjb2xsaWRlci5zaGFwZURhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBidWNrZXRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZighYWN0aXZlQnVja2V0c1tidWNrZXRzW2pdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0cyB0aGUgZmlyc3QgdGltZSB3ZXJlIGFkZGluZyB0byB0aGUgYnVja2V0IGFzIGFjdGl2ZSwgd2UgY2FuIGNoZWNrIHRvIHNlZSBpZiB0aGVyZXMgYW55IGluIHRoZSBzdGF0aWMgYnVja2V0cyBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzW2pdXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVCdWNrZXRzW2J1Y2tldHNbal1dID0gWy4uLnRoaXMuc3RhdGljQnVja2V0c1tidWNrZXRzW2pdXSwgY29sbGlkZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUJ1Y2tldHNbYnVja2V0c1tqXV0gPSBbY29sbGlkZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQnVja2V0c1tidWNrZXRzW2pdXS5wdXNoKGNvbGxpZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWN0aXZlQnVja2V0cztcclxuICAgIH07XHJcbiAgICBwdWJsaWMgZ2V0Q29sbGlzaW9ucyhkZWx0YTogbnVtYmVyKSA6IEFycmF5PENvbGxpZGVyPFNoYXBlRGF0YT4+IHtcclxuICAgICAgICB0aGlzLmN1clNlcSsrO1xyXG4gICAgICAgIHRoaXMuaXRlcmF0aW9uKys7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3QgYWN0aXZlQnVja2V0cyA9IHRoaXMuZ2V0QWN0aXZlQnVja2V0cygpO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0MiA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIGlmKHRoaXMuaXRlcmF0aW9uID09PSAxNTAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICBjb25zb2xlLmxvZygnYnVja2V0cyB0byBjaGVjayB3YXMnLCBPYmplY3Qua2V5cyhhY3RpdmVCdWNrZXRzKS5sZW5ndGgpO1xyXG4gICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdidWNrZXQgdGltZSB3YXMnLCBzdGFydDIgLSBzdGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZvdW5kQ29sbGlzaW9ucyA9IFtdO1xyXG4gICAgICAgIGxldCBjaGVja3MgPSAwO1xyXG4gICAgICAgIC8vdG9kbzogaW0gZ29pbmcgdG8gcmVmYWN0b3IgdGhpcyBieSBoYXZpbmcgZWFjaCBjb2xsaWRlciBoYXZlIGFuIGFycmF5IG9mIGNoZWNrZWQgd2l0aCBpbnN0ZWFkIG9mIGhhdmluZyB0byBmaW5kIGl0IGVhY2ggdGltZS5cclxuICAgICAgICBmb3IgKGxldCBidWNrZXRJZCBpbiBhY3RpdmVCdWNrZXRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldCA9IGFjdGl2ZUJ1Y2tldHNbYnVja2V0SWRdO1xyXG4gICAgICAgIC8vICAgIGNvbnNvbGUubG9nKCdUSEUgQlVDS0VUOicsIGJ1Y2tldElkLCAnaGFkOicsIFsuLi5idWNrZXRdKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBidWNrZXQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB1aWRfYSA9IGJ1Y2tldFtqXVsnX3VpZCddO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IGJ1Y2tldC5sZW5ndGggLSAxOyBrID4gMDsgay0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsgPT09IGopIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1aWRfYiA9IGJ1Y2tldFtrXVsnX3VpZCddO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgVE9ETzogaWYgd2UgaGF2ZSBsb3RzIG9mIG1hbnkgdG8gbWFueSBjb2xsaWRlcnMgd2UgbmVlZCB0byBub3QgdXNlIHRoZSBkb3VibGUgbG9va3VwIGFuZCBpbnN0ZWFkIHRyYWRlIG9mZiByd2l0aCB1c2luZyB0aGUgaW5kZXhlZCBsb29rdXAgd2l0aG91dCByZWR1bmRhbnQgdmFsdWVzLiB0aGUgdHJhZGVvZmYgaGVyZSB3aWxsIGJlIG1vcmUgY29tcGxleGl0eSBmb3Igd2hlbiByZW1vdmluZyBvYmplY3RzLCB3ZWxsIG5lZWQgdG8gaXRlcmF0ZSBhbGwgcG9zc2libGUgY291cGxlcyBhbmQgc2VlIGlmIHRoZWlyIHVpZCBpcyBsb3dlciB0aGVuIHRoZSByZW1vdmVkIG9uZSBhbmQgdGhlbiByZW1vdmUgZnJvbSB0aGVpciBtYXAgc2luY2UgdGhlaXIgdWlkIGlzIHRoZSBvbmUgdHJhY2tpbmcgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodWlkX2EgPiB1aWRfYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkU2VxID0gdGhpcy5jaGVja2VkTWFwW3VpZF9iXVt1aWRfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjaGVja2VkU2VxKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tlZFNlcSAhPT0gdGhpcy5jdXJTZXEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9qc3BlcmYuY29tL2RvdWJsZS1sb29rdXAtdnMtaGFzaC1rZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZE1hcFt1aWRfYl1bdWlkX2FdID0gdGhpcy5jdXJTZXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucmVzb2x2ZUNvbGxpc2lvbihidWNrZXRbal0sIGJ1Y2tldFtrXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZENvbGxpc2lvbnMucHVzaChidWNrZXRbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kQ29sbGlzaW9ucy5wdXNoKGJ1Y2tldFtrXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkU2VxID0gdGhpcy5jaGVja2VkTWFwW3VpZF9iXVt1aWRfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFjaGVja2VkU2VxKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tlZFNlcSAhPT0gdGhpcy5jdXJTZXEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9qc3BlcmYuY29tL2RvdWJsZS1sb29rdXAtdnMtaGFzaC1rZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHVpZF9hID4gdWlkX2IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrZWRNYXBbdWlkX2FdW3VpZF9iXSA9IHRoaXMuY3VyU2VxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW3VpZF9iXVt1aWRfYV0gPSB0aGlzLmN1clNlcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5yZXNvbHZlQ29sbGlzaW9uKGJ1Y2tldFtqXSwgYnVja2V0W2tdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kQ29sbGlzaW9ucy5wdXNoKGJ1Y2tldFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRDb2xsaXNpb25zLnB1c2goYnVja2V0W2tdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ3VpZGEgd2FzJywgdWlkX2EsICdjaGVja2VkIG1hcCB3YXMnLCB0aGlzLmNoZWNrZWRNYXAsICd1aWQgYiB3YXMnLCB1aWRfYilcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkU2VxID0gdGhpcy5jaGVja2VkTWFwW3VpZF9hXVt1aWRfYl07XHJcbiAgICAgICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZygnY2hlY2tlZCBzZXEgd2FzJywgY2hlY2tlZFNlcSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdjaGVja2VkIHNlcSBmb3InLCB1aWRfYSwgJ2FuZCB1aWRfYiAnLCAgdWlkX2IsIGNoZWNrZWRTZXEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgcGFpciBpc250IGluIHRoZSBjaGVja2VkIG1hcCB0aGVuIHdlIGNhbiBjb250aW51ZSBzaW5jZSB0aGF0IG1lYW5zIHRoZSB0YWdzIGRvbnQgYWxpZ24gdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWNoZWNrZWRTZXEpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjaGVja2VkIHNlcSBpc250IHRoZSBjdXIgc2VxLiB3ZSBuZWVkIHRvIGNoZWNrLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNoZWNrZWRTZXEgIT09IHRoaXMuY3VyU2VxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9qc3BlcmYuY29tL2RvdWJsZS1sb29rdXAtdnMtaGFzaC1rZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW3VpZF9hXVt1aWRfYl0gPSB0aGlzLmN1clNlcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkTWFwW3VpZF9iXVt1aWRfYV0gPSB0aGlzLmN1clNlcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tzKys7XHJcbiAgICAgICAgICAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ2Zpbm5hIHJlc29sdmUnLCBidWNrZXRbal0sIGJ1Y2tldFtrXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5yZXNvbHZlQ29sbGlzaW9uKGJ1Y2tldFtqXSwgYnVja2V0W2tdKSkge1xyXG4gICAgICAgICAgICAgICAgICAvLyAgICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tlZCcsIGJ1Y2tldFtqXSwgJ2FuZCcsIGJ1Y2tldFtrXSlcclxuICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgY29uc29sZS5sb2coJ0JPVU5EISEhIScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZENvbGxpc2lvbnMucHVzaChidWNrZXRbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRDb2xsaXNpb25zLnB1c2goYnVja2V0W2tdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmN1clNlcSA+IDYwMDAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyU2VxID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvdW5kQ29sbGlzaW9ucztcclxuICAgIH1cclxuICAgIC8vIHRoaXMgaXMgdWdseSBjb2RlIGFuZCBpZiBpIHdhcyBhYmxlIHRvIHJlc29sdmUgaXQgaW4gYSAxIGxpbmVyLCBpIGRpZCBmb3Igb3B0aW1pemF0aW9uLiBpZiB5b3Ugd2FudCB0b1xyXG4gICAgLy8gZWRpdCBhbnkgb2YgdGhlIHJlc29sdXRpb24gZnVuY3Rpb25zIGlkIHN1Z2dlc3QgcmV3cml0aW5nIGl0IHJhdGhlciB0aGFuIHRyeWluZyB0byBmaWd1cmUgb3V0IG15IGNvZGUgd2hpY2ggaSB3cm90ZSBmb3IgZWZmaWNpZW5jeSBhbmQgbm90IHJlYWRhYmlsaXR5LlxyXG4gICAgcHJpdmF0ZSByZXNvbHZlQ29sbGlzaW9uKGNvbEE6IENvbGxpZGVyPFNoYXBlRGF0YT4sIGNvbEI6IENvbGxpZGVyPFNoYXBlRGF0YT4pe1xyXG4gICAgICAgIGNvbnN0IHNoQSA9IGNvbEEuc2hhcGVEYXRhIGFzIGFueTtcclxuICAgICAgICBjb25zdCBzaEIgPSBjb2xCLnNoYXBlRGF0YSBhcyBhbnk7XHJcblxyXG4gICAgICAgIGlmKGNvbEEuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNUKSB7XHJcbiAgICAgICAgICAgIGlmKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNUKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKCg8UmVjdD5zaEEpLnggKyAoPFJlY3Q+c2hBKS53ID49ICg8UmVjdD5zaEIpLnggJiYgKDxSZWN0PnNoQSkueCA8PSAoPFJlY3Q+c2hCKS54ICsoPFJlY3Q+c2hCKS53ICYmICg8UmVjdD5zaEEpLnkgKyAoPFJlY3Q+c2hBKS5oID49ICg8UmVjdD5zaEIpLnkgJiYgKDxSZWN0PnNoQSkueSA8PSAoPFJlY3Q+c2hCKS55ICsgKDxSZWN0PnNoQikuaClcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuQ0lSQ0xFKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUmVjdENpcmNsZShzaEEgYXMgUmVjdCwgc2hCIGFzIENpcmNsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT04pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVSZWN0UG9seWdvbihzaEEgYXMgUmVjdCwgc2hCIGFzIFBvbHlnb24pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaEIueCA+PSBzaEEueCAmJiBzaEIueCA8PSBzaEEueCArIHNoQS53ICYmIHNoQi55ID49IHNoQS55ICYmIHNoQi55IDw9IHNoQS55ICsgc2hBLmgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5MSU5FKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTGluZVJlY3Qoc2hCWzBdLngsICBzaEJbMV0ueCwgc2hCWzBdLnksIHNoQlsxXS55LCBzaEEueCwgc2hBLnksIHNoQS53LCBzaEEuaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGNvbEEuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgaWYoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVSZWN0Q2lyY2xlKHNoQiBhcyBSZWN0LCBzaEEgYXMgQ2lyY2xlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuQ0lSQ0xFKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKE1hdGguc3FydCgoTWF0aC5wb3coKDxDaXJjbGU+c2hBKS54IC0gKDxDaXJjbGU+c2hCKS54LCAyKSArIE1hdGgucG93KCg8Q2lyY2xlPnNoQSkueSAtICg8Q2lyY2xlPnNoQikueSwgMikpKSkgPCAoKDxDaXJjbGU+c2hBKS5yICsgKDxDaXJjbGU+c2hCKS5yKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVBvbHlnb25DaXJjbGUoc2hCIGFzIFBvbHlnb24sIHNoQSBhcyBDaXJjbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChNYXRoLnNxcnQoKE1hdGgucG93KCg8UG9pbnQ+c2hCKS54IC0gKDxDaXJjbGU+c2hBKS54LCAyKSArIE1hdGgucG93KCg8UG9pbnQ+c2hCKS55IC0gKDxDaXJjbGU+c2hBKS55LCAyKSkpIDw9ICg8Q2lyY2xlPnNoQSkucik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVMaW5lQ2lyY2xlKHNoQlswXS54LCAgc2hCWzFdLngsIHNoQlswXS55LCBzaEJbMV0ueSwgc2hBLngsIHNoQS55LCBzaEEucilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY29sQS5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPTFlHT04pIHtcclxuICAgICAgICAgICAgaWYoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVSZWN0UG9seWdvbihzaEIgYXMgUmVjdCwgc2hBIGFzIFBvbHlnb24pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVQb2x5Z29uQ2lyY2xlKHNoQSBhcyBQb2x5Z29uLCBzaEIgYXMgQ2lyY2xlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUE9MWUdPTikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVBvbHlnb25Qb2x5Z29uKHNoQSBhcyBQb2x5Z29uLCBzaEIgYXMgUG9seWdvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlBPSU5UKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUG9seWdvblBvaW50KHNoQSBhcyBQb2x5Z29uLCBzaEIgYXMgUG9pbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5MSU5FKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTGluZVBvbHkoc2hCWzBdLngsIHNoQlswXS55LCBzaEJbMV0ueCwgc2hCWzFdLnksIHNoQSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGNvbEEuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVCkge1xyXG4gICAgICAgICAgICBpZihjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuUkVDVCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzaEEueCA+PSBzaEIueCAmJiBzaEEueCA8PSBzaEIueCArIHNoQi53ICYmIHNoQS55ID49IHNoQi55ICYmIHNoQS55IDw9IHNoQi55ICsgc2hCLmgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5DSVJDTEUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoTWF0aC5zcXJ0KChNYXRoLnBvdygoPFBvaW50PnNoQSkueCAtICg8Q2lyY2xlPnNoQikueCwgMikgKyBNYXRoLnBvdygoPFBvaW50PnNoQSkueSAtICg8Q2lyY2xlPnNoQikueSwgMikpKSA8PSAoPENpcmNsZT5zaEIpLnIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUG9seWdvblBvaW50KHNoQiBhcyBQb2x5Z29uLCBzaEEgYXMgUG9pbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICg8UG9pbnQ+c2hBKS54ID09PSg8UG9pbnQ+c2hCKS54ICYmICg8UG9pbnQ+c2hBKS55ID09PSAoPFBvaW50PnNoQikueTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVBvaW50TGluZShzaEEueCwgc2hBLnksIHNoQlswXS54LCAgIHNoQlswXS55LCBzaEJbMV0ueCwgc2hCWzFdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY29sQS5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLkxJTkUpIHtcclxuICAgICAgICAgICAgaWYoY29sQi5zaGFwZVR5cGUgPT09IFJ1bnRpbWVDb2xsaWRlclNoYXBlLlJFQ1QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVMaW5lUmVjdChzaEFbMF0ueCwgIHNoQVsxXS54LCBzaEFbMF0ueSwgc2hBWzFdLnksIHNoQi54LCBzaEIueSwgc2hCLncsIHNoQi5oKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuQ0lSQ0xFKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTGluZUNpcmNsZShzaEFbMF0ueCwgIHNoQVsxXS54LCBzaEFbMF0ueSwgc2hBWzFdLnksIHNoQi54LCBzaEIueSwgc2hCLnIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTGluZVBvbHkoc2hBWzBdLngsICBzaEFbMF0ueSwgc2hBWzFdLngsIHNoQVsxXS55LCBzaEIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbEIuc2hhcGVUeXBlID09PSBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0lOVCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVBvaW50TGluZShzaEIueCwgc2hCLnksIHNoQVswXS54LCAgIHNoQVswXS55LCBzaEFbMV0ueCwgc2hBWzFdKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xCLnNoYXBlVHlwZSA9PT0gUnVudGltZUNvbGxpZGVyU2hhcGUuTElORSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgcHJpdmF0ZSByZXNvbHZlTGluZUxpbmUoeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NoQSB3YXMnLCBzaEEsICdzaEIgd2FzJywgc2hCKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVMaW5lTGluZShzaEFbMF0ueCwgICBzaEFbMF0ueSwgc2hBWzFdLngsIHNoQVsxXS55LCBzaEJbMF0ueCwgc2hCWzBdLnksIHNoQlsxXS54LCBzaEJbMV0ueSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRFbGxpcHNlRnJvbVNjYWxlZENpcmNsZShjaXJjbGVEYXRhOiBDaXJjbGUsIHNjYWxlWDogbnVtYmVyLCBzY2FsZVk6IG51bWJlciwgcm90YXRpb24/OiBudW1iZXIsIHBpdm90UG9pbnQ/OiBQb2ludCkge1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRQb2x5Z29uRnJvbVJvdGF0ZWRSZWN0KHJlY3REYXRhOiBSZWN0LCByb3RhdGlvbjogbnVtYmVyLCBwaXZvdFBvaW50OiBQb2ludCkgOiBQb2x5Z29uIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNvbHZlUG9pbnRMaW5lID0gZnVuY3Rpb24oeDEsIHkxLCBzeCwgc3ksIGV4LCBleSwgYnVmZmVyPS41KSB7XHJcbiAgICAgICAgY29uc3QgZDEgPSBNYXRoLnNxcnQoKE1hdGgucG93KHgxIC0gc3gsIDIpICsgTWF0aC5wb3coeTEgLSBzeSwgMikpKTtcclxuICAgICAgICBjb25zdCBkMiA9IE1hdGguc3FydCgoTWF0aC5wb3coeDEgLSBleCwgMikgKyBNYXRoLnBvdyh5MSAtIGV5LCAyKSkpO1xyXG4gICAgICAgIGNvbnN0IGxpbmVMZW4gPSBNYXRoLnNxcnQoKE1hdGgucG93KGV4IC0gc3gsIDIpICsgTWF0aC5wb3coZXkgLSBzeSwgMikpKTtcclxuICAgICAgICByZXR1cm4gKGQxICsgZDIgPj0gbGluZUxlbiAtIGJ1ZmZlciAmJiBkMSArIGQyIDw9IGxpbmVMZW4gKyBidWZmZXIpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc29sdmVMaW5lTGluZUludGVyc2VjdE9ubHkoeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0KSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIGNvbnN0IHVBID0gKCh4NC14MykqKHkxLXkzKSAtICh5NC15MykqKHgxLXgzKSkgLyAoKHk0LXkzKSooeDIteDEpIC0gKHg0LXgzKSooeTIteTEpKTtcclxuICAgICAgICBjb25zdCB1QiA9ICgoeDIteDEpKih5MS15MykgLSAoeTIteTEpKih4MS14MykpIC8gKCh5NC15MykqKHgyLXgxKSAtICh4NC14MykqKHkyLXkxKSk7XHJcbiAgICAgICAgcmV0dXJuICh1QSA+PSAwICYmIHVBIDw9IDEgJiYgdUIgPj0gMCAmJiB1QiA8PSAxKVxyXG4gICAgfVxyXG4gICAgLy9odHRwOi8vd3d3LmtldmxpbmRldi5jb20vZ3VpL21hdGgvaW50ZXJzZWN0aW9uL0ludGVyc2VjdGlvbi5qc1xyXG4gICAgcHJpdmF0ZSByZXNvbHZlTGluZUxpbmUoeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCBnZXRJbnRlcnNlY3Q9ZmFsc2UpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgdWFfdCA9ICh4NCAtIHgzKSAqICh5MSAtIHkzKSAtICh5NCAtIHkzKSAqICh4MSAtIHgzKTtcclxuXHJcbiAgICAgICAgY29uc3QgdWJfdCA9ICh4MiAtIHgxKSAqICh5MSAtIHkzKSAtICh5MiAtIHkxKSAqICh4MSAtIHgzKTtcclxuICAgICAgICBjb25zdCB1X2IgID0gKHk0IC0geTMpICogKHgyIC0geDEpIC0gKHg0IC0geDMpICogKHkyIC0geTEpO1xyXG5cclxuICAgICAgICBpZiAoIHVfYiAhPSAwICkge1xyXG4gICAgICAgICAgICBjb25zdCB1YSA9IHVhX3QgLyB1X2I7XHJcbiAgICAgICAgICAgIGNvbnN0IHViID0gdWJfdCAvIHVfYjtcclxuICAgICAgICAgICAgcmV0dXJuKCAwIDw9IHVhICYmIHVhIDw9IDEgJiYgMCA8PSB1YiAmJiB1YiA8PSAxICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNoZWNrIGlmIGJvdW5kaW5nIGJveGVzIGNvbGxpZGUuXHJcbiAgICAgICAgaWYoTWF0aC5tYXgoeDEsIHgyKSA8ICBNYXRoLm1pbih4MywgeDQpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYoTWF0aC5tYXgoeDMsIHg0KSA8IE1hdGgubWluKHgxLCB4MikpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZihNYXRoLm1heCh5MSwgeTIpIDwgTWF0aC5taW4oeTMsIHk0KSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmKE1hdGgubWF4KHkzLCB5NCkgPCBNYXRoLm1pbih5MSwgeTIpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gYm91bmRpbmcgYm94ZXMgY29sbGlkZSwgc2VlIGlmIGVpdGhlciBvZiB0aGUgZW5kIHBvaW50cyBvbiB0aGUgbGluZSBsYXkgb24gdGhlIG90aGVyIGxpbmUuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVBvaW50TGluZSh4MSwgeTEsIHgzLCB5MywgeDQsIHk0LCAxKSB8fCB0aGlzLnJlc29sdmVQb2ludExpbmUoeDIsIHkyLCB4MywgeTMsIHg0LCB5NCwgMSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc29sdmVMaW5lUmVjdCh4MSwgeDIsIHkxLCB5MiwgcngsIHJ5LCB3LCBoKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIC8vcmV0dXJuIGJvb2xlYW5zXHJcbiAgICAgICAgaWYodGhpcy5yZXNvbHZlTGluZUxpbmUoeDEseTEseDIseTIsIHJ4LHJ5LHJ4LCByeStoKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgaWYodGhpcy5yZXNvbHZlTGluZUxpbmUoeDEseTEseDIseTIsIHJ4K3cscnksIHJ4K3cscnkraCkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmKHRoaXMucmVzb2x2ZUxpbmVMaW5lKHgxLHkxLHgyLHkyLCByeCxyeSwgcngrdyxyeSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmKHRoaXMucmVzb2x2ZUxpbmVMaW5lKHgxLHkxLHgyLHkyLCByeCxyeStoLCByeCt3LHJ5K2gpKSByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzb2x2ZVBvaW50UG9seSh4LCB5LCBwb2x5Z29uOiBQb2x5Z29uKSB7XHJcbiAgICAgICAgbGV0IGNvbGxpc2lvbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBuZXh0ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpPTA7IGk8cG9seWdvbi5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgbmV4dCA9IGkrMTtcclxuICAgICAgICAgICAgaWYgKG5leHQgPT09IHBvbHlnb24ubGVuZ3RoKSBuZXh0ID0gMDtcclxuICAgICAgICAgICAgbGV0IHAxID0gcG9seWdvbltpXTtcclxuICAgICAgICAgICAgbGV0IHAyID0gcG9seWdvbltuZXh0XTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgcG9zaXRpb24sIGZsaXAgJ2NvbGxpc2lvbicgdmFyaWFibGUgYmFjayBhbmQgZm9ydGhcclxuICAgICAgICAgICAgaWYgKCgocDEueSA+PSB5ICYmIHAyLnkgPCB5KSB8fCAocDEueSA8IHkgJiYgcDIueSA+PSB5KSkgJiZcclxuICAgICAgICAgICAgICAgICh4IDwgKHAyLngtcDEueCkqKHktcDEueSkgLyAocDIueS1wMS55KStwMS54KSkge1xyXG4gICAgICAgICAgICAgICAgY29sbGlzaW9uID0gIWNvbGxpc2lvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29sbGlzaW9uO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNvbHZlUmVjdFBvbHlnb24oY29sQTogUmVjdCwgY29sQjogUG9seWdvbikge1xyXG4gICAgICAgIGxldCBuZXh0ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpPTA7IGk8Y29sQi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBuZXh0ID0gaSsxO1xyXG4gICAgICAgICAgICBpZiAobmV4dCA9PT0gY29sQi5sZW5ndGgpIG5leHQgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBwMSA9IGNvbEJbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHAyID0gY29sQltuZXh0XTtcclxuICAgICAgICAgICAgaWYodGhpcy5yZXNvbHZlTGluZVJlY3QocDEueCxwMi54LHAxLnkscDIueSwgY29sQS54LGNvbEEueSxjb2xBLncsY29sQS5oKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAvLyBuZXh0IGNoZWNrIGlmIHRoZSByZWN0YW5nbGUgaXMgaW5zaWRlIHRoZSBwb2x5Z29uLlxyXG4gICAgICAgICAgICBpZih0aGlzLnJlc29sdmVQb2ludFBvbHkoY29sQS54LGNvbEEueSwgY29sQikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNvbHZlUmVjdENpcmNsZShjb2xBOiBSZWN0LCBjb2xCOiBDaXJjbGUpIHtcclxuICAgICAgICBjb25zdCB7IHgsIHksIHcsIGggfSA9IGNvbEE7XHJcbiAgICAgICAgY29uc3QgY1ggPSBjb2xCLng7XHJcbiAgICAgICAgY29uc3QgY1kgPSBjb2xCLnk7XHJcbiAgICAgICAgbGV0IF94ID0gY1g7XHJcbiAgICAgICAgbGV0IF95ID0gY1k7XHJcblxyXG4gICAgICAgIGlmKGNYIDwgeCkge1xyXG4gICAgICAgICAgICBfeCA9IHg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjWCA+IHgrdykge1xyXG4gICAgICAgICAgICBfeCA9IHgrdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNZIDwgeSkge1xyXG4gICAgICAgICAgICBfeSA9IHk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjWSA+IHkraCkge1xyXG4gICAgICAgICAgICBfeSA9IHkraDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChNYXRoLnNxcnQoKE1hdGgucG93KGNYIC0gX3gsIDIpICsgTWF0aC5wb3coY1kgLSBfeSwgMikpKSkgPD0gY29sQi5yO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNvbHZlTGluZUNpcmNsZSh4MSwgeDIsIHkxLCB5MiwgY3gsIGN5LCByKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2hlcmUxJywgJ3gxJywgeDEsICd4MicsIHgyLCAneTE6JywgeTEsICd5MjonLCB5MiwgJ2N4JywgY3gsICdjeScsIGN5LCAncicsIHIpO1xyXG4gICAgICAgIGlmKChNYXRoLnNxcnQoKE1hdGgucG93KHgxIC0gY3gsIDIpICsgTWF0aC5wb3coeTEgLSBjeSwgMikpKSkgPCByKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBpZigoTWF0aC5zcXJ0KChNYXRoLnBvdyh4MiAtIGN4LCAyKSArIE1hdGgucG93KHkyIC0gY3ksIDIpKSkpIDwgcikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgbGV0IGRpc3RYID0geDEgLSB4MjtcclxuICAgICAgICBsZXQgZGlzdFkgPSB5MSAtIHkyO1xyXG4gICAgICAgIGNvbnN0IGxlbiA9IE1hdGguc3FydCggKGRpc3RYKmRpc3RYKSArIChkaXN0WSpkaXN0WSkgKTtcclxuICAgICAgICBjb25zdCBkb3QgPSAoICgoY3gteDEpKih4Mi14MSkpICsgKChjeS15MSkqKHkyLXkxKSkgKSAvIE1hdGgucG93KGxlbiwyKTtcclxuICAgICAgICBjb25zdCBfY3ggPSB4MSArIChkb3QgKiAoeDIteDEpKTsgLy8gY2xvZXN0IHBvaW50c1xyXG4gICAgICAgIGNvbnN0IF9jeSA9IHkxICsgKGRvdCAqICh5Mi15MSkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdoZXJlMicsICdsZW46JywgbGVuLCAnZG90OicsIGRvdCwgJ19jeDonLCBfY3gsICdfY3k6JywgX2N5KTtcclxuICAgICAgICBpZighdGhpcy5yZXNvbHZlUG9pbnRMaW5lKF9jeCxfY3kseDEseTEseDIseTIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnaGVyZTMnKVxyXG4gICAgICAgIC8vIGdldCBkaXN0YW5jZSB0byBjbG9zZXN0IHBvaW50XHJcbiAgICAgICAgZGlzdFggPSBfY3ggLSBjeDtcclxuICAgICAgICBkaXN0WSA9IF9jeSAtIGN5O1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdkaXN0WCcsIGRpc3RYKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZGlzdFk6JywgZGlzdFkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyYWRpdXM6JywgcilcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KCAoZGlzdFgqZGlzdFgpICsgKGRpc3RZKmRpc3RZKSApIDw9IHI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlc29sdmVQb2x5Z29uQ2lyY2xlKGNvbEE6IFBvbHlnb24sIGNvbEI6IENpcmNsZSkge1xyXG4gICAgICAgIC8vIG5vdCB1c2luZyBsaW5lIGNoZWNrLi4gZG9pbmcgbGluZXMgc2VwZXJhdGVseS5cclxuICAgICAgICAvKlxyXG4gICAgICAgIGxldCBuZXh0ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpPTA7IGk8Y29sQS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXh0ID0gaSsxO1xyXG4gICAgICAgICAgICBpZiAobmV4dCA9PT0gY29sQS5sZW5ndGgpIG5leHQgPSAwO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhlIHBvbHlnb24gd2FzJywgY29sQSk7XHJcbiAgICAgICAgICAgIGxldCB2YyA9IGNvbEFbaV07XHJcbiAgICAgICAgICAgIGxldCB2biA9IGNvbEFbbmV4dF07XHJcbiAgICAgICAgICAgIC8vICAgIHByaXZhdGUgcmVzb2x2ZUxpbmVDaXJjbGUoeDEsIHgyLCB5MSwgeTIsIGN4LCBjeSwgcikge1xyXG4gICAgICAgICAgICBpZih0aGlzLnJlc29sdmVMaW5lQ2lyY2xlKHZjLngsIHZuLngsIHZjLnksIHZuLnksIGNvbEIueCxjb2xCLnksY29sQi5yKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Jlc29sdmVkIGxpbmUgY2lyY2xlIGF0IHNlZ21lbnQ6ICcsIHsgLi4udmMgfSwgeyAuLi52biB9LCAnYW5kIGNpcmNsZS4uLicsIHsgLi4uY29sQiB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUG9seWdvblBvaW50KGNvbEEsIGNvbEIpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSByZXNvbHZlUG9seWdvblBvaW50KGNvbEE6IFBvbHlnb24sIGNvbEI6IFBvaW50KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoZSBwb2ludCB3YXMnLCBjb2xCKTtcclxuICAgICAgICBsZXQgY29sbGlzaW9uID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG5leHQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxjb2xBLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBpKzE7XHJcbiAgICAgICAgICAgIGlmIChuZXh0ID09PSBjb2xBLmxlbmd0aCkgbmV4dCA9IDA7XHJcbiAgICAgICAgICAgIGxldCB2YyA9IGNvbEFbaV07XHJcbiAgICAgICAgICAgIGxldCB2biA9IGNvbEFbbmV4dF07XHJcbiAgICAgICAgICAgIGlmICgoKHZjLnkgPj0gY29sQi55ICYmIHZuLnkgPCBjb2xCLnkpIHx8ICh2Yy55IDwgY29sQi55ICYmIHZuLnkgPj0gY29sQi55KSkgJiZcclxuICAgICAgICAgICAgICAgIChjb2xCLnggPCAodm4ueC12Yy54KSooY29sQi55LXZjLnkpIC8gKHZuLnktdmMueSkrdmMueCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxpc2lvbiA9ICFjb2xsaXNpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbGxpc2lvbjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVzb2x2ZUxpbmVQb2x5KHgxLCB5MSwgeDIsIHkyLCBwb2x5Z29uOiBQb2x5Z29uKSB7XHJcbiAgICAgICAgbGV0IG5leHQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxwb2x5Z29uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBpICsgMTtcclxuICAgICAgICAgICAgaWYgKG5leHQgPT09IHBvbHlnb24ubGVuZ3RoKSBuZXh0ID0gMDtcclxuICAgICAgICAgICAgY29uc3QgeDMgPSBwb2x5Z29uW2ldLng7XHJcbiAgICAgICAgICAgIGNvbnN0IHkzID0gcG9seWdvbltpXS55O1xyXG4gICAgICAgICAgICBjb25zdCB4NCA9IHBvbHlnb25bbmV4dF0ueDtcclxuICAgICAgICAgICAgY29uc3QgeTQgPSBwb2x5Z29uW25leHRdLnk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdmVMaW5lTGluZSh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVzb2x2ZUNpcmNsZUVsbGlwc2UoY29sQTogQ2lyY2xlLCBjb2xCOiBDaXJjbGUpIHtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc29sdmVQb2x5Z29uUG9seWdvbihjb2xBOiBQb2x5Z29uLCBjb2xCOiBQb2x5Z29uKSB7XHJcbiAgICAgICAgbGV0IG5leHQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxjb2xBLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIG5leHQgPSBpKzE7XHJcbiAgICAgICAgICAgIGlmIChuZXh0ID09PSBjb2xBLmxlbmd0aCkgbmV4dCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHAxID0gY29sQVtpXTtcclxuICAgICAgICAgICAgY29uc3QgcDIgPSBjb2xBW25leHRdO1xyXG4gICAgICAgICAgICBpZih0aGlzLnJlc29sdmVMaW5lUG9seShwMS54LHAxLnkscDIueCxwMi55LGNvbEIpKSByZXR1cm4gdHJ1ZTtcclxuKi9cclxuICAgICAgICAgICAgaWYodGhpcy5yZXNvbHZlUG9seWdvblBvaW50KGNvbEEsIGNvbEJbMF0pKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYodGhpcy5yZXNvbHZlUG9seWdvblBvaW50KGNvbEIsIGNvbEFbMF0pKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0QnVja2V0c0ZvclBvbHlnb24ocG9seWdvbjogUG9seWdvbiwgYnVja2V0SWRzPVtdKSA6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIGxldCBtaW5YO1xyXG4gICAgICAgIGxldCBtYXhYO1xyXG4gICAgICAgIGxldCBtaW5ZO1xyXG4gICAgICAgIGxldCBtYXhZO1xyXG4gICAgICAgIC8vdG9kbzogd2UgZG9udCB3YW50IHRvIGdldCBidWNrZXRzIGZvciBlYWNoIGxpbmUgaW4gdGhlIHBvbHlnb24gY2F1c2Ugd2UgdHJlYXQgdGhlIGxpbmVzIGFzIHNlcGVyYXRlIGNvbGxpZGVycyBldmV5cndoZXJlLlxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwb2x5Z29uLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcG9seWdvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwMSA9IHBvbHlnb25baV07XHJcbiAgICAgICAgICAgIGNvbnN0IHAyID0gaSA9PT0gcG9seWdvbi5sZW5ndGgtMSA/IHBvbHlnb25bMF0gOiBwb2x5Z29uW2krMV07XHJcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2dldHRpbmcgYnVja2V0IGZvciBsaW5lJywgcDEsIHAyKTtcclxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmdldEJ1Y2tldHNGb3JMaW5lKFtwMSwgcDJdLCB0ZW1wKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcignYnVja2V0czonLCB0ZW1wKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRCdWNrZXRzRm9yTGluZShbcDEsIHAyXSwgYnVja2V0SWRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIC8vICBjb25zb2xlLmVycm9yKCdBTEwgVEhFIFBPTFlHT04gQlVDS0VUIElTIEJFQ0FNRScsIGJ1Y2tldElkcyk7XHJcbiAgICAgICAgcmV0dXJuIGJ1Y2tldElkcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEJ1Y2tldHNGb3JDaXJjbGUoY2lyY2xlOiBDaXJjbGUsIGJ1Y2tldElkcz1bXSkgOiBBcnJheTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCBkID0gY2lyY2xlLnIgKiAyO1xyXG4gICAgICAgIC8vIFRPRE86IG5lZWQgdG8gY2hlY2sgaWYgdGhlIHJhZGl1cyBpcyBsb25nIGVub3VnaCB0aGF0IGl0IGlzIGluIHRoZSBjZWxsIGJiIGJ1dCBmb3Igbm93IGJiIG9mIGEgY2lyY2xlIGlzIGZpbmUuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVja2V0c0ZvclJlY3QoeyB4OiBjaXJjbGUueCAtIGNpcmNsZS5yLCB5OiBjaXJjbGUueSAtIGNpcmNsZS5yLCB3OiBkLCBoOiBkIH0sIGJ1Y2tldElkcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRCdWNrZXRzRm9yUmVjdChyZWN0OiBSZWN0LCBidWNrZXRJZHM9W10pIDogQXJyYXk8bnVtYmVyPiB7XHJcbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSB0aGlzLmNlbGxTaXplO1xyXG4gICAgICAgIGxldCBtaW5YID0gcmVjdC54O1xyXG4gICAgICAgIGxldCBtaW5ZID0gcmVjdC55O1xyXG5cclxuICAgICAgICBpZihyZWN0LncgPj0gY2VsbFNpemUgfHwgcmVjdC5oID49IGNlbGxTaXplKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxYX3N0YXJ0ID0gTWF0aC5mbG9vcihtaW5YL2NlbGxTaXplKTtcclxuICAgICAgICAgICAgY29uc3QgY2VsbFlfc3RhcnQgPSBNYXRoLmZsb29yKG1pblkvY2VsbFNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsWF9lbmQgPSAgTWF0aC5jZWlsKChtaW5YICsgcmVjdC53KS9jZWxsU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbGxZX2VuZCA9ICBNYXRoLmNlaWwoKG1pblkgKyByZWN0LmgpL2NlbGxTaXplKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IGNlbGxYX3N0YXJ0OyBpIDwgY2VsbFhfZW5kOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBjZWxsWV9zdGFydDsgaiA8IGNlbGxZX2VuZDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1uID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsUG9zaXRpb24gPSByb3cgKiB0aGlzLmNvbHMgKyBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWJ1Y2tldElkcy5pbmNsdWRlcyhjZWxsUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldElkcy5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG1heFggPSBtaW5YICsgcmVjdC53O1xyXG4gICAgICAgICAgICBsZXQgbWF4WSA9IG1pblkgKyByZWN0Lmg7XHJcbiAgICAgICAgICAgIGlmKCEobWluWCAvIGNlbGxTaXplID49IHRoaXMuY29scykgJiYgIShtaW5ZL2NlbGxTaXplID49IHRoaXMucm93cyApICYmICEobWluWCA8IDApICYmICEobWluWCA8IDApKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbFBvc2l0aW9uID0gTWF0aC5mbG9vcihtaW5YIC8gY2VsbFNpemUpICsgTWF0aC5mbG9vcihtaW5ZIC8gY2VsbFNpemUpICogdGhpcy5jb2xzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFidWNrZXRJZHMuaW5jbHVkZXMoY2VsbFBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldElkcy5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIShtaW5YIC8gY2VsbFNpemUgPj0gdGhpcy5jb2xzKSAmJiAhKG1heFkvY2VsbFNpemUgPj0gdGhpcy5yb3dzICkgJiYgIShtaW5YIDwgMCkgJiYgIShtYXhZIDwgMCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSBNYXRoLmZsb29yKG1pblggLyBjZWxsU2l6ZSkgKyBNYXRoLmZsb29yKG1heFkgLyBjZWxsU2l6ZSkgKiB0aGlzLmNvbHM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJ1Y2tldElkcy5pbmNsdWRlcyhjZWxsUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0SWRzLnB1c2goY2VsbFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighKG1heFggLyBjZWxsU2l6ZSA+PSB0aGlzLmNvbHMpICYmICEobWluWS9jZWxsU2l6ZSA+PSB0aGlzLnJvd3MgKSAmJiAhKG1heFggPCAwKSAmJiAhKG1pblkgPCAwKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxQb3NpdGlvbiA9IE1hdGguZmxvb3IobWF4WCAvIGNlbGxTaXplKSArIE1hdGguZmxvb3IobWluWSAvIGNlbGxTaXplKSAqIHRoaXMuY29scztcclxuICAgICAgICAgICAgICAgIGlmICghYnVja2V0SWRzLmluY2x1ZGVzKGNlbGxQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRJZHMucHVzaChjZWxsUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCEobWF4WCAvIGNlbGxTaXplID49IHRoaXMuY29scykgJiYgIShtYXhZL2NlbGxTaXplID49IHRoaXMucm93cyApICYmICEobWF4WCA8IDApICYmICEobWF4WSA8IDApKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbFBvc2l0aW9uID0gTWF0aC5mbG9vcihtYXhYIC8gY2VsbFNpemUpICsgTWF0aC5mbG9vcihtYXhZIC8gY2VsbFNpemUpICogdGhpcy5jb2xzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFidWNrZXRJZHMuaW5jbHVkZXMoY2VsbFBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldElkcy5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ1Y2tldElkcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEJ1Y2tldHNGb3JTbWFsbFJlY3QobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgYnVja2V0SWRzPVtdKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbFNpemUgPSB0aGlzLmNlbGxTaXplO1xyXG4gICAgICAgIGlmKCEobWluWCAvIGNlbGxTaXplID49IHRoaXMuY29scykgJiYgIShtaW5ZL2NlbGxTaXplID49IHRoaXMucm93cyApICYmICEobWluWCA8IDApICYmICEobWluWCA8IDApKSB7XHJcbiAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSBNYXRoLmZsb29yKG1pblggLyBjZWxsU2l6ZSkgKyBNYXRoLmZsb29yKG1pblkgLyBjZWxsU2l6ZSkgKiB0aGlzLmNvbHM7XHJcbiAgICAgICAgICAgIGlmICghYnVja2V0SWRzLmluY2x1ZGVzKGNlbGxQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldElkcy5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIShtaW5YIC8gY2VsbFNpemUgPj0gdGhpcy5jb2xzKSAmJiAhKG1heFkvY2VsbFNpemUgPj0gdGhpcy5yb3dzICkgJiYgIShtaW5YIDwgMCkgJiYgIShtYXhZIDwgMCkpIHtcclxuICAgICAgICAgICAgbGV0IGNlbGxQb3NpdGlvbiA9IE1hdGguZmxvb3IobWluWCAvIGNlbGxTaXplKSArIE1hdGguZmxvb3IobWF4WSAvIGNlbGxTaXplKSAqIHRoaXMuY29scztcclxuICAgICAgICAgICAgaWYgKCFidWNrZXRJZHMuaW5jbHVkZXMoY2VsbFBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgYnVja2V0SWRzLnB1c2goY2VsbFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighKG1heFggLyBjZWxsU2l6ZSA+PSB0aGlzLmNvbHMpICYmICEobWluWS9jZWxsU2l6ZSA+PSB0aGlzLnJvd3MgKSAmJiAhKG1heFggPCAwKSAmJiAhKG1pblkgPCAwKSkge1xyXG4gICAgICAgICAgICBsZXQgY2VsbFBvc2l0aW9uID0gTWF0aC5mbG9vcihtYXhYIC8gY2VsbFNpemUpICsgTWF0aC5mbG9vcihtaW5ZIC8gY2VsbFNpemUpICogdGhpcy5jb2xzO1xyXG4gICAgICAgICAgICBpZiAoIWJ1Y2tldElkcy5pbmNsdWRlcyhjZWxsUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRJZHMucHVzaChjZWxsUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCEobWF4WCAvIGNlbGxTaXplID49IHRoaXMuY29scykgJiYgIShtYXhZL2NlbGxTaXplID49IHRoaXMucm93cyApICYmICEobWF4WCA8IDApICYmICEobWF4WSA8IDApKSB7XHJcbiAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSBNYXRoLmZsb29yKG1heFggLyBjZWxsU2l6ZSkgKyBNYXRoLmZsb29yKG1heFkgLyBjZWxsU2l6ZSkgKiB0aGlzLmNvbHM7XHJcbiAgICAgICAgICAgIGlmICghYnVja2V0SWRzLmluY2x1ZGVzKGNlbGxQb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldElkcy5wdXNoKGNlbGxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRCdWNrZXRzRm9yUG9pbnQocDogUG9pbnQsIGJ1Y2tldElkcz1bXSkgOiBBcnJheTxudW1iZXI+IHtcclxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IHA7XHJcbiAgICAgICAgaWYoISh4IC8gdGhpcy5jZWxsU2l6ZSA+PSB0aGlzLmNvbHMpICYmICEoeS90aGlzLmNlbGxTaXplID49IHRoaXMucm93cyApICYmICEoeCA8IDApICYmICEoeSA8IDApKSB7XHJcbiAgICAgICAgICAgIGxldCBjZWxsUG9zaXRpb24gPSBNYXRoLmZsb29yKHggLyB0aGlzLmNlbGxTaXplKSArIE1hdGguZmxvb3IoeSAvIHRoaXMuY2VsbFNpemUpICogdGhpcy5jb2xzO1xyXG4gICAgICAgICAgICBpZiAoIWJ1Y2tldElkcy5pbmNsdWRlcyhjZWxsUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRJZHMucHVzaChjZWxsUG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidWNrZXRJZHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRCdWNrZXRzRm9yTGluZShfcG9pbnRzIDogQXJyYXk8UG9pbnQ+LCBidWNrZXRJZHM9W10pIHtcclxuICAgICAgICBsZXQgbmV3QnVja2V0SWRzID0gW107XHJcbiAgICAgICAgY29uc3QgcDEgPSBfcG9pbnRzWzBdO1xyXG4gICAgICAgIGNvbnN0IHAyID0gX3BvaW50c1sxXTtcclxuICAgICAgICBpZihwMS54ID09PSBwMi54IHx8IHAxLnkgPT09IHAyLnkpIHtcclxuICAgICAgICAgICAgLy8gc2luY2UgaXRzIGEgc3RyYWlnaHQgbGluZSBlaXRoZXIgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCB3ZSBjYW4gY2FsY3VsYXRlIGl0IGFzIGEgcmVjdCB3aXRoIHdpZHRoL2hlaWdodCBhcyAxXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJ1Y2tldHNGb3JSZWN0KHsgeDogTWF0aC5taW4ocDEueCwgcDIueCksIHk6IE1hdGgubWluKHAxLnksIHAyLnkpLCB3OiBNYXRoLm1heCgxLCBNYXRoLmFicyhwMS54IC0gcDIueCkpLCBoOiAgTWF0aC5tYXgoMSwgTWF0aC5hYnMocDEueSAtIHAyLnkpKSB9LCBidWNrZXRJZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcFlkaWZmID0gcDIueSAtIHAxLnk7XHJcbiAgICAgICAgY29uc3QgcFhkaWZmID0gcDIueCAtIHAyLng7XHJcblxyXG4gICAgICAgIC8vIGlmIHRoZSBsaW5lIGlzIHNob3J0ZXIgdGhhbiBjZWxsIHNpemUgaW4gd2lkdGggYW5kIGhlaWdodCB3ZSBjYW4gZG8gYSBnZXQgYnVja2V0IGZvciBzbWFsbCByZWN0XHJcbiAgICAgICAgLypcclxuICAgICAgICBpZihNYXRoLmFicyhwWWRpZmYpIDwgdGhpcy5jZWxsU2l6ZSAmJiBNYXRoLmFicyhwWGRpZmYpIDwgdGhpcy5jZWxsU2l6ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0QnVja2V0c0ZvclNtYWxsUmVjdChNYXRoLm1pbihwMS54LCBwMi54KSwgTWF0aC5taW4ocDEueSwgcDIueSksIE1hdGgubWF4KHAxLngsIHAyLngpLCBNYXRoLm1heChwMS55LCBwMi55KSwgZGlmZik7XHJcbiAgICAgICAvLyAgICAgY29uc29sZS5lcnJvcignVEhFIFNNQUxMRVIgV0FTJywgZGlmZik7XHJcbiAgICAgICAgICAgIGRpZmYuZm9yRWFjaChkID0+IHtcclxuICAgICAgICAgICAgICAgIHNldDEuYWRkKGQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLy8gIHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgY29uc3Qgc2xvcGUgPSAocDIueSAtIHAxLnkgLyBwMi54IC0gcDEueCk7XHJcbiAgICAgICAgY29uc3QgeV9pbnRlcmNlcHQgPSBwMS55IC0gKChwMS54KSAqIHNsb3BlKTtcclxuICAgICAgICBsZXQgZGlzdGFuY2VUcmF2ZXJzZWQgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCB4X2luYyA9IHAxLnggPiBwMi54ID8gLTEgOiAxO1xyXG4gICAgICAgIGNvbnN0IHlfaW5jID0gcDEueSA+IHAyLnkgPyAtMSA6IDE7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50WCA9IHAxLng7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRZID0gcDEueTtcclxuXHJcbiAgICAgICAgY29uc3QgZW5kWCA9IHAyLng7XHJcbiAgICAgICAgY29uc3QgZW5kWSA9IHAyLnk7XHJcblxyXG4gICAgICAgIGxldCBuZWVkZWREaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gW2N1cnJlbnRYLCBjdXJyZW50WSwgZW5kWCwgZW5kWV07XHJcbiAgICAgICAgbGV0IHVzZVhJbmMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV4dFkgPSAocDEueCArIHhfaW5jKSAqIHNsb3BlICsgeV9pbnRlcmNlcHQ7XHJcblxyXG4gICAgICAgIGlmIChNYXRoLmFicyhuZXh0WSAtIHAxLnkpIDw9IDEpIHtcclxuICAgICAgICAgICAgbmVlZGVkRGlzdGFuY2UgPSBNYXRoLmFicyhwMS54IC0gcDIueCk7XHJcbiAgICAgICAgICAgIHVzZVhJbmMgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5lZWRlZERpc3RhbmNlID0gTWF0aC5hYnMocDEueSAtIHAyLnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKCd4IGluYycsIHhfaW5jLCAneSBpbmNyJywgeV9pbmMsICdjZWxsIHNpemU6JywgdGhpcy5jZWxsU2l6ZSwgJ25lZWRlZCBkaXN0YW5jZScsIG5lZWRlZERpc3RhbmNlKTtcclxuICAgICAgICBsZXQgdHJhdmVsaW5nID0gdHJ1ZTtcclxuICAgICAgICB3aGlsZSh0cmF2ZWxpbmcpe1xyXG4gICAgICAgICAgICBpZih1c2VYSW5jKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50WCA9IGN1cnJlbnRYICsgeF9pbmM7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZVRyYXZlcnNlZCs9IHhfaW5jO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFkgPSBjdXJyZW50WCAqIHNsb3BlICsgeV9pbnRlcmNlcHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50WSA9IGN1cnJlbnRZICsgeV9pbmM7XHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZVRyYXZlcnNlZCs9IHlfaW5jO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFggPSAoY3VycmVudFkgLSB5X2ludGVyY2VwdCkgLyBzbG9wZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjdXJyZW50WCA+PSAwICYmIGN1cnJlbnRZID49IDApIHtcclxuICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGN1cnJlbnRYKTtcclxuICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGN1cnJlbnRZKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoTWF0aC5hYnMoZGlzdGFuY2VUcmF2ZXJzZWQpID49IG5lZWRlZERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0cmF2ZWxpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSs9Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsUG9zaXRpb24gPSBNYXRoLmZsb29yKHBvaW50c1tpXSAvIHRoaXMuY2VsbFNpemUpICsgTWF0aC5mbG9vcihwb2ludHNbaSsxXSAvIHRoaXMuY2VsbFNpemUpICogdGhpcy5jb2xzO1xyXG4gICAgICAgICAgICBpZighKGJ1Y2tldElkcy5pbmNsdWRlcyhjZWxsUG9zaXRpb24pKSl7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRJZHMucHVzaChjZWxsUG9zaXRpb24pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgLy8gaWYoQXJyYXkuZnJvbShuZXdCdWNrZXRJZFNldCkuc29ydCgpLmpvaW4oJywnKSAhPT0gQXJyYXkuZnJvbShzZXQxKS5zb3J0KCkuam9pbignLCcpKSB7XHJcbiAgICAgICAgIC8vICAgY29uc29sZS5lcnJvcignRk9VTkQgRElGRiBJTicsIEFycmF5LmZyb20obmV3QnVja2V0SWRTZXQpLCAnQU5EJywgQXJyYXkuZnJvbShzZXQxKSk7XHJcbiAgICAgLy8gICB9XHJcblxyXG4gICAgIC8vICAgY29uc29sZS5lcnJvcignYWN0dWFsIGJ1Y2tldCBpZHM6JywgbmV3QnVja2V0SWRzKTtcclxuICAgICAgICAvLyAgY29uc29sZS5sb2coJ2JlZm9yZSByZWZhY3RvciBpdCB0b29rJywgcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlZmFjdG9yIGZvdW5kIGJ1Y2tldHM6JywgYnVja2V0SWRzKTtcclxuICAgICAgICAvL2lmKG9wdCkge1xyXG4gICAgICAgIC8vIGlmKGJ1Y2tldElkcy5zb3J0KCkuam9pbignLCcpICE9PSBidXguc29ydCgpLmpvaW4oJywnKSkge1xyXG4gICAgICAgIC8vICB0aHJvdyBuZXcgRXJyb3IoYFRoZXkgZGlkbnQgZXF1YWwuLi4gb3JpZ2luYWw6ICR7YnVja2V0SWRzLmpvaW4oJywnKX0gcmVmYWN0b3I6LCAke2J1eC5qb2luKCcsJyl9YClcclxuICAgICAgICAvLyAgfVxyXG4gICAgICAgIC8vICBjb25zb2xlLmxvZygnb3B0aW1pemVkIHRvb2s6Jywgb3B0KTtcclxuICAgICAgICAvLyAgY29uc29sZS5sb2coJ29wdGltaXplZCBmb3VuZCBidWNrZXRzOicsIGJ1eClcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIGJ1Y2tldElkcztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0NvbGxpZGVyRGF0dW19IGZyb20gXCIuLi9FZGl0b3JDb3JlL3NyYy90eXBlc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbGxpZGVyc1dpdGhUYWdzKHRhZ3M6IEFycmF5PHN0cmluZz4sIGxvb2t1cDoge1tjb2xsaWRlclRhZzogc3RyaW5nXTogQXJyYXk8Q29sbGlkZXJEYXR1bTxhbnk+Pn0pIDogQXJyYXk8Q29sbGlkZXJEYXR1bTxhbnk+PiB7XHJcbiAgICBjb25zdCBmb3VuZCA9IFtdO1xyXG4gICAgaWYodGFncy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBjb25zdCBhID0gbG9va3VwW3RhZ3NbMF1dO1xyXG4gICAgICAgIGlmKGEpIHJldHVybiBhO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGxldCBsb3dlc3RBcnJheTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgdGFnID0gdGFnc1tpXTtcclxuICAgICAgICBpZihsb29rdXBbdGFnXSAmJiAoIWxvd2VzdEFycmF5IHx8IGxvb2t1cFt0YWddLmxlbmd0aCA8IGxvd2VzdEFycmF5Lmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgbG93ZXN0QXJyYXkgPSBsb29rdXBbdGFnXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZighbG93ZXN0QXJyYXkpIHJldHVybiBbXTtcclxuICAgIGxvd2VzdEFycmF5LmZvckVhY2goY29sbGlkZXIgPT4ge1xyXG4gICAgICAgIGxldCBjb2xsaWRlckhhc0V2ZXJ5VGFnID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGFnID0gdGFnc1tpXTtcclxuICAgICAgICAgICAgaWYoIShjb2xsaWRlci50YWdzLmluY2x1ZGVzKHRhZykpKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsaWRlckhhc0V2ZXJ5VGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb2xsaWRlckhhc0V2ZXJ5VGFnKSB7XHJcbiAgICAgICAgICAgIGZvdW5kLnB1c2goY29sbGlkZXIpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBmb3VuZDtcclxufSIsImltcG9ydCB7UGxheWVyQ2FtZXJhfSBmcm9tIFwiLi9QbGF5ZXJDYW1lcmFcIjtcclxuaW1wb3J0IHNldCA9IFJlZmxlY3Quc2V0O1xyXG5cclxuZXhwb3J0IGVudW0gTGF5b3V0U2V0dGluZyB7XHJcbiAgICBOT05FPTAsXHJcbiAgICBDSElMRD0xLFxyXG4gICAgRlVMTD0yLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBSZXNvbHV0aW9uU2V0dGluZyA9IHtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmVzb2x1dGlvblNldHRpbmdzID0ge1xyXG4gICAgbGF5b3V0PzogTGF5b3V0U2V0dGluZyxcclxuICAgIGFzcGVjdFJhdGlvPzoge1xyXG4gICAgICAgIHc6IG51bWJlcixcclxuICAgICAgICBoOiBudW1iZXIsXHJcbiAgICB9LFxyXG4gICAgbWF4Vmlldz86IHtcclxuICAgICAgICB3OiBudW1iZXIsXHJcbiAgICAgICAgaDogbnVtYmVyLFxyXG4gICAgfSxcclxuICAgIG1heFNpemU/OiB7XHJcbiAgICAgICAgdzogbnVtYmVyLFxyXG4gICAgICAgIGg6IG51bWJlcixcclxuICAgIH1cclxuICAgIGR5bmFtaWNSZXNvbHV0aW9uPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmVzb2x1dGlvbk1vZGVzID0ge307XHJcblxyXG5leHBvcnQgY2xhc3MgUmVzb2x1dGlvbk1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBjYW52YXNUb3RhbFdpZHRoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGNhbnZhc1RvdGFsSGVpZ2h0OiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG1hcFdpZHRoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG1hcEhlaWdodDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbWFpblN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuICAgIHByaXZhdGUgX3JhdGlvQ2FwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF93aWR0aFJhdGlvQ2FwOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF9oZWlnaHRSYXRpb0hDYXA6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIF92aWV3Q2FwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF93aWR0aFZpZXdDYXA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgX2hlaWdodFZpZXdDYXA6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIF9zaXplQ2FwOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIF93aWR0aFNpemVDYXA6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSBfaGVpZ2h0U2l6ZUNhcDogbnVtYmVyID0gLTE7XHJcblxyXG4gICAgcHJpdmF0ZSBfY2FtZXJhTW9kZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfbGF5b3V0TW9kZTogTGF5b3V0U2V0dGluZztcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlVGltZW91dDtcclxuICAgIHJlYWRvbmx5IHNldHRpbmdzOiBSZXNvbHV0aW9uU2V0dGluZ3M7XHJcbiAgICByZWFkb25seSBjYW1lcmE6IFBsYXllckNhbWVyYTtcclxuICAgIHByaXZhdGUgcmVzb2x1dGlvbjogbnVtYmVyID0gMTtcclxuXHJcbiAgICBwcml2YXRlIGR5bmFtaWNSZXNvbHV0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2FtZXJhOiBQbGF5ZXJDYW1lcmEsIHNldHRpbmdzPzogUmVzb2x1dGlvblNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGUgPSB0aGlzLmNhbGN1bGF0ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlV2l0aFRpbWVvdXQgPSB0aGlzLmNhbGN1bGF0ZVdpdGhUaW1lb3V0LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgc2V0dGluZ3MgPSBzZXR0aW5ncyA/IHNldHRpbmdzIDoge307XHJcbiAgICAgICAgdGhpcy5fbGF5b3V0TW9kZSA9IHNldHRpbmdzPy5sYXlvdXQgfHwgTGF5b3V0U2V0dGluZy5GVUxMO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmNhbGN1bGF0ZVdpdGhUaW1lb3V0LCB7IHBhc3NpdmU6IHRydWUgfSk7XHJcbiAgICAgICAgaWYoc2V0dGluZ3MubWF4Vmlldykge1xyXG4gICAgICAgICAgICB0aGlzLl93aWR0aFZpZXdDYXAgPSBzZXR0aW5ncy5tYXhWaWV3Lnc7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodFZpZXdDYXAgPSBzZXR0aW5ncy5tYXhWaWV3Lmg7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdDYXAgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzZXR0aW5ncy5hc3BlY3RSYXRpbykge1xyXG4gICAgICAgICAgICB0aGlzLl93aWR0aFJhdGlvQ2FwID0gc2V0dGluZ3MuYXNwZWN0UmF0aW8udztcclxuICAgICAgICAgICAgdGhpcy5faGVpZ2h0U2l6ZUNhcCA9IHNldHRpbmdzLmFzcGVjdFJhdGlvLmg7XHJcbiAgICAgICAgICAgIHRoaXMuX3JhdGlvQ2FwID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoc2V0dGluZ3MubWF4U2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl93aWR0aFNpemVDYXAgPSBzZXR0aW5ncy5tYXhTaXplLnc7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodFNpemVDYXAgPSBzZXR0aW5ncy5tYXhTaXplLmg7XHJcbiAgICAgICAgICAgIHRoaXMuX3NpemVDYXAgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAvKlxyXG4gICAgICAgIGZ1bmN0aW9uIG5ld01hcFRvUG9pbnQgKHBvaW50LCB4LCB5KSB7XHJcbiAgICAgICAgICAvLyAgY29uc3QgcmVjdCA9IHRoaXMuaW50ZXJhY3Rpb25ET01FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdib3VuZGluZyBjbGllbnQgd2FzJywgcmVjdCk7XHJcbiAgICAgICAgICAvLyAgY29uc29sZS5sb2coJ3BvaW50IHdhcycsIHsgLi4ucG9pbnQgfSwgJ3ggd2FzJywgeCwgJ3kgd2FzJywgeSlcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc29sdXRpb24gd2FzJywgc2VsZi5yZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgb2xkTWFwUG9zaXRpb25Ub1BvaW50KHBvaW50LCB4LCB5KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BvaW50IHdhcycsIHBvaW50LngpO1xyXG4gICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdhZnRlciBldmVudCBpdCBiZWNhbWUnLCB7IC4uLnBvaW50IH0pO1xyXG4gICAgICAgICAgIC8vIHBvaW50LnggKj0gMS9zZWxmLnJlc29sdXRpb247XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpdCBiZWNhbWUnLCBwb2ludC54KTtcclxuICAgICAgICAgICAvLyBwb2ludC55ICo9IDEvc2VsZi5yZXNvbHV0aW9uO1xyXG4gICAgICAgICAvLyAgIHBvaW50LnggKz0gc2VsZi5jYW1lcmEucGxheWVyVmlld1JlY3QueDtcclxuICAgICAgICAgIC8vICBwb2ludC55ICs9IHNlbGYuY2FtZXJhLnBsYXllclZpZXdSZWN0Lnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmR5bmFtaWNSZXNvbHV0aW9uID0gc2V0dGluZ3MuZHluYW1pY1Jlc29sdXRpb24gPyBzZXR0aW5ncy5keW5hbWljUmVzb2x1dGlvbiA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRSZXNvbHV0aW9uKHJlczogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5keW5hbWljUmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNSZXNvbHV0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdW5saW1pdFJlc29sdXRpb24ocmVzPzogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5keW5hbWljUmVzb2x1dGlvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGxpbWl0UmVzb2x1dGlvbigpe1xyXG4gICAgICAgIHRoaXMuZHluYW1pY1Jlc29sdXRpb24gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRNYXBMZW5ndGhzKHc6IG51bWJlciwgaDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5tYXBXaWR0aCA9IHc7XHJcbiAgICAgICAgdGhpcy5tYXBIZWlnaHQgPSBoO1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuY2FsY3VsYXRlV2l0aFRpbWVvdXQpXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZSgpIHtcclxuICAgICAgICBsZXQgY2FudmFzVG90YWxIZWlnaHQ7XHJcbiAgICAgICAgbGV0IGNhbnZhc1RvdGFsV2lkdGg7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2xheW91dE1vZGUgPT09IExheW91dFNldHRpbmcuRlVMTCkge1xyXG4gICAgICAgICAgICBjYW52YXNUb3RhbFdpZHRoID0gd2luZG93Py5pbm5lcldpZHRoIHx8IGRvY3VtZW50Py5ib2R5Py5jbGllbnRXaWR0aFxyXG4gICAgICAgICAgICBjYW52YXNUb3RhbEhlaWdodCA9IHdpbmRvdz8uaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQ/LmJvZHk/LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnY2FudmFzIHRvdGFsIGhlaWdodDonLCBjYW52YXNUb3RhbEhlaWdodCk7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudC5ib2R5KSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNhbWVyYS5yZW5kZXJlci52aWV3LnBhcmVudEVsZW1lbnQgJiYgdGhpcy5jYW1lcmEucmVuZGVyZXIudmlldy5wYXJlbnRFbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEucmVuZGVyZXIudmlldy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuY2FtZXJhLnJlbmRlcmVyLnZpZXcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJlbmRlcmVyLnZpZXcuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9sYXlvdXRNb2RlID09PSBMYXlvdXRTZXR0aW5nLkNISUxEKSB7XHJcbiAgICAgICAgICAgIGNhbnZhc1RvdGFsV2lkdGggPSB0aGlzLmNhbWVyYS5yZW5kZXJlci52aWV3LnBhcmVudEVsZW1lbnQ/LmNsaWVudFdpZHRoIHx8IHRoaXMuY2FtZXJhLnJlbmRlcmVyLnZpZXcuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIGNhbnZhc1RvdGFsSGVpZ2h0ID10aGlzLmNhbWVyYS5yZW5kZXJlci52aWV3LnBhcmVudEVsZW1lbnQ/LmNsaWVudEhlaWdodCB8fCB0aGlzLmNhbWVyYS5yZW5kZXJlci52aWV3LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnMmNhbnZhcyB0b3RhbCBoZWlnaHQ6JywgY2FudmFzVG90YWxIZWlnaHQpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYW52YXNUb3RhbFdpZHRoID0gdGhpcy5jYW1lcmEucmVuZGVyZXIudmlldy53aWR0aDtcclxuICAgICAgICAgICAgY2FudmFzVG90YWxIZWlnaHQgPSB0aGlzLmNhbWVyYS5yZW5kZXJlci52aWV3LmhlaWdodDtcclxuICAgICAgICAgLy8gICBjb25zb2xlLmxvZygnM2NhbnZhcyB0b3RhbCBoZWlnaHQ6JywgY2FudmFzVG90YWxIZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgX29mZnNldFggPSAwO1xyXG4gICAgICAgIGxldCBfb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgaWYodGhpcy5fc2l6ZUNhcCkge1xyXG4gICAgICAgICAgICBpZih0aGlzLl93aWR0aFNpemVDYXAgPCBjYW52YXNUb3RhbFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBfb2Zmc2V0WCA9IGNhbnZhc1RvdGFsV2lkdGggLSB0aGlzLl93aWR0aFNpemVDYXAvMjtcclxuICAgICAgICAgICAgICAgIGNhbnZhc1RvdGFsV2lkdGggPSB0aGlzLl93aWR0aFNpemVDYXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy5faGVpZ2h0U2l6ZUNhcCA8IGNhbnZhc1RvdGFsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBfb2Zmc2V0WSA9IGNhbnZhc1RvdGFsSGVpZ2h0IC0gdGhpcy5faGVpZ2h0U2l6ZUNhcC8yO1xyXG4gICAgICAgICAgICAgICAgY2FudmFzVG90YWxIZWlnaHQgPSB0aGlzLl9oZWlnaHRTaXplQ2FwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWF4V2lkdGg7XHJcbiAgICAgICAgbGV0IG1heEhlaWdodDtcclxuICAgICAgICBpZiAodGhpcy5fdmlld0NhcCkge1xyXG4gICAgICAgICAgICBtYXhXaWR0aCA9IHRoaXMuX3dpZHRoVmlld0NhcDtcclxuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gdGhpcy5faGVpZ2h0Vmlld0NhcDtcclxuICAgICAgICAgICAgaWYodGhpcy5fcmF0aW9DYXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlVyA9IG1heFdpZHRoL3RoaXMuX3dpZHRoUmF0aW9DYXA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZUggPSBtYXhIZWlnaHQvdGhpcy5faGVpZ2h0UmF0aW9IQ2FwO1xyXG4gICAgICAgICAgICAgICAgaWYoc2NhbGVXIDwgc2NhbGVIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gbWF4SGVpZ2h0ICogKHRoaXMuX3dpZHRoUmF0aW9DYXAvdGhpcy5faGVpZ2h0UmF0aW9IQ2FwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NhbGVIID4gc2NhbGVXKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGggPSBtYXhXaWR0aCAqICAodGhpcy5fd2lkdGhSYXRpb0NhcC90aGlzLl9oZWlnaHRSYXRpb0hDYXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuX3JhdGlvQ2FwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlVyA9IGNhbnZhc1RvdGFsV2lkdGgvdGhpcy5fd2lkdGhSYXRpb0NhcDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVIID0gY2FudmFzVG90YWxIZWlnaHQvdGhpcy5faGVpZ2h0UmF0aW9IQ2FwO1xyXG4gICAgICAgICAgICBpZihzY2FsZVcgPCBzY2FsZUgpIHtcclxuICAgICAgICAgICAgICAgIG1heFdpZHRoID0gY2FudmFzVG90YWxXaWR0aDtcclxuICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IGNhbnZhc1RvdGFsSGVpZ2h0ICogKHRoaXMuX3dpZHRoUmF0aW9DYXAvdGhpcy5faGVpZ2h0UmF0aW9IQ2FwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzY2FsZUggPiBzY2FsZVcpIHtcclxuICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IGNhbnZhc1RvdGFsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGggPSBjYW52YXNUb3RhbFdpZHRoICogICh0aGlzLl93aWR0aFJhdGlvQ2FwL3RoaXMuX2hlaWdodFJhdGlvSENhcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtYXhXaWR0aCA9IGNhbnZhc1RvdGFsV2lkdGg7XHJcbiAgICAgICAgICAgIG1heEhlaWdodCA9IGNhbnZhc1RvdGFsSGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVzb2x1dGlvbk1hbmFnZXIuY2FsY3VsYXRlRHluYW1pY1Jlc29sdXRpb24oY2FudmFzVG90YWxXaWR0aCwgY2FudmFzVG90YWxIZWlnaHQsIHRoaXMubWFwV2lkdGgsIHRoaXMubWFwSGVpZ2h0LCBtYXhXaWR0aCwgbWF4SGVpZ2h0KTtcclxuICAgICAgICBpZighdGhpcy5keW5hbWljUmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQucmVzb2x1dGlvbiA9IHRoaXMucmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXN1bHQuZml4ZWRSZXNvbHV0aW9uID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdXRpb24gPSByZXN1bHQucmVzb2x1dGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoX29mZnNldFgpIHtcclxuICAgICAgICAgICAgcmVzdWx0Lm9mZnNldFdpZHRoKz1fb2Zmc2V0WDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoX29mZnNldFkpIHtcclxuICAgICAgICAgICAgcmVzdWx0Lm9mZnNldEhlaWdodCs9X29mZnNldFk7XHJcbiAgICAgICAgfVxyXG4gICAgIC8vICAgY29uc29sZS5sb2coJ1JFU09MVVRJT04gUkVTVUxUOicsIHJlc3VsdCk7XHJcbiAgICAgICAvLyB0aGlzLmNhbWVyYS5yZW5kZXJlci5wbHVnaW5zLmludGVyYWN0aW9uLnJlc29sdXRpb24gPSAxL3RoaXMucmVzb2x1dGlvbjtcclxuICAgICAgICB0aGlzLmNhbWVyYS5vblJlc29sdXRpb25VcGRhdGUocmVzdWx0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlV2l0aFRpbWVvdXQoKSB7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLmNhbGN1bGF0ZVRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5jYWxjdWxhdGUsIDUwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2FsY3VsYXRlRHluYW1pY1Jlc29sdXRpb24oY2FudmFzV2lkdGg6IG51bWJlciwgY2FudmFzSGVpZ2h0OiBudW1iZXIsIG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBtYXhBbGxvd2VkV2lkdGg6IG51bWJlciwgbWF4QWxsb3dlZEhlaWdodDogbnVtYmVyKSA6IHsgcmVzb2x1dGlvbjogbnVtYmVyLCB2aWV3V2lkdGg6IG51bWJlciwgdmlld0hlaWdodDogbnVtYmVyLCBvZmZzZXRXaWR0aDogbnVtYmVyLCBvZmZzZXRIZWlnaHQ6IG51bWJlciwgY2FudmFzSGVpZ2h0OiBudW1iZXIsIGNhbnZhc1dpZHRoOiBudW1iZXIgfSB7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVXID0gY2FudmFzV2lkdGgvbWF4QWxsb3dlZFdpZHRoO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlSCA9IGNhbnZhc0hlaWdodC9tYXhBbGxvd2VkSGVpZ2h0O1xyXG4gICAgICAgIGxldCByZXNvbHV0aW9uID0gc2NhbGVIO1xyXG4gICAgICAgIGxldCBvZmZzZXRXaWR0aCA9IDA7XHJcbiAgICAgICAgbGV0IG9mZnNldEhlaWdodCA9IDA7XHJcbiAgICAgICAgbGV0IHZpZXdXaWR0aDtcclxuICAgICAgICBsZXQgdmlld0hlaWdodDtcclxuICAgICAgICBsZXQgZmxvb3JlZEggPSBmYWxzZTtcclxuICAgICAgICBsZXQgZmxvb3JlZFcgPSBmYWxzZTtcclxuICAgICAgIC8vIGNvbnNvbGUubG9nKCdzY2FsZVc6Jywgc2NhbGVXLCAnc2NhbGVIOicsIHNjYWxlSCk7XHJcbiAgICAgICAgaWYoc2NhbGVXIDwgc2NhbGVIKSB7XHJcbiAgICAgICAgICAgIHJlc29sdXRpb24gPSBzY2FsZVc7XHJcbiAgICAgICAgICAgIGlmKGNhbnZhc1dpZHRoID4gbWF4QWxsb3dlZFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3V2lkdGggPSBtYXhBbGxvd2VkV2lkdGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3V2lkdGggPSBjYW52YXNXaWR0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNhbnZhc0hlaWdodCA+IG1heEFsbG93ZWRIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldEhlaWdodCA9IChjYW52YXNIZWlnaHQgLSBtYXhBbGxvd2VkSGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBpZihvZmZzZXRIZWlnaHQgJSAxKSB7IC8vIGlmIGl0cyBhIGRlY2ltYWwgaXQgd2lsbCByZXR1cm4gYSBub24gMCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICBmbG9vcmVkSCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0SGVpZ2h0ID0gTWF0aC5mbG9vcihvZmZzZXRIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmlld0hlaWdodCA9IG1heEFsbG93ZWRIZWlnaHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3SGVpZ2h0ID0gY2FudmFzSGVpZ2h0IC0gKG9mZnNldEhlaWdodCAqIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHJlc29sdXRpb24gPCAxKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRIZWlnaHQgKz0gb2Zmc2V0SGVpZ2h0ICogcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIHZpZXdIZWlnaHQgKj0gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHNjYWxlSCA8IHNjYWxlVykge1xyXG4gICAgICAgICAgICByZXNvbHV0aW9uID0gc2NhbGVIO1xyXG4gICAgICAgICAgICBpZihjYW52YXNIZWlnaHQgPiBtYXhBbGxvd2VkSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3SGVpZ2h0ID0gbWF4QWxsb3dlZEhlaWdodDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZpZXdIZWlnaHQgPSBjYW52YXNIZWlnaHRcclxuICAgICAgICAgICAgfVxyXG4gICAgIC8vICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NhbnZhcyB3aWR0aDonLCBjYW52YXNXaWR0aCwgJ21heCBhbGxvd2VkOicsIG1heEFsbG93ZWRXaWR0aClcclxuICAgICAgICAgICAgaWYoY2FudmFzV2lkdGggPiBtYXhBbGxvd2VkV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldFdpZHRoID0gTWF0aC5mbG9vcihjYW52YXNXaWR0aCAtIG1heEFsbG93ZWRXaWR0aCkgLyAyO1xyXG4gICAgICAgICAgICAgICAvLyBvZmZzZXRXaWR0aCArPSAoKGNhbnZhc1dpZHRoL3Jlc29sdXRpb24pIC0gKGNhbnZhc1dpZHRoL3NjYWxlVykpICogc2NhbGVXO1xyXG4gICAgICAgICAgICAgICAvLyBvZmZzZXRXaWR0aCA9IE1hdGguYWJzKChjYW52YXNXaWR0aCAtIChjYW52YXNXaWR0aCAvIHJlc29sdXRpb24pKSk7XHJcblxyXG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmVycm9yKCdhZGRpbmcgZGlmZicsICAoKGNhbnZhc1dpZHRoL3Jlc29sdXRpb24pIC0gbWF4QWxsb3dlZFdpZHRoKSk7XHJcbiAgICAgICAgICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoJ3dpZHRoIHdhcycsIG9mZnNldFdpZHRoKTtcclxuICAgICAgICAgICAgICAgIGlmKG9mZnNldFdpZHRoICUgMSkgeyAvLyBpZiBpdHMgYSBkZWNpbWFsIGl0IHdpbGwgcmV0dXJuIGEgbm9uIDAgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JlZFcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFdpZHRoID0gTWF0aC5mbG9vcihvZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2aWV3V2lkdGggPSBtYXhBbGxvd2VkV2lkdGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3SGVpZ2h0ID0gY2FudmFzV2lkdGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihyZXNvbHV0aW9uIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0V2lkdGggKz0gb2Zmc2V0V2lkdGggKiByZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgdmlld1dpZHRoICo9IHJlc29sdXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdhZGRpbmcnLCBvZmZzZXRXaWR0aCAqIChzY2FsZVcgLSByZXNvbHV0aW9uKSk7XHJcbiAgICAgICAgICAgICAgLy8gIG9mZnNldFdpZHRoICs9IChjYW52YXNXaWR0aC9tYXhBbGxvd2VkV2lkdGgpIC8gKHNjYWxlVyAtIHJlc29sdXRpb24pXHJcbiAgICAgICAgICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoJ3JlcyBvdmVyIDEnLCBvZmZzZXRXaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2aWV3SGVpZ2h0ID0gTWF0aC5taW4obWF4QWxsb3dlZEhlaWdodCwgY2FudmFzSGVpZ2h0KTtcclxuICAgICAgICAgICAgdmlld1dpZHRoID0gTWF0aC5taW4obWF4QWxsb3dlZFdpZHRoLCBjYW52YXNXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHV0aWxpemVkV2lkdGggPSB2aWV3V2lkdGggKyBvZmZzZXRXaWR0aCAqIDI7XHJcbiAgICAgICAgY29uc3QgdXRpbGl6ZWRIZWlnaHQgPSB2aWV3V2lkdGggKyBvZmZzZXRXaWR0aCAqIDI7XHJcblxyXG5cclxuICAgICAvLyAgIGNvbnNvbGUubG9nKCdkaWZmIHdhcycsIHV0aWxpemVkV2lkdGgtbWFwV2lkdGgsIHsgdXRpbGl6ZWRXaWR0aCwgbWFwV2lkdGggfSk7XHJcbiAgICAgICAgaWYodXRpbGl6ZWRXaWR0aCA+IG1hcFdpZHRoKSB7XHJcbiAgICAgICAvLyAgICAgY29uc29sZS5lcnJvcigneWVhIGdyZWF0ZXInKVxyXG4gICAgICAgICAgICBjb25zdCByb3VuZCA9IGZsb29yZWRXID8gTWF0aC5jZWlsIDogTWF0aC5mbG9vcjtcclxuICAgICAgICAgICAgb2Zmc2V0V2lkdGggKz0gcm91bmQoKHV0aWxpemVkV2lkdGgtbWFwV2lkdGgpLzIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXRpbGl6ZWRXaWR0aCA8IG1hcFdpZHRoKSB7XHJcbiAgICAgICAvLyAgICAgb2Zmc2V0V2lkdGggKz0gKGNhbnZhc1dpZHRoIC0gKHZpZXdXaWR0aCtvZmZzZXRXaWR0aCkpO1xyXG4gICAgICAgIC8vICAgIGNvbnNvbGUuZXJyb3IoJ2FsbCB0b2dldGhlciB3ZSBnb3QnLCB2aWV3V2lkdGgrb2Zmc2V0V2lkdGgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnb2Zmc2V0IHdpZHRoIHdhcycsIHsgbWFwV2lkdGgsIHV0aWxpemVkV2lkdGgsIG9mZnNldFdpZHRoLCBjYW52YXNXaWR0aCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodXRpbGl6ZWRIZWlnaHQgPiBtYXBIZWlnaHQpIHtcclxuICAgICAgICAgICAgY29uc3Qgcm91bmQgPSBmbG9vcmVkSCA/IE1hdGguY2VpbCA6IE1hdGguZmxvb3I7XHJcbiAgICAgICAgICAgIG9mZnNldEhlaWdodCArPSAgcm91bmQoKHV0aWxpemVkSGVpZ2h0LW1hcEhlaWdodCkvMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHJlc29sdXRpb24sIHZpZXdIZWlnaHQsIHZpZXdXaWR0aCwgb2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vLyBpbmxpbmUgZGl2LCBsaW1pdGxlc3NcclxuLy8gZnVsbCBzY3JlZW4sIGxpbWl0bGVzc1xyXG4vLyBjaGlsZCBkaXYsIGJvdW5kcyxcclxuLy8gZnVsbCBzY3JlZW4sIGJvdW5kcywiLCJpbXBvcnQgeyBBdGxhc0ZhY3RvcnkgfSBmcm9tIFwiLi9UZXh0dXJlQXRsYXNzZXMvR2FtZU9iamVjdFRleHR1cmVBdGxhc1wiO1xyXG5pbXBvcnQge0Jhc2VHYW1lT2JqZWN0QXRsYXN9IGZyb20gXCIuL1RleHR1cmVBdGxhc3Nlcy9HYW1lT2JqZWN0VGV4dHVyZUF0bGFzL0Jhc2VHYW1lT2JqZWN0QXRsYXNcIjtcclxuaW1wb3J0IHtMb2FkZXJ9IGZyb20gXCIuLi9saWIvTG9hZGVyXCI7XHJcbmltcG9ydCB7Z2V0VGV4dHVyZUZyb21EYXRhVXJsLCBodHRwR2V0QXN5bmN9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEludGVyZmFjZU1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlcjtcclxuICAgIHByaXZhdGUgaW50ZXJmYWNlQXRsYXMgOiBCYXNlR2FtZU9iamVjdEF0bGFzO1xyXG4gICAgcHJpdmF0ZSBpbmRleGVkRGJMb2FkZXI6ICBMb2FkZXI7XHJcbiAgICBwcml2YXRlIGludGVyZmFjZVN0YWdlOiBQSVhJLkNvbnRhaW5lcjtcclxuICAgIHByaXZhdGUgbmVlZHNSZVJlbmRlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgY29uc3RydWN0b3Ioc3RhZ2U6IFBJWEkuQ29udGFpbmVyLCByZW5kZXJlcjogUElYSS5DYW52YXNSZW5kZXJlciB8IFBJWEkuV2ViR0xSZW5kZXJlciwgbG9hZGVyOiBMb2FkZXIpIHtcclxuICAgICAgICB0aGlzLmluZGV4ZWREYkxvYWRlciA9IGxvYWRlcjtcclxuICAgICAgICB0aGlzLmludGVyZmFjZUF0bGFzID0gQXRsYXNGYWN0b3J5KHJlbmRlcmVyLCBsb2FkZXIpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLmludGVyZmFjZVN0YWdlID0gc3RhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFySW50ZXJmYWNlKCkge1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlU3RhZ2UucmVtb3ZlQ2hpbGRyZW4oMClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZFRleHR1cmUocGF0aDogc3RyaW5nLCBhbGlhc0lkPzogc3RyaW5nKSA6IFByb21pc2U8UElYSS5UZXh0dXJlPiB7XHJcbiAgICAgICAgYWxpYXNJZCA9IGFsaWFzSWQgPyBhbGlhc0lkIDogcGF0aDtcclxuICAgICAgICBsZXQgaW1hZ2VEYXRhO1xyXG4gICAgICAgIGlmKHRoaXMuaW5kZXhlZERiTG9hZGVyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEgPSBhd2FpdCB0aGlzLmluZGV4ZWREYkxvYWRlci5sb2FkSW1hZ2VEYXRhKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYoIShpbWFnZURhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG50IGdldCBpbWFnZSBmcm9tIGluZGV4ZWRkYi4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhID0gYXdhaXQgaHR0cEdldEFzeW5jKHBhdGgsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGltYWdlRGF0YSA9IGF3YWl0IGh0dHBHZXRBc3luYyhwYXRoLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFpbWFnZURhdGEpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgaW50ZXJmYWNlIGltYWdlIGZyb20gcGF0aCAke3BhdGh9YCk7XHJcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IGF3YWl0IGdldFRleHR1cmVGcm9tRGF0YVVybChpbWFnZURhdGEpIGFzIFBJWEkuVGV4dHVyZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmZhY2VBdGxhcy5hZGRUZXh0dXJlKGFsaWFzSWQsIHRleHR1cmUsIG51bGwsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRUZXh0dXJlVG9JbnRlcmZhY2VBdGxhcyhpZDogc3RyaW5nLCB0ZXh0dXJlOiBQSVhJLlRleHR1cmUsIGRlc3Ryb3lBZnRlcj10cnVlKSA6IFBJWEkuVGV4dHVyZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJmYWNlQXRsYXMuYWRkVGV4dHVyZShpZCwgdGV4dHVyZSwgbnVsbCwgZGVzdHJveUFmdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGV4dHVyZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJmYWNlQXRsYXMuZ2V0VGV4dHVyZShpZCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkSW50ZXJmYWNlSXRlbShpdGVtOiBQSVhJLlNwcml0ZSB8IFBJWEkuQ29udGFpbmVyIHwgUElYSS5EaXNwbGF5T2JqZWN0IHwgUElYSS5HcmFwaGljcykge1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlU3RhZ2UuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcmVtb3ZlSW50ZXJmYWNlSXRlbShpdGVtOiBQSVhJLlNwcml0ZSB8IFBJWEkuQ29udGFpbmVyIHwgUElYSS5EaXNwbGF5T2JqZWN0IHwgUElYSS5HcmFwaGljcykge1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlU3RhZ2UucmVtb3ZlQ2hpbGQoaXRlbSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkQ2hpbGQoaXRlbTogUElYSS5TcHJpdGUgfCBQSVhJLkNvbnRhaW5lciB8IFBJWEkuRGlzcGxheU9iamVjdCB8IFBJWEkuR3JhcGhpY3MpIHtcclxuICAgICAgICB0aGlzLmludGVyZmFjZVN0YWdlLmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHJlbW92ZUNoaWxkKGl0ZW06IFBJWEkuU3ByaXRlIHwgUElYSS5Db250YWluZXIgfCBQSVhJLkRpc3BsYXlPYmplY3QgfCBQSVhJLkdyYXBoaWNzKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcmZhY2VTdGFnZS5yZW1vdmVDaGlsZChpdGVtKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=