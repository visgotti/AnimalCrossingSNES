!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NEGATIVE_NUMBER=1073741824]="NEGATIVE_NUMBER",e[e.IMAGE_AND_STRING_SEPERATOR=1118481]="IMAGE_AND_STRING_SEPERATOR",e[e.EMPTY_SECTION_FLAG=1118482]="EMPTY_SECTION_FLAG",e[e.BLOB_SEPARATOR=1118483]="BLOB_SEPARATOR",e[e.CHUNK_SEPERATOR=1118484]="CHUNK_SEPERATOR",e[e.TILE_=1118485]="TILE_"}(t.RESERVED_FLAGS||(t.RESERVED_FLAGS={})),t.RUNTIME_TILE_LAYER_SECTION_SIZE=128,t.EDITOR_TILE_LAYER_SECTION_SIZE=256,function(e){e.RECT="rects",e.POLYGON="polygons",e.POINT="points"}(t.ColliderShape||(t.ColliderShape={}));t.ObjectType=class{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MASSIVE=0]="MASSIVE",e[e.LARGE=1]="LARGE",e[e.MEDIUM=2]="MEDIUM",e[e.SMALL=3]="SMALL"}(t.MapSizes||(t.MapSizes={})),function(e){e[e.RECT=0]="RECT",e[e.POLYGON=1]="POLYGON",e[e.POINT=2]="POINT",e[e.CIRCLE=3]="CIRCLE",e[e.LINE=4]="LINE",e[e.ELIPSE=5]="ELIPSE"}(t.RuntimeColliderShape||(t.RuntimeColliderShape={})),function(e){e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE"}(t.MapSize||(t.MapSize={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);function s(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}function i(e){return r(this,void 0,void 0,(function*(){const t=window.URL||window.webkitURL;let n,r=!0;try{n=t.createObjectURL(e)}catch(t){r=!1;const o=s(e);n="data:image/png;base64,"+o}const o=new Image;return new Promise((e,s)=>{o.src=n,o.addEventListener("load",s=>(r&&t.revokeObjectURL(n),e(new PIXI.Texture(new PIXI.BaseTexture(o)))))})}))}function a(e){let t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,s=new Uint8Array(o);for(;o--;)s[o]=r.charCodeAt(o);return new Blob([s],{type:n})}t.httpGetAsync=function(e,t=!0){return r(this,void 0,void 0,(function*(){const n=new XMLHttpRequest;return t||(n.responseType="arraybuffer"),n.open("GET",e,!0),n.send(null),new Promise((e,r)=>{n.onreadystatechange=()=>{if(4==n.readyState){if(200==n.status)return e(t?JSON.parse(n.responseText):n.response);try{return r(t?JSON.parse(n.responseText):n.response)}catch(e){return console.error("Error parsing http error response",n),r(e)}}}})}))},t.resolveMapSize=function(e,t){return e<=1028&&t<=1028?o.MapSize.SMALL:o.MapSize.LARGE},t.bufferToBase64=s,t.getTextureFromBlob=i,t.getTextureFromDataUrl=function(e){return r(this,void 0,void 0,(function*(){window.URL||window.webkitURL;const t=new Image;return new Promise((n,r)=>{t.src=e,t.addEventListener("load",e=>n(new PIXI.Texture(new PIXI.BaseTexture(t))))})}))},t.dataUrlToTexture=function(e){return r(this,void 0,void 0,(function*(){return i(a(e))}))},t.dataURLtoBlob=a,t.rotateColliders=function(e,t){},t.removeFileExtension=function(e){return e.replace(/\.[^/.]+$/,"")},t.indexedDB_enabled=function(){return!!(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)},t.resolveMaxTextureSize=function(e){if(1==e.type){const t=e.gl.MAX_TEXTURE_SIZE;let n;return n=t>=4096?t-t%4096:t>=2048?t-t%2048:t>=1024?t-t%1024:t>=512?t-t%512:256,n}return 2048},t.computedSectionLength=function(e,t,n){let r,o=1;if(e<t)r=e;else{for(o=2;e/o>t;)o*=2;r=e/o}let s=n-r%n;return{mainLength:r+s,offsetLength:Math.abs(r-s*(o-1))}},t.mergeOptions=function(e,t,n=[]){const r=t;for(let t in r)e[t]&&(r[t]=e[t]);const o=[],s=[],i=[];for(let e=0;e<n.length;e++){const t=n[e];t in r||o.push(t),null===r[t]&&i.push(t),void 0===r[t]&&s.push(t)}let a="";if(a=o.length?a.concat("Missing param found for required params:"+o.join(", ")):a,a=i.length?a.concat("null param found for required params:"+i.join(", ")):a,a=o.length?a.concat("undefined param found for required params:"+s.join(", ")):a,a)throw a;return r}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),s=self;class i extends Worker{constructor(){super("")}}t.default=i;const a=n(7),u=n(2),d=n(8),c=n(9),l=n(0);let h,f,E;const p={};let S,g,_,A=[];function y(e,t,n,s,i){return r(this,void 0,void 0,(function*(){f=t,E=e;for(let e=0;e<n.length;e+=2)A.push({width:n[e],height:n[e+1]});return h=new o.Decoder(A,s,i),S=new a.Loader(`__ty__${E}`),yield S.initialize(),d.ResultCodes.SUCCESS}))}function m(e,t){return r(this,void 0,void 0,(function*(){for(let n=0;n<t.length;n++){const r=t[n],o=`${f}/${e}/s_${r}`,s=yield u.httpGetAsync(o,!1);return yield S.saveArrayBuffer(o,s),d.ResultCodes.SUCCESS}}))}function R(e,t){return r(this,void 0,void 0,(function*(){const n=`${f}/${e}/s_${t}`,r=yield u.httpGetAsync(n,!1);return yield S.saveArrayBuffer(n,r),d.ResultCodes.SUCCESS}))}s.onmessage=e=>r(void 0,void 0,void 0,(function*(){const t=e.data[2],n=e.data[1],o=e.data[0];if(n===d.Messages.REQUEST_AND_SAVE_ALL_MAP_CHUNKS){const e=yield function(e){return r(this,void 0,void 0,(function*(){try{const t=c.mapFileKey(f,e),n=yield u.httpGetAsync(t,!1),{buffers:r,metaData:o}=h.getCompressedChunksFromMap(1024,1024,n),s=[];for(let t=0;t<r.length;t++){const n=c.mapFileKey(f,e,t);s.push(S.saveArrayBuffer(n,r[t]))}return yield Promise.all(s),JSON.stringify(o)}catch(e){return console.error(e),d.ResultCodes.ERROR}}))}(o);s.postMessage([e,t])}else if(n===d.Messages.GET_SECTION_DATA){const e=yield function(e){return r(this,void 0,void 0,(function*(){if(!g)throw new Error("no cur map.");if(p[e])return p[e].ts=Date.now(),p[e].string;const t=`${f}/${_}/s_${e}`,n=yield S.loadArrayBuffer(t);return JSON.stringify(yield h.decodeChunk(e,g.mapW,g.mapH,1024,1024,l.RUNTIME_TILE_LAYER_SECTION_SIZE,l.RUNTIME_TILE_LAYER_SECTION_SIZE,g.layerTileLayerOrder,n))}))}(o);postMessage([e,t])}else if(n===d.Messages.REQUEST_AND_SAVE_MAP_CHUNKS){const e=yield m.apply(null,o);s.postMessage([e,t])}else if(n===d.Messages.REQUEST_AND_SAVE_SINGLE_MAP_CHUNK){const e=yield R.apply(null,o);s.postMessage([e,t])}if(n===d.Messages.INIT_LOADER){const e=yield y.apply(null,JSON.parse(o));s.postMessage([e,t])}else if(n===d.Messages.INIT_MAP){const e=yield function({mapId:e,data:t}){return r(this,void 0,void 0,(function*(){[...Object.keys(p)].forEach(e=>{delete p[e]}),_=e,g=t}))}(JSON.parse(o));s.postMessage([e,t])}}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(5),s=n(0),i=n(6),a=n(1);t.Decoder=class{constructor(e,t,n){this.propSeqToNameLookup={},this.tileIdToSizeLookup=[],this.tagSeqToStringLookup={},this.tileIdToSizeLookup=e,this.tagSeqToStringLookup=t,this.propSeqToNameLookup=n||{}}decodeMetaData(e){const t=e[0],n=e[1];let r=2,o=0;const i=[];let a,u=1;for(;;){if(e[r]===s.RESERVED_FLAGS.BLOB_SEPARATOR){if(u++,2===u){a=r+1;break}}else 1===u?(e[r]===s.RESERVED_FLAGS.EMPTY_SECTION_FLAG?i.push(null):i.push([e[r]]),o=i.length-1,u=0):i[o].push(e[r]);r++}return{mapW:t,mapH:n,startingChunkIndex:a,layerTileLayerOrder:i}}adjustNeg(e){return e.x>s.RESERVED_FLAGS.NEGATIVE_NUMBER&&(e.x&=~s.RESERVED_FLAGS.NEGATIVE_NUMBER,e.x*=-1),e.y>s.RESERVED_FLAGS.NEGATIVE_NUMBER&&(e.y&=~s.RESERVED_FLAGS.NEGATIVE_NUMBER,e.y*=-1),e}decodeString(e,t){let n="",r=t[e++];for(;r!=s.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR;)n+=String.fromCharCode(r),r=t[e++];return{decodedString:n,endIndex:e}}decodePropStrings(e,t){const n={};let r=null,o=t[e];for(;o!=s.RESERVED_FLAGS.BLOB_SEPARATOR;)if(o==s.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)r=null,o=t[++e];else if(null===r){if(r=this.propSeqToNameLookup[o],!r)throw new Error("Expected prop");n[r]="",o=t[++e]}else n[r]+=String.fromCharCode(o),o=t[++e];return{endIndex:e+1,props:n}}decodePropNumbers(e,t){const n={};let r=t[e];for(;r!=s.RESERVED_FLAGS.BLOB_SEPARATOR;){const o=this.propSeqToNameLookup[t[e++]];if(!o)throw new Error("Did not find seq.");let i=t[e++];i>s.RESERVED_FLAGS.NEGATIVE_NUMBER&&(i&=~s.RESERVED_FLAGS.NEGATIVE_NUMBER,i*=-1),n[o]=i,r=t[e]}return{endIndex:e+1,props:n}}decodePropBooleans(e,t){const n={};let r=t[e];for(;r!=s.RESERVED_FLAGS.BLOB_SEPARATOR;){const o=this.propSeqToNameLookup[t[e++]];if(!o)throw new Error("Did not find seq.");let s=!!t[e++];n[o]=s,r=t[e]}return{endIndex:e+1,props:n}}decodePolygon(e,t){let n=e;const r=t[n++],o=t[n++];let s=[];const i=t[n++];for(;s.length<i;)s.push(this.adjustNeg({x:t[n++],y:t[n++]}));const u={colObj:{id:r,shapeType:a.RuntimeColliderShape.POLYGON,shapeData:s},endIndex:n};return this.decodeColliderTagsAndProps(u,o,t,n),u}decodeProps(e,t){let n,r={};return t[e]===s.RESERVED_FLAGS.EMPTY_SECTION_FLAG?{endAtIndex:e+1}:(({endIndex:e,props:n}=this.decodePropBooleans(e,t)),r=Object.assign(Object.assign({},r),n),({endIndex:e,props:n}=this.decodePropNumbers(e,t)),r=Object.assign(Object.assign({},r),n),({endIndex:e,props:n}=this.decodePropStrings(e,t)),r=Object.assign(Object.assign({},r),n),{props:r,endAtIndex:e})}mapTags(e){return e.map(e=>{if(!(e in this.tagSeqToStringLookup))throw new Error(`Could not find tag seq ${e} in lookup.`);return this.tagSeqToStringLookup[e]})}decodeRect(e,t){let n=e;const r=t[n++],o=t[n++],s=this.adjustNeg({x:t[n++],y:t[n++],w:t[n++],h:t[n++]}),i={colObj:{id:r,shapeType:a.RuntimeColliderShape.RECT,shapeData:s},endIndex:n};return this.decodeColliderTagsAndProps(i,o,t,n),i}decodeColliderTagsAndProps(e,t,n,r){const{tags:o,endAtIndex:s}=this.decodeTags(t,n,r);o&&(e.colObj.tags=o),e.endIndex=s;const{endAtIndex:i,props:a}=this.decodeProps(s,n);a&&(e.colObj.props=a),e.endIndex=i}decodeTags(e,t,n){let r;if(!e)return{endAtIndex:n};for(r=[];r.length<e;)r.push(t[n++]);return{tags:this.mapTags(r),endAtIndex:n}}decodePoint(e,t){let n=e;const r=t[n++],o=t[n++],s=this.adjustNeg({x:t[n++],y:t[n++]}),i={colObj:{id:r,shapeType:a.RuntimeColliderShape.POINT,shapeData:s},endIndex:n};return this.decodeColliderTagsAndProps(i,o,t,n),i}decodeCollider(e,t,n){switch(e){case"polygons":return this.decodePolygon(t,n);case"rects":return this.decodeRect(t,n);case"points":return this.decodePoint(t,n);default:throw new Error(`Unhandled type ${e}`)}}decodeColliders(e,t,n){const r=new Array(n);let o=!1,s=0;const i=["points","rects","polygons"];let a=e;for(;s<n;){let e=0;for(;e<i.length;){let n=0,u=t[a++];for(;n<u;){o=!0,r[s]||(r[s]={}),r[s][i[e]]||(r[s][i[e]]=new Array(u));const{endIndex:d,colObj:c}=this.decodeCollider(i[e],a,t);a=d,r[s][i[e]][n]=c,n++}e++}s++}return{decoded:o?r:null,endIndex:a}}splitChunkArrayLayers(e,t){const n=new Array(t.length),r=new Array(t.length);let o=0;for(let i=0;i<t.length;i++){r[i]=[];const a=t[i];if(a&&a.length){n[i]=[],a.forEach(()=>{n[i].push([])});let t=0;for(;t<a.length;)e[o]===s.RESERVED_FLAGS.BLOB_SEPARATOR?t++:n[i][t].push(e[o]),o++}else n[i]=null}let i,a=0,u=!1,d=!0,c=0,l=!0;for(;a<t.length;){5==e[o+1]&&e[o+2];const n=e[o];if(d)i=n,i||(r[a]=null),d=!1;else if(n===s.RESERVED_FLAGS.BLOB_SEPARATOR)l=!0,a++,a<t.length&&(d=!0);else if(n===s.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)l=!0,r[a].push(n);else{u=!0,c++,c===(l?4:3)&&(c=0,l=!1),r[a].push(n)}o++}const{endIndex:h,decoded:f}=this.decodeColliders(o,e,t.length);o=h;const E={tileArrays:n};return u&&(E.images=r),f&&(E.colliders=f),E}decodeChunk(e,t,n,r,s,a,u,d,c){c=Array.isArray(c)?c:o.default.uncompress(c);const l=Math.ceil(t/r),h=e%l*r,f=Math.floor(e/l)*s,{endX:E,endY:p}=i.calculateEndOfChunk(t,n,r,s,h,f),S={index:e,x:h,y:f,width:E-h,height:p-f,layers:new Array(d.length)},g=this.splitChunkArrayLayers(c,d),_=!!g.images,A=!!g.colliders;for(let e=0;e<d.length;e++){const o=d[e];S.layers[e]={layerId:e},o&&(S.layers[e].tileLayers=o.map((o,i)=>{const{width:d,height:c}=this.tileIdToSizeLookup[o],l=g.tileArrays[e][i];return{tileSizeSeq:o,maxTileId:1e4,tileWidth:d,tileHeight:c,subChunks:l?this.unmergeSubsectionTiles(d,c,a,u,r,s,h,f,t,n,l):null}})),_&&g.images[e]&&(S.layers[e].images=this.unmergeLayerImages(g.images[e])),A&&g.colliders[e]&&(S.layers[e].colliders=g.colliders[e])}return S}getCompressedChunksFromMap(e,t,n){const r=o.default.uncompress(n),{mapW:i,mapH:a,startingChunkIndex:u,layerTileLayerOrder:d}=this.decodeMetaData(r),c=Math.ceil(i/e)*Math.ceil(a/t);let l=0;const h=new Array(c);for(let e=0;e<c;e++)h[e]=[];for(let e=u;e<r.length;e++)if(r[e]!==s.RESERVED_FLAGS.CHUNK_SEPERATOR)h[l].push(r[e]);else{if(++l,l===c){if(e!==r.length-1)throw new Error("Should be on last element by the time it gets here.");break}h[l]=[]}return{metaData:{mapW:i,mapH:a,startingChunkIndex:u,layerTileLayerOrder:d},buffers:h.map(e=>o.default.compress(e))}}decodeMap(e,t,n,i,a,u){return r(this,void 0,void 0,(function*(){const r=Array.isArray(a)?a:o.default.uncompress(a),{mapW:d,mapH:c,startingChunkIndex:l,layerTileLayerOrder:h}=this.decodeMetaData(r),f=(h.length,Math.ceil(d/e)*Math.ceil(c/t)),E=new Array(f);E[0]=[];let p=0;for(let e=l;e<r.length;e++)if(r[e]!==s.RESERVED_FLAGS.CHUNK_SEPERATOR)E[p].push(r[e]);else{if(++p,p===f){if(e!==r.length-1)throw new Error("Should be on last element by the time it gets here.");break}E[p]=[]}const S=[];if(u)for(let r=0;r<E.length;r++){const o=this.decodeChunk(r,d,c,e,t,n,i,h,E[r]);S.push(o),yield u(o,r)}else for(let r=0;r<E.length;r++)S.push(this.decodeChunk(r,d,c,e,t,n,i,h,E[r]));return{metaData:{mapW:d,mapH:c,startingChunkIndex:l,layerTileLayerOrder:h},chunks:S}}))}unmergeLayerImages(e){const t={};let n=!0,r=0,o=null;for(let i=0;i<e.length;i++)if(e[i]!==s.RESERVED_FLAGS.IMAGE_AND_STRING_SEPERATOR)if(n)o=e[i],t[o]=[],n=!1;else{let n=e[i];r<2&&n>s.RESERVED_FLAGS.NEGATIVE_NUMBER&&(n&=~s.RESERVED_FLAGS.NEGATIVE_NUMBER,n*=-1),t[o].push(n),r++,3===r&&(r=0)}else n=!0;return t}unmergeSubsectionTiles(e,t,n,r,o,a,u,d,c,l,h,f){let E,p;f?(E=f.x,p=f.y):({endX:E,endY:p}=i.calculateEndOfChunk(c,l,o,a,u,d));const S=i.calculateSubChunks(c,l,o,a,u,d,n,r),g=new Array(S).fill(-1);let _=0,A=u,y=d,{x:m,y:R}=i.getTopLeftPadding(e,t,c,l,n,r,A,y),T=m,I=R;const w=()=>{_++,T=0,I=0,A+=n,A>=E&&(A=u,y+=r),({x:m,y:R}=i.getTopLeftPadding(e,t,c,l,n,r,A,y)),T=m,I=R};for(let o=0;o<h.length;o++)if(h[o]===s.RESERVED_FLAGS.EMPTY_SECTION_FLAG){if(-1!==g[_])throw new Error("This sub chunk should have been -1 at this time");g[_]=null,w()}else{if(-1===g[_]&&(g[_]=[m,R]),g[_].push(h[o]),T+=e,A+T>=E||T>=n){T=m,I+=t,(y+I>=p||I>=r)&&w()}}return g}}},function(e,t,n){"use strict";function r(){}function o(e){return e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5}function s(e){return e+e^e>>31}function i(e){return e>>1^-(1&e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.computeCompressedSizeInBytes=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=o(e[r]);return n},r.computeCompressedSizeInBytesSigned=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=o(s(e[r]));return n},r.compress=function(e){for(var t=e.length,n=new ArrayBuffer(r.computeCompressedSizeInBytes(e)),o=new Int8Array(n),s=0,i=0;i<t;i++){var a=e[i];a<128?o[s++]=a:a<16384?(o[s++]=127&a|128,o[s++]=a>>>7):a<1<<21?(o[s++]=127&a|128,o[s++]=a>>>7&127|128,o[s++]=a>>>14):a<1<<28?(o[s++]=127&a|128,o[s++]=a>>>7&127|128,o[s++]=a>>>14&127|128,o[s++]=a>>>21):(o[s++]=127&a|128,o[s++]=a>>>7&127|128,o[s++]=a>>>14&127|128,o[s++]=a>>>21&127|128,o[s++]=a>>>28)}return n},r.computeHowManyIntegers=function(e){for(var t=new Int8Array(e).length,n=0,r=0;r<t;r++)n+=e[r]>>>7;return t-n},r.uncompress=function(e){for(var t=[],n=new Int8Array(e),r=n.length,o=0;r>o;){var s=n[o++],i=127&s;s>=0?t.push(i):(i|=(127&(s=n[o++]))<<7,s>=0?t.push(i):(i|=(127&(s=n[o++]))<<14,s>=0?t.push(i):(i|=(127&(s=n[o++]))<<21,s>=0?t.push(i):(i|=(s=n[o++])<<28,t.push(i)))))}return t},r.compressSigned=function(e){for(var t=e.length,n=new ArrayBuffer(r.computeCompressedSizeInBytesSigned(e)),o=new Int8Array(n),i=0,a=0;a<t;a++){var u=s(e[a]);u<128?o[i++]=u:u<16384?(o[i++]=127&u|128,o[i++]=u>>>7):u<1<<21?(o[i++]=127&u|128,o[i++]=u>>>7&127|128,o[i++]=u>>>14):u<1<<28?(o[i++]=127&u|128,o[i++]=u>>>7&127|128,o[i++]=u>>>14&127|128,o[i++]=u>>>21):(o[i++]=127&u|128,o[i++]=u>>>7&127|128,o[i++]=u>>>14&127|128,o[i++]=u>>>21&127|128,o[i++]=u>>>28)}return n},r.uncompressSigned=function(e){for(var t=[],n=new Int8Array(e),r=n.length,o=0;r>o;){var s=n[o++],a=127&s;s>=0?t.push(i(a)):(a|=(127&(s=n[o++]))<<7,s>=0?t.push(i(a)):(a|=(127&(s=n[o++]))<<14,s>=0?t.push(i(a)):(a|=(127&(s=n[o++]))<<21,s>=0?t.push(i(a)):(a|=(s=n[o++])<<28,t.push(i(a))))))}return t}},function(e,t,n){"use strict";function r(e,t,n,r,o,s,i,a){const u=e-o,d=t-s,c=Math.min(Math.ceil(n/i),Math.ceil(u/i));return{rows:Math.min(Math.ceil(r/a),Math.ceil(d/a)),columns:c}}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateEndOfChunk=function(e,t,n,r,o,s){const i=e-o,a=t-s;return{endX:o+(i>=n?n:i),endY:s+(a>=r?r:a)}},t.calculateSubChunks=function(e,t,n,o,s,i,a,u){const{rows:d,columns:c}=r(e,t,n,o,s,i,a,u);return d*c},t.calculateRowsAndColumns=r,t.getTopLeftPadding=function(e,t,n,r,o,s,i,a){const u={x:0,y:0},d=Math.floor(i/o),c=Math.floor(a/s);let l=(e-o%e)*d,h=Math.floor(l/e);return u.x=l-h*e,l=(t-s%t)*c,h=Math.floor(l/t),u.y=l-h*t,u},t.calculateOffsets=function(e,t,n,r,o,s,i,a){const u=Math.ceil(n/o),d=Math.ceil(r/s),c={x:0,y:0},l=Math.floor(i/o),h=Math.floor(a/s);let f=(e-o%e)*l,E=Math.floor(f/e);c.x=f-E*e,f=(t-s%t)*h,E=Math.floor(f/t),c.y=f-E*t;const p={x:0,y:0};return l<u-1&&(f=(e-o%e)*(l+1),E=Math.floor(f/e),p.x=f-E*e),h<d-1&&(f=(t-s%t)*(h+1),E=Math.floor(f/t),p.y=f-E*t),{bottomRightOverflow:p,topLeftPadding:c}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s="object"==typeof window?window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB:self.indexedDB||self.webkitIndexedDb;t.Loader=class{constructor(e,t){this.db=t,this.name=e}initialize(){return r(this,void 0,void 0,(function*(){if(this.db)return!0;const e=s.open(this.name,1);return new Promise((t,n)=>{e.onerror=function(e){console.error("Error creating/accessing IndexedDB database",e)},e.onsuccess=r=>{if(this.db=e.result,this.db.onerror=function(e){return console.error("Error creating/accessing IndexedDB database",e),n("Error creating/accessing IndexedDB database")},!this.db.setVersion)return t(!0);if(1==this.db.version)return this.db.createObjectStore(this.name),t(!0);this.db.setVersion(1).onsuccess=function(){return this.db.createObjectStore(this.name),t(!0)}},e.onupgradeneeded=e=>{this.db=e.target.result,this.db.createObjectStore(this.name)}})}))}deleteItem(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readwrite").objectStore(this.name).delete(e);return new Promise((n,r)=>{t.onsuccess=e=>n(!0),t.onerror=t=>r(`Error saving texture to indexedDB: ${e}`)})}))}saveJson(e,t){return r(this,void 0,void 0,(function*(){const n=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(JSON.stringify(t),e);return new Promise((t,r)=>{n.onsuccess=e=>t(!0),n.onerror=t=>r(`Error saving texture to indexedDB: ${e}`)})}))}loadJson(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((n,r)=>{t.onsuccess=e=>e.target.result?n(JSON.parse(e.target.result)):n(null),t.onerror=t=>{throw new Error(`Error getting texture from indexedDB: ${e}`)}})}))}saveArrayBuffer(e,t){return r(this,void 0,void 0,(function*(){const n=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(t,e);return new Promise((t,r)=>{n.onsuccess=e=>t(!0),n.onerror=t=>r(`Error saving texture to indexedDB: ${e}`)})}))}loadArrayBuffer(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((n,r)=>{t.onsuccess=e=>n(e.target.result),t.onerror=t=>{throw new Error(`Error getting texture from indexedDB: ${e}`)}})}))}saveTexture(e,t){return r(this,void 0,void 0,(function*(){const n=this.db.transaction([this.name],"readwrite");let r;if(t.baseTexture.source){const e=document.createElement("canvas");e.width=t.baseTexture.width,e.height=t.baseTexture.height;const n=e.getContext("2d");console.log("the base texture was",t.baseTexture),n.drawImage(t.baseTexture.source,0,0),r=e.toDataURL("image/png")}if(!r)throw new Error("did not get a datasUrl from texture.");const o=n.objectStore(this.name).put(r,e);return new Promise((t,n)=>{o.onsuccess=e=>t(!0),o.onerror=t=>n(`Error saving texture to indexedDB: ${e}`)})}))}saveImageData(e,t){return r(this,void 0,void 0,(function*(){const n=this.db.transaction([this.name],"readwrite").objectStore(this.name).put(t,e);return new Promise((t,r)=>{n.onsuccess=e=>t(!0),n.onerror=t=>r(`Error saving texture to indexedDB: ${e}`)})}))}loadImageData(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((n,r)=>{t.onsuccess=e=>{var t,r;const o=null===(r=null===(t=e)||void 0===t?void 0:t.target)||void 0===r?void 0:r.result;return n(o)},t.onerror=t=>r(new Error(`Error getting texture from indexedDB: ${e}`))})}))}loadTexture(e){return r(this,void 0,void 0,(function*(){const t=this.db.transaction([this.name],"readonly").objectStore(this.name).get(e);return new Promise((n,s)=>{t.onsuccess=e=>r(this,void 0,void 0,(function*(){var t,r;const i=null===(r=null===(t=e)||void 0===t?void 0:t.target)||void 0===r?void 0:r.result;if(!i)return n(null);try{const e=yield o.dataUrlToTexture(i);return n(e)}catch(e){return s(e)}})),t.onerror=t=>(console.error("Error",t),s(new Error(`Error getting texture from indexedDB: ${e}`)))})}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.GET_SECTION_DATA=0]="GET_SECTION_DATA",e[e.REQUEST_AND_SAVE_MAP_CHUNKS=1]="REQUEST_AND_SAVE_MAP_CHUNKS",e[e.REQUEST_AND_SAVE_SINGLE_MAP_CHUNK=2]="REQUEST_AND_SAVE_SINGLE_MAP_CHUNK",e[e.REQUEST_AND_SAVE_ALL_MAP_CHUNKS=3]="REQUEST_AND_SAVE_ALL_MAP_CHUNKS",e[e.INIT_LOADER=4]="INIT_LOADER",e[e.INIT_MAP=5]="INIT_MAP"}(t.Messages||(t.Messages={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR"}(t.ResultCodes||(t.ResultCodes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapFileKey=function(e,t,n){return null!=n?`${e}/${t}/s_${n}`:`${e}/${t}/map`},t.mapMetaPath=function(e,t){return`${e}/${t}/meta`}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Xb3JsZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9Xb3JsZC8uLi9FZGl0b3JDb3JlL3NyYy90eXBlcy50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL3R5cGVzLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL1dvcmxkLy4vc3JjL1dvcmxkUmVuZGVyZXIvV29ya2Vycy9DaHVua0xvYWRlci53b3JrZXIudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi4vRW5jb2Rlci9zcmMvRGVjb2Rlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uLi91dGlscy9GYXN0Q29tcHJlc3Npb24udHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi4vRW5jb2Rlci9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvbGliL0xvYWRlci50cyIsIndlYnBhY2s6Ly9Xb3JsZC8uL3NyYy9Xb3JsZFJlbmRlcmVyL1dvcmtlcnMvbWVzc2FnZXMudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvV29ybGRSZW5kZXJlci9Xb3JrZXJzL3V0aWxzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUkVTRVJWRURfRkxBR1MiLCJSVU5USU1FX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFIiwiRURJVE9SX1RJTEVfTEFZRVJfU0VDVElPTl9TSVpFIiwiQ29sbGlkZXJTaGFwZSIsIk1hcFNpemVzIiwiUnVudGltZUNvbGxpZGVyU2hhcGUiLCJNYXBTaXplIiwiYnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImJ0b2EiLCJVaW50OEFycmF5IiwicmVkdWNlIiwiZGF0YSIsImJ5dGUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJnZXRUZXh0dXJlRnJvbUJsb2IiLCJibG9iIiwiVVJMIiwid2luZG93Iiwid2Via2l0VVJMIiwiYmxvYlVSTCIsIm5lZWRSZXZva2UiLCJjcmVhdGVPYmplY3RVUkwiLCJlcnIiLCJiYXNlNjQiLCJpbWciLCJJbWFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicmV2b2tlT2JqZWN0VVJMIiwiUElYSSIsIlRleHR1cmUiLCJCYXNlVGV4dHVyZSIsImRhdGFVUkx0b0Jsb2IiLCJkYXRhdXJsIiwiYXJyIiwic3BsaXQiLCJtaW1lIiwibWF0Y2giLCJic3RyIiwiYXRvYiIsImxlbmd0aCIsInU4YXJyIiwiY2hhckNvZGVBdCIsIkJsb2IiLCJ0eXBlIiwidXJsIiwicGFyc2VKc29uIiwieG1sSHR0cCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUeXBlIiwib3BlbiIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJjb25zb2xlIiwiZXJyb3IiLCJ3IiwiaCIsIlNNQUxMIiwiTEFSR0UiLCJkYXRhVXJsIiwiY29sbGlkZXJzIiwiZmxpcHMiLCJmaWxlTmFtZSIsInJlcGxhY2UiLCJpbmRleGVkREIiLCJtb3pJbmRleGVkREIiLCJ3ZWJraXRJbmRleGVkREIiLCJtc0luZGV4ZWREQiIsInJlbmRlcmVyIiwibWF4U2l6ZSIsImdsIiwiTUFYX1RFWFRVUkVfU0laRSIsImFjdHVhbFNpemUiLCJtYXhMZW5ndGgiLCJ0aWxlU2l6ZSIsImN1cnJlbnRMZW5ndGgiLCJkaXZpZGVyIiwiYWRkIiwibWFpbkxlbmd0aCIsIm9mZnNldExlbmd0aCIsIk1hdGgiLCJhYnMiLCJvcHRpb25zIiwiZGVmYXVsdE9wdGlvbnMiLCJyZXF1aXJlZFBhcmFtcyIsImN1ck9wdGlvbnMiLCJtaXNzaW5nUGFyYW1zIiwidW5kZWZpbmVkUGFyYW1zIiwibnVsbFBhcmFtcyIsInB1c2giLCJ1bmRlZmluZWQiLCJlcnJvclN0cmluZyIsImNvbmNhdCIsImpvaW4iLCJjdHgiLCJzZWxmIiwiV2VicGFja1dvcmtlciIsIldvcmtlciIsInN1cGVyIiwiZGVjb2RlciIsImJhc2VVcmwiLCJ3b3JsZElkIiwiaW5pdENodW5rcyIsImxvYWRlciIsImN1ck1hcCIsImN1ck1hcElkIiwidGlsZVNlcVRvU2l6ZUxvb2t1cCIsImluaXQiLCJfd29ybGRJZCIsIl9iYXNlVXJsIiwiX3RpbGVTZXFUb1NpemVMb29rdXAiLCJfc2VxTG9va3VwIiwiX3Byb3BTZXFUb05hbWVMb29rdXAiLCJ3aWR0aCIsImhlaWdodCIsIkRlY29kZXIiLCJMb2FkZXIiLCJpbml0aWFsaXplIiwiUmVzdWx0Q29kZXMiLCJTVUNDRVNTIiwibG9hZEFuZFNhdmVDaHVua3MiLCJtYXBJZCIsImNodW5rSW5kZXhlcyIsInNlY0lkeCIsImNodW5rS2V5IiwiaHR0cEdldEFzeW5jIiwic2F2ZUFycmF5QnVmZmVyIiwibG9hZEFuZFNhdmVDaHVuayIsImNodW5rSW5kZXgiLCJvbm1lc3NhZ2UiLCJzZXEiLCJtc2ciLCJwYXlsb2FkIiwiTWVzc2FnZXMiLCJSRVFVRVNUX0FORF9TQVZFX0FMTF9NQVBfQ0hVTktTIiwiZmluIiwibWFwS2V5IiwibWFwRmlsZUtleSIsImJ1ZmZlcnMiLCJtZXRhRGF0YSIsImdldENvbXByZXNzZWRDaHVua3NGcm9tTWFwIiwicHJvbWlzZXMiLCJhbGwiLCJzdHJpbmdpZnkiLCJFUlJPUiIsImxvYWRBbmRTYXZlTWFwQ2h1bmtzIiwicG9zdE1lc3NhZ2UiLCJHRVRfU0VDVElPTl9EQVRBIiwiRXJyb3IiLCJ0cyIsIkRhdGUiLCJub3ciLCJzdHJpbmciLCJsb2FkQXJyYXlCdWZmZXIiLCJkZWNvZGVDaHVuayIsIm1hcFciLCJtYXBIIiwibGF5ZXJUaWxlTGF5ZXJPcmRlciIsImxvYWRDaHVua0RhdGEiLCJSRVFVRVNUX0FORF9TQVZFX01BUF9DSFVOS1MiLCJhcHBseSIsIlJFUVVFU1RfQU5EX1NBVkVfU0lOR0xFX01BUF9DSFVOSyIsIklOSVRfTE9BREVSIiwiSU5JVF9NQVAiLCJrZXlzIiwiZm9yRWFjaCIsImluaXRNYXAiLCJ0aWxlSWRUb1NpemVMb29rdXAiLCJ0YWdTZXFUb1N0cmluZ0xvb2t1cCIsInByb3BTZXFUb05hbWVMb29rdXAiLCJ0aGlzIiwiY2h1bmtBcnJheSIsImN1ckNoZWNrSW5kZXgiLCJjdXJMYXllciIsInN0YXJ0aW5nQ2h1bmtJbmRleCIsImZvdW5kU2VwZXJhdG9ycyIsIkJMT0JfU0VQQVJBVE9SIiwiRU1QVFlfU0VDVElPTl9GTEFHIiwicG9pbnQiLCJ4IiwiTkVHQVRJVkVfTlVNQkVSIiwieSIsInN0YXJ0SW5kZXgiLCJlbmNvZGVkQXJyYXkiLCJkZWNvZGVkU3RyaW5nIiwiY3VySW50IiwiSU1BR0VfQU5EX1NUUklOR19TRVBFUkFUT1IiLCJlbmRJbmRleCIsImFycmF5IiwicHJvcHMiLCJjdXJyZW50UHJvcE5hbWUiLCJjdXIiLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImN1ckluZGV4IiwibWFwU2VxIiwiY29sbGlkZXJUYWdDb3VudCIsImZvdW5kUG9pbnRzIiwicG9pbnRDb3VudCIsImFkanVzdE5lZyIsImZpbmFsT2JqIiwiY29sT2JqIiwiaWQiLCJzaGFwZVR5cGUiLCJQT0xZR09OIiwic2hhcGVEYXRhIiwiZGVjb2RlQ29sbGlkZXJUYWdzQW5kUHJvcHMiLCJudW1iZXJBcnJheSIsImZpbmFsUHJvcHMiLCJlbmRBdEluZGV4IiwiZGVjb2RlUHJvcEJvb2xlYW5zIiwiZGVjb2RlUHJvcE51bWJlcnMiLCJkZWNvZGVQcm9wU3RyaW5ncyIsInRhZ3MiLCJtYXAiLCJyZWN0IiwiUkVDVCIsInRhZ0VuZGVkSW5kZXgiLCJkZWNvZGVUYWdzIiwiZGVjb2RlUHJvcHMiLCJtYXBUYWdzIiwiUE9JTlQiLCJkZWNvZGVQb2x5Z29uIiwiZGVjb2RlUmVjdCIsImRlY29kZVBvaW50IiwibGF5ZXJDb3VudCIsImRlY29kZWQiLCJBcnJheSIsImZvdW5kQ29sbGlkZXJzIiwidHlwZXMiLCJjdXJUeXBlSWR4IiwiZGVjb2RlZENvbGxpZGVycyIsImV4cGVjdGVkQ29sbGlkZXJzIiwiZGVjb2RlQ29sbGlkZXIiLCJ0aWxlQXJyYXlzIiwiaW1hZ2VzIiwiY3VyRWxlbWVudEluZGV4IiwidGlsZUxheWVySWRzIiwiZm91bmRUaWxlQmxvYlNlcGVyYXRvcnMiLCJjdXJMYXllckZvckltYWdlIiwiZm91bmRJbWFnZXMiLCJuZXh0VmFsdWVJc0ltYWdlQ291bnQiLCJjdXJJbWdJIiwib25JbWdTZXAiLCJjdXJFbG0iLCJkZWNvZGVDb2xsaWRlcnMiLCJvYmoiLCJjaHVua1ciLCJjaHVua0giLCJzdWJDaHVua1ciLCJzdWJDaHVua0giLCJsYXllclRpbGVMYXllck9yZGVyRGF0YSIsImlzQXJyYXkiLCJ1bmNvbXByZXNzIiwiY29scyIsImNlaWwiLCJjaHVua1dvcmxkWCIsImNodW5rV29ybGRZIiwiZmxvb3IiLCJlbmRYIiwiZW5kWSIsImNhbGN1bGF0ZUVuZE9mQ2h1bmsiLCJpbmRleCIsImxheWVycyIsInNwbGl0Q2h1bmtBcnJheUxheWVycyIsImhhc0ltYWdlcyIsImhhc0NvbGxpZGVycyIsImN1clRpbGVzIiwibGF5ZXJJZCIsInRpbGVMYXllcnMiLCJqIiwidGlsZXNBcnJheSIsInRpbGVTaXplU2VxIiwibWF4VGlsZUlkIiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsInN1YkNodW5rcyIsInVubWVyZ2VTdWJzZWN0aW9uVGlsZXMiLCJ1bm1lcmdlTGF5ZXJJbWFnZXMiLCJjaHVua0RhdGEiLCJtYXBOdW1iZXJBcnJheSIsImRlY29kZU1ldGFEYXRhIiwidG90YWwiLCJjdXJDaHVuayIsInNwbGl0Q2h1bmtzIiwiQ0hVTktfU0VQRVJBVE9SIiwiYSIsImNvbXByZXNzIiwibWFwQ2h1bmtBcnJheSIsImZvckVhY2hDaHVuayIsImNodW5rIiwiY2h1bmtzIiwiaW1hZ2VBcnJheSIsIm5leHRJc0ltYWdlSWQiLCJ4eXpJbmRleCIsImN1ckltYWdlSWQiLCJlbmNvZGVkU3ViQ2h1bmtXIiwiZW5jb2RlZFN1YkNodW5rSCIsImNodW5rWCIsImNodW5rWSIsIm1hcFdpZHRoIiwibWFwSGVpZ2h0IiwidGlsZUFycmF5IiwiZW5kUG9zaXRpb24iLCJleHBlY3RlZERlY29kZWRTdWJDaHVua3MiLCJjYWxjdWxhdGVTdWJDaHVua3MiLCJ1bm1lcmdlZEFycmF5cyIsImZpbGwiLCJjdXJFbmNvZGVkU3ViU2VjdGlvbiIsImN1ckNodW5rWCIsImN1ckNodW5rWSIsInBhZFgiLCJwYWRZIiwiZ2V0VG9wTGVmdFBhZGRpbmciLCJjdXJUaWxlWCIsImN1clRpbGVZIiwiaW5jciIsIkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24iLCJieXRlbG9nIiwidmFsIiwiemlnemFnX2VuY29kZSIsInppZ3phZ19kZWNvZGUiLCJjb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzIiwiaW5wdXQiLCJhbnN3ZXIiLCJjb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzU2lnbmVkIiwiYnVmIiwiQXJyYXlCdWZmZXIiLCJ2aWV3IiwiSW50OEFycmF5IiwicG9zIiwiY29tcHV0ZUhvd01hbnlJbnRlZ2VycyIsImNvdW50IiwiaW5ieXRlIiwiZW5kIiwidiIsImNvbXByZXNzU2lnbmVkIiwidW5jb21wcmVzc1NpZ25lZCIsImNhbGN1bGF0ZVJvd3NBbmRDb2x1bW5zIiwicmVtYWluaW5nTWFwV2lkdGgiLCJyZW1haW5pbmdNYXBIZWlnaHQiLCJjb2x1bW5zIiwibWluIiwicm93cyIsInRvcExlZnRQYWRkaW5nIiwiY29sdW1uIiwicm93IiwiYW5zIiwiYm90dG9tUmlnaHRPdmVyZmxvdyIsIk9JbmRleGVkREIiLCJ3ZWJraXRJbmRleGVkRGIiLCJkYiIsInJlcXVlc3QiLCJvbmVycm9yIiwib25zdWNjZXNzIiwicmVzdWx0Iiwic2V0VmVyc2lvbiIsInZlcnNpb24iLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9udXBncmFkZW5lZWRlZCIsInRhcmdldCIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJkZWxldGUiLCJwdXQiLCJidWZmZXIiLCJ0ZXh0dXJlIiwiYmFzZVRleHR1cmUiLCJzb3VyY2UiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb250ZXh0IiwibG9nIiwiZHJhd0ltYWdlIiwidG9EYXRhVVJMIiwiaW1nRmlsZSIsImRhdGFVcmxUb1RleHR1cmUiLCJzZWN0aW9uSW5kZXgiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FF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cUIsT0FBV2lRLElBRXpCLEdBQUd0UixLQUFXcUIsU0FJN0IsdUJBQTRCckIsRUFBaUJxQixHQUN6QyxNQUFPLEdBQUdyQixLQUFXcUIiLCJmaWxlIjoiODI2MDhmOGEyZTRkY2ZjN2EyOWIud29ya2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwiaW1wb3J0IHtMYXllckRhdGEsIFJ1bnRpbWVDb2xsaWRlclNoYXBlfSBmcm9tIFwiLi4vLi4vUnVudGltZS9zcmMvV29ybGRSZW5kZXJlci90eXBlc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gUkVTRVJWRURfRkxBR1Mge1xyXG4gICAgTkVHQVRJVkVfTlVNQkVSPTB4NDAwMDAwMDAsXHJcbiAgICBJTUFHRV9BTkRfU1RSSU5HX1NFUEVSQVRPUiA9IDB4MTExMTExLFxyXG4gICAgRU1QVFlfU0VDVElPTl9GTEFHID0gMHgxMTExMTIsXHJcbiAgICBCTE9CX1NFUEFSQVRPUiA9IDB4MTExMTEzLFxyXG4gICAgQ0hVTktfU0VQRVJBVE9SID0gMHgxMTExMTQsXHJcbiAgICBUSUxFX1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUaWxlc2V0SW5pdERhdGEgPSB7XHJcbiAgICB0aWxlc2V0SWQ6IHN0cmluZyxcclxuICAgIHRpbGVXaWR0aDogbnVtYmVyLFxyXG4gICAgdGlsZUhlaWdodDogbnVtYmVyLFxyXG4gICAgc3RhcnRpbmdJbmRleDogbnVtYmVyLFxyXG4gICAgdHJhbnNwYXJlbnRJbmRleGVzOiBBcnJheTxudW1iZXI+LFxyXG4gICAgZGF0YVRzPzogbnVtYmVyLFxyXG4gICAgaW1hZ2VUcz86IG51bWJlcixcclxuICAgIHRpbGVEYXRhOiBBcnJheTxUaWxlQ29sbGlkZXJEYXRhPixcclxuICAgIGJsb2I/OiBhbnksXHJcbiAgICB0ZXh0dXJlPzogUElYSS5UZXh0dXJlXHJcbn1cclxuZXhwb3J0IHR5cGUgRWRpdG9yTWFwSW5pdE1ldGFEYXRhID0geyBpZDogc3RyaW5nLCB0czogbnVtYmVyLCBjaHVua3NUczogQXJyYXk8bnVtYmVyPiwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFJlY3QgPSB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9O1xyXG5leHBvcnQgdHlwZSBQb2ludCA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcclxuZXhwb3J0IHR5cGUgUG9seWdvbiA9IEFycmF5PFBvaW50PjtcclxuZXhwb3J0IHR5cGUgTGluZSA9IEFycmF5PFBvaW50PjtcclxuZXhwb3J0IHR5cGUgQ2lyY2xlID0gUG9pbnQgJiB7IHI6IG51bWJlciB9XHJcblxyXG5leHBvcnQgdHlwZSBNYXBTaGFwZURhdGEgPSBSZWN0IHwgUG9pbnQgfCBQb2x5Z29uO1xyXG5leHBvcnQgdHlwZSBPYmplY3RQcm9wZXJ0eURhdGEgPSB7XHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICB2YWx1ZTogYW55LFxyXG4gICAgcmVjdHM/OiBBcnJheTxSZWN0PixcclxuICAgIHBvbHlnb25zPzogQXJyYXk8QXJyYXk8bnVtYmVyPj5cclxufVxyXG5leHBvcnQgdHlwZSBWYWxpZFByb3BUeXBlID0gJ3N0cmluZycgfCAnbnVtYmVyJyB8ICdib29sZWFuJztcclxuZXhwb3J0IHR5cGUgVmFsaWRQcm9wVmFsdWVUeXBlcyA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW47XHJcblxyXG5leHBvcnQgdHlwZSBDb2xsaWRlclByb3BlcnR5RGF0YSA9IHtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIHR5cGU6IFZhbGlkUHJvcFR5cGUsXHJcbiAgICB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nIHwgYm9vbGVhbixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSW1hZ2VJbml0RGF0YSA9IHtcclxuICAgIGltYWdlSWRUb1NlcU1hcDoge1tpbWFnZUlkOiBzdHJpbmddOiBudW1iZXJ9LFxyXG4gICAgYmxvYj86IGFueSxcclxuICAgIGltYWdlSWQ6IHN0cmluZyxcclxuICAgIGltYWdlRGF0YT86IE1hcEltYWdlRGF0YSxcclxuICAgIGNvbGxpZGVyRGF0YT86IFRpbGVDb2xsaWRlckRhdGFcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTWFwSW1hZ2VEYXRhID0ge1xyXG4gICAgcHJvcGVydGllczogQXJyYXk8T2JqZWN0UHJvcGVydHlEYXRhPixcclxuICAgIHRhZ3M6IEFycmF5PHN0cmluZz4sXHJcbiAgICB6T2Zmc2V0PzogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBSdW50aW1lTWFwTWV0YURhdGEgPSB7XHJcbiAgICB3OiBudW1iZXIsXHJcbiAgICBoOiBudW1iZXIsXHJcbiAgICBzdzogbnVtYmVyLFxyXG4gICAgc2g6IG51bWJlcixcclxuICAgIHRzOiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRpbGVzZXRJbml0U2VjdGlvbkxheWVyRGF0YSA9IHtcclxuICAgIHNpemVLZXk6IHN0cmluZyxcclxuICAgIG1heFRpbGVJZDogbnVtYmVyLFxyXG4gICAgdGlsZVdpZHRoOiBudW1iZXI7XHJcbiAgICB0aWxlSGVpZ2h0OiBudW1iZXI7XHJcbiAgICBzdGFydE9mZnNldHM/IDogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9LFxyXG4gICAgc3ViU2VjdGlvbnM6IEFycmF5PEFycmF5PG51bWJlcj4+LFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUaWxlc2V0SW5pdExheWVyRGF0YSA9IHtcclxuICAgIHNpemVLZXk6IHN0cmluZyxcclxuICAgIHRpbGVXaWR0aDogbnVtYmVyO1xyXG4gICAgdGlsZUhlaWdodDogbnVtYmVyO1xyXG4gICAgdGlsZXM6IEFycmF5PG51bWJlcj47XHJcbiAgICBtYXhUaWxlSWQ6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgcmVjdHM6IEFycmF5PFJlY3RDb2xsaWRlckRhdGE+XHJcbiAgICBwb2x5Z29uczogQXJyYXk8UG9seWdvbkNvbGxpZGVyRGF0YT4sXHJcbiAgICBwb2ludHM6IEFycmF5PFBvaW50Q29sbGlkZXJEYXRhPlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBMYXllckluaXREYXRhID0ge1xyXG4gICAgbGF5ZXJJZDogbnVtYmVyLFxyXG4gICAgbGF5ZXJOYW1lOiBzdHJpbmcsXHJcbiAgICBjb2xsaWRlcnM6IENvbGxpZGVyRGF0YSxcclxuICAgIHRpbGVMYXllcnM6IEFycmF5PFRpbGVzZXRJbml0TGF5ZXJEYXRhPixcclxuICAgIGltYWdlczoge1tpbWFnZUlkOiBzdHJpbmddOiBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgfT4gfTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGF5ZXJJbml0RGF0YTIgPSB7XHJcbiAgICBjb2xsaWRlcnM/OiBUaWxlQ29sbGlkZXJEYXRhLFxyXG4gICAgbGF5ZXJJZDogbnVtYmVyLFxyXG4gICAgbGF5ZXJOYW1lOiBzdHJpbmcsXHJcbiAgICB0aWxlTGF5ZXJzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgbWF4WjogbnVtYmVyLFxyXG4gICAgbWluWjogbnVtYmVyLFxyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldE1hcEdpZHMgPSB7XHJcbiAgICB0aWxlc2V0SWQ6IHN0cmluZyxcclxuICAgIHN0YXJ0aW5nSW5kZXg6IG51bWJlcixcclxufVxyXG5cclxuLy8gd29ybGRcclxuICAgICAgICAvLyBtYXBzXHJcbiAgICAgICAgICAgIC8vIG1hcC5qc29uXHJcbiAgICAgICAgLy8gdGlsZXNldHNcclxuICAgICAgICAgICAgLy8gdGlsZXNldC5wbmdcclxuICAgICAgICAgICAgLy8gdGlsZXNldC5qc29uXHJcbiAgICAgICAgLy8gaW1hZ2VzXHJcbiAgICAgICAgICAgIC8vIGF0bGFzXzEucG5nXHJcbiAgICAgICAgICAgIC8vIGF0bGFzXzIuanNvblxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFdvcmxkSW5pdERhdGEgPSB7XHJcbiAgICB0aWxlS2V5VG9TZXE6IHtbc2l6ZUtleTogc3RyaW5nXTogbnVtYmVyfSxcclxuICAgIHdvcmxkSWQ6IHN0cmluZyxcclxuICAgIHVuaXF1ZVRpbGVDb3VudDoge1tzaXplS2V5OiBzdHJpbmddOiBudW1iZXIgfVxyXG4gICAgdGlsZXNldHM6IEFycmF5PHN0cmluZz4sXHJcbiAgIC8vIGltYWdlczogSW1hZ2VBc3NldHNJbml0RGF0YSxcclxuICAgIG1hcElkczogQXJyYXk8c3RyaW5nPixcclxuICAgIGNvbXB1dGVkQ29sbGlkZXJzOiBBcnJheTxDb21wdXRlZENvbG9yT2JqZWN0VGlsZVByb3BlcnR5PixcclxuICAgIGNvbGxpZGVyVGFnczogQXJyYXk8c3RyaW5nPixcclxuICAgIGNvbGxpZGVyVGFnTWFwOiBDb2xsaWRlckRhdGFNYXAsXHJcbiAgICBjb2xsaWRlclRhZ1JlbGF0aW9uc2hpcHM6IEFycmF5PEFycmF5PHN0cmluZz4+LFxyXG4gICAgcHJvcGVydHlOYW1lVG9TZXE6IHtbcHJvcE5hbWU6IHN0cmluZ106IG51bWJlcn0sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNlY3Rpb25MYXllckluaXREYXRhID0ge1xyXG4gICAgbGF5ZXJJZDogbnVtYmVyLFxyXG4gICAgY29sbGlkZXJzOiBDb2xsaWRlckRhdGEsXHJcbiAgICB0aWxlTGF5ZXJzOiBBcnJheTxUaWxlc2V0SW5pdFNlY3Rpb25MYXllckRhdGE+LFxyXG4gICAgaW1hZ2VzMj86IEFycmF5PHtbaW1hZ2VJZDogc3RyaW5nXTogQXJyYXk8bnVtYmVyPn0+LFxyXG4gICAgLy8geCwgeSwgelxyXG4gICAgaW1hZ2VzOiB7W2ltYWdlSWQ6IHN0cmluZ106IEFycmF5PG51bWJlcj4gfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRSA9IDEyODtcclxuZXhwb3J0IGNvbnN0IEVESVRPUl9USUxFX0xBWUVSX1NFQ1RJT05fU0laRSA9IDI1NjtcclxuLy8geCwgeSwgelxyXG5leHBvcnQgdHlwZSBNYXBMYXllclNlY3Rpb25JbWFnZURhdGEgPSB7IFtpbWFnZUlkOiBzdHJpbmddOiBBcnJheTxudW1iZXI+IH1cclxuXHJcblxyXG5cclxuZXhwb3J0IHR5cGUgTWFwU2VjdGlvbkRhdGEgPSB7XHJcbiAgICBpbmRleD86IG51bWJlcixcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGxheWVyczogQXJyYXk8U2VjdGlvbkxheWVySW5pdERhdGE+LFxyXG4gICAgdG90YWxMYXllcnM6IG51bWJlcixcclxuICAgIGxhc3RVcGRhdGVkOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcEluaXREYXRhID0ge1xyXG4gICAgc3ViQ2h1bmtXPzogbnVtYmVyLFxyXG4gICAgc3ViQ2h1bmtIPzogbnVtYmVyLFxyXG4gICAgY2h1bmtXPzogbnVtYmVyLFxyXG4gICAgY2h1bmtIPzogbnVtYmVyLFxyXG4gICAgbWFwSWQ6IHN0cmluZyxcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGxheWVySWRzOiBBcnJheTxudW1iZXI+LFxyXG4gIC8vICBsYXllckRhdGE6IEFycmF5PExheWVySW5pdERhdGE+LFxyXG4gICAgbGF5ZXJJbml0RGF0YT86IEFycmF5PExheWVySW5pdERhdGEyPixcclxuICAgIHRpbGVzZXRzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgaW1hZ2VzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgY2h1bmtzVHM6IEFycmF5PG51bWJlcj4sXHJcbiAgICB1cGRhdGVUczogbnVtYmVyLFxyXG4gICAgbGF5ZXJTZXE6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEYXRhTWFwID0ge1xyXG4gICAgW2NvbGxpZGVyVGFnOiBzdHJpbmddOiB7IHNlcTogbnVtYmVyLCB0YWdzOiBBcnJheTxzdHJpbmc+IH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEaXNwbGF5U3RhdGVEYXRhID0ge1xyXG4gICAgcmVjdFZpc2liaWxpdHk6IGJvb2xlYW4sXHJcbiAgICBwb2x5Z29uVmlzaWJpbGl0eTogYm9vbGVhbixcclxuICAgIGNvbXB1dGVkVmlzaWJpbGl0eTogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZUFzc2V0c0luaXREYXRhID0ge1xyXG4gICAgaW1hZ2VDb2xsaWRlckRhdGE6IEFycmF5PFRpbGVDb2xsaWRlckRhdGE+LFxyXG4gICAgYXRsYXNzZXNEYXRhOiBBcnJheTxJbWFnZUF0bGFzSW5pdERhdGE+LFxyXG4gICAgaW1hZ2VJZFRvU2VxTWFwOiB7W2ltYWdlSWQ6IHN0cmluZ106IG51bWJlcn1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSW1hZ2VBdGxhc0luaXREYXRhID0ge1xyXG4gICAgYXRsYXNEYXRhOiBJbWFnZUF0bGFzRGF0YSxcclxuICAgIHRleHR1cmU/OiBQSVhJLlRleHR1cmVcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTWFwSW1hZ2VQcm9wcyA9IHtcclxuICAgIGZsaXBzPzogRmxpcHMsXHJcbiAgICBjdXN0b20/OiB7XHJcbiAgICAgICAgW3Byb3BOYW1lOiBzdHJpbmddIDogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZUF0bGFzRGF0YSA9IHtcclxuICAgIGF0bGFzSW5kZXg6IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIGltYWdlczogQXJyYXk8e1xyXG4gICAgICAgIGltYWdlSWQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyXHJcbiAgICB9PlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZUF0bGFzRXhwb3J0RGF0YSA9IHtcclxuICAgIGFJZHg6IG51bWJlcixcclxuICAgIHc6IG51bWJlcixcclxuICAgIGg6IG51bWJlcixcclxuICAgIGltYWdlczogQXJyYXk8e1xyXG4gICAgICAgIGlkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlclxyXG4gICAgfT5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEYXR1bTxUPiA9IHtcclxuICAgIHByb3BlcnRpZXM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBzaGFwZVR5cGU6IFJ1bnRpbWVDb2xsaWRlclNoYXBlLFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IFBvaW50IHwgQ2lyY2xlLFxyXG4gICAgcHJvcHM6IHtbcHJvcE5hbWU6IHN0cmluZ10gOiBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyIH0sXHJcbiAgICB0eXBlOiBudW1iZXIsXHJcbiAgICBkYXRhPzogb2JqZWN0XHJcbn1cclxuXHJcblxyXG5leHBvcnQgdHlwZSBTaGFwZUNvbGxpZGVyRGF0YSA9IHtcclxuICAgIGlkOiBzdHJpbmcsXHJcbiAgICB2aXNpYmxlOiBib29sZWFuLFxyXG4gICAgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW4sXHJcbiAgICBzaGFwZVR5cGU6IENvbGxpZGVyU2hhcGUsXHJcbiAgICBzaGFwZURhdGE6IFJlY3QgfCBQb2x5Z29uIHwgQ2lyY2xlIHwgUG9pbnQsXHJcbiAgICBjb2xsaWRlclRhZ3M6IEFycmF5PHN0cmluZz4sXHJcbiAgICBwcm9wZXJ0aWVzPzogQXJyYXk8T2JqZWN0UHJvcGVydHlEYXRhPixcclxuICAgIHByb3BzPzogQXJyYXk8Q29sbGlkZXJQcm9wZXJ0eURhdGE+LFxyXG4gICAgY29tcHV0ZWQ/OiBib29sZWFuLFxyXG4gICAgY29tcHV0ZWRCeT86IHN0cmluZyxcclxuICAgIGxheWVySWQ/OiBudW1iZXIsXHJcbiAgICBkeW5hbWljPzogYm9vbGVhbixcclxuICAgIG1hcENvbGxpZGVyTWFuYWdlcklkPzogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBDb2xsaWRlclNoYXBlIHtcclxuICAgIFJFQ1Q9J3JlY3RzJyxcclxuICAgIFBPTFlHT049J3BvbHlnb25zJyxcclxuICAgIFBPSU5UPSdwb2ludHMnXHJcbn1cclxuXHJcblxyXG5leHBvcnQgdHlwZSBSZWN0Q29sbGlkZXJEYXRhID0ge1xyXG4gICAgc2hhcGVEYXRhOiBSZWN0LFxyXG59ICYgU2hhcGVDb2xsaWRlckRhdGE7XHJcbmV4cG9ydCB0eXBlIFBvbHlnb25Db2xsaWRlckRhdGEgPSB7XHJcbiAgICBzaGFwZURhdGE6IFBvbHlnb24sXHJcbn0gJiBTaGFwZUNvbGxpZGVyRGF0YTtcclxuZXhwb3J0IHR5cGUgUG9pbnRDb2xsaWRlckRhdGEgPSB7XHJcbiAgICBzaGFwZURhdGE6IFBvaW50LFxyXG59ICYgU2hhcGVDb2xsaWRlckRhdGE7XHJcblxyXG5leHBvcnQgdHlwZSBSZXNvbHZlZENvbXB1dGVkQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgc2hhcGVEYXRhOiB7XHJcbiAgICAgICAgW0NvbGxpZGVyU2hhcGUuUkVDVF06IEFycmF5PFJlY3Q+LFxyXG4gICAgICAgIFtDb2xsaWRlclNoYXBlLlBPTFlHT05dOiBBcnJheTxQb2x5Z29uPlxyXG4gICAgfSxcclxuICAgIGNvbG9yczogQXJyYXk8bnVtYmVyPixcclxufSAmIFNoYXBlQ29sbGlkZXJEYXRhO1xyXG5cclxuZXhwb3J0IHR5cGUgRmxpcHMgPSB7ICBmbGlwRGlhZzogYm9vbGVhbiwgZmxpcEhvcjogYm9vbGVhbiwgZmxpcFZlcnQ6IGJvb2xlYW4gfTtcclxuXHJcbmV4cG9ydCB0eXBlIFRpbGVDb2xsaWRlckRhdGEgPSBDb2xsaWRlckRhdGEgJiB7XHJcbiAgICBpZD86IHN0cmluZyxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmF3Q29tcHV0ZWRDb2xsaWRlckRhdGEgPSB7XHJcbiAgICBjb2xvcnM6IEFycmF5PG51bWJlcj5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQmxvY2tlckRhdGEgPSB7XHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICBjaGVja1R5cGVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgcmVjdHM6IEFycmF5PFJlY3Q+LFxyXG4gICAgcG9seWdvbnM6IEFycmF5PFBvbHlnb24+XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcFNwcml0ZURhdGEgPSB7XHJcbiAgICAvLyAgcHJvcGVydGllczogQXJyYXk8UHJvcGVydHk+LFxyXG4gICAgdGFnczogQXJyYXk8c3RyaW5nPixcclxuICAgIHByb3BlcnRpZXM6IEFycmF5PE9iamVjdFByb3BlcnR5RGF0YT5cclxuICAgIGJsb2NrZXJzOiBBcnJheTxCbG9ja2VyRGF0YT5cclxufVxyXG5cclxuLypcclxuZXhwb3J0IHR5cGUgVGlsZURhdGEgPSB7XHJcbiAgICBtYXBTcHJpdGVEYXRhOiBNYXBTcHJpdGVEYXRhLFxyXG4gICAgY29tcHV0ZWRPYmplY3RzOiBBcnJheTxDb21wdXRlZENvbG9yT2JqZWN0VGlsZVByb3BlcnR5PlxyXG59XHJcbiAqL1xyXG5cclxuZXhwb3J0IHR5cGUgQ29tcHV0ZWRDb2xvck9iamVjdFRpbGVQcm9wZXJ0eSA9IHtcclxuICAgIGNvbXB1dGF0aW9uVHlwZTogJ3Byb3BlcnR5JyB8ICdibG9ja2VyJ1xyXG4gICAgY29tcHV0YXRpb25OYW1lOiBzdHJpbmcsXHJcbiAgICBjb2xvcnM6IEFycmF5PG51bWJlcj4sXHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICB2YWx1ZTogYW55LFxyXG4gICAgbWluUmVjdFdpZHRoPzogbnVtYmVyLFxyXG4gICAgbWluUmVjdEhlaWdodD86IG51bWJlcixcclxuICAgIGV4Y2x1ZGVUaWxlcz86IEFycmF5PHsgdGlsZUluZGV4OiBudW1iZXIsIHJlY3RzOiBBcnJheTxSZWN0PiB9PlxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT2JqZWN0VHlwZSB7XHJcbiAgICBuYW1lOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQm91bmRpbmdCb3ggPSB7XHJcbiAgICBtaW5YOiBudW1iZXIsXHJcbiAgICBtYXhYOiBudW1iZXIsXHJcbiAgICBtaW5ZOiBudW1iZXIsXHJcbiAgICBtYXhZOiBudW1iZXJcclxufSIsIi8vaW1wb3J0IHtSZWN0fSBmcm9tIFwiLi4vLi4vLi4vU2hhcmVkL3R5cGVzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBDb2xsaWRlckRhdGEsIEZsaXBzLFxyXG4gICAgU2VjdGlvbkxheWVySW5pdERhdGFcclxufSBmcm9tIFwiLi4vLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtHYW1lT2JqZWN0fSBmcm9tIFwiLi9HYW1lT2JqZWN0XCI7XHJcbmltcG9ydCB7b25Db2xsaXNpb25Ib29rfSBmcm9tIFwiLi9JUGx1Z2luXCI7XHJcblxyXG50eXBlIEdhbWVPYmplY3RJbWFnZVBhcmFtID0gUElYSS5UZXh0dXJlIHwgUElYSS5TcHJpdGUgfCBzdHJpbmcgfCBIVE1MSW1hZ2VFbGVtZW50XHJcblxyXG5leHBvcnQgdHlwZSBUZXh0dXJlTG9hZE9wdHMgPSB7XHJcbiAgICBjYWNoZUZvcj86IG51bWJlcixcclxuICAgIGFkZFRvQXRsYXM6IGJvb2xlYW4sXHJcbiAgICBpc01hcEltYWdlPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNYXBTaXplcyB7XHJcbiAgICBNQVNTSVZFLFxyXG4gICAgTEFSR0UsXHJcbiAgICBNRURJVU0sXHJcbiAgICBTTUFMTCxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQXZhaWxhYmlsaXR5RmxhZ3MgPSB7XHJcbiAgICBpbmRleGVkREI6IGJvb2xlYW47XHJcbiAgICBsb2NhbFN0b3JhZ2U6IGJvb2xlYW47XHJcbiAgICB3ZWJXb3JrZXI6IGJvb2xlYW47XHJcbiAgICBtYXhUZXh0dXJlU2l6ZTogbnVtYmVyLFxyXG4gICAgd2ViR2w6IGJvb2xlYW4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIENvbGxpc2lvblBsdWdpbkhhbmRsZXJzID0ge1xyXG4gICAgc2luZ2xlcz86IEFycmF5PG9uQ29sbGlzaW9uSG9vaz4sXHJcbiAgICBjb3VwbGVzPzogeyBbdHlwZUI6IHN0cmluZ106IEFycmF5PG9uQ29sbGlzaW9uSG9vaz4gfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDb2xsaXNpb25QbHVnaW5IYW5kbGVyTWFwID0ge1xyXG4gICAgW3R5cGVBOiBzdHJpbmddOiBDb2xsaXNpb25QbHVnaW5IYW5kbGVyc1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQb2ludCA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcclxuZXhwb3J0IHR5cGUgUG9seWdvbiA9IEFycmF5PFBvaW50PlxyXG5leHBvcnQgdHlwZSBMaW5lID0gQXJyYXk8UG9pbnQ+XHJcbmV4cG9ydCB0eXBlIFJlY3QgPSBQb2ludCAmIHsgdzogbnVtYmVyLCBoOiBudW1iZXIgfVxyXG5leHBvcnQgdHlwZSBDaXJjbGUgPSBQb2ludCAmIHsgcjogbnVtYmVyIH1cclxuZXhwb3J0IHR5cGUgRWxpcHNlID0geyBjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIFNoYXBlRGF0YSA9IFBvaW50IHwgUG9seWdvbiB8IFJlY3QgfCBDaXJjbGUgfCBFbGlwc2U7XHJcblxyXG5leHBvcnQgdHlwZSBMZXZlbExpbmtEYXRhID0geyBhcmVhSWQ6IHN0cmluZywgcmVjdD86IFJlY3QsIGNsaWVudEZsYWdzPzogQXJyYXk8c3RyaW5nPiwgc2VydmVyRmxhZ3M6IEFycmF5PHN0cmluZz4sIGRhdGE/OiBhbnkgfTtcclxuXHJcbmV4cG9ydCB0eXBlIExldmVsQmxvY2tlckRhdGEgPSB7XHJcbiAgICByZWN0czogQXJyYXk8eyB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfT4sXHJcbiAgICBsaW5lczogQXJyYXk8QXJyYXk8e3g6IG51bWJlciwgeTogbnVtYmVyIH0+PlxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTZXJ2ZXJNb2RlID0ge1xyXG4gICAgRklMRSxcclxuICAgIFdFQixcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUnVudGltZUNvbGxpZGVyU2hhcGUge1xyXG4gICAgUkVDVCxcclxuICAgIFBPTFlHT04sXHJcbiAgICBQT0lOVCxcclxuICAgIENJUkNMRSxcclxuICAgIExJTkUsXHJcbiAgICBFTElQU0VcclxufVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIEdhbWVPYmplY3RPcHRpb25zID0ge1xyXG4gICAgZmxpcHM/OiBGbGlwcyxcclxuICAgIGxheWVyPzogbnVtYmVyLFxyXG4gICAgdGV4dHVyZT86IFBJWEkuVGV4dHVyZSxcclxuICAgIHNwcml0ZT86IFBJWEkuQ29udGFpbmVyIHwgUElYSS5TcHJpdGUsXHJcbiAgICB0YWdzPzogQXJyYXk8c3RyaW5nPixcclxuICAgIGNvbGxpZGVycz86IEFycmF5PE5ld0NvbGxpZGVyUGFyYW1zPixcclxuICAgIHBvc2l0aW9uPzogIFBvaW50LFxyXG4gICAgekluZGV4PzogbnVtYmVyLFxyXG4gICAgeVNvcnQ/OiBudW1iZXIsXHJcbiAgICBkYXRhPzogYW55LFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUYWcgPSBzdHJpbmcgfCBudW1iZXI7XHJcbmV4cG9ydCB0eXBlIFBhcnNlZE1hcEltYWdlQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgZHluYW1pYz86IGJvb2xlYW4sXHJcbiAgICB0YWdzPzogQXJyYXk8c3RyaW5nPixcclxuICAgIHNoYXBlRGF0YTogUmVjdCB8IFBvbHlnb24gfCBQb2ludCxcclxuICAgIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUsXHJcbn1cclxuZXhwb3J0IHR5cGUgTWFwSW1hZ2VSYXdDb2xsaWRlckRhdGEgPSB7XHJcbiAgICBkeW5hbWljPzogYm9vbGVhbixcclxuICAgIHRhZ3M/OiBBcnJheTxudW1iZXI+LFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IFBvaW50LFxyXG4gICAgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTmV3Q29sbGlkZXJQYXJhbXMgPSB7XHJcbiAgICBkeW5hbWljPzogYm9vbGVhbixcclxuICAgIHRhZ3M6IEFycmF5PHN0cmluZyB8IG51bWJlcj4sXHJcbiAgICBkYXRhPzogYW55LFxyXG4gICAgc2hhcGVEYXRhOiBSZWN0IHwgUG9seWdvbiB8IENpcmNsZSB8IFBvaW50LFxyXG4gICAgc2hhcGVUeXBlPzogUnVudGltZUNvbGxpZGVyU2hhcGVcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQ29sbGlkZXJEYXR1bTxUPiA9IHtcclxuICAgIHByb3BzPzoge1twcm9wTmFtZTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB9XHJcbiAgICBpZD86IHN0cmluZyB8IG51bWJlcixcclxuICAgIGxheWVyPzogbnVtYmVyLFxyXG4gICAgZHluYW1pYz86IGJvb2xlYW4sXHJcbiAgICAvL3Byb3BlcnRpZXM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBzaGFwZVR5cGU6IFJ1bnRpbWVDb2xsaWRlclNoYXBlLFxyXG4gICAgc2hhcGVEYXRhOiBULFxyXG4gICAgYWRqdXN0ZWRTaGFwZURhdGE/OiBULFxyXG4gICAgcm90YXRpb24/OiBudW1iZXIsXHJcbiAgICBzY2FsZVg/OiBudW1iZXIsXHJcbiAgICBzY2FsZVk/OiBudW1iZXIsXHJcbiAgICB0YWdzPzogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPixcclxuICAgIGRhdGE/OiBhbnksXHJcbiAgICBsaXN0ZW5lcnM/OiBBcnJheTwoY29sOiBDb2xsaWRlckRhdHVtPFNoYXBlRGF0YT4pID0+IHZvaWQgPlxyXG4gICAgc3ByaXRlPzogR2FtZU9iamVjdCB8IFBJWEkuQ29udGFpbmVyIHwgUElYSS5HcmFwaGljcztcclxuICAgIGNodW5rcz86IEFycmF5PG51bWJlcj4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIER5bmFtaWNDb2xsaWRlckRhdHVtPFQ+ID0gQ29sbGlkZXJEYXR1bTxUPiAmIHtcclxuICAgIHA6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRTZWN0aW9uQ29udGFpbmVycyA9IEFycmF5PFBJWEkuQ29udGFpbmVyIHwgUElYSS5TcHJpdGU+IHwgQXJyYXk8QXJyYXk8UElYSS5Db250YWluZXIgfCBQSVhJLlNwcml0ZT4+O1xyXG5leHBvcnQgdHlwZSBUaWxlU3ByaXRlID0gUElYSS5TcHJpdGUgJiB7IHJlbW92ZUZyb21NYXA6IChvcHRzPykgPT4gdm9pZCwgY29sbGlkZXJzPzogQ29sbGlkZXJEYXRhLCB3b3JsZFg/OiBudW1iZXIgLCB3b3JsZFk/OiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldEluaXRNZXRhRGF0YSA9IHsgaWQ6IHN0cmluZywgZGF0YVRzOiBudW1iZXIsIGltYWdlVHM6IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIFdvcmxkTWFwSW5pdE1ldGFEYXRhID0geyBpZDogc3RyaW5nLCB0czogbnVtYmVyLCBjaHVua3NUczogQXJyYXk8bnVtYmVyPiwgc2l6ZT86IG51bWJlciB9XHJcbmV4cG9ydCB0eXBlIEF0bGFzSW5pdE1ldGFEYXRhID0geyBkYXRhVHM6IG51bWJlciwgaW1hZ2VzVHM6IEFycmF5PG51bWJlcj4gfTtcclxuZXhwb3J0IHR5cGUgU3ByaXRlT3B0aW9ucyA9IHtcclxuICAgIGNvbGxpZGVycz86IEFycmF5PENvbGxpZGVyRGF0dW08U2hhcGVEYXRhPj4sXHJcbiAgICBwb3NpdGlvbj86IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSxcclxufVxyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFdvcmxkSW5pdE1ldGFEYXRhID0ge1xyXG4gICAgd29ybGQ6IHN0cmluZyxcclxuICAgIGNvbFRhZ3M6IHtbdGFnOiBzdHJpbmddOiBudW1iZXIgfSxcclxuICAgIC8vIGFycmF5IG9mIFt3aWR0aCwgaGVpZ2h0XHJcbiAgICB0aWxlU2l6ZVNlcUxvb2t1cDogQXJyYXk8bnVtYmVyPixcclxuICAgIHByb3BTZXFUb05hbWVMb29rdXA6IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9LFxyXG4gIC8vICB1bmlxdWVUaWxlQ291bnQ6IHtbc2l6ZUtleTogc3RyaW5nXTogbnVtYmVyIH1cclxuICAgIHRpbGVzZXRzOiBBcnJheTxUaWxlc2V0SW5pdE1ldGFEYXRhPixcclxuICAgIG1hcHM6IEFycmF5PEFycmF5PFdvcmxkTWFwSW5pdE1ldGFEYXRhPj4sXHJcbiAgICBpbWFnZXM6IEFycmF5PG51bWJlcj4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcE1ldGFEYXRhID0ge1xyXG4gICAgYmFzZVVybDogc3RyaW5nLFxyXG4gICAgdGlsZXNldE1ldGFEYXRhOiB7W3RpbGVzZXRJZDogc3RyaW5nXTogVGlsZXNldE1ldGFEYXRhfSxcclxuICAgIHRpbGVTaXplOiBudW1iZXIsXHJcbiAgICB0aWxlc2V0SWRzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgaW1hZ2VJZHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBzZWN0aW9uTWV0YURhdGE6IFNlY3Rpb25NZXRhRGF0YSxcclxuICAgIGxldmVsSWQ6IHN0cmluZyxcclxuICAgIGxldmVsV2lkdGg6IG51bWJlcixcclxuICAgIGxldmVsSGVpZ2h0OiBudW1iZXIsXHJcbiAgICB0b3RhbExheWVyczogbnVtYmVyLFxyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldE1ldGFEYXRhID0ge1xyXG4gICAgc3RhcnRJbmRleDogbnVtYmVyLFxyXG4gICAgbGFzdFRzVXBkYXRlOiBudW1iZXIsXHJcbiAgICB0aWxlc2V0SWQ6IHN0cmluZyxcclxuICAgIHRpbGVXaWR0aDogbnVtYmVyLFxyXG4gICAgdGlsZUhlaWdodDogbnVtYmVyLFxyXG4gICAgdGlsZUNvdW50OiBudW1iZXIsXHJcbiAgICBpbWFnZVdpZHRoOiBudW1iZXIsXHJcbiAgICBpbWFnZUhlaWdodDogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZU1ldGFEYXRhID0ge1xyXG4gICAgaW1hZ2VJZDogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBNYXBTaXplIHtcclxuICAgIFNNQUxMLFxyXG4gICAgTUVESVVNLFxyXG4gICAgTEFSR0VcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU2VjdGlvbk1ldGFEYXRhID0ge1xyXG4gICAgc2VjdGlvblVwZGF0ZVRpbWVzdGFtcHM6IEFycmF5PG51bWJlcj4sXHJcbiAgICBzZWN0aW9uV2lkdGg6IG51bWJlcixcclxuICAgIHNlY3Rpb25IZWlnaHQ6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVGlsZXNldERhdGEgPSB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFRpbGVEYXRhID0ge1xyXG4gICAgaXNCbG9ja2luZzogYm9vbGVhbixcclxuICAgIGlkOiBzdHJpbmcsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNwcml0ZUltYWdlRGF0YSA9IHtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQmxvY2tlckRhdGEgPSB7XHJcbiAgICBwbGF5ZXI6IExldmVsQmxvY2tlckRhdGEsXHJcbiAgICBwcm9qZWN0aWxlOiBMZXZlbEJsb2NrZXJEYXRhLFxyXG4gICAgcGxheWVyQW5kUHJvamVjdGlsZTogTGV2ZWxCbG9ja2VyRGF0YSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGV2ZWxJbWFnZURhdGEgPSB7XHJcbiAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICB1cmw6IHN0cmluZyxcclxuICAgIGJsb2NrZXJzOiBCbG9ja2VyRGF0YSxcclxuICAgIHlTb3J0UG9pbnQ6IG51bWJlcixcclxuICAgIHpJbmRleDogbnVtYmVyO1xyXG4gICAgZGF0YT86IGFueSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGREaXNwbGF5T2JqZWN0ID0gUElYSS5EaXNwbGF5T2JqZWN0ICYgeyB3b3JsZFg6IG51bWJlciwgd29ybGRZOiBudW1iZXIgfVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRMZXZlbFNlY3Rpb25EYXRhID0ge1xyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyLFxyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIGxheWVyczogQXJyYXk8U2VjdGlvbkxheWVySW5pdERhdGE+LFxyXG4gICAgdG90YWxMYXllcnM6IG51bWJlcixcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgIHN1YlNlY3Rpb25NYXhMZW5ndGg6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTGV2ZWxTcHJpdGVEYXRhID0ge1xyXG4gICAgc3ByaXRlOiBQSVhJLlNwcml0ZSxcclxuICAgIHdvcmxkWDogbnVtYmVyLFxyXG4gICAgd29ybGRZOiBudW1iZXIsXHJcbiAgICBsYXllckluZGV4OiBudW1iZXIsXHJcbiAgICBzdGF0aWM6IGJvb2xlYW4sXHJcbiAgICBhbmltYXRlZDogYm9vbGVhbixcclxuICAgIHByb3BlcnRpZXM6IEFycmF5PEFycmF5PGFueT4+LFxyXG59XHJcbmV4cG9ydCB0eXBlIEltYWdlQXRsYXNDb2xsaWRlckV4cG9ydERhdGEgPSB7XHJcbiAgICBzaGFwZURhdGE6IFJlY3QgfCBQb2x5Z29uIHwgUG9pbnQsXHJcbiAgICBjb2xsaWRlclR5cGVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgY29tcHV0ZWQ/OiBib29sZWFuLFxyXG4gICAgY29tcHV0ZWRCeT86IHN0cmluZyxcclxufVxyXG5leHBvcnQgdHlwZSBMYXllckRhdGEgPSB7XHJcbiAgICBsYXllckluZGV4OiBudW1iZXIsXHJcbiAgICBsZXZlbExpbmtzOiBBcnJheTxMZXZlbExpbmtEYXRhPixcclxuICAgIGJsb2NrZXJzOiBCbG9ja2VyRGF0YSxcclxuICAgIHRpbGVzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgdGlsZVdpZHRoOiBudW1iZXIsXHJcbiAgICB0aWxlSGVpZ2h0OiBudW1iZXIsXHJcbiAgICBpbWFnZXM6IEFycmF5PHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIGlkOiBzdHJpbmcsIGRhdGE/OiBhbnkgfT4sXHJcbiAgICBpbWFnZUlkQ291bnRMb29rdXA6IHtbaW1hZ2VJZDogc3RyaW5nXTogbnVtYmVyIH0sXHJcbiAgICByb3RhdGVkVGlsZXM6IEFycmF5PHN0cmluZz4sXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFdvcmxkTWV0YUluaXREYXRhID0ge1xyXG4gICAgd29ybGQ6IHN0cmluZyxcclxuICAgIG1hcHM6IEFycmF5PHN0cmluZz4sXHJcbiAgICB0aWxlc2V0czogQXJyYXk8c3RyaW5nPixcclxuICAgIGltYWdlQXRsYXNzZXM6IG51bWJlcixcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgV29ybGRMZXZlbERhdGEgPSB7XHJcbiAgICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgICBzZWN0aW9uVXBkYXRlVGltZXN0YW1wczogQXJyYXk8bnVtYmVyPixcclxuICAgIHNlY3Rpb25zTWV0YURhdGE6IEFycmF5PFNlY3Rpb25NZXRhRGF0YT4sXHJcbiAgICBsZXZlbFdpZHRoOiBudW1iZXIsXHJcbiAgICBsZXZlbEhlaWdodDogbnVtYmVyLFxyXG4gICAgc2VjdGlvbkNvbHVtbnM6IG51bWJlcixcclxuICAgIHNlY3Rpb25Sb3dzOiBudW1iZXIsXHJcbiAgICBsZXZlbE5hbWU6IHN0cmluZyxcclxuICAgIHRpbGVJZENvdW50OiB7WyB0aWxlSWQ6IHN0cmluZyBdOiBudW1iZXIgfSxcclxuICAgIHRpbGVJZFRleHR1cmU6IHtbdGlsZUlkOiBzdHJpbmddOiBQSVhJLlRleHR1cmUgfSxcclxuICAgIGltYWdlRGF0YToge1tpbWFnZUlkOiBzdHJpbmddIDogTGV2ZWxJbWFnZURhdGEgfSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQW5pbWF0aW5nSW1hZ2VTcHJpdGVEYXRhID0geyBbIGFuaW1hdGlvbk5hbWU6IHN0cmluZ106IHsgdGV4dHVyZXM6IEFycmF5PFBJWEkuVGV4dHVyZT4sIGZyYW1lVGltZTogbnVtYmVyIH0gfVxyXG5cclxuZXhwb3J0IHR5cGUgUGxheWVyVmlldyA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodCA6IG51bWJlciB9IiwiaW1wb3J0IHtDb2xsaWRlckRhdGEsIEZsaXBzfSBmcm9tIFwiLi4vLi4vRWRpdG9yQ29yZS9zcmMvdHlwZXNcIjtcclxuaW1wb3J0IHtNYXBTaXplfSBmcm9tIFwiLi9Xb3JsZFJlbmRlcmVyL3R5cGVzXCI7XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGh0dHBHZXRBc3luYyh1cmw6IHN0cmluZywgcGFyc2VKc29uPXRydWUpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgIGNvbnN0IHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIGlmKCFwYXJzZUpzb24pIHtcclxuICAgICAgICB4bWxIdHRwLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgIH1cclxuICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpOyAvLyB0cnVlIGZvciBhc3luY2hyb25vdXNcclxuICAgIHhtbEh0dHAuc2VuZChudWxsKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoeG1sSHR0cC5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VKc29uID8gcmVzb2x2ZShKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KSkgOiByZXNvbHZlKHhtbEh0dHAucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VKc29uID8gcmVqZWN0KEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpKSA6IHJlamVjdCh4bWxIdHRwLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIGh0dHAgZXJyb3IgcmVzcG9uc2UnLCB4bWxIdHRwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlTWFwU2l6ZSh3OiBudW1iZXIsIGg6IG51bWJlcikgOiBNYXBTaXplIHtcclxuICAgIGlmKHcgPD0gMTAyOCAmJiBoIDw9IDEwMjgpIHtcclxuICAgICAgICByZXR1cm4gTWFwU2l6ZS5TTUFMTFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1RPRE86IHdlIGRvbnQgaGF2ZSBhIHJlbmRlciBtZXRob2QgZm9yIGhhbmRsaW5nIG1lZGl1bSB5ZXQgc28gYWx3YXlzIHJldHVybiBsYXJnZSBmb3Igbm93XHJcbiAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcblxyXG4gICAgICAgIGNvbnN0IGFyZWEgPSB3ICogaDtcclxuICAgICAgICBpZihhcmVhID49IDQwMDAwMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hcFNpemUuTEFSR0U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjQgKGFycmF5QnVmZmVyKSB7XHJcbiAgICByZXR1cm4gYnRvYShcclxuICAgICAgICBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcilcclxuICAgICAgICAgICAgLnJlZHVjZSgoZGF0YSwgYnl0ZSkgPT4gZGF0YSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZSksICcnKVxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRleHR1cmVGcm9tQmxvYihibG9iOiBCbG9iKSA6IFByb21pc2U8UElYSS5UZXh0dXJlPiB7XHJcbiAgICBjb25zdCBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7XHJcbiAgICBsZXQgYmxvYlVSTDtcclxuICAgIGxldCBuZWVkUmV2b2tlID0gdHJ1ZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICB9IGNhdGNoKGVycikge1xyXG4gICAgICAgIG5lZWRSZXZva2UgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBiYXNlNjQgPSBidWZmZXJUb0Jhc2U2NChibG9iKTtcclxuICAgICAgICBibG9iVVJMID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0XHJcbiAgICAgICAgLy8gcmV0dXJuIFBJWEkuVGV4dHVyZS5mcm9tKGJhc2U2NCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLnNyYyA9IGJsb2JVUkw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYobmVlZFJldm9rZSkge1xyXG4gICAgICAgICAgICAgICAge1VSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG5ldyBQSVhJLlRleHR1cmUobmV3IFBJWEkuQmFzZVRleHR1cmUoaW1nKSkpO1xyXG4gICAgICAgIH0pOy8vIG9ubG9hZCByZXZva2UgdGhlIGJsb2IgVVJMIChiZWNhdXNlIHRoZSBicm93c2VyIGhhcyBsb2FkZWQgYW5kIHBhcnNlZCB0aGUgaW1hZ2UgZGF0YSlcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGV4dHVyZUZyb21EYXRhVXJsKGRhdGFVcmw6IHN0cmluZykgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgY29uc3QgVVJMID0gd2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMO1xyXG4gICAgbGV0IGJsb2JVUkw7XHJcbiAgICBsZXQgbmVlZFJldm9rZSA9IHRydWU7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaW1nLnNyYyA9IGRhdGFVcmw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3IFBJWEkuVGV4dHVyZShuZXcgUElYSS5CYXNlVGV4dHVyZShpbWcpKSk7XHJcbiAgICAgICAgfSk7Ly8gb25sb2FkIHJldm9rZSB0aGUgYmxvYiBVUkwgKGJlY2F1c2UgdGhlIGJyb3dzZXIgaGFzIGxvYWRlZCBhbmQgcGFyc2VkIHRoZSBpbWFnZSBkYXRhKVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRhdGFVcmxUb1RleHR1cmUoZGF0YVVybCkge1xyXG4gICAgcmV0dXJuIGdldFRleHR1cmVGcm9tQmxvYihkYXRhVVJMdG9CbG9iKGRhdGFVcmwpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFVUkx0b0Jsb2IoZGF0YXVybCkge1xyXG4gICAgbGV0IGFyciA9IGRhdGF1cmwuc3BsaXQoJywnKSwgbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLFxyXG4gICAgICAgIGJzdHIgPSBhdG9iKGFyclsxXSksIG4gPSBic3RyLmxlbmd0aCwgdThhcnIgPSBuZXcgVWludDhBcnJheShuKTtcclxuICAgIHdoaWxlKG4tLSl7XHJcbiAgICAgICAgdThhcnJbbl0gPSBic3RyLmNoYXJDb2RlQXQobik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEJsb2IoW3U4YXJyXSwge3R5cGU6bWltZX0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvbGxpZGVycyhjb2xsaWRlcnM6IENvbGxpZGVyRGF0YSwgZmxpcHM6IEZsaXBzKSB7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlRXh0ZW5zaW9uKGZpbGVOYW1lOiBzdHJpbmcpIDogc3RyaW5nIHtcclxuICAgIHJldHVybiBmaWxlTmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgXCJcIilcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4ZWREQl9lbmFibGVkKCkgOiBib29sZWFuIHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNvbnN0IGluZGV4REJleGlzdHMgPSB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy5tb3pJbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREI7XHJcbiAgICByZXR1cm4gISFpbmRleERCZXhpc3RzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZU1heFRleHR1cmVTaXplKHJlbmRlcmVyOiBQSVhJLkNhbnZhc1JlbmRlcmVyIHwgUElYSS5XZWJHTFJlbmRlcmVyKSB7XHJcbiAgICBpZihyZW5kZXJlci50eXBlID09IDEpIHsgLy8xIGlzIHRoZSB3ZWJnbCByZW5kZXJlci5cclxuICAgICAgICBjb25zdCBtYXhTaXplID0gKDxQSVhJLldlYkdMUmVuZGVyZXI+cmVuZGVyZXIpLmdsLk1BWF9URVhUVVJFX1NJWkU7XHJcbiAgICAgICAgbGV0IGFjdHVhbFNpemU7XHJcbiAgICAgICAgaWYobWF4U2l6ZSA+PSA0MDk2KSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemU9ICAgbWF4U2l6ZSAtIChtYXhTaXplJTQwOTYpO1xyXG4gICAgICAgIH0gZWxzZSBpZihtYXhTaXplID49IDIwNDgpIHtcclxuICAgICAgICAgICAgYWN0dWFsU2l6ZSA9ICAgbWF4U2l6ZSAtIChtYXhTaXplJTIwNDgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobWF4U2l6ZSA+PSAxMDI0KSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAgIG1heFNpemUgLSAobWF4U2l6ZSUxMDI0KTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1heFNpemUgPj0gNTEyKSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAgIG1heFNpemUgLSAobWF4U2l6ZSU1MTIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdHVhbFNpemUgPSAyNTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY3R1YWxTaXplO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gMjA0ODtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVkU2VjdGlvbkxlbmd0aChsZW5ndGgsIG1heExlbmd0aCwgdGlsZVNpemUpIHtcclxuICAgIGxldCBjdXJyZW50TGVuZ3RoO1xyXG5cclxuICAgIGxldCBkaXZpZGVyID0gMTtcclxuXHJcbiAgICBpZihsZW5ndGggPCBtYXhMZW5ndGgpIHtcclxuICAgICAgICBjdXJyZW50TGVuZ3RoID0gbGVuZ3RoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkaXZpZGVyID0gMjtcclxuICAgICAgICB3aGlsZShsZW5ndGggLyBkaXZpZGVyID4gbWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRpdmlkZXIgKj0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3VycmVudExlbmd0aCA9IGxlbmd0aCAvIGRpdmlkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlbWFpbmRlciA9IGN1cnJlbnRMZW5ndGggJSB0aWxlU2l6ZTtcclxuICAgIGxldCBhZGQgPSB0aWxlU2l6ZSAtIHJlbWFpbmRlcjtcclxuXHJcbiAgICBsZXQgbWFpbkxlbmd0aCA9IGN1cnJlbnRMZW5ndGggKyBhZGQ7XHJcblxyXG4gICAgbGV0IG9mZnNldExlbmd0aCA9IE1hdGguYWJzKGN1cnJlbnRMZW5ndGggLSAoYWRkICogKGRpdmlkZXIgLSAxKSkpO1xyXG5cclxuICAgIC8vIGNvbnNvbGUubG9nKCdtYWluIGxlbmd0aCB3YXMnLCBtYWluTGVuZ3RoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdvZmZzZXQgbGVuZ3RoIHdhcycsIG9mZnNldExlbmd0aCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1haW5MZW5ndGgsXHJcbiAgICAgICAgb2Zmc2V0TGVuZ3RoXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU9wdGlvbnMob3B0aW9uczogYW55LCBkZWZhdWx0T3B0aW9uczogYW55LCByZXF1aXJlZFBhcmFtczogQXJyYXk8c3RyaW5nPj1bXSkge1xyXG4gICAgY29uc3QgY3VyT3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xyXG4gICAgZm9yKGxldCBrZXkgaW4gY3VyT3B0aW9ucykge1xyXG4gICAgICAgIGlmKG9wdGlvbnNba2V5XSkge1xyXG4gICAgICAgICAgICBjdXJPcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBtaXNzaW5nUGFyYW1zID0gW107XHJcbiAgICBjb25zdCB1bmRlZmluZWRQYXJhbXMgPSBbXTtcclxuICAgIGNvbnN0IG51bGxQYXJhbXMgPSBbXTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCByZXF1aXJlZFBhcmFtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHJlcXVpcmVkUGFyYW1zW2ldO1xyXG4gICAgICAgIGlmKCEoa2V5IGluIGN1ck9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG1pc3NpbmdQYXJhbXMucHVzaChrZXkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGN1ck9wdGlvbnNba2V5XSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBudWxsUGFyYW1zLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY3VyT3B0aW9uc1trZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdW5kZWZpbmVkUGFyYW1zLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgZXJyb3JTdHJpbmcgPSAnJztcclxuICAgIGVycm9yU3RyaW5nID0gbWlzc2luZ1BhcmFtcy5sZW5ndGggPyBlcnJvclN0cmluZy5jb25jYXQoJ01pc3NpbmcgcGFyYW0gZm91bmQgZm9yIHJlcXVpcmVkIHBhcmFtczonICsgbWlzc2luZ1BhcmFtcy5qb2luKCcsICcpKSA6IGVycm9yU3RyaW5nO1xyXG4gICAgZXJyb3JTdHJpbmcgPSBudWxsUGFyYW1zLmxlbmd0aCA/IGVycm9yU3RyaW5nLmNvbmNhdCgnbnVsbCBwYXJhbSBmb3VuZCBmb3IgcmVxdWlyZWQgcGFyYW1zOicgKyBudWxsUGFyYW1zLmpvaW4oJywgJykpIDogZXJyb3JTdHJpbmc7XHJcbiAgICBlcnJvclN0cmluZyA9IG1pc3NpbmdQYXJhbXMubGVuZ3RoID8gZXJyb3JTdHJpbmcuY29uY2F0KCd1bmRlZmluZWQgcGFyYW0gZm91bmQgZm9yIHJlcXVpcmVkIHBhcmFtczonICsgdW5kZWZpbmVkUGFyYW1zLmpvaW4oJywgJykpIDogZXJyb3JTdHJpbmc7XHJcbiAgICBpZihlcnJvclN0cmluZykge1xyXG4gICAgICAgIHRocm93IGVycm9yU3RyaW5nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGN1ck9wdGlvbnNcclxufSIsIi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHtEZWNvZGVkTWFwTWV0YURhdGEsIERlY29kZXJ9IGZyb20gXCIuLi8uLi8uLi8uLi9FbmNvZGVyL3NyYy9EZWNvZGVyXCI7XHJcblxyXG5jb25zdCBjdHg6IFdvcmtlciA9IHNlbGYgYXMgYW55O1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJwYWNrV29ya2VyIGV4dGVuZHMgV29ya2VyIHsgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgeyAgICAgICAgIHN1cGVyKFwiXCIpOyAgICAgICAgIH0gICAgIH1cclxuaW1wb3J0IHtMb2FkZXJ9IGZyb20gXCIuLi8uLi9saWIvTG9hZGVyXCI7XHJcbmltcG9ydCB7aHR0cEdldEFzeW5jfSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcclxuaW1wb3J0IHtNZXNzYWdlcywgUmVzdWx0Q29kZXN9IGZyb20gXCIuL21lc3NhZ2VzXCI7XHJcbmltcG9ydCB7IG1hcEZpbGVLZXl9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7UlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRX0gZnJvbSBcIi4uLy4uLy4uLy4uL0VkaXRvckNvcmUvc3JjL3R5cGVzXCI7XHJcblxyXG4vL2NvbnN0IGRlY29kZXIgPSBuZXcgQ2h1bmtEZWNvZGVyKCk7XHJcblxyXG5sZXQgZGVjb2RlciA6IERlY29kZXI7XHJcbmxldCBiYXNlVXJsO1xyXG5sZXQgd29ybGRJZDtcclxuY29uc3QgaW5pdENodW5rcyA9IHt9O1xyXG5jb25zdCBzZWNLZXlzID0gW107XHJcblxyXG5sZXQgbG9hZGVyOiBMb2FkZXI7XHJcbmxldCBjdXJNYXAgOiBEZWNvZGVkTWFwTWV0YURhdGE7XHJcbmxldCBjdXJNYXBJZDtcclxuXHJcblxyXG5sZXQgY2FjaGVJbnRlcnZhbCA9IG51bGw7XHJcbmxldCB0aWxlU2VxVG9TaXplTG9va3VwIDogIEFycmF5PHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfT4gPSBbXTtcclxuYXN5bmMgZnVuY3Rpb24gaW5pdChfd29ybGRJZDogc3RyaW5nLCBfYmFzZVVybDogc3RyaW5nLCBfdGlsZVNlcVRvU2l6ZUxvb2t1cDogQXJyYXk8bnVtYmVyPiwgX3NlcUxvb2t1cDoge1tzZXE6IG51bWJlcl06IHN0cmluZ30sIF9wcm9wU2VxVG9OYW1lTG9va3VwOiB7W3NlcTogbnVtYmVyXTogc3RyaW5nfSkge1xyXG4gICAgYmFzZVVybCA9IF9iYXNlVXJsO1xyXG4gICAgd29ybGRJZCA9IF93b3JsZElkO1xyXG5cclxuICAgIC8vIGZvcm1hdCBpdCBhcyB3aWR0aCBoZWlnaHQgb2JqZWN0cy5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBfdGlsZVNlcVRvU2l6ZUxvb2t1cC5sZW5ndGg7IGkrPTIpIHtcclxuICAgICAgICB0aWxlU2VxVG9TaXplTG9va3VwLnB1c2goeyB3aWR0aDogX3RpbGVTZXFUb1NpemVMb29rdXBbaV0sIGhlaWdodDogX3RpbGVTZXFUb1NpemVMb29rdXBbaSsxXX0pXHJcbiAgICB9XHJcbiAgICBkZWNvZGVyID0gbmV3IERlY29kZXIodGlsZVNlcVRvU2l6ZUxvb2t1cCwgX3NlcUxvb2t1cCwgX3Byb3BTZXFUb05hbWVMb29rdXApO1xyXG5cclxuICAgIGxvYWRlciA9IG5ldyBMb2FkZXIoYF9fdHlfXyR7d29ybGRJZH1gKTtcclxuICAgIGF3YWl0IGxvYWRlci5pbml0aWFsaXplKCk7XHJcbiAgICByZXR1cm4gUmVzdWx0Q29kZXMuU1VDQ0VTU1xyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5pdE1hcCh7IG1hcElkLCBkYXRhIH06IHsgbWFwSWQ6IHN0cmluZywgZGF0YTogRGVjb2RlZE1hcE1ldGFEYXRhIH0pIHtcclxuICAgIFsuLi5PYmplY3Qua2V5cyhpbml0Q2h1bmtzKV0uZm9yRWFjaChzID0+IHtcclxuICAgICAgICBkZWxldGUgaW5pdENodW5rc1tzXTtcclxuICAgIH0pO1xyXG4gICAgY3VyTWFwSWQgPSBtYXBJZDtcclxuICAgIGN1ck1hcCA9IGRhdGE7XHJcbiAgICAvKlxyXG4gICAgaWYoY2FjaGVJbnRlcnZhbCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoY2FjaGVJbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBjYWNoZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgbGV0IGxlbiA9IHNlY0tleXMubGVuZ3RoO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB7IHRzIH0gPSBpbml0Q2h1bmtzW3NlY0tleXNbaV1dO1xyXG4gICAgICAgICAgICAvLyBiZWVuIDE1IHNlY29uZHMgc2luY2UgYWNjZXNzaW5nLi4uIGNhbiByZW1vdmUgaXQuXHJcbiAgICAgICAgICAgIGlmKChub3cgLSB0cykgPiAxNTAwMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGluaXRDaHVua3Nbc2VjS2V5c1tpXV07XHJcbiAgICAgICAgICAgICAgICBzZWNLZXlzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgIGxlbi0tO1xyXG4gICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAgKi9cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZENodW5rRGF0YShjaHVua0luZGV4KSA6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBpZighY3VyTWFwKSB0aHJvdyBuZXcgRXJyb3IoJ25vIGN1ciBtYXAuJyk7XHJcbiAgICBpZihpbml0Q2h1bmtzW2NodW5rSW5kZXhdKSB7XHJcbiAgICAgICAgaW5pdENodW5rc1tjaHVua0luZGV4XS50cyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgcmV0dXJuIGluaXRDaHVua3NbY2h1bmtJbmRleF0uc3RyaW5nO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2h1bmtLZXkgID0gYCR7YmFzZVVybH0vJHtjdXJNYXBJZH0vc18ke2NodW5rSW5kZXh9YDtcclxuICAgLy8gY29uc29sZS5sb2coJ1dPUktFUjogdHJ5aW5nIHRvIGxvYWQganNvbiBmb3Igc2VjJywgY2h1bmtLZXkpO1xyXG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBsb2FkZXIubG9hZEFycmF5QnVmZmVyKGNodW5rS2V5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShhd2FpdCBkZWNvZGVyLmRlY29kZUNodW5rKGNodW5rSW5kZXgsIGN1ck1hcC5tYXBXLCBjdXJNYXAubWFwSCwgMTAyNCwgMTAyNCwgUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRSwgUlVOVElNRV9USUxFX0xBWUVSX1NFQ1RJT05fU0laRSwgY3VyTWFwLmxheWVyVGlsZUxheWVyT3JkZXIsIGFycmF5QnVmZmVyKSlcclxuXHJcbiAgICAvKlxyXG4gICAgaW5pdENodW5rc1tjaHVua0luZGV4XSA9IHtcclxuICAgICAgICB0czogRGF0ZS5ub3coKSxcclxuICAgICAgICBzdHJpbmc6IGRhdGFcclxuICAgIH0qL1xyXG5cclxuICAgIHJldHVybiBkYXRhXHJcbn1cclxuXHJcblxyXG4vLyB3ZXJlIGp1c3Qgc3RvcmluZyB0aGUgY2h1bmssIG5vdCBkZWNvZGluZyBpdCBzbyBkb250IG5lZWQgbWFwIG1ldGEgZGF0YSBhdCB0aGlzIHBvaW50LiBpZiB3ZXJlXHJcbi8vIGRlY29kaW5nIGl0IHRoYXQgbWVhbnMgd2Ugc3VjY2VzZnVsbHkgY2FsbGVkIGluaXRNYXAuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRBbmRTYXZlQ2h1bmtzKCBtYXBJZDogc3RyaW5nLCBjaHVua0luZGV4ZXM6IEFycmF5PG51bWJlcj4pIHtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBjaHVua0luZGV4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBzZWNJZHggPSBjaHVua0luZGV4ZXNbaV07XHJcbiAgICAgICAgY29uc3QgY2h1bmtLZXkgID0gYCR7YmFzZVVybH0vJHttYXBJZH0vc18ke3NlY0lkeH1gO1xyXG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgaHR0cEdldEFzeW5jKGNodW5rS2V5LCBmYWxzZSk7XHJcbiAgICAgICAgYXdhaXQgbG9hZGVyLnNhdmVBcnJheUJ1ZmZlcihjaHVua0tleSwgYXJyYXlCdWZmZXIpO1xyXG4gICAgICAgIHJldHVybiBSZXN1bHRDb2Rlcy5TVUNDRVNTO1xyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkQW5kU2F2ZUNodW5rKG1hcElkOiBzdHJpbmcsIGNodW5rSW5kZXg6IG51bWJlcikge1xyXG4gICAgY29uc3QgY2h1bmtLZXkgID0gYCR7YmFzZVVybH0vJHttYXBJZH0vc18ke2NodW5rSW5kZXh9YDtcclxuICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgaHR0cEdldEFzeW5jKGNodW5rS2V5LCBmYWxzZSk7XHJcbiAgICBhd2FpdCBsb2FkZXIuc2F2ZUFycmF5QnVmZmVyKGNodW5rS2V5LCBhcnJheUJ1ZmZlcik7XHJcbiAgICByZXR1cm4gUmVzdWx0Q29kZXMuU1VDQ0VTUztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZEFuZFNhdmVNYXBDaHVua3MobWFwSWQ6IHN0cmluZykgOiBQcm9taXNlPHN0cmluZyB8IFJlc3VsdENvZGVzLkVSUk9SPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG1hcEtleSA9IG1hcEZpbGVLZXkoYmFzZVVybCwgbWFwSWQpO1xyXG4gICAgLy8gICAgY29uc29sZS5sb2coJ1dPUktFUjogbWFwIGtleSB3YXMnLCBtYXBLZXkpXHJcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBodHRwR2V0QXN5bmMobWFwS2V5LCBmYWxzZSk7XHJcbiAgICAgIC8vICBjb25zb2xlLmxvZygnV09SS0VSOiBhcnJheSBidWZmZXJcIjonLCBhcnJheUJ1ZmZlcilcclxuICAgICAgICBjb25zdCB7IGJ1ZmZlcnMsIG1ldGFEYXRhIH0gPSBkZWNvZGVyLmdldENvbXByZXNzZWRDaHVua3NGcm9tTWFwKDEwMjQsIDEwMjQsIGFycmF5QnVmZmVyKTtcclxuICAgIC8vICAgIGNvbnNvbGUubG9nKCdXT1JLRVJTOiBnb3QgYnVmZmVyczonLCBjaHVua0J1ZmZlcnMpXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYnVmZmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaHVua0tleSA9IG1hcEZpbGVLZXkoYmFzZVVybCwgbWFwSWQsIGkpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGxvYWRlci5zYXZlQXJyYXlCdWZmZXIoY2h1bmtLZXksIGJ1ZmZlcnNbaV0pKVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgICAgIC8vICBjb25zb2xlLmxvZygnV09SS0VSOiBzYXZlZCBidWZmZXJzJyk7XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG1ldGFEYXRhKTtcclxuICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIHJldHVybiBSZXN1bHRDb2Rlcy5FUlJPUlxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY3R4Lm9ubWVzc2FnZSA9IGFzeW5jIChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCBzZXEgOiBudW1iZXIgPSBldmVudC5kYXRhWzJdO1xyXG4gICAgY29uc3QgbXNnIDogTWVzc2FnZXMgPSBldmVudC5kYXRhWzFdO1xyXG4gICAgY29uc3QgcGF5bG9hZCA6IGFueSA9IGV2ZW50LmRhdGFbMF07XHJcbiAgICBpZihtc2cgPT09IE1lc3NhZ2VzLlJFUVVFU1RfQU5EX1NBVkVfQUxMX01BUF9DSFVOS1MpIHtcclxuICAgICAgICBjb25zdCBmaW4gPSBhd2FpdCBsb2FkQW5kU2F2ZU1hcENodW5rcyhwYXlsb2FkKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY3R4LnBvc3RNZXNzYWdlKFtmaW4sIHNlcV0gKVxyXG4gICAgfSBlbHNlIGlmIChtc2cgPT09IE1lc3NhZ2VzLkdFVF9TRUNUSU9OX0RBVEEpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgbG9hZENodW5rRGF0YShwYXlsb2FkKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcG9zdE1lc3NhZ2UoW2RhdGEsIHNlcV0pXHJcbiAgICB9IGVsc2UgaWYgKG1zZyA9PT0gTWVzc2FnZXMuUkVRVUVTVF9BTkRfU0FWRV9NQVBfQ0hVTktTKSB7XHJcbiAgICAgICAgY29uc3QgZmluID0gYXdhaXQgbG9hZEFuZFNhdmVDaHVua3MuYXBwbHkobnVsbCwgcGF5bG9hZCk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGN0eC5wb3N0TWVzc2FnZShbZmluLCBzZXFdKTtcclxuICAgIH0gZWxzZSBpZiAobXNnID09PSBNZXNzYWdlcy5SRVFVRVNUX0FORF9TQVZFX1NJTkdMRV9NQVBfQ0hVTkspIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgbG9hZEFuZFNhdmVDaHVuay5hcHBseShudWxsLCBwYXlsb2FkKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgY3R4LnBvc3RNZXNzYWdlKFtkYXRhLCBzZXFdKVxyXG4gICAgfSBpZiAobXNnID09PSBNZXNzYWdlcy5JTklUX0xPQURFUikge1xyXG4gICAgICAgIGNvbnN0IGZpbiA9IGF3YWl0IGluaXQuYXBwbHkobnVsbCwgIEpTT04ucGFyc2UocGF5bG9hZCkpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBjdHgucG9zdE1lc3NhZ2UoW2Zpbiwgc2VxXSlcclxuICAgIH0gZWxzZSBpZiAobXNnID09PSBNZXNzYWdlcy5JTklUX01BUCkge1xyXG4gICAgICAgIGNvbnN0IGZpbiA9IGF3YWl0IGluaXRNYXAoSlNPTi5wYXJzZShwYXlsb2FkKSk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGN0eC5wb3N0TWVzc2FnZShbZmluLCBzZXFdKVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgRmFzdEludGVnZXJDb21wcmVzc2lvbiBmcm9tIFwiLi4vLi4vdXRpbHMvRmFzdENvbXByZXNzaW9uXCI7XHJcbmltcG9ydCB7XHJcbiAgICBMaW5lLFxyXG4gICAgUG9pbnQsXHJcbiAgICBQb2x5Z29uLFxyXG4gICAgUmVjdCxcclxuICAgIFJFU0VSVkVEX0ZMQUdTLFxyXG59IGZyb20gXCIuLi8uLi9FZGl0b3JDb3JlL3NyYy90eXBlc1wiO1xyXG5pbXBvcnQge2NhbGN1bGF0ZUVuZE9mQ2h1bmssIGNhbGN1bGF0ZVN1YkNodW5rcywgZ2V0VG9wTGVmdFBhZGRpbmd9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7Q2lyY2xlLCBDb2xsaWRlckRhdHVtLCBSdW50aW1lQ29sbGlkZXJTaGFwZX0gZnJvbSBcIi4uLy4uL1J1bnRpbWUvc3JjL1dvcmxkUmVuZGVyZXIvdHlwZXNcIjtcclxuXHJcblxyXG5leHBvcnQgdHlwZSBEZWNvZGVkTWFwTWV0YURhdGEgPSB7XHJcbiAgICBtYXBXOiBudW1iZXIsXHJcbiAgICBtYXBIOiBudW1iZXIsXHJcbiAgICBsYXllclRpbGVMYXllck9yZGVyOiBBcnJheTxBcnJheTxudW1iZXI+PixcclxuICAgIHN0YXJ0aW5nQ2h1bmtJbmRleDogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIERlY29kZWRNYXBDaHVua0RhdGEgPSB7XHJcbiAgICBpbmRleDogbnVtYmVyLFxyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyLFxyXG4gICAgd2lkdGg6IG51bWJlcixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgbGF5ZXJzOiBBcnJheTxEZWNvZGVkTWFwQ2h1bmtMYXllckRhdGE+LFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBEZWNvZGVkQ29sbGlkZXJEYXRhID0ge1xyXG4gICAgcmVjdHM/OiBBcnJheTxDb2xsaWRlckRhdHVtPFJlY3Q+PjtcclxuICAgIHBvbHlnb25zPzogQXJyYXk8Q29sbGlkZXJEYXR1bTxQb2x5Z29uPj47XHJcbiAgICBwb2ludHM/OiBBcnJheTxDb2xsaWRlckRhdHVtPFBvaW50Pj47XHJcbiAgICBjaXJjbGVzPzogQXJyYXk8Q29sbGlkZXJEYXR1bTxDaXJjbGU+PjtcclxuICAgIGxpbmVzPzogQXJyYXk8Q29sbGlkZXJEYXR1bTxMaW5lPj5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgRGVjb2RlZE1hcENodW5rTGF5ZXJEYXRhID0ge1xyXG4gICAgbGF5ZXJJZDogbnVtYmVyLFxyXG4gICAgY29sbGlkZXJzPzogRGVjb2RlZENvbGxpZGVyRGF0YSxcclxuICAgIHRpbGVMYXllcnM/OiBBcnJheTx7XHJcbiAgICAgICAgbWF4VGlsZUlkOiBudW1iZXIsXHJcbiAgICAgICAgdGlsZVdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgdGlsZUhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgIHRpbGVTaXplU2VxOiBudW1iZXIsXHJcbiAgICAgICAgc3ViQ2h1bmtzOiBBcnJheTxBcnJheTxudW1iZXI+PlxyXG4gICAgfT4sXHJcbiAgICAvLyB4LCB5LCB6XHJcbiAgICBpbWFnZXM/OiB7W2ltYWdlSWQ6IHN0cmluZ106IEFycmF5PG51bWJlcj4gfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGVjb2RlciB7XHJcbiAgICBwcml2YXRlIHByb3BTZXFUb05hbWVMb29rdXA6IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9ID0ge307XHJcbiAgICBwcml2YXRlIHRpbGVJZFRvU2l6ZUxvb2t1cDogQXJyYXk8e3dpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyfT4gPSBbXTtcclxuICAgIHByaXZhdGUgdGFnU2VxVG9TdHJpbmdMb29rdXA6IHtbdGFnU2VxOiBudW1iZXJdOiBzdHJpbmd9ID0ge307XHJcbiAgICBjb25zdHJ1Y3Rvcih0aWxlSWRUb1NpemVMb29rdXA6IEFycmF5PHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfT4sIHRhZ1NlcVRvU3RyaW5nTG9va3VwOiB7W3RhZ1NlcTogbnVtYmVyXTogc3RyaW5nfSwgcHJvcFNlcVRvTmFtZUxvb2t1cD86IHtbc2VxOiBudW1iZXJdOiBzdHJpbmd9KSB7XHJcbiAgICAgICAgdGhpcy50aWxlSWRUb1NpemVMb29rdXAgPSB0aWxlSWRUb1NpemVMb29rdXA7XHJcbiAgICAgICAgdGhpcy50YWdTZXFUb1N0cmluZ0xvb2t1cCA9IHRhZ1NlcVRvU3RyaW5nTG9va3VwO1xyXG4gICAgICAgIHRoaXMucHJvcFNlcVRvTmFtZUxvb2t1cCA9IHByb3BTZXFUb05hbWVMb29rdXAgfHwge307XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlY29kZU1ldGFEYXRhKGNodW5rQXJyYXk6IEFycmF5PG51bWJlcj4pIDogRGVjb2RlZE1hcE1ldGFEYXRhIHtcclxuICAgICAgICBjb25zdCBtYXBXID0gY2h1bmtBcnJheVswXTtcclxuICAgICAgICBjb25zdCBtYXBIID0gY2h1bmtBcnJheVsxXTtcclxuXHJcbiAgICAgICAgbGV0IGN1ckNoZWNrSW5kZXggPSAyO1xyXG5cclxuICAgICAgICBsZXQgY3VyTGF5ZXIgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBsYXllclRpbGVMYXllck9yZGVyOiBBcnJheTxBcnJheTxudW1iZXI+PiA9IFtdO1xyXG5cclxuICAgICAgICAvLyBzdGFydCBhdCAxIHNpbmNlIHdlIGRvbnQgcHV0IGEgYmxvYiBzZXBlcmF0b3IgZmxhZyBhZnRlciBtYXBXIGFuZCBtYXBIXHJcbiAgICAgICAgbGV0IGZvdW5kU2VwZXJhdG9ycyA9IDE7XHJcbiAgICAgICAgbGV0IHN0YXJ0aW5nQ2h1bmtJbmRleDtcclxuICAgICAgICB3aGlsZSh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmKGNodW5rQXJyYXlbY3VyQ2hlY2tJbmRleF0gPT09IFJFU0VSVkVEX0ZMQUdTLkJMT0JfU0VQQVJBVE9SKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZFNlcGVyYXRvcnMrKztcclxuICAgICAgICAgICAgICAgIGlmKGZvdW5kU2VwZXJhdG9ycyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0aW5nQ2h1bmtJbmRleCA9IGN1ckNoZWNrSW5kZXgrMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKGZvdW5kU2VwZXJhdG9ycyA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNodW5rQXJyYXlbY3VyQ2hlY2tJbmRleF0gPT09IFJFU0VSVkVEX0ZMQUdTLkVNUFRZX1NFQ1RJT05fRkxBRykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllclRpbGVMYXllck9yZGVyLnB1c2gobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJUaWxlTGF5ZXJPcmRlci5wdXNoKFtjaHVua0FycmF5W2N1ckNoZWNrSW5kZXhdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckxheWVyID0gbGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kU2VwZXJhdG9ycyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyVGlsZUxheWVyT3JkZXJbY3VyTGF5ZXJdLnB1c2goY2h1bmtBcnJheVtjdXJDaGVja0luZGV4XSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJDaGVja0luZGV4Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYXBXLFxyXG4gICAgICAgICAgICBtYXBILFxyXG4gICAgICAgICAgICBzdGFydGluZ0NodW5rSW5kZXgsXHJcbiAgICAgICAgICAgIGxheWVyVGlsZUxheWVyT3JkZXJcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhZGp1c3ROZWcocG9pbnQ6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSAmIGFueSkgOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gJiBhbnkge1xyXG4gICAgICAgIGlmKHBvaW50LnggPiBSRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVIpIHtcclxuICAgICAgICAgICAgcG9pbnQueCAgJj0gflJFU0VSVkVEX0ZMQUdTLk5FR0FUSVZFX05VTUJFUjtcclxuICAgICAgICAgICAgcG9pbnQueCAgKj0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBvaW50LnkgPiBSRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVIpIHtcclxuICAgICAgICAgICAgcG9pbnQueSAgJj0gflJFU0VSVkVEX0ZMQUdTLk5FR0FUSVZFX05VTUJFUjtcclxuICAgICAgICAgICAgcG9pbnQueSAgKj0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb2ludDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZGVjb2RlU3RyaW5nKHN0YXJ0SW5kZXg6IG51bWJlciwgZW5jb2RlZEFycmF5OiBBcnJheTxudW1iZXI+KSA6IHsgZGVjb2RlZFN0cmluZzogc3RyaW5nLCBlbmRJbmRleDogbnVtYmVyIH0ge1xyXG4gICAgICAgIGxldCBkZWNvZGVkU3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICAgICAgbGV0IGN1ckludCA9IGVuY29kZWRBcnJheVtzdGFydEluZGV4KytdO1xyXG4gICAgICAgIHdoaWxlKGN1ckludCAhPSBSRVNFUlZFRF9GTEFHUy5JTUFHRV9BTkRfU1RSSU5HX1NFUEVSQVRPUikge1xyXG4gICAgICAgICAgICBkZWNvZGVkU3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY3VySW50KTtcclxuICAgICAgICAgICAgY3VySW50ID0gZW5jb2RlZEFycmF5W3N0YXJ0SW5kZXgrK11cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtkZWNvZGVkU3RyaW5nLCBlbmRJbmRleDogc3RhcnRJbmRleCB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWNvZGVQcm9wU3RyaW5ncyhzdGFydEluZGV4OiBudW1iZXIsIGFycmF5OiBBcnJheTxudW1iZXI+KSA6IHsgZW5kSW5kZXg6IG51bWJlciwgcHJvcHM6IHtbcHJvcE5hbWU6IHN0cmluZ106IHN0cmluZyB9IH0ge1xyXG4gICAgICAgIGNvbnN0IHByb3BzID0ge307XHJcbiAgICAgICAgbGV0IGN1cnJlbnRQcm9wTmFtZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IGN1ciA9IGFycmF5W3N0YXJ0SW5kZXhdXHJcbiAgICAgICAgd2hpbGUoY3VyICE9IFJFU0VSVkVEX0ZMQUdTLkJMT0JfU0VQQVJBVE9SKSB7XHJcbiAgICAgICAgICAgIGlmKGN1ciA9PSBSRVNFUlZFRF9GTEFHUy5JTUFHRV9BTkRfU1RSSU5HX1NFUEVSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFByb3BOYW1lID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGN1ciA9IGFycmF5Wysrc3RhcnRJbmRleF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFByb3BOYW1lID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJvcE5hbWUgPSB0aGlzLnByb3BTZXFUb05hbWVMb29rdXBbY3VyXTtcclxuICAgICAgICAgICAgICAgIGlmKCFjdXJyZW50UHJvcE5hbWUpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgcHJvcGApXHJcbiAgICAgICAgICAgICAgICBwcm9wc1tjdXJyZW50UHJvcE5hbWVdID0gJyc7XHJcbiAgICAgICAgICAgICAgICBjdXIgPSBhcnJheVsrK3N0YXJ0SW5kZXhdXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wc1tjdXJyZW50UHJvcE5hbWVdICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY3VyKTtcclxuICAgICAgICAgICAgICAgIGN1ciA9IGFycmF5Wysrc3RhcnRJbmRleF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBlbmRJbmRleDogc3RhcnRJbmRleCsxLCBwcm9wcyB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGRlY29kZVByb3BOdW1iZXJzKHN0YXJ0SW5kZXg6IG51bWJlciwgYXJyYXk6IEFycmF5PG51bWJlcj4pIDogeyBlbmRJbmRleDogbnVtYmVyLCBwcm9wczoge1twcm9wTmFtZTogc3RyaW5nXTogbnVtYmVyIH0gfSB7XHJcbiAgICAgLy8gICBjb25zb2xlLmxvZygndGhlIHByb3AgdG8gc2VxIHdhcycsIHRoaXMucHJvcFNlcVRvTmFtZUxvb2t1cCk7XHJcbiAgICAgICAgY29uc3QgcHJvcHMgPSB7fTtcclxuICAgICAgICBsZXQgY3VyID0gYXJyYXlbc3RhcnRJbmRleF07XHJcbiAgICAgICAgd2hpbGUoY3VyICE9IFJFU0VSVkVEX0ZMQUdTLkJMT0JfU0VQQVJBVE9SKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BOYW1lID0gdGhpcy5wcm9wU2VxVG9OYW1lTG9va3VwW2FycmF5W3N0YXJ0SW5kZXgrK11dO1xyXG4gICAgICAgICAgICAgaWYoIXByb3BOYW1lKSB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3QgZmluZCBzZXEuYClcclxuICAgICAgICAgICAgbGV0IHByb3BWYWx1ZSA9IGFycmF5W3N0YXJ0SW5kZXgrK107XHJcbiAgICAgICAgICAgIGlmKHByb3BWYWx1ZSA+IFJFU0VSVkVEX0ZMQUdTLk5FR0FUSVZFX05VTUJFUikge1xyXG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlICY9IH5SRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVI7XHJcbiAgICAgICAgICAgICAgICBwcm9wVmFsdWUgICo9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxyXG4gICAgICAgICAgICBjdXIgPSBhcnJheVtzdGFydEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgrMSwgcHJvcHMgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkZWNvZGVQcm9wQm9vbGVhbnMoc3RhcnRJbmRleDogbnVtYmVyLCBhcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGVuZEluZGV4OiBudW1iZXIsIHByb3BzOiB7W3Byb3BOYW1lOiBzdHJpbmddOiBib29sZWFuIH0gfXtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IHt9O1xyXG4gICAgICAgIGxldCBjdXIgPSBhcnJheVtzdGFydEluZGV4XTtcclxuICAgICAgICB3aGlsZShjdXIgIT0gUkVTRVJWRURfRkxBR1MuQkxPQl9TRVBBUkFUT1IpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvcE5hbWUgPSB0aGlzLnByb3BTZXFUb05hbWVMb29rdXBbYXJyYXlbc3RhcnRJbmRleCsrXV07XHJcbiAgICAgICAgICAgIGlmKCFwcm9wTmFtZSkgdGhyb3cgbmV3IEVycm9yKGBEaWQgbm90IGZpbmQgc2VxLmApXHJcbiAgICAgICAgICAgIGxldCBwcm9wVmFsdWUgPSAhIWFycmF5W3N0YXJ0SW5kZXgrK107XHJcbiAgICAgICAgICAgIHByb3BzW3Byb3BOYW1lXSA9IHByb3BWYWx1ZVxyXG4gICAgICAgICAgICBjdXIgPSBhcnJheVtzdGFydEluZGV4XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgrMSwgcHJvcHMgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlUG9seWdvbihzdGFydEluZGV4OiBudW1iZXIsIGVuY29kZWRBcnJheTogQXJyYXk8bnVtYmVyPikgOiAgeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UG9seWdvbj4sIGVuZEluZGV4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IGN1ckluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICBjb25zdCBtYXBTZXEgPSBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK107XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXJUYWdDb3VudCA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICBsZXQgZm91bmRQb2ludHMgPSBbXTtcclxuICAgICAgICBjb25zdCBwb2ludENvdW50ID0gZW5jb2RlZEFycmF5W2N1ckluZGV4KytdO1xyXG4gICAgICAgIHdoaWxlIChmb3VuZFBvaW50cy5sZW5ndGggPCBwb2ludENvdW50KSB7XHJcbiAgICAgICAgICAgIGZvdW5kUG9pbnRzLnB1c2godGhpcy5hZGp1c3ROZWcoe3g6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSwgeTogZW5jb2RlZEFycmF5W2N1ckluZGV4KytdfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBmaW5hbE9iajogeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UG9seWdvbj4sIGVuZEluZGV4OiBudW1iZXIgfSA9IHtcclxuICAgICAgICAgICAgY29sT2JqOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogbWFwU2VxLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZS5QT0xZR09OLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVEYXRhOiBmb3VuZFBvaW50cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW5kSW5kZXg6IGN1ckluZGV4XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVjb2RlQ29sbGlkZXJUYWdzQW5kUHJvcHMoZmluYWxPYmosIGNvbGxpZGVyVGFnQ291bnQsIGVuY29kZWRBcnJheSwgY3VySW5kZXgpXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlUHJvcHMoc3RhcnRJbmRleDogbnVtYmVyLCBudW1iZXJBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IHByb3BzPzogeyBbcHJvcDogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB9LCBlbmRBdEluZGV4OiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IGZpbmFsUHJvcHMgOiBhbnkgPSB7fTtcclxuICAgICAgICBsZXQgcHJvcHM6IGFueTtcclxuICAgICAgICBpZihudW1iZXJBcnJheVtzdGFydEluZGV4XSA9PT0gUkVTRVJWRURfRkxBR1MuRU1QVFlfU0VDVElPTl9GTEFHKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGVuZEF0SW5kZXg6IHN0YXJ0SW5kZXggKyAxIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgKHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgsIHByb3BzIH0gPSB0aGlzLmRlY29kZVByb3BCb29sZWFucyhzdGFydEluZGV4LCBudW1iZXJBcnJheSkpO1xyXG4gICAgICAgIGZpbmFsUHJvcHMgPSB7Li4uZmluYWxQcm9wcywgLi4ucHJvcHMgfTtcclxuICAgICAgICAoeyBlbmRJbmRleDogc3RhcnRJbmRleCwgcHJvcHMgfSA9IHRoaXMuZGVjb2RlUHJvcE51bWJlcnMoc3RhcnRJbmRleCwgbnVtYmVyQXJyYXkpKTtcclxuICAgICAgICBmaW5hbFByb3BzID0geyAuLi5maW5hbFByb3BzLCAuLi5wcm9wc307XHJcbiAgICAgICAgKHsgZW5kSW5kZXg6IHN0YXJ0SW5kZXgsIHByb3BzIH0gPSB0aGlzLmRlY29kZVByb3BTdHJpbmdzKHN0YXJ0SW5kZXgsIG51bWJlckFycmF5KSk7XHJcbiAgICAgICAgZmluYWxQcm9wcyA9IHsgLi4uZmluYWxQcm9wcywgLi4ucHJvcHN9O1xyXG4gICAgICAgIHJldHVybiB7IHByb3BzOiBmaW5hbFByb3BzLCBlbmRBdEluZGV4OiBzdGFydEluZGV4IH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBtYXBUYWdzKHRhZ3M6IEFycmF5PG51bWJlcj4pIDogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIHRhZ3MubWFwKHQgPT4ge1xyXG4gICAgICAgICAgICBpZighKHQgaW4gdGhpcy50YWdTZXFUb1N0cmluZ0xvb2t1cCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdGFnIHNlcSAke3R9IGluIGxvb2t1cC5gKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ1NlcVRvU3RyaW5nTG9va3VwW3RdO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWNvZGVSZWN0KHN0YXJ0SW5kZXg6IG51bWJlciwgZW5jb2RlZEFycmF5OiBBcnJheTxudW1iZXI+KSA6IHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFJlY3Q+LCBlbmRJbmRleDogbnVtYmVyIH0gICB7XHJcbiAgICAgICAgbGV0IGN1ckluZGV4ID0gc3RhcnRJbmRleDtcclxuICAgICAgICBjb25zdCBtYXBTZXEgPSBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK107XHJcbiAgICAgICAgY29uc3QgY29sbGlkZXJUYWdDb3VudCA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICBjb25zdCByZWN0IDogUmVjdCA9IHRoaXMuYWRqdXN0TmVnKHtcclxuICAgICAgICAgICAgeDogZW5jb2RlZEFycmF5W2N1ckluZGV4KytdLFxyXG4gICAgICAgICAgICB5OiBlbmNvZGVkQXJyYXlbY3VySW5kZXgrK10sXHJcbiAgICAgICAgICAgIHc6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSxcclxuICAgICAgICAgICAgaDogZW5jb2RlZEFycmF5W2N1ckluZGV4KytdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpbmFsT2JqIDogeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UmVjdD4sIGVuZEluZGV4OiBudW1iZXIgfSA9IHtcclxuICAgICAgICAgICAgY29sT2JqOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogbWFwU2VxLFxyXG4gICAgICAgICAgICAgICAgc2hhcGVUeXBlOiBSdW50aW1lQ29sbGlkZXJTaGFwZS5SRUNULFxyXG4gICAgICAgICAgICAgICAgc2hhcGVEYXRhOiByZWN0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbmRJbmRleDogY3VySW5kZXgsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVjb2RlQ29sbGlkZXJUYWdzQW5kUHJvcHMoZmluYWxPYmosIGNvbGxpZGVyVGFnQ291bnQsIGVuY29kZWRBcnJheSwgY3VySW5kZXgpXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlQ29sbGlkZXJUYWdzQW5kUHJvcHMoZmluYWxPYmo6IHsgY29sT2JqOiBDb2xsaWRlckRhdHVtPFJlY3QgfCBQb2ludCB8IFBvbHlnb24+LCBlbmRJbmRleDogbnVtYmVyIH0sIGNvbGxpZGVyVGFnQ291bnQsIGVuY29kZWRBcnJheSwgc3RhcnRJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGFncywgZW5kQXRJbmRleDogdGFnRW5kZWRJbmRleCB9ID0gdGhpcy5kZWNvZGVUYWdzKGNvbGxpZGVyVGFnQ291bnQsIGVuY29kZWRBcnJheSwgc3RhcnRJbmRleCk7XHJcbiAgICAgICAgaWYodGFncykgZmluYWxPYmouY29sT2JqLnRhZ3MgPSB0YWdzO1xyXG4gICAgICAgIGZpbmFsT2JqLmVuZEluZGV4ID0gdGFnRW5kZWRJbmRleDtcclxuICAgICAgICBjb25zdCB7IGVuZEF0SW5kZXgsIHByb3BzIH0gPSB0aGlzLmRlY29kZVByb3BzKHRhZ0VuZGVkSW5kZXgsIGVuY29kZWRBcnJheSlcclxuICAgICAgICBpZihwcm9wcykgZmluYWxPYmouY29sT2JqLnByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgZmluYWxPYmouZW5kSW5kZXggPSBlbmRBdEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlVGFncyhjb2xsaWRlclRhZ0NvdW50LCBlbmNvZGVkQXJyYXksIGN1ckluZGV4KSA6IHsgdGFncz86IEFycmF5PHN0cmluZz4sIGVuZEF0SW5kZXg6IG51bWJlciB9IHtcclxuICAgICAgICBsZXQgdGFncztcclxuICAgICAgICBpZighY29sbGlkZXJUYWdDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBlbmRBdEluZGV4OiBjdXJJbmRleCB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhZ3MgPSBbXTtcclxuICAgICAgICB3aGlsZSh0YWdzLmxlbmd0aCA8IGNvbGxpZGVyVGFnQ291bnQpIHtcclxuICAgICAgICAgICAgdGFncy5wdXNoKGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgdGFnczogdGhpcy5tYXBUYWdzKHRhZ3MpLCBlbmRBdEluZGV4OiBjdXJJbmRleCB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZWNvZGVQb2ludChzdGFydEluZGV4OiBudW1iZXIsIGVuY29kZWRBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGNvbE9iajogQ29sbGlkZXJEYXR1bTxQb2ludD4sIGVuZEluZGV4OiBudW1iZXIgfSAgIHtcclxuICAgICAgICBsZXQgY3VySW5kZXggPSBzdGFydEluZGV4O1xyXG4gICAgICAgIGNvbnN0IG1hcFNlcSA9IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXTtcclxuICAgICAgICBjb25zdCBjb2xsaWRlclRhZ0NvdW50ID0gZW5jb2RlZEFycmF5W2N1ckluZGV4KytdO1xyXG4gICAgICAgIGNvbnN0IHBvaW50IDogUG9pbnQgPSB0aGlzLmFkanVzdE5lZyh7XHJcbiAgICAgICAgICAgIHg6IGVuY29kZWRBcnJheVtjdXJJbmRleCsrXSxcclxuICAgICAgICAgICAgeTogZW5jb2RlZEFycmF5W2N1ckluZGV4KytdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsT2JqIDogeyBjb2xPYmo6IENvbGxpZGVyRGF0dW08UG9pbnQ+LCBlbmRJbmRleDogbnVtYmVyIH0gPSB7XHJcbiAgICAgICAgICAgIGNvbE9iajoge1xyXG4gICAgICAgICAgICAgICAgaWQ6IG1hcFNlcSxcclxuICAgICAgICAgICAgICAgIHNoYXBlVHlwZTogUnVudGltZUNvbGxpZGVyU2hhcGUuUE9JTlQsXHJcbiAgICAgICAgICAgICAgICBzaGFwZURhdGE6IHBvaW50LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbmRJbmRleDogY3VySW5kZXgsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVjb2RlQ29sbGlkZXJUYWdzQW5kUHJvcHMoZmluYWxPYmosIGNvbGxpZGVyVGFnQ291bnQsIGVuY29kZWRBcnJheSwgY3VySW5kZXgpXHJcbiAgICAgICAgcmV0dXJuIGZpbmFsT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVjb2RlQ29sbGlkZXIodHlwZTogc3RyaW5nLCBzdGFydEluZGV4OiBudW1iZXIsIGVuY29kZWRBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7IGNvbE9iajogQ29sbGlkZXJEYXR1bTxSZWN0IHwgUG9seWdvbiB8IFBvaW50PiwgZW5kSW5kZXg6IG51bWJlciB9IHtcclxuICAgICAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdwb2x5Z29ucyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVQb2x5Z29uKHN0YXJ0SW5kZXgsIGVuY29kZWRBcnJheSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlY3RzJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZVJlY3Qoc3RhcnRJbmRleCwgZW5jb2RlZEFycmF5KTtcclxuICAgICAgICAgICAgY2FzZSAncG9pbnRzJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZVBvaW50KHN0YXJ0SW5kZXgsIGVuY29kZWRBcnJheSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaGFuZGxlZCB0eXBlICR7dHlwZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIHRha2VzIHRoZSBjaHVuayBhcnJheSBhbmQgZGVjb2RlcyBhbGwgdGhlIGNvbGxpc2lvbnMgZm9yIGVhY2ggbGF5ZXJcclxuICAgIC8vIHJldHVybnMgd2hlcmUgaXQgZmluaXNoZWQgb24gdGhlIGFycmF5LCBhcyB3ZWxsIGFzIGFuIGFycmF5IGZvciB0aGUgbGF5ZXJzLCBlYWNoIGhhdmluZyBhIGRlY29kZWQgY29sbGlkZXIgb2JqZWN0cy5cclxuICAgIHB1YmxpYyBkZWNvZGVDb2xsaWRlcnMoc3RhcnRJbmRleDogbnVtYmVyLCBlbmNvZGVkQXJyYXk6IEFycmF5PG51bWJlcj4sIGxheWVyQ291bnQ6IG51bWJlcikgOiB7IGRlY29kZWQ6IEFycmF5PERlY29kZWRDb2xsaWRlckRhdGE+LCBlbmRJbmRleDogbnVtYmVyIH0gIHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gbmV3IEFycmF5KGxheWVyQ291bnQpO1xyXG4gICAgICAgIGxldCBmb3VuZENvbGxpZGVycyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBjdXJMYXllciA9IDA7XHJcbiAgICAgICAgY29uc3QgdHlwZXMgPSBbJ3BvaW50cycsICdyZWN0cycsICdwb2x5Z29ucyddO1xyXG4gICAgICAgIGxldCBjdXJJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICAgICAgd2hpbGUoY3VyTGF5ZXIgPCBsYXllckNvdW50KSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJUeXBlSWR4ID0gMDtcclxuICAgICAgICAgICAgd2hpbGUoY3VyVHlwZUlkeCA8IHR5cGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlY29kZWRDb2xsaWRlcnMgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4cGVjdGVkQ29sbGlkZXJzID0gZW5jb2RlZEFycmF5W2N1ckluZGV4KytdO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUoZGVjb2RlZENvbGxpZGVycyA8IGV4cGVjdGVkQ29sbGlkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRDb2xsaWRlcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFkZWNvZGVkW2N1ckxheWVyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkW2N1ckxheWVyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZighZGVjb2RlZFtjdXJMYXllcl1bdHlwZXNbY3VyVHlwZUlkeF1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRbY3VyTGF5ZXJdW3R5cGVzW2N1clR5cGVJZHhdXSA9IG5ldyBBcnJheShleHBlY3RlZENvbGxpZGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZW5kSW5kZXgsIGNvbE9iaiB9ID0gdGhpcy5kZWNvZGVDb2xsaWRlcih0eXBlc1tjdXJUeXBlSWR4XSwgY3VySW5kZXgsIGVuY29kZWRBcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VySW5kZXggPSBlbmRJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBkZWNvZGVkW2N1ckxheWVyXVt0eXBlc1tjdXJUeXBlSWR4XV1bZGVjb2RlZENvbGxpZGVyc109Y29sT2JqO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlY29kZWRDb2xsaWRlcnMrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1clR5cGVJZHgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJMYXllcisrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgZGVjb2RlZDogZm91bmRDb2xsaWRlcnMgPyBkZWNvZGVkIDogbnVsbCwgZW5kSW5kZXg6IGN1ckluZGV4IH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNwbGl0cyBhIGNodW5rIGFycmF5IGludG8gdHdvIGFycmF5cyB0aGF0IGNvbnRhaW4gdGhlIHRpbGUgZGF0YSBhbmQgaW1hZ2UgZGF0YSBwZXIgbGF5ZXIuXHJcbiAgICAgKiBAcGFyYW0gY2h1bmtBcnJheVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNwbGl0Q2h1bmtBcnJheUxheWVycyhjaHVua0FycmF5OiBBcnJheTxudW1iZXI+LCBsYXllclRpbGVMYXllck9yZGVyOiBBcnJheTxBcnJheTxudW1iZXI+PikgOiB7IHRpbGVBcnJheXM6IEFycmF5PEFycmF5PEFycmF5PG51bWJlcj4+PiwgaW1hZ2VzPzogQXJyYXk8QXJyYXk8bnVtYmVyPj4sIGNvbGxpZGVycz86IEFycmF5PERlY29kZWRDb2xsaWRlckRhdGE+IH0ge1xyXG4gICAgICAgIGNvbnN0IHRpbGVBcnJheXMgPSBuZXcgQXJyYXkobGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IG5ldyBBcnJheShsYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCk7XHJcbiAgICAgICAgbGV0IGN1ckVsZW1lbnRJbmRleCA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaW1hZ2VzW2ldID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbGVMYXllcklkcyA9IGxheWVyVGlsZUxheWVyT3JkZXJbaV07XHJcbiAgICAgICAgICAgIGlmKHRpbGVMYXllcklkcyAmJiB0aWxlTGF5ZXJJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlQXJyYXlzW2ldID0gW107XHJcbiAgICAgICAgICAgICAgICB0aWxlTGF5ZXJJZHMuZm9yRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUFycmF5c1tpXS5wdXNoKFtdKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZm91bmRUaWxlQmxvYlNlcGVyYXRvcnMgPSAwO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUoZm91bmRUaWxlQmxvYlNlcGVyYXRvcnMgPCB0aWxlTGF5ZXJJZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2h1bmtBcnJheVtjdXJFbGVtZW50SW5kZXhdID09PSBSRVNFUlZFRF9GTEFHUy5CTE9CX1NFUEFSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFRpbGVCbG9iU2VwZXJhdG9ycysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVBcnJheXNbaV1bZm91bmRUaWxlQmxvYlNlcGVyYXRvcnNdLnB1c2goY2h1bmtBcnJheVtjdXJFbGVtZW50SW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyRWxlbWVudEluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlQXJyYXlzW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGN1ckxheWVyRm9ySW1hZ2UgPSAwO1xyXG4gICAgICAgIGxldCBmb3VuZEltYWdlcyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBuZXh0VmFsdWVJc0ltYWdlQ291bnQgPSB0cnVlO1xyXG4gICAgICAgIGxldCB2YWx1ZTtcclxuICAgICAgICBsZXQgY3VySW1nSSA9IDA7XHJcbiAgICAgICAgbGV0IG9uSW1nU2VwID0gdHJ1ZTtcclxuICAgICAgICBsZXQgYWFhID0gMDtcclxuICAgICAgICBsZXQgZnVja2luZ0EgPSBmYWxzZTtcclxuICAgICAgICB3aGlsZShjdXJMYXllckZvckltYWdlIDwgbGF5ZXJUaWxlTGF5ZXJPcmRlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IGxvZyA9IGNodW5rQXJyYXlbY3VyRWxlbWVudEluZGV4KzFdID09IDUgJiYgY2h1bmtBcnJheVtjdXJFbGVtZW50SW5kZXgrMl0gPT0gMTg1NTtcclxuICAgICAgICAgICAgY29uc3QgY3VyRWxtID0gY2h1bmtBcnJheVtjdXJFbGVtZW50SW5kZXhdO1xyXG4gICAgICAgICAgICBpZihuZXh0VmFsdWVJc0ltYWdlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gY3VyRWxtO1xyXG4gICAgICAgICAgICAgICAgaWYoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VzW2N1ckxheWVyRm9ySW1hZ2VdPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV4dFZhbHVlSXNJbWFnZUNvdW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRWxtID09PSBSRVNFUlZFRF9GTEFHUy5CTE9CX1NFUEFSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgb25JbWdTZXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY3VyTGF5ZXJGb3JJbWFnZSsrO1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyTGF5ZXJGb3JJbWFnZSA8IGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFZhbHVlSXNJbWFnZUNvdW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJFbG0gPT09IFJFU0VSVkVEX0ZMQUdTLklNQUdFX0FORF9TVFJJTkdfU0VQRVJBVE9SKSB7XHJcbiAgICAgICAgICAgICAgICBvbkltZ1NlcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbWFnZXNbY3VyTGF5ZXJGb3JJbWFnZV0ucHVzaChjdXJFbG0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm91bmRJbWFnZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxID0gb25JbWdTZXAgPyA0IDogMztcclxuICAgICAgICAgICAgICAgIGN1ckltZ0krKztcclxuICAgICAgICAgICAgICAgIGlmKGN1ckltZ0kgPT09IHJlcSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckltZ0kgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uSW1nU2VwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbWFnZXNbY3VyTGF5ZXJGb3JJbWFnZV0ucHVzaChjdXJFbG0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1ckVsZW1lbnRJbmRleCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBlbmRJbmRleCwgZGVjb2RlZCB9ID0gdGhpcy5kZWNvZGVDb2xsaWRlcnMoY3VyRWxlbWVudEluZGV4LCBjaHVua0FycmF5LCBsYXllclRpbGVMYXllck9yZGVyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGN1ckVsZW1lbnRJbmRleCA9IGVuZEluZGV4O1xyXG4gICAgICAgIC8vVElMTCBUSEUgVFJJTE9HWSBDT05USU5VRVMuLi4uLi4uLi4uLi4uLlxyXG4gICAgICAgIGNvbnN0IG9iaiA6ICB7IHRpbGVBcnJheXM6IEFycmF5PEFycmF5PEFycmF5PG51bWJlcj4+PiwgaW1hZ2VzPzogQXJyYXk8QXJyYXk8bnVtYmVyPj4sIGNvbGxpZGVycz86IEFycmF5PERlY29kZWRDb2xsaWRlckRhdGE+IH0gPSB7IHRpbGVBcnJheXMgfTtcclxuICAgICAgICBpZihmb3VuZEltYWdlcykge1xyXG4gICAgICAgICAgICBvYmouaW1hZ2VzID0gaW1hZ2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIG9iai5jb2xsaWRlcnMgPSBkZWNvZGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWNvZGVDaHVuayhjaHVua0luZGV4OiBudW1iZXIsIG1hcFc6IG51bWJlciwgbWFwSDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIHN1YkNodW5rVzogbnVtYmVyLCBzdWJDaHVua0g6IG51bWJlciwgbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGE6IEFycmF5PEFycmF5PG51bWJlcj4+LCBjaHVua0FycmF5OiBBcnJheTxudW1iZXI+IHwgQXJyYXlCdWZmZXIpIDogRGVjb2RlZE1hcENodW5rRGF0YSB7XHJcbiAgICAgICAgY2h1bmtBcnJheSA9ICEoQXJyYXkuaXNBcnJheShjaHVua0FycmF5KSkgPyBGYXN0SW50ZWdlckNvbXByZXNzaW9uLnVuY29tcHJlc3MoY2h1bmtBcnJheSkgOiBjaHVua0FycmF5IGFzIEFycmF5PG51bWJlcj47XHJcblxyXG4gICAgICAgIGxldCBjdXJMYXllckluZGV4ID0gMDtcclxuICAgICAgICBjb25zdCBjb2xzID0gTWF0aC5jZWlsKG1hcFcgLyBjaHVua1cpO1xyXG4gICAgICAgIGNvbnN0IGNodW5rV29ybGRYID0gKGNodW5rSW5kZXggJSBjb2xzKSAqIGNodW5rVztcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdjaHVuayB3b3JsZCB4IHdhcycsIGNodW5rV29ybGRYLCAnY2h1bmsgaW5kZXggd2FzJywgY2h1bmtJbmRleCk7XHJcbiAgICAgICAgY29uc3QgY2h1bmtXb3JsZFkgPSBNYXRoLmZsb29yKGNodW5rSW5kZXggLyBjb2xzKSAqIGNodW5rSDtcclxuICAgICAgICBjb25zdCB7IGVuZFgsIGVuZFkgfSA9IGNhbGN1bGF0ZUVuZE9mQ2h1bmsobWFwVywgbWFwSCwgY2h1bmtXLCBjaHVua0gsIGNodW5rV29ybGRYLCBjaHVua1dvcmxkWSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9iaiA6IERlY29kZWRNYXBDaHVua0RhdGEgPXtcclxuICAgICAgICAgICAgaW5kZXg6IGNodW5rSW5kZXgsXHJcbiAgICAgICAgICAgIHg6IGNodW5rV29ybGRYLFxyXG4gICAgICAgICAgICB5OiBjaHVua1dvcmxkWSxcclxuICAgICAgICAgICAgd2lkdGg6IGVuZFggLSBjaHVua1dvcmxkWCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBlbmRZIC0gY2h1bmtXb3JsZFksXHJcbiAgICAgICAgICAgIGxheWVyczogbmV3IEFycmF5KGxheWVyVGlsZUxheWVyT3JkZXJEYXRhLmxlbmd0aCksXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGhpcy5zcGxpdENodW5rQXJyYXlMYXllcnMoY2h1bmtBcnJheSwgbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGEpO1xyXG4gICAgICAgIGNvbnN0IGhhc0ltYWdlcyA9ICEhc3BsaXQuaW1hZ2VzO1xyXG4gICAgICAgIGNvbnN0IGhhc0NvbGxpZGVycyA9ICEhc3BsaXQuY29sbGlkZXJzO1xyXG4gICAgICAgIC8vVE9ETyByZWFsIG1pbm9yIG1pY3JvIG9wdGltaXphdGlvbiBoZXJlLi4uIGJ1dCBpZiBzcGxpdC5pbWFnZXMgaXMgZmFsc2Ugd2UgZG9udCB3YW50IHRvIGNoZWNrIGl0IGVhY2ggaXRlcmF0aW9uLlxyXG4gICAgICAvLyAgaWYoc3BsaXQuaW1hZ2VzKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsYXllclRpbGVMYXllck9yZGVyRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxvZyA9IGkgPT0gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1clRpbGVzID0gbGF5ZXJUaWxlTGF5ZXJPcmRlckRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICBvYmoubGF5ZXJzW2ldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IGksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYoY3VyVGlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmoubGF5ZXJzW2ldLnRpbGVMYXllcnMgPSBjdXJUaWxlcy5tYXAoKHQsIGopID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnRpbGVJZFRvU2l6ZUxvb2t1cFt0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlsZXNBcnJheSA9IHNwbGl0LnRpbGVBcnJheXNbaV1bal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2l6ZVNlcTogdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG9kbyB0aGlzIGlzbnQgcmlnaHQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhUaWxlSWQ6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVIZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNodW5rczogIXRpbGVzQXJyYXkgPyBudWxsIDogdGhpcy51bm1lcmdlU3Vic2VjdGlvblRpbGVzKHdpZHRoLCBoZWlnaHQsIHN1YkNodW5rVywgc3ViQ2h1bmtILCBjaHVua1csIGNodW5rSCwgY2h1bmtXb3JsZFgsIGNodW5rV29ybGRZLCBtYXBXLCBtYXBILCB0aWxlc0FycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL1RPRE86IG1pY3Jvb3B0aW1pemF0aW9uIG1lYW5zIHdlIHNob3VsZCBuZWVkIHRvIGNoZWNrIHNwbGl0LmltYWdlcyBlYWNoIGl0ZXJhdGlvbi5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaGVja3MgdG8gc2VlIGlmIHRoZSBzcGxpdCBpbWFnZXMgYmVjYW1lIG51bGwuXHJcbiAgICAgICAgICAgICAgICBpZihoYXNJbWFnZXMgJiYgc3BsaXQuaW1hZ2VzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXS5pbWFnZXMgPXRoaXMudW5tZXJnZUxheWVySW1hZ2VzKHNwbGl0LmltYWdlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihoYXNDb2xsaWRlcnMgJiYgc3BsaXQuY29sbGlkZXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXS5jb2xsaWRlcnMgPSBzcGxpdC5jb2xsaWRlcnNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgIC8qIH1cclxuICAgICAgIFRPRE86IHNlY29uZCBjb25kaXRpb24gZm9yIG1pY3JvIG9wdGltaXphdGlvblxyXG5cclxuICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsYXllclRpbGVMYXllck9yZGVyRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyVGlsZXMgPSBsYXllclRpbGVMYXllck9yZGVyRGF0YVtpXTtcclxuICAgICAgICAgICAgICAgIG9iai5sYXllcnNbaV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogaSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xsaWRlcnM6IHtyZWN0czogW10sIHBvaW50czogW10sIHBvbHlnb25zOiBbXX0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8geCwgeSwgelxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGlmKGN1clRpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXS50aWxlTGF5ZXJzID0gY3VyVGlsZXMubWFwKCh0LCBqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy50aWxlSWRUb1NpemVMb29rdXBbdF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbGVzQXJyYXkgPSBzcGxpdC50aWxlQXJyYXlzW2ldW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90b2RvIHRoaXMgaXNudCByaWdodC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFRpbGVJZDogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlV2lkdGg6IHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRPZmZzZXRzOiB7IHg6IDAsIHk6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNodW5rczogIXRpbGVzQXJyYXkgPyBudWxsIDogdGhpcy51bm1lcmdlU3Vic2VjdGlvblRpbGVzKHdpZHRoLCBoZWlnaHQsIHN1YkNodW5rVywgc3ViQ2h1bmtILCBjaHVua1csIGNodW5rSCwgY2h1bmtXb3JsZFgsIGNodW5rV29ybGRZLCBtYXBXLCBtYXBILCB0aWxlc0FycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjaGVja3MgdG8gc2VlIGlmIHRoZSBzcGxpdCBpbWFnZXMgYmVjYW1lIG51bGwuXHJcbiAgICAgICAgICAgICAgICBpZihzcGxpdC5pbWFnZXMgJiYgc3BsaXQuaW1hZ2VzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmxheWVyc1tpXS5pbWFnZXMgPXRoaXMudW5tZXJnZUxheWVySW1hZ2VzKHNwbGl0LmltYWdlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9Ki9cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29tcHJlc3NlZENodW5rc0Zyb21NYXAoY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBjaHVua0RhdGE6IEFycmF5QnVmZmVyKSA6IHsgbWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSwgYnVmZmVyczogQXJyYXk8QXJyYXlCdWZmZXI+IH0ge1xyXG4gICAgICAgIGNvbnN0IG1hcE51bWJlckFycmF5ID0gRmFzdEludGVnZXJDb21wcmVzc2lvbi51bmNvbXByZXNzKGNodW5rRGF0YSk7XHJcbiAgICAgICAgY29uc3QgeyBtYXBXLCBtYXBILCBzdGFydGluZ0NodW5rSW5kZXgsIGxheWVyVGlsZUxheWVyT3JkZXIgfSA9IHRoaXMuZGVjb2RlTWV0YURhdGEobWFwTnVtYmVyQXJyYXkpO1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSBNYXRoLmNlaWwobWFwVyAvIGNodW5rVyk7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IE1hdGguY2VpbChtYXBIIC8gY2h1bmtIKTtcclxuICAgICAgICBjb25zdCB0b3RhbCA9IGNvbHMgKiByb3dzO1xyXG4gICAgICAgIGxldCBjdXJDaHVuayA9IDA7XHJcbiAgICAgICAgY29uc3Qgc3BsaXRDaHVua3MgPSBuZXcgQXJyYXkodG90YWwpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcclxuICAgICAgICAgICAgc3BsaXRDaHVua3NbaV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gc3RhcnRpbmdDaHVua0luZGV4OyBpIDwgbWFwTnVtYmVyQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYobWFwTnVtYmVyQXJyYXlbaV0gPT09IFJFU0VSVkVEX0ZMQUdTLkNIVU5LX1NFUEVSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgKytjdXJDaHVuaztcclxuICAgICAgICAgICAgICAgIGlmKGN1ckNodW5rID09PSB0b3RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgIT09IG1hcE51bWJlckFycmF5Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgYmUgb24gbGFzdCBlbGVtZW50IGJ5IHRoZSB0aW1lIGl0IGdldHMgaGVyZS4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNwbGl0Q2h1bmtzW2N1ckNodW5rXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3BsaXRDaHVua3NbY3VyQ2h1bmtdLnB1c2gobWFwTnVtYmVyQXJyYXlbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWV0YURhdGE6IHttYXBXLCBtYXBILCBzdGFydGluZ0NodW5rSW5kZXgsIGxheWVyVGlsZUxheWVyT3JkZXJ9LFxyXG4gICAgICAgICAgICBidWZmZXJzOiBzcGxpdENodW5rcy5tYXAoYSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRmFzdEludGVnZXJDb21wcmVzc2lvbi5jb21wcmVzcyhhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZWNvZGVNYXAoY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBzdWJDaHVua1c6IG51bWJlciwgc3ViQ2h1bmtIOiBudW1iZXIsIG1hcENodW5rQXJyYXk6IEFycmF5QnVmZmVyIHwgQXJyYXk8bnVtYmVyPiwgZm9yRWFjaENodW5rPzogKGNodW5rRGF0YTogRGVjb2RlZE1hcENodW5rRGF0YSwgY2h1bmtJbmRleDogbnVtYmVyKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCkgOiBQcm9taXNlPHsgbWV0YURhdGE6IERlY29kZWRNYXBNZXRhRGF0YSwgY2h1bmtzOiBBcnJheTxEZWNvZGVkTWFwQ2h1bmtEYXRhPiB9PiB7XHJcbiAgICAgICAgY29uc3QgbWFwTnVtYmVyQXJyYXkgOiBBcnJheTxudW1iZXI+ID0gIShBcnJheS5pc0FycmF5KG1hcENodW5rQXJyYXkpKSA/IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24udW5jb21wcmVzcyhtYXBDaHVua0FycmF5KSA6IG1hcENodW5rQXJyYXkgYXMgQXJyYXk8bnVtYmVyPjtcclxuICAgICAgICBjb25zdCB7IG1hcFcsIG1hcEgsIHN0YXJ0aW5nQ2h1bmtJbmRleCwgbGF5ZXJUaWxlTGF5ZXJPcmRlciB9ID0gdGhpcy5kZWNvZGVNZXRhRGF0YShtYXBOdW1iZXJBcnJheSk7XHJcbiAgICAgICAgY29uc3QgbGF5ZXJDb3VudCA9IGxheWVyVGlsZUxheWVyT3JkZXIubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGNvbHMgPSBNYXRoLmNlaWwobWFwVyAvIGNodW5rVyk7XHJcbiAgICAgICAgY29uc3Qgcm93cyA9IE1hdGguY2VpbChtYXBIIC8gY2h1bmtIKTtcclxuICAgICAgICBjb25zdCB0b3RhbCA9IGNvbHMgKiByb3dzO1xyXG4gICAgICAgIGNvbnN0IHNwbGl0Q2h1bmtzID0gbmV3IEFycmF5KHRvdGFsKTtcclxuICAgICAgICBzcGxpdENodW5rc1swXSA9IFtdO1xyXG4gICAgICAgIGxldCBjdXJDaHVuayA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gc3RhcnRpbmdDaHVua0luZGV4OyBpIDwgbWFwTnVtYmVyQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYobWFwTnVtYmVyQXJyYXlbaV0gPT09IFJFU0VSVkVEX0ZMQUdTLkNIVU5LX1NFUEVSQVRPUikge1xyXG4gICAgICAgICAgICAgICAgKytjdXJDaHVuaztcclxuICAgICAgICAgICAgICAgIGlmKGN1ckNodW5rID09PSB0b3RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGkgIT09IG1hcE51bWJlckFycmF5Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgYmUgb24gbGFzdCBlbGVtZW50IGJ5IHRoZSB0aW1lIGl0IGdldHMgaGVyZS4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNwbGl0Q2h1bmtzW2N1ckNodW5rXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3BsaXRDaHVua3NbY3VyQ2h1bmtdLnB1c2gobWFwTnVtYmVyQXJyYXlbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgcHVibGljIGRlY29kZUNodW5rKGNodW5rSW5kZXg6IG51bWJlciwgbWFwVzogbnVtYmVyLCBtYXBIOiBudW1iZXIsIGNodW5rVzogbnVtYmVyLCBjaHVua0g6IG51bWJlciwgc3ViQ2h1bmtXOiBudW1iZXIsIHN1YkNodW5rSDogbnVtYmVyLCBsYXllclRpbGVMYXllck9yZGVyRGF0YTogQXJyYXk8QXJyYXk8bnVtYmVyPj4sIGNodW5rQXJyYXk6IEFycmF5PG51bWJlcj4pIDogTWFwU2VjdGlvbkRhdGEge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBbXTtcclxuICAgICAgICBpZihmb3JFYWNoQ2h1bmspIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNwbGl0Q2h1bmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IHRoaXMuZGVjb2RlQ2h1bmsoaSwgbWFwVywgbWFwSCwgY2h1bmtXLCBjaHVua0gsIHN1YkNodW5rVywgc3ViQ2h1bmtILCBsYXllclRpbGVMYXllck9yZGVyLCBzcGxpdENodW5rc1tpXSk7XHJcbiAgICAgICAgICAgICAgICBkZWNvZGVkLnB1c2goY2h1bmspO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgZm9yRWFjaENodW5rKGNodW5rLCBpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsaXRDaHVua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRlY29kZWQucHVzaCh0aGlzLmRlY29kZUNodW5rKGksIG1hcFcsIG1hcEgsIGNodW5rVywgY2h1bmtILCBzdWJDaHVua1csIHN1YkNodW5rSCwgbGF5ZXJUaWxlTGF5ZXJPcmRlciwgc3BsaXRDaHVua3NbaV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBtZXRhRGF0YTogeyBtYXBXLCBtYXBILCBzdGFydGluZ0NodW5rSW5kZXgsIGxheWVyVGlsZUxheWVyT3JkZXIgfSwgY2h1bmtzOiBkZWNvZGVkIH07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIG5vdGU6IHdlIGRvbnQgZGVjb2RlIHRoZSB6SW5kZXggdG8gc2VlIGlmIGl0cyByb3RhdGVkIGhlcmUsIHdlIGxlYXZlIHRoYXQgdG8gdGhlIGFwcC5cclxuICAgIHB1YmxpYyB1bm1lcmdlTGF5ZXJJbWFnZXMoaW1hZ2VBcnJheTogQXJyYXk8bnVtYmVyPikgOiB7W2ltYWdlSWQ6IHN0cmluZ106IEFycmF5PG51bWJlcj4gfSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VzID0ge307XHJcbiAgICAgICAgbGV0IG5leHRJc0ltYWdlSWQgPSB0cnVlO1xyXG4gICAgICAgIGxldCB4eXpJbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IGN1ckltYWdlSWQ9IG51bGw7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGltYWdlQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYoaW1hZ2VBcnJheVtpXSA9PT0gUkVTRVJWRURfRkxBR1MuSU1BR0VfQU5EX1NUUklOR19TRVBFUkFUT1IpIHtcclxuICAgICAgICAgICAgICAgIG5leHRJc0ltYWdlSWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYobmV4dElzSW1hZ2VJZCkge1xyXG4gICAgICAgICAgICAgICAgY3VySW1hZ2VJZCA9IGltYWdlQXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICBpbWFnZXNbY3VySW1hZ2VJZF0gPSBbXTtcclxuICAgICAgICAgICAgICAgIG5leHRJc0ltYWdlSWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGltYWdlQXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICBpZih4eXpJbmRleCA8IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBSRVNFUlZFRF9GTEFHUy5ORUdBVElWRV9OVU1CRVIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgJj0gflJFU0VSVkVEX0ZMQUdTLk5FR0FUSVZFX05VTUJFUjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKj0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW1hZ2VzW2N1ckltYWdlSWRdLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgeHl6SW5kZXgrKztcclxuICAgICAgICAgICAgICAgIGlmKHh5ekluZGV4ID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeHl6SW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbWFnZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyB1bm1lcmdlU3Vic2VjdGlvblRpbGVzKHRpbGVXaWR0aDogbnVtYmVyLCB0aWxlSGVpZ2h0OiBudW1iZXIsIGVuY29kZWRTdWJDaHVua1c6IG51bWJlciwgZW5jb2RlZFN1YkNodW5rSDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsY2h1bmtYOiBudW1iZXIsIGNodW5rWTogbnVtYmVyLCBtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgdGlsZUFycmF5OiBBcnJheTxudW1iZXI+LCBlbmRQb3NpdGlvbj86IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSkgOiBBcnJheTxBcnJheTxudW1iZXI+PiB7XHJcbiAgICAgICAgbGV0IGVuZFgsIGVuZFk7XHJcbiAgICAgICAgaWYoZW5kUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgZW5kWCA9IGVuZFBvc2l0aW9uLng7XHJcbiAgICAgICAgICAgIGVuZFkgPSBlbmRQb3NpdGlvbi55O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICh7IGVuZFgsIGVuZFkgfSA9IGNhbGN1bGF0ZUVuZE9mQ2h1bmsobWFwV2lkdGgsIG1hcEhlaWdodCwgY2h1bmtXLCBjaHVua0gsIGNodW5rWCwgY2h1bmtZKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBleHBlY3RlZERlY29kZWRTdWJDaHVua3MgPSBjYWxjdWxhdGVTdWJDaHVua3MobWFwV2lkdGgsIG1hcEhlaWdodCwgY2h1bmtXLCBjaHVua0gsIGNodW5rWCwgY2h1bmtZLCBlbmNvZGVkU3ViQ2h1bmtXLCBlbmNvZGVkU3ViQ2h1bmtIKTtcclxuXHJcbiAgICAgICAgY29uc3QgdW5tZXJnZWRBcnJheXMgPSBuZXcgQXJyYXkoZXhwZWN0ZWREZWNvZGVkU3ViQ2h1bmtzKS5maWxsKC0xKTtcclxuICAgICAgICBsZXQgY3VyRW5jb2RlZFN1YlNlY3Rpb24gPSAwO1xyXG5cclxuICAgICAgICBsZXQgY3VyQ2h1bmtYID0gY2h1bmtYO1xyXG4gICAgICAgIGxldCBjdXJDaHVua1kgPSBjaHVua1k7XHJcblxyXG4gICAgICAgIGxldCB7IHg6IHBhZFgsIHk6IHBhZFkgfSA9IGdldFRvcExlZnRQYWRkaW5nKHRpbGVXaWR0aCwgdGlsZUhlaWdodCwgbWFwV2lkdGgsIG1hcEhlaWdodCwgZW5jb2RlZFN1YkNodW5rVywgZW5jb2RlZFN1YkNodW5rSCwgY3VyQ2h1bmtYLCBjdXJDaHVua1kpO1xyXG4gICAgICAgIGxldCBjdXJUaWxlWCA9IHBhZFg7XHJcbiAgICAgICAgbGV0IGN1clRpbGVZID0gcGFkWTtcclxuICAgICAgICBjb25zdCBpbmNyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjdXJFbmNvZGVkU3ViU2VjdGlvbisrO1xyXG4gICAgICAgICAgICBjdXJUaWxlWCA9IDA7XHJcbiAgICAgICAgICAgIGN1clRpbGVZID0gMDtcclxuICAgICAgICAgICAgY3VyQ2h1bmtYKz1lbmNvZGVkU3ViQ2h1bmtXO1xyXG4gICAgICAgICAgICBpZihjdXJDaHVua1ggPj0gZW5kWCkge1xyXG4gICAgICAgICAgICAgICAgY3VyQ2h1bmtYID0gY2h1bmtYO1xyXG4gICAgICAgICAgICAgICAgY3VyQ2h1bmtZICs9IGVuY29kZWRTdWJDaHVua0g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKHsgeDogcGFkWCwgeTogcGFkWSB9ID0gZ2V0VG9wTGVmdFBhZGRpbmcodGlsZVdpZHRoLCB0aWxlSGVpZ2h0LCBtYXBXaWR0aCwgbWFwSGVpZ2h0LCBlbmNvZGVkU3ViQ2h1bmtXLCBlbmNvZGVkU3ViQ2h1bmtILCBjdXJDaHVua1gsIGN1ckNodW5rWSkpO1xyXG4gICAgICAgICAgICBjdXJUaWxlWCA9IHBhZFg7XHJcbiAgICAgICAgICAgIGN1clRpbGVZID0gcGFkWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRpbGVBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGlsZUFycmF5W2ldID09PSBSRVNFUlZFRF9GTEFHUy5FTVBUWV9TRUNUSU9OX0ZMQUcpIHtcclxuICAgICAgICAgICAgICAgIGlmICh1bm1lcmdlZEFycmF5c1tjdXJFbmNvZGVkU3ViU2VjdGlvbl0gIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIHN1YiBjaHVuayBzaG91bGQgaGF2ZSBiZWVuIC0xIGF0IHRoaXMgdGltZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1bm1lcmdlZEFycmF5c1tjdXJFbmNvZGVkU3ViU2VjdGlvbl0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaW5jcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHVubWVyZ2VkQXJyYXlzW2N1ckVuY29kZWRTdWJTZWN0aW9uXSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IHNob3VsZCBvcHRtaXplIGJ5IGNhbGN1bGF0aW5nIHRpbGUgbGVuZ3RoIGFuZCBkbyBuZXcgQXJyYXkobGVuZ3RoKSB0aGVuIGluZGV4IGluc3RlYWQgb2YgcHVzaC5cclxuICAgICAgICAgICAgICAgICAgICB1bm1lcmdlZEFycmF5c1tjdXJFbmNvZGVkU3ViU2VjdGlvbl0gPSBbcGFkWCwgcGFkWV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1bm1lcmdlZEFycmF5c1tjdXJFbmNvZGVkU3ViU2VjdGlvbl0ucHVzaCh0aWxlQXJyYXlbaV0pO1xyXG4gICAgICAgICAgICAgICAgY3VyVGlsZVggKz0gdGlsZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFggPSBjdXJDaHVua1ggKyBjdXJUaWxlWDtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0WCA+PSBlbmRYIHx8IGN1clRpbGVYID49IGVuY29kZWRTdWJDaHVua1cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJUaWxlWCA9IHBhZFg7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyVGlsZVkgKz0gdGlsZUhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0WSA9IGN1ckNodW5rWSArIGN1clRpbGVZO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0WSA+PSBlbmRZIHx8IGN1clRpbGVZID49IGVuY29kZWRTdWJDaHVua0gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5tZXJnZWRBcnJheXM7XHJcbiAgICB9XHJcbn0iLCJcclxuLyoqXHJcbiAqIEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uanMgOiBhIGZhc3QgaW50ZWdlciBjb21wcmVzc2lvbiBsaWJyYXJ5IGluIEphdmFTY3JpcHQuXHJcbiAqIChjKSB0aGUgYXV0aG9yc1xyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wLlxyXG4gKlxyXG4gKkZhc3RJbnRlZ2VyQ29tcHJlc3Npb25cclxuICogU2ltcGxlIHVzYWdlIDpcclxuICogIC8vIHZhciBGYXN0SW50ZWdlckNvbXByZXNzaW9uID0gcmVxdWlyZShcImZhc3RpbnRjb21wcmVzc2lvblwiKTsvLyBpZiB5b3UgdXNlIG5vZGVcclxuICogIHZhciBhcnJheSA9IFsxMCwxMDAwMDAsNjU5OTksMTAsMTAsMCwxLDEsMjAwMF07XHJcbiAqICB2YXIgYnVmID0gRmFzdEludGVnZXJDb21wcmVzc2lvbi5jb21wcmVzcyhhcnJheSk7XHJcbiAqICB2YXIgYmFjayA9IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24udW5jb21wcmVzcyhidWYpOyAvLyBnZXRzIGJhY2sgWzEwLDEwMDAwMCw2NTk5OSwxMCwxMCwwLDEsMSwyMDAwXVxyXG4gKlxyXG4gKlxyXG4gKiBZb3UgY2FuIGluc3RhbGwgdGhlIGxpYnJhcnkgdW5kZXIgbm9kZSB3aXRoIHRoZSBjb21tYW5kIGxpbmVcclxuICogICBucG0gaW5zdGFsbCBmYXN0aW50Y29tcHJlc3Npb25cclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZhc3RJbnRlZ2VyQ29tcHJlc3Npb247XHJcblxyXG5cclxuLy8geW91IGNhbiBwcm92aWRlIGFuIGl0ZXJhYmxlXHJcbmZ1bmN0aW9uIEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24oKSB7XHJcbn1cclxuXHJcbi8vIHByaXZhdGUgZnVuY3Rpb25cclxuZnVuY3Rpb24gYnl0ZWxvZyh2YWwpIHtcclxuICAgIGlmICh2YWwgPCAoMSA8PCA3KSkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAxNCkpIHtcclxuICAgICAgICByZXR1cm4gMjtcclxuICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMjEpKSB7XHJcbiAgICAgICAgcmV0dXJuIDM7XHJcbiAgICB9IGVsc2UgaWYgKHZhbCA8ICgxIDw8IDI4KSkge1xyXG4gICAgICAgIHJldHVybiA0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDU7XHJcbn1cclxuXHJcbi8vIHByaXZhdGUgZnVuY3Rpb25cclxuZnVuY3Rpb24gemlnemFnX2VuY29kZSh2YWwpIHtcclxuICAgIHJldHVybiAodmFsICsgdmFsKSBeICh2YWwgPj4gMzEpO1xyXG59XHJcblxyXG4vLyBwcml2YXRlIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIHppZ3phZ19kZWNvZGUodmFsKSB7XHJcbiAgICByZXR1cm4gICh2YWwgPj4gMSkgXiAoLSAodmFsICYgMSkpO1xyXG59XHJcblxyXG5cclxuLy8gY29tcHV0ZSBob3cgbWFueSBieXRlcyBhbiBhcnJheSBvZiBpbnRlZ2VycyB3b3VsZCB1c2Ugb25jZSBjb21wcmVzc2VkXHJcbi8vIGlucHV0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5IG9mIG5vbi1uZWdhdGl2ZSBpbnRlZ2Vyc1xyXG5GYXN0SW50ZWdlckNvbXByZXNzaW9uLmNvbXB1dGVDb21wcmVzc2VkU2l6ZUluQnl0ZXMgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIGMgPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYW5zd2VyID0gMDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjOyBpKyspIHtcclxuICAgICAgICBhbnN3ZXIgKz0gYnl0ZWxvZyhpbnB1dFtpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYW5zd2VyO1xyXG59XHJcblxyXG5cclxuLy8gY29tcHV0ZSBob3cgbWFueSBieXRlcyBhbiBhcnJheSBvZiBpbnRlZ2VycyB3b3VsZCB1c2Ugb25jZSBjb21wcmVzc2VkXHJcbi8vIGlucHV0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLCBzb21lIG9mIHRoZW0gY2FuIGJlIG5lZ2F0aXZlXHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHV0ZUNvbXByZXNzZWRTaXplSW5CeXRlc1NpZ25lZCA9IGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICB2YXIgYyA9IGlucHV0Lmxlbmd0aDtcclxuICAgIHZhciBhbnN3ZXIgPSAwO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGM7IGkrKykge1xyXG4gICAgICAgIGFuc3dlciArPSBieXRlbG9nKHppZ3phZ19lbmNvZGUoaW5wdXRbaV0pKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhbnN3ZXI7XHJcbn1cclxuXHJcbi8vIENvbXByZXNzIGFuIGFycmF5IG9mIGludGVnZXJzLCByZXR1cm4gYSBjb21wcmVzc2VkIGJ1ZmZlciAoYXMgYW4gQXJyYXlCdWZmZXIpLlxyXG4vLyBJdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBpbnRlZ2VycyBhcmUgbm9uLW5lZ2F0aXZlOiB0aGUgY2FsbGVyIGlzIHJlc3BvbnNpYmxlXHJcbi8vIGZvciBtYWtpbmcgdGhpcyBjaGVjay4gRmxvYXRpbmctcG9pbnQgbnVtYmVycyBhcmUgbm90IHN1cHBvcnRlZC5cclxuRmFzdEludGVnZXJDb21wcmVzc2lvbi5jb21wcmVzcyA9IGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICB2YXIgYyA9IGlucHV0Lmxlbmd0aDtcclxuICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIoRmFzdEludGVnZXJDb21wcmVzc2lvbi5jb21wdXRlQ29tcHJlc3NlZFNpemVJbkJ5dGVzKGlucHV0KSk7XHJcbiAgICB2YXIgdmlldyAgID0gbmV3IEludDhBcnJheShidWYpO1xyXG4gICAgdmFyIHBvcyA9IDA7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYzsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IGlucHV0W2ldO1xyXG4gICAgICAgIGlmICh2YWwgPCAoMSA8PCA3KSkge1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAxNCkpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAodmFsICYgMHg3RikgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gNztcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCA8ICgxIDw8IDIxKSkge1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICh2YWwgJiAweDdGKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiA3KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gdmFsID4+PiAxNDtcclxuICAgICAgICB9IGVsc2UgaWYgKHZhbCA8ICgxIDw8IDI4KSkge1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICh2YWwgJiAweDdGICkgfCAweDgwIDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDcpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDE0KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gdmFsID4+PiAyMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggdmFsICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDcpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoICh2YWwgPj4+IDE0KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiAyMSkgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ1ZjtcclxufVxyXG5cclxuXHJcbi8vIGZyb20gYSBjb21wcmVzc2VkIGFycmF5IG9mIGludGVnZXJzIHN0b3JlZCBBcnJheUJ1ZmZlciwgY29tcHV0ZSB0aGUgbnVtYmVyIG9mIGNvbXByZXNzZWQgaW50ZWdlcnMgYnkgc2Nhbm5pbmcgdGhlIGlucHV0XHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHV0ZUhvd01hbnlJbnRlZ2VycyA9IGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICB2YXIgdmlldyAgID0gbmV3IEludDhBcnJheShpbnB1dCk7XHJcbiAgICB2YXIgYyA9IHZpZXcubGVuZ3RoO1xyXG4gICAgdmFyIGNvdW50ID0gMDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjOyBpKyspIHtcclxuICAgICAgICBjb3VudCArPSAoaW5wdXRbaV0+Pj43KTtcclxuICAgIH1cclxuICAgIHJldHVybiBjIC0gY291bnQ7XHJcbn1cclxuLy8gdW5jb21wcmVzcyBhbiBhcnJheSBvZiBpbnRlZ2VyIGZyb20gYW4gQXJyYXlCdWZmZXIsIHJldHVybiB0aGUgYXJyYXlcclxuLy8gaXQgaXMgYXNzdW1lZCB0aGF0IHRoZXkgd2VyZSBjb21wcmVzc2VkIHVzaW5nIHRoZSBjb21wcmVzcyBmdW5jdGlvbiwgdGhlIGNhbGxlclxyXG4vLyBpcyByZXNwb25zaWJsZSBmb3IgZW5zdXJpbmcgdGhhdCBpdCBpcyB0aGUgY2FzZS5cclxuRmFzdEludGVnZXJDb21wcmVzc2lvbi51bmNvbXByZXNzID0gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgIHZhciBhcnJheSA9IFtdXHJcbiAgICB2YXIgaW5ieXRlID0gbmV3IEludDhBcnJheShpbnB1dCk7XHJcbiAgICB2YXIgZW5kID0gaW5ieXRlLmxlbmd0aDtcclxuICAgIHZhciBwb3MgPSAwO1xyXG4gICAgd2hpbGUgKGVuZCA+IHBvcykge1xyXG4gICAgICAgIHZhciBjID0gaW5ieXRlW3BvcysrXTtcclxuICAgICAgICB2YXIgdiA9IGMgJiAweDdGO1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh2KVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSAoYyAmIDB4N0YpIDw8IDc7XHJcbiAgICAgICAgaWYgKGMgPj0gMCkge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKHYpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjID0gaW5ieXRlW3BvcysrXTtcclxuICAgICAgICB2IHw9IChjICYgMHg3RikgPDwgMTQ7XHJcbiAgICAgICAgaWYgKGMgPj0gMCkge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKHYpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjID0gaW5ieXRlW3BvcysrXTtcclxuICAgICAgICB2IHw9IChjICYgMHg3RikgPDwgMjE7XHJcbiAgICAgICAgaWYgKGMgPj0gMCkge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKHYpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjID0gaW5ieXRlW3BvcysrXTtcclxuICAgICAgICB2IHw9IGMgPDwgMjg7XHJcbiAgICAgICAgYXJyYXkucHVzaCh2KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycmF5O1xyXG59XHJcblxyXG5cclxuLy8gQ29tcHJlc3MgYW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJldHVybiBhIGNvbXByZXNzZWQgYnVmZmVyIChhcyBhbiBBcnJheUJ1ZmZlcikuXHJcbi8vIFRoZSBpbnRlZ2VycyBjYW4gYmUgc2lnbmVkIChuZWdhdGl2ZSksIGJ1dCBmbG9hdGluZy1wb2ludCB2YWx1ZXMgYXJlIG5vdCBzdXBwb3J0ZWQuXHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHJlc3NTaWduZWQgPSBmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgdmFyIGMgPSBpbnB1dC5sZW5ndGg7XHJcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKEZhc3RJbnRlZ2VyQ29tcHJlc3Npb24uY29tcHV0ZUNvbXByZXNzZWRTaXplSW5CeXRlc1NpZ25lZChpbnB1dCkpO1xyXG4gICAgdmFyIHZpZXcgICA9IG5ldyBJbnQ4QXJyYXkoYnVmKTtcclxuICAgIHZhciBwb3MgPSAwO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGM7IGkrKykge1xyXG4gICAgICAgIHZhciB2YWwgPSB6aWd6YWdfZW5jb2RlKGlucHV0W2ldKTtcclxuICAgICAgICBpZiAodmFsIDwgKDEgPDwgNykpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodmFsIDwgKDEgPDwgMTQpKSB7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKHZhbCAmIDB4N0YpIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDc7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyMSkpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAodmFsICYgMHg3RikgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gNykgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gMTQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWwgPCAoMSA8PCAyOCkpIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAodmFsICYgMHg3RiApIHwgMHg4MCA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiA3KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiAxNCkgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9IHZhbCA+Pj4gMjE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSAoIHZhbCAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiA3KSAmIDB4N0YgKSB8IDB4ODA7XHJcbiAgICAgICAgICAgIHZpZXdbcG9zKytdID0gKCAodmFsID4+PiAxNCkgJiAweDdGICkgfCAweDgwO1xyXG4gICAgICAgICAgICB2aWV3W3BvcysrXSA9ICggKHZhbCA+Pj4gMjEpICYgMHg3RiApIHwgMHg4MDtcclxuICAgICAgICAgICAgdmlld1twb3MrK10gPSB2YWwgPj4+IDI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBidWY7XHJcbn1cclxuXHJcbi8vIHVuY29tcHJlc3MgYW4gYXJyYXkgb2YgaW50ZWdlciBmcm9tIGFuIEFycmF5QnVmZmVyLCByZXR1cm4gdGhlIGFycmF5XHJcbi8vIGl0IGlzIGFzc3VtZWQgdGhhdCB0aGV5IHdlcmUgY29tcHJlc3NlZCB1c2luZyB0aGUgY29tcHJlc3NTaWduZWQgZnVuY3Rpb24sIHRoZSBjYWxsZXJcclxuLy8gaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHRoYXQgaXQgaXMgdGhlIGNhc2UuXHJcbkZhc3RJbnRlZ2VyQ29tcHJlc3Npb24udW5jb21wcmVzc1NpZ25lZCA9IGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICB2YXIgYXJyYXkgPSBbXVxyXG4gICAgdmFyIGluYnl0ZSA9IG5ldyBJbnQ4QXJyYXkoaW5wdXQpO1xyXG4gICAgdmFyIGVuZCA9IGluYnl0ZS5sZW5ndGg7XHJcbiAgICB2YXIgcG9zID0gMDtcclxuICAgIHdoaWxlIChlbmQgPiBwb3MpIHtcclxuICAgICAgICB2YXIgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdmFyIHYgPSBjICYgMHg3RjtcclxuICAgICAgICBpZiAoYyA+PSAwKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goemlnemFnX2RlY29kZSh2KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGMgPSBpbmJ5dGVbcG9zKytdO1xyXG4gICAgICAgIHYgfD0gKGMgJiAweDdGKSA8PCA3O1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh6aWd6YWdfZGVjb2RlKHYpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSAoYyAmIDB4N0YpIDw8IDE0O1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh6aWd6YWdfZGVjb2RlKHYpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSAoYyAmIDB4N0YpIDw8IDIxO1xyXG4gICAgICAgIGlmIChjID49IDApIHtcclxuICAgICAgICAgICAgYXJyYXkucHVzaCh6aWd6YWdfZGVjb2RlKHYpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYyA9IGluYnl0ZVtwb3MrK107XHJcbiAgICAgICAgdiB8PSBjIDw8IDI4O1xyXG4gICAgICAgIGFycmF5LnB1c2goemlnemFnX2RlY29kZSh2KSlcclxuICAgIH1cclxuICAgIHJldHVybiBhcnJheTtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRW5kT2ZDaHVuayhtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgY2h1bmtXOiBudW1iZXIsIGNodW5rSDogbnVtYmVyLCBjaHVua1g6IG51bWJlciwgY2h1bmtZOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHJlbWFpbmluZ01hcFdpZHRoID0gbWFwV2lkdGggLSBjaHVua1g7XHJcbiAgICBjb25zdCByZW1haW5pbmdNYXBIZWlnaHQgPSBtYXBIZWlnaHQgLSBjaHVua1k7XHJcbiAgICBjb25zdCBjdXJDaHVua1cgPSByZW1haW5pbmdNYXBXaWR0aCA+PSBjaHVua1cgPyBjaHVua1cgOiByZW1haW5pbmdNYXBXaWR0aDtcclxuICAgIGNvbnN0IGN1ckNodW5rSCA9IHJlbWFpbmluZ01hcEhlaWdodCA+PSBjaHVua0ggPyBjaHVua0ggOiByZW1haW5pbmdNYXBIZWlnaHQ7XHJcbiAgICByZXR1cm4geyBlbmRYOiBjaHVua1ggKyBjdXJDaHVua1csIGVuZFk6IGNodW5rWSArIGN1ckNodW5rSCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU3ViQ2h1bmtzKG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIGNodW5rWDogbnVtYmVyLCBjaHVua1k6IG51bWJlciwgc3ViQ2h1bmtXLCBzdWJDaHVua0gpIHtcclxuICAgIGNvbnN0IHsgcm93cywgY29sdW1ucyB9ID0gY2FsY3VsYXRlUm93c0FuZENvbHVtbnMobWFwV2lkdGgsIG1hcEhlaWdodCwgY2h1bmtXLCBjaHVua0gsIGNodW5rWCwgY2h1bmtZLCBzdWJDaHVua1csIHN1YkNodW5rSCk7XHJcbiAgICByZXR1cm4gcm93cyAqIGNvbHVtbnM7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUm93c0FuZENvbHVtbnMobWFwV2lkdGg6IG51bWJlciwgbWFwSGVpZ2h0OiBudW1iZXIsIGNodW5rVzogbnVtYmVyLCBjaHVua0g6IG51bWJlciwgY2h1bmtYOiBudW1iZXIsIGNodW5rWTogbnVtYmVyLCBzdWJDaHVua1csIHN1YkNodW5rSCkge1xyXG4gICAgY29uc3QgcmVtYWluaW5nTWFwV2lkdGggPSBtYXBXaWR0aCAtIGNodW5rWDtcclxuICAgIGNvbnN0IHJlbWFpbmluZ01hcEhlaWdodCA9IG1hcEhlaWdodCAtIGNodW5rWTtcclxuICAgIGNvbnN0IGNvbHVtbnMgPSBNYXRoLm1pbihNYXRoLmNlaWwoY2h1bmtXIC8gc3ViQ2h1bmtXKSwgTWF0aC5jZWlsKHJlbWFpbmluZ01hcFdpZHRoIC8gc3ViQ2h1bmtXKSk7XHJcbiAgICBjb25zdCByb3dzID0gTWF0aC5taW4oTWF0aC5jZWlsKGNodW5rSCAvIHN1YkNodW5rSCksIE1hdGguY2VpbChyZW1haW5pbmdNYXBIZWlnaHQgLyBzdWJDaHVua0gpKTtcclxuICAgIHJldHVybiB7cm93cywgY29sdW1uc31cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnRQYWRkaW5nKHRpbGVXaWR0aDogbnVtYmVyLCB0aWxlSGVpZ2h0OiBudW1iZXIsIG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIGNodW5rWDogbnVtYmVyLCBjaHVua1k6IG51bWJlcikge1xyXG4gICAgY29uc3QgdG9wTGVmdFBhZGRpbmcgPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgIGNvbnN0IGNvbHVtbiA9IE1hdGguZmxvb3IoY2h1bmtYIC8gY2h1bmtXKTtcclxuICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoY2h1bmtZIC8gY2h1bmtIKTtcclxuICAgIC8vICAgY29uc29sZS5sb2coeyByb3csIGNvbHVtbiwgdGlsZVdpZHRoLCB0aWxlSGVpZ2h0LCBtYXBXaWR0aCwgbWFwSGVpZ2h0LCBjaHVua1csIGNodW5rSCwgY2h1bmtYLCBjaHVua1kgfSlcclxuICAgIGxldCBhbnMgPSAodGlsZVdpZHRoIC0gKGNodW5rVyAlIHRpbGVXaWR0aCkpICogY29sdW1uO1xyXG4gICAgbGV0IG0gPSBNYXRoLmZsb29yKGFucyAvIHRpbGVXaWR0aCk7XHJcbiAgICB0b3BMZWZ0UGFkZGluZy54ICA9IGFucyAtIChtICogdGlsZVdpZHRoKTtcclxuXHJcbiAgICBhbnMgPSAodGlsZUhlaWdodCAtIChjaHVua0ggJSB0aWxlSGVpZ2h0KSkgKiByb3c7XHJcbiAgICBtID0gTWF0aC5mbG9vcihhbnMgLyB0aWxlSGVpZ2h0KTtcclxuICAgIHRvcExlZnRQYWRkaW5nLnkgPSBhbnMgLSAobSAqIHRpbGVIZWlnaHQpO1xyXG4gICAgcmV0dXJuIHRvcExlZnRQYWRkaW5nO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVPZmZzZXRzKHRpbGVXaWR0aDogbnVtYmVyLCB0aWxlSGVpZ2h0OiBudW1iZXIsIG1hcFdpZHRoOiBudW1iZXIsIG1hcEhlaWdodDogbnVtYmVyLCBjaHVua1c6IG51bWJlciwgY2h1bmtIOiBudW1iZXIsIGNodW5rWDogbnVtYmVyLCBjaHVua1k6IG51bWJlcikgOiB7IHRvcExlZnRQYWRkaW5nOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0sIGJvdHRvbVJpZ2h0T3ZlcmZsb3c6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfX0ge1xyXG4gICAgY29uc3QgY29sdW1ucyA9ICBNYXRoLmNlaWwobWFwV2lkdGgvY2h1bmtXKTtcclxuICAgIGNvbnN0IHJvd3MgPSBNYXRoLmNlaWwobWFwSGVpZ2h0IC8gY2h1bmtIKTtcclxuICAgIGNvbnN0IHRvcExlZnRQYWRkaW5nID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBjb25zdCBjb2x1bW4gPSBNYXRoLmZsb29yKGNodW5rWCAvIGNodW5rVyk7XHJcbiAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKGNodW5rWSAvIGNodW5rSCk7XHJcbiAvLyAgIGNvbnNvbGUubG9nKHsgcm93LCBjb2x1bW4sIHRpbGVXaWR0aCwgdGlsZUhlaWdodCwgbWFwV2lkdGgsIG1hcEhlaWdodCwgY2h1bmtXLCBjaHVua0gsIGNodW5rWCwgY2h1bmtZIH0pXHJcbiAgICBsZXQgYW5zID0gKHRpbGVXaWR0aCAtIChjaHVua1cgJSB0aWxlV2lkdGgpKSAqIGNvbHVtbjtcclxuICAgIGxldCBtID0gTWF0aC5mbG9vcihhbnMgLyB0aWxlV2lkdGgpO1xyXG4gICAgdG9wTGVmdFBhZGRpbmcueCAgPSBhbnMgLSAobSAqIHRpbGVXaWR0aCk7XHJcblxyXG4gICAgYW5zID0gKHRpbGVIZWlnaHQgLSAoY2h1bmtIICUgdGlsZUhlaWdodCkpICogcm93O1xyXG4gICAgbSA9IE1hdGguZmxvb3IoYW5zIC8gdGlsZUhlaWdodCk7XHJcbiAgICB0b3BMZWZ0UGFkZGluZy55ID0gYW5zIC0gKG0gKiB0aWxlSGVpZ2h0KTtcclxuXHJcbiAgICBjb25zdCBib3R0b21SaWdodE92ZXJmbG93ID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICBpZihjb2x1bW4gPCBjb2x1bW5zLTEpIHtcclxuICAgICAgICBhbnMgPSAodGlsZVdpZHRoIC0gKGNodW5rVyAlIHRpbGVXaWR0aCkpICogKGNvbHVtbisxKTtcclxuICAgICAgICBtID0gTWF0aC5mbG9vcihhbnMgLyB0aWxlV2lkdGgpO1xyXG4gICAgICAgIGJvdHRvbVJpZ2h0T3ZlcmZsb3cueCAgPSBhbnMgLSAobSAqIHRpbGVXaWR0aCk7XHJcbiAgICB9XHJcbiAgICBpZihyb3cgPCByb3dzLTEpIHtcclxuICAgICAgICBhbnMgPSAodGlsZUhlaWdodCAtIChjaHVua0ggJSB0aWxlSGVpZ2h0KSkgKiAocm93KzEpO1xyXG4gICAgICAgIG0gPSBNYXRoLmZsb29yKGFucyAvIHRpbGVIZWlnaHQpO1xyXG4gICAgICAgIGJvdHRvbVJpZ2h0T3ZlcmZsb3cueSA9IGFucyAtIChtICogdGlsZUhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBib3R0b21SaWdodE92ZXJmbG93LFxyXG4gICAgICAgIHRvcExlZnRQYWRkaW5nLFxyXG4gICAgfVxyXG59XHJcbiIsIi8vIEB0cy1pZ25vcmVcclxuaW1wb3J0IHtkYXRhVXJsVG9UZXh0dXJlfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuXHJcbi8vIEB0cy1pZ25vcmVcclxuY29uc3QgaW5kZXhlZERCID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyA/XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB3aW5kb3cuaW5kZXhlZERCIHx8IHdpbmRvdy53ZWJraXRJbmRleGVkREIgfHwgd2luZG93Lm1vekluZGV4ZWREQiB8fCB3aW5kb3cuT0luZGV4ZWREQiB8fCB3aW5kb3cubXNJbmRleGVkREJcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIDogc2VsZi5pbmRleGVkREIgfHwgc2VsZi53ZWJraXRJbmRleGVkRGI7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcblxyXG5jb25zdCAgICAgZGJWZXJzaW9uID0gMS4wO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvYWRlciB7XHJcbiAgICBwcml2YXRlIGRiIDogSURCRGF0YWJhc2U7XHJcbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGRiPzogSURCRGF0YWJhc2UpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpIDogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgaWYodGhpcy5kYikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgZGJWZXJzaW9uKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZy9hY2Nlc3NpbmcgSW5kZXhlZERCIGRhdGFiYXNlXCIsIGV2ZW50KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcvYWNjZXNzaW5nIEluZGV4ZWREQiBkYXRhYmFzZVwiLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChgRXJyb3IgY3JlYXRpbmcvYWNjZXNzaW5nIEluZGV4ZWREQiBkYXRhYmFzZWApXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEludGVyaW0gc29sdXRpb24gZm9yIEdvb2dsZSBDaHJvbWUgdG8gY3JlYXRlIGFuIG9iamVjdFN0b3JlLiBXaWxsIGJlIGRlcHJlY2F0ZWRcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRiLnNldFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYi52ZXJzaW9uICE9IGRiVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNldFZlcnNpb24gPSB0aGlzLmRiLnNldFZlcnNpb24oZGJWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmVyc2lvbi5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRm9yIGZ1dHVyZSB1c2UuIEN1cnJlbnRseSBvbmx5IGluIGxhdGVzdCBGaXJlZm94IHZlcnNpb25zXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZWxldGVJdGVtKG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoYEVycm9yIHNhdmluZyB0ZXh0dXJlIHRvIGluZGV4ZWREQjogJHtuYW1lfWApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVKc29uKG5hbWU6IHN0cmluZywgZGF0YTogYW55KSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChKU09OLnN0cmluZ2lmeShkYXRhKSwgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGBFcnJvciBzYXZpbmcgdGV4dHVyZSB0byBpbmRleGVkREI6ICR7bmFtZX1gKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkSnNvbihuYW1lOiBzdHJpbmcpIDogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkb25seScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLmdldChuYW1lKVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgaWYoZXZlbnQudGFyZ2V0LnJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShKU09OLnBhcnNlKGV2ZW50LnRhcmdldC5yZXN1bHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgdGV4dHVyZSBmcm9tIGluZGV4ZWREQjogJHtuYW1lfWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlQXJyYXlCdWZmZXIobmFtZTogc3RyaW5nLCBidWZmZXI6IEFycmF5QnVmZmVyKSA6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChidWZmZXIsIG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChgRXJyb3Igc2F2aW5nIHRleHR1cmUgdG8gaW5kZXhlZERCOiAke25hbWV9YClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZEFycmF5QnVmZmVyKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKFt0aGlzLm5hbWVdLCAncmVhZG9ubHknKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5nZXQobmFtZSlcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgdGV4dHVyZSBmcm9tIGluZGV4ZWREQjogJHtuYW1lfWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlVGV4dHVyZShuYW1lOiBzdHJpbmcsIHRleHR1cmU6IFBJWEkuVGV4dHVyZSkgOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBsZXQgZGF0YVVybDtcclxuICAgICAgICBpZih0ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gdGV4dHVyZS5iYXNlVGV4dHVyZS53aWR0aDtcclxuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHRleHR1cmUuYmFzZVRleHR1cmUuaGVpZ2h0O1xyXG4gICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoZSBiYXNlIHRleHR1cmUgd2FzJywgdGV4dHVyZS5iYXNlVGV4dHVyZSlcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0ZXh0dXJlLmJhc2VUZXh0dXJlLnNvdXJjZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighZGF0YVVybCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpZCBub3QgZ2V0IGEgZGF0YXNVcmwgZnJvbSB0ZXh0dXJlLicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0aGlzLm5hbWUpLnB1dChkYXRhVXJsLCBuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoYEVycm9yIHNhdmluZyB0ZXh0dXJlIHRvIGluZGV4ZWREQjogJHtuYW1lfWApXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmVJbWFnZURhdGEobmFtZTogc3RyaW5nLCBkYXRhVXJsOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW3RoaXMubmFtZV0sICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5uYW1lKS5wdXQoZGF0YVVybCwgbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGBFcnJvciBzYXZpbmcgdGV4dHVyZSB0byBpbmRleGVkREI6ICR7bmFtZX1gKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBsb2FkSW1hZ2VEYXRhKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuZ2V0KG5hbWUpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdGaWxlID0gZXZlbnQ/LnRhcmdldD8ucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoaW1nRmlsZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIHRleHR1cmUgZnJvbSBpbmRleGVkREI6ICR7bmFtZX1gKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZFRleHR1cmUgKG5hbWU6IHN0cmluZykgOiBQcm9taXNlPFBJWEkuVGV4dHVyZT4ge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihbdGhpcy5uYW1lXSwgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMubmFtZSkuZ2V0KG5hbWUpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBhc3luYyAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWdGaWxlID0gZXZlbnQ/LnRhcmdldD8ucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYoIWltZ0ZpbGUpIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgZGF0YVVybFRvVGV4dHVyZShpbWdGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcicsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIHRleHR1cmUgZnJvbSBpbmRleGVkREI6ICR7bmFtZX1gKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBlbnVtIE1lc3NhZ2VzIHtcclxuICAgIEdFVF9TRUNUSU9OX0RBVEEsXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX01BUF9DSFVOS1MsXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX1NJTkdMRV9NQVBfQ0hVTkssXHJcbiAgICBSRVFVRVNUX0FORF9TQVZFX0FMTF9NQVBfQ0hVTktTLFxyXG4gICAgSU5JVF9MT0FERVIsXHJcbiAgICBJTklUX01BUCxcclxufVxyXG5cclxuZXhwb3J0IGVudW0gUmVzdWx0Q29kZXMge1xyXG4gICAgU1VDQ0VTUyxcclxuICAgIEVSUk9SXHJcbn0iLCJpbXBvcnQge0xvYWRlcn0gZnJvbSBcIi4uLy4uL2xpYi9Mb2FkZXJcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBGaWxlS2V5KGJhc2VVcmw6IHN0cmluZywgbWFwSWQ6IHN0cmluZywgc2VjdGlvbkluZGV4PzogbnVtYmVyKSB7XHJcbiAgICBpZihzZWN0aW9uSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzZWN0aW9uSW5kZXggIT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0vJHttYXBJZH0vc18ke3NlY3Rpb25JbmRleH1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0vJHttYXBJZH0vbWFwYFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFwTWV0YVBhdGgoYmFzZVVybDogc3RyaW5nLCBtYXBJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gYCR7YmFzZVVybH0vJHttYXBJZH0vbWV0YWBcclxufSJdLCJzb3VyY2VSb290IjoiIn0=